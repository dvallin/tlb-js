{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/rot-js/lib/rng.js","webpack:///./src/spatial/index.ts","webpack:///./src/renderer/palettes.ts","webpack:///./src/geometry/rectangle.ts","webpack:///./node_modules/rot-js/lib/util.js","webpack:///./src/random/index.ts","webpack:///./node_modules/rot-js/lib/color.js","webpack:///./src/array-utils.ts","webpack:///./src/assets/characters.ts","webpack:///./node_modules/rot-js/lib/display/backend.js","webpack:///./src/ui/selector.ts","webpack:///./src/component-reducers/apply-effect.ts","webpack:///./src/components/feature.ts","webpack:///./src/game-states/state.ts","webpack:///./src/geometry/shape.ts","webpack:///./src/assets/features.ts","webpack:///./src/components/effects.ts","webpack:///./src/component-reducers/instantiate-item.ts","webpack:///./src/components/asset.ts","webpack:///./src/game-states/modal.ts","webpack:///./src/geometry/functional-shape.ts","webpack:///./src/component-reducers/turn-based.ts","webpack:///./src/resources/ui.ts","webpack:///./src/components/character-stats.ts","webpack:///./src/object-utils.ts","webpack:///./src/assets/actions.ts","webpack:///./src/assets/dialogs.ts","webpack:///./src/spatial/set-space.ts","webpack:///./src/ui/window-decoration.ts","webpack:///./src/geometry/difference.ts","webpack:///./src/component-reducers/inventory-description.ts","webpack:///./src/component-reducers/stats.ts","webpack:///./src/component-reducers/trigger.ts","webpack:///./node_modules/rot-js/lib/display/term.js","webpack:///./src/renderer/color.ts","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/components/items.ts","webpack:///./src/component-reducers/cover.ts","webpack:///./src/spatial/direction.ts","webpack:///./src/component-reducers/consume-item.ts","webpack:///./src/component-reducers/ai.ts","webpack:///./src/component-reducers/region.ts","webpack:///./src/component-reducers/position.ts","webpack:///./src/generative/complex-embedder.ts","webpack:///./node_modules/underscore/underscore.js","webpack:///./src/generative/retry.ts","webpack:///./src/generative/partitioners/index.ts","webpack:///./src/component-reducers/available-actions.ts","webpack:///./src/component-reducers/attack-target.ts","webpack:///./node_modules/rot-js/lib/display/canvas.js","webpack:///./node_modules/rot-js/lib/display/hex.js","webpack:///./node_modules/rot-js/lib/display/rect.js","webpack:///./node_modules/rot-js/lib/display/tile.js","webpack:///./node_modules/rot-js/lib/display/tile-gl.js","webpack:///./node_modules/rot-js/lib/text.js","webpack:///./node_modules/rot-js/lib/constants.js","webpack:///./node_modules/rot-js/lib/display/display.js","webpack:///./node_modules/rot-js/lib/stringgenerator.js","webpack:///./node_modules/rot-js/lib/eventqueue.js","webpack:///./node_modules/rot-js/lib/scheduler/scheduler.js","webpack:///./node_modules/rot-js/lib/scheduler/simple.js","webpack:///./node_modules/rot-js/lib/scheduler/speed.js","webpack:///./node_modules/rot-js/lib/scheduler/action.js","webpack:///./node_modules/rot-js/lib/scheduler/index.js","webpack:///./node_modules/rot-js/lib/fov/fov.js","webpack:///./node_modules/rot-js/lib/fov/discrete-shadowcasting.js","webpack:///./node_modules/rot-js/lib/fov/precise-shadowcasting.js","webpack:///./node_modules/rot-js/lib/fov/recursive-shadowcasting.js","webpack:///./node_modules/rot-js/lib/fov/index.js","webpack:///./node_modules/rot-js/lib/map/map.js","webpack:///./node_modules/rot-js/lib/map/arena.js","webpack:///./node_modules/rot-js/lib/map/dungeon.js","webpack:///./node_modules/rot-js/lib/map/features.js","webpack:///./node_modules/rot-js/lib/map/uniform.js","webpack:///./node_modules/rot-js/lib/map/cellular.js","webpack:///./node_modules/rot-js/lib/map/digger.js","webpack:///./node_modules/rot-js/lib/map/ellermaze.js","webpack:///./node_modules/rot-js/lib/map/dividedmaze.js","webpack:///./node_modules/rot-js/lib/map/iceymaze.js","webpack:///./node_modules/rot-js/lib/map/rogue.js","webpack:///./node_modules/rot-js/lib/map/index.js","webpack:///./node_modules/rot-js/lib/noise/noise.js","webpack:///./node_modules/rot-js/lib/noise/simplex.js","webpack:///./node_modules/rot-js/lib/noise/index.js","webpack:///./node_modules/rot-js/lib/path/path.js","webpack:///./node_modules/rot-js/lib/path/dijkstra.js","webpack:///./node_modules/rot-js/lib/path/astar.js","webpack:///./node_modules/rot-js/lib/path/index.js","webpack:///./node_modules/rot-js/lib/engine.js","webpack:///./node_modules/rot-js/lib/lighting.js","webpack:///./node_modules/rot-js/lib/index.js","webpack:///./src/main.ts","webpack:///./src/game.ts","webpack:///./src/tlb.ts","webpack:///./src/ecs/storage.ts","webpack:///./src/systems/fov.ts","webpack:///./src/systems/free-mode-control.ts","webpack:///./src/systems/npc.ts","webpack:///./src/spatial/space.ts","webpack:///./src/spatial/vector.ts","webpack:///./src/ui/tabs/action-selector.ts","webpack:///./node_modules/process/browser.js","webpack:///./src/component-reducers/subaction-stringify.ts","webpack:///./src/ui/tabs/overview.ts","webpack:///./src/ui/render-helpers.ts","webpack:///./node_modules/lodash.clonedeep/index.js","webpack:///./src/symbols.ts","webpack:///./src/assets/items.ts","webpack:///./src/components/action.ts","webpack:///./src/assets/mods.ts","webpack:///./src/component-reducers/inventory.ts","webpack:///./src/component-reducers/structure.ts","webpack:///./src/assets/quests.ts","webpack:///./src/assets/lores.ts","webpack:///./src/ui/inventory-transfer-modal.ts","webpack:///./src/ui/tabs/inventory.ts","webpack:///./src/component-reducers/kill.ts","webpack:///./src/assets/assets.ts","webpack:///./src/components/lore.ts","webpack:///./src/ui/multiple-choice-modal.ts","webpack:///./src/ui/tabs.ts","webpack:///./src/ui/tabs/log.ts","webpack:///./src/ui/tabs/movement-selector.ts","webpack:///./src/ui/tabs/attack-selector.ts","webpack:///./src/ui/dialog-modal.ts","webpack:///./src/ui/tabs/multiple-choice-tab.ts","webpack:///./src/game-states/fighting.ts","webpack:///./src/systems/player-control.ts","webpack:///./src/systems/player-interaction.ts","webpack:///./src/systems/region-builder.ts","webpack:///./src/assets/complexes.ts","webpack:///./node_modules/logic-solver/logic-solver.js","webpack:///./node_modules/logic-solver/minisat_wrapper.js","webpack:///./node_modules/logic-solver/minisat.js","webpack:///./src/generative/complex-filler.ts","webpack:///./src/component-reducers/place-character.ts","webpack:///./src/components/position.ts","webpack:///./src/generative/space-partitioner.ts","webpack:///./src/generative/partitioners/CorridorSplit.ts","webpack:///./src/generative/partitioners/NoSplit.ts","webpack:///./src/generative/partitioners/OutsetCorridorSplit.ts","webpack:///./src/generative/partitioners/RoomSplit.ts","webpack:///./src/generative/partitioners/Knossos.ts","webpack:///./src/geometry/union.ts","webpack:///./src/systems/player-round-control.ts","webpack:///./src/component-reducers/calculate-hit-chance.ts","webpack:///./src/systems/trigger.ts","webpack:///./src/systems/script.ts","webpack:///./src/spatial/line.ts","webpack:///./src/resources/world-map.ts","webpack:///./src/resources/viewport.ts","webpack:///./src/resources/input.ts","webpack:///./src/resources/log.ts","webpack:///./src/systems/ai-round-control.ts","webpack:///./src/systems/start-round.ts","webpack:///./src/resources/progress.ts","webpack:///./src/game-states/running.ts","webpack:///./src/game-states/main-menu.ts","webpack:///./src/game-states/map-creation.ts","webpack:///./src/generative/region-creator.ts","webpack:///./src/renderer/queries.ts","webpack:///./src/renderer/bfs.ts","webpack:///./src/renderer/astar.ts","webpack:///./src/renderer/radix-heap.ts","webpack:///./src/renderer/digital-line.ts","webpack:///./src/renderer/bresenham.ts","webpack:///./node_modules/permissive-fov/src/index.js","webpack:///./node_modules/permissive-fov/src/View.js","webpack:///./node_modules/permissive-fov/src/Line.js","webpack:///./node_modules/permissive-fov/src/Point.js","webpack:///./node_modules/permissive-fov/src/ViewBump.js","webpack:///./src/random/distributions.ts","webpack:///./node_modules/random-seed/index.js","webpack:///./node_modules/json-stringify-safe/stringify.js","webpack:///./src/ecs/world.ts","webpack:///./src/ecs/entity.ts","webpack:///./src/renderer/renderer.ts"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AACA,oDAAoD;AACpD;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gDAAgD;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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mB,OAAO;AAC1B,yDAAyD,uDAAG;AAC5D;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,iCAAiC,sDAAK;AACtC,kBAAkB,kBAAkB;AACpC;AACO;AACP,iCAAiC,sDAAK;AACtC,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;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MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,CAAD,CAAtB,CAAD,EAA6B,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,CAAD,CAAtB,CAA7B,CAAP;AACD;;AAED,SAAS,WAAT,CAAqB,CAArB,EAAgC,CAAhC,EAAyC;AACvC,SAAO,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,EAA1B;AACD;;AAED,SAAgB,YAAhB,CAA6B,CAA7B,EAAkD,IAAlD,EAA8D;AAC5D,MAAI,CAAC,CAAC,CAAD,CAAD,KAAS,IAAb,EAAmB;AACjB,WAAO,CAAC,CAAC,CAAD,CAAR;AACD,GAFD,MAEO,IAAI,CAAC,CAAC,CAAD,CAAD,KAAS,IAAb,EAAmB;AACxB,WAAO,CAAC,CAAC,CAAD,CAAR;AACD;;AACD,SAAO,SAAP;AACD;;AAPD,oC;;;;;;AC7SA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM,KAA6B;AACnC,QAAQ,KAA4B;AACpC;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA,KAAK;AACL;AACA,uCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD;AAClD,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,wCAAwC;AACxC,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,8BAA8B;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,0BAA0B;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,cAAc;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO,eAAe;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,qBAAqB,eAAe;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,KAAwB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP,qBAAqB;AACrB;;AAEA;AACA;AACA,KAAK;AACL,iBAAiB;;AAEjB;AACA,kDAAkD,EAAE,iBAAiB;;AAErE;AACA,wBAAwB,8BAA8B;AACtD,2BAA2B;;AAE3B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,iBAAiB;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAyC;AAC/C,IAAI,iCAAqB,EAAE,mCAAE;AAC7B;AACA,KAAK;AAAA,oGAAC;AACN;AACA,CAAC;;;;;;;;;;;;;;;AC3pDD;;AAGA,SAAgB,KAAhB,CAAyB,MAAzB,EAAyC,GAAzC,EAAmD,CAAnD,EAAuE;AACrE,MAAI,KAAK,GAAG,CAAZ;;AACA,SAAO,GAAG,CAAC,MAAJ,GAAa,CAAb,IAAkB,KAAK,GAAG,CAAjC,EAAoC;AAClC,UAAM,KAAK,GAAG,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAd;;AACA,QAAI,CAAC,CAAC,GAAG,CAAC,KAAD,CAAJ,CAAL,EAAmB;AACjB,2BAAO,GAAP,EAAY,KAAZ;AACA,WAAK,GAAG,CAAR;AACD,KAHD,MAGO;AACL,WAAK;AACN;AACF;AACF;;AAXD,sB;;;;;;;;;;;;;;;;;ACHA;;AACA;;AACA;;AACA;;AACA,mC;;;;;;;;;;;;;ACCA;;AACA;;AACA;;AAEA;;AACA;;AAEA,SAAgB,yBAAhB,CAA0C,KAA1C,EAA2D,MAA3D,EAA2E,eAA3E,EAAmG;AACjG,QAAM,MAAM,GAAG,kBAAU,KAAV,EAAiB,MAAjB,CAAf;AACA,QAAM,OAAO,GAAG,mBAAW,KAAX,EAAkB,MAAlB,CAAhB;AACA,QAAM,YAAY,GAAG,wBAAgB,KAAhB,EAAuB,MAAvB,CAArB;AACA,QAAM,aAAa,GAAG,4BAA4B,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAAlD;AACA,QAAM,cAAc,GAAG,mBAAmB,CAAC,KAAD,EAAQ,MAAR,CAA1C;AACA,QAAM,0BAA0B,GAAG,+BAA+B,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,EAAyB,MAAzB,EAAiC,YAAjC,CAAlE;AACA,MAAI,iBAAiB,GAAuB,EAA5C;;AACA,MAAI,eAAJ,EAAqB;AACnB,qBAAiB,GAAG,gCAAgC,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,EAAyB,MAAzB,CAApD;AACD;;AACD,SAAO,aAAa,CACjB,MADI,CACG,0BADH,EAEJ,MAFI,CAEG,iBAFH,EAGJ,MAHI,CAGG,cAHH,CAAP;AAID;;AAfD;;AAiBA,SAAS,mBAAT,CAA6B,KAA7B,EAA8C,MAA9C,EAA4D;AAC1D,QAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;AACA,QAAM,aAAa,GAAG,mCAAgB,EAAhB,CAAmB,QAAQ,CAAC,QAA5B,EAAsC,CAAtC,EAAyC,IAAzC,CAAtB;AACA,QAAM,QAAQ,GAAG,uBAAa,KAAb,EAAoB,QAAQ,CAAC,KAA7B,EAAoC,aAApC,CAAjB;AACA,SAAO,QAAQ,CACZ,MADI,CACG,CAAC,IAAI,CAAC,CAAC,SAAF,CAAY,WADpB,EAEJ,GAFI,CAEA,CAAC,KAAK;AACT,SAAK,EAAE,CAAC,CAAC,SAAF,CAAY,IADV;AAET,UAAM,EAAE,uBAAa,SAAb,CAFC;AAGT,UAAM,EAAE,CAAC,CAAC;AAHD,GAAL,CAFD,CAAP;AAOD;;AAED,SAAS,4BAAT,CAAsC,MAAtC,EAAsD,OAAtD,EAAwE,MAAxE,EAAuF;AACrF,QAAM,cAAc,GAAiB,CAAC,MAAD,EAAS,KAAT,EAAgB,MAAhB,EAAwB,QAAxB,EAAkC,SAAlC,EAA6C,iBAA7C,CAArC;AACA,SAAO,cAAc,CAClB,GADI,CACA,CAAC,IAAI,uBAAa,CAAb,CADL,EAEJ,MAFI,CAEG,MAAM,IAAI,eAAe,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAF5B,EAGJ,GAHI,CAGA,MAAM,KAAK;AACd,UADc;AAEd;AAFc,GAAL,CAHN,CAAP;AAOD;;AAED,SAAS,+BAAT,CACE,KADF,EAEE,MAFF,EAGE,OAHF,EAIE,MAJF,EAKE,YALF,EAKsB;AAEpB,QAAM,SAAS,GAAG,KAAK,CAAC,YAAN,CAA0C,MAA1C,EAAkD,eAAlD,CAAlB;AACA,QAAM,OAAO,GAAuB,EAApC;AACA,WAAS,CAAC,SAAV,CAAoB,OAApB,CAA4B,OAAO,IAAG;AACpC,UAAM;AAAE;AAAF,QAAW,mCAAgB,KAAhB,EAAuB,OAAO,CAAC,MAA/B,CAAjB;AACA,QAAI,CAAC,OAAL,CAAa,OAAb,CAAqB,MAAM,IAAG;AAC5B,UAAI,eAAe,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAAnB,EAA8C;AAC5C,YAAI,MAAM,CAAC,QAAP,KAAoB,SAAxB,EAAmC;AACjC,gBAAM,CAAC,QAAP,IAAmB,YAAnB;AACD;;AACD,eAAO,CAAC,IAAR,CAAa;AAAE,gBAAF;AAAU,eAAK,EAAE,IAAI,CAAC,SAAtB;AAAiC,gBAAM,EAAE,OAAO,CAAC;AAAjD,SAAb;AACD;AACF,KAPD;AAQD,GAVD;AAWA,SAAO,OAAP;AACD;;AAED,SAAS,gCAAT,CAA0C,KAA1C,EAA2D,MAA3D,EAA2E,OAA3E,EAA6F,MAA7F,EAA4G;AAC1G,QAAM,SAAS,GAAG,KAAK,CAAC,YAAN,CAAuC,MAAvC,EAA+C,WAA/C,CAAlB;AACA,SAAO,SAAS,CAAC,OAAV,CACJ,GADI,CACA,gBAAgB,IAAG;AACtB,UAAM;AAAE;AAAF,QAAW,mCAAgB,KAAhB,EAAuB,gBAAvB,CAAjB;;AACA,QAAI,IAAI,CAAC,IAAL,KAAc,YAAd,IAA8B,IAAI,CAAC,OAAL,CAAa,MAAb,GAAsB,CAApD,IAAyD,eAAe,CAAC,IAAI,CAAC,OAAL,CAAa,CAAb,CAAD,EAAkB,OAAlB,EAA2B,MAA3B,CAA5E,EAAgH;AAC9G,aAAO;AAAE,cAAM,EAAE,IAAI,CAAC,OAAL,CAAa,CAAb,CAAV;AAA2B,aAAK,EAAE,IAAI,CAAC,SAAvC;AAAkD,cAAM,EAAE;AAA1D,OAAP;AACD;;AACD,WAAO,SAAP;AACD,GAPI,EAQJ,MARI,CAQG,CAAC,IAAI,CAAC,KAAK,SARd,CAAP;AASD;;AAED,SAAS,eAAT,CAAyB,MAAzB,EAAyC,OAAzC,EAA2D,MAA3D,EAA0E;AACxE,UAAQ,MAAM,CAAC,IAAf;AACE,SAAK,KAAL;AACE,aAAO,MAAM,IAAI,OAAjB;;AACF,SAAK,QAAL;AACE,aAAO,MAAM,IAAI,CAAC,OAAlB;;AACF,SAAK,UAAL;AACE,aAAO,OAAP;;AACF;AACE,aAAO,IAAP;AARJ;AAUD,C;;;;;;;;;;;;;AC/FD;;AACA;;AASA,SAAgB,YAAhB,CAA6B,KAA7B,EAA8C,MAA9C,EAA8D,MAA9D,EAA8E,MAA9E,EAA8F,MAA9F,EAA4G;AAC1G,QAAM,MAAM,GAAG,0CAAmB,KAAnB,EAA0B,MAA1B,EAAkC,MAAlC,EAA0C,MAA1C,CAAf;AAEA,QAAM,KAAK,GAAG,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,KAAvB,CAAd;AACA,QAAM,UAAU,GAAG,KAAK,IAAI,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,WAAvB,CAA5B;AACA,MAAI,OAAO,GAA4B,EAAvC;;AACA,MAAI,KAAJ,EAAW;AACT,WAAO,GAAG,MAAM,CAAC,OAAP,CAAe,GAAf,CAAmB,MAAM,IAAI,2BAAY,KAAZ,EAAmB,MAAnB,EAA2B,MAA3B,EAAmC;AAAE,YAAM,EAAE,MAAV;AAAkB,YAAlB;AAA0B,gBAA1B;AAAsC,gBAAU,EAAE;AAAlD,KAAnC,CAA7B,CAAV;AACA,uCAAoB,KAApB,EAA2B,MAA3B;AACD;;AACD,QAAM,MAAM,GAAiB;AAAE,SAAF;AAAS,cAAT;AAAqB,UAArB;AAA6B;AAA7B,GAA7B;AACA,QAAM,GAAG,GAAQ,KAAK,CAAC,WAAN,CAA+B,KAA/B,CAAjB;AACA,KAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,MAAlC;AACA,SAAO,MAAP;AACD;;AAdD,oC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfmC;AACpB,MAAM,aAAM,SAAS,0BAAO;AAC3C;AACA;AACA;AACA;AACA,kBAAkB,2BAA2B;AAC7C,oBAAoB,yBAAyB;AAC7C;AACA;AACA,2CAA2C,eAAe;AAC1D,wBAAwB,MAAM,GAAG,cAAc,KAAK,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AClCiC;AACA;AACjC;AACA;AACA;AACA;AACe,MAAM,OAAG,SAAS,aAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mBAAG,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvIiC;AACjC;AACA;AACA;AACA;AACe,MAAM,SAAI,SAAS,aAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,SAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAI;;;ACxG6B;AACjC;AACA;AACA;AACA;AACe,MAAM,SAAI,SAAS,aAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA,yCAAyC,SAAS;AAClD;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7EmC;AACE;AACrC;AACA;AACA;AACA;AACe,MAAM,cAAM,SAAS,0BAAO;AAC3C;AACA,wEAAwE,8BAA8B;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,2BAA2B;AAC7C,oBAAoB,wBAAwB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,6BAA6B,eAAe;;AAE5C,qDAAqD;AACrD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,8BAA8B;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA,qBAAqB,uBAAgB;AACrC;AACA;AACA;AACA;AACA;AACA;;;;;;ACjRA;AACA;AACA;AACA;AACA,2BAA2B,IAAI,IAAI;AACnC;AACO;AACA;AACA;AACA;AACP;AACA;AACA;AACO;AACP,kBAAkB;AAClB;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,yCAAyC;AACzC;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,iBAAiB,qBAAqB,EAAE;AACxC;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,KAAK;AAChB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrLA;AACO;AACP;AACO;AACA;AACP;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9T2B;AACE;AACA;AACK;AACL;AACM;AAC6B;AAChE;AACA,WAAW,OAAG;AACd,YAAY,SAAI;AAChB,YAAY,SAAI;AAChB,eAAe,cAAM;AACrB,YAAY,uBAAI;AAChB;AACA;AACA,WAAW,aAAa;AACxB,YAAY,cAAc;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,eAAO;AAC5B,4BAA4B;AAC5B;AACA,4BAA4B;AAC5B;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA,oBAAoB,qCAAqC;AACzD;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,iBAAiB,IAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,mBAAmB;AAClC,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,GAAG,EAAE;AAC5B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,OAAO,yDAAyD,KAAK,IAAI,KAAK,qBAAqB,KAAK;AACvH,eAAe,IAAI;AACnB,iBAAiB,IAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,QAAa;AAClC,+BAA+B;AAC/B;AACA;AACA,qBAAqB,SAAc;AACnC;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,qBAAqB,OAAY;AACjC;AACA;AACA,qBAAqB,OAAY;AACjC;AACA;AACA,qBAAqB,YAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,aAAa;AACb;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO,QAAQ,SAAI;AACnB,eAAO,OAAO,OAAG;AACjB,eAAO,QAAQ,SAAI;AACnB,eAAO,UAAU,cAAM;AACvB,eAAO,QAAQ,uBAAI;;;ACxPQ;AAC3B;AACA;AACA;AACA;AACA;AACe,MAAM,+BAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA,kEAAkE;AAClE,yCAAyC,mBAAmB;AAC5D;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAG;AAClB;AACA;AACA,eAAe;AACf,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5Ie;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,OAAO;AACtB;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxF0C;AAC3B,MAAM,mBAAS;AAC9B;AACA;AACA;AACA;AACA,0BAA0B,UAAU;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,8BAA8B;AAC7C;AACA,eAAe,EAAE;AACjB,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;ACjEuC;AACvC;AACA;AACA;AACe,MAAM,aAAM,SAAS,mBAAS;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfuC;AACvC;AACA;AACA;AACe,MAAM,WAAK,SAAS,mBAAS;AAC5C;AACA,eAAe,OAAO;AACtB,eAAe,KAAK;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxBuC;AACvC;AACA;AACA;AACA;AACe,MAAM,aAAM,SAAS,mBAAS;AAC7C;AACA;AACA,kCAAkC;AAClC,+CAA+C;AAC/C;AACA;AACA,eAAe,OAAO;AACtB,eAAe,KAAK;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClDiC;AACF;AACE;AAClB,+CAAC,CAAC,qBAAM,EAAE,kBAAK,EAAE,qBAAM,EAAE,EAAC;;;ACHF;AACvC;AACA;AACe,MAAM,OAAG;AACxB;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,eAAe,IAAI;AACnB;AACA,iDAAiD;AACjD;AACA,uCAAuC,cAAc;AACrD;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,IAAI;AACxB,oBAAoB,IAAI;AACxB,oBAAoB,IAAI;AACxB,oBAAoB,IAAI;AACxB;AACA;AACA;AACA,uBAAuB,IAAI;AAC3B;AACA;AACA;AACA;AACA,uBAAuB,IAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7D2B;AAC3B;AACA;AACA;AACA;AACe,MAAM,4CAAqB,SAAS,OAAG;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,KAAK;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChG2B;AAC3B;AACA;AACA;AACA;AACe,MAAM,0CAAoB,SAAS,OAAG;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,KAAK;AACpB,eAAe,QAAQ;AACvB;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,0EAA0E;AAC1E;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;;;AC7H2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,8CAAsB,SAAS,OAAG;AACvD;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,mDAAmD;AACnD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpJgE;AACF;AACI;AACnD,yCAAC,CAAC,mEAAqB,EAAE,gEAAoB,EAAE,sEAAsB,EAAE,EAAC;;;ACHvB;AAChE;AACe,MAAM,OAAG;AACxB;AACA;AACA,eAAe,IAAI;AACnB,eAAe,IAAI;AACnB;AACA,wBAAwB,aAAa,WAAW,cAAc;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;;;ACvB2B;AAC3B;AACA;AACA;AACA;AACe,MAAM,WAAK,SAAS,OAAG;AACtC;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjB2B;AAC3B;AACA;AACA;AACA;AACe,MAAM,eAAO,SAAS,OAAG;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gBAAgB,oBAAoB;AACpC;AACA;AACA,iBAAiB;AACjB;AACA,oBAAoB,wBAAwB;AAC5C;;;ACrB4B;AAC5B;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf;AACO,MAAM,aAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAG;AACvB;AACA;AACA,qBAAqB,sBAAG;AACxB,sBAAsB;AACtB,oCAAoC,sBAAG;AACvC;AACA;AACA,uBAAuB;AACvB,oCAAoC,sBAAG;AACvC;AACA;AACA,sBAAsB;AACtB,oCAAoC,sBAAG;AACvC;AACA;AACA,uBAAuB;AACvB,oCAAoC,sBAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAG;AACvB;AACA;AACA,qBAAqB,sBAAG;AACxB,iCAAiC,sBAAG;AACpC,iCAAiC,sBAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAG;AACvB;AACA;AACA,qBAAqB,sBAAG;AACxB;AACA;AACA,gCAAgC,sBAAG;AACnC,gCAAgC,sBAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,YAAY;AACtC,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,YAAY;AACtC,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,YAAY;AACtC,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,gBAAgB,iBAAiB;AACjC,cAAc,iBAAiB;AAC/B,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,IAAI;AACf;AACO,MAAM,iBAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7TmC;AACY;AACnB;AAC5B;AACA;AACA;AACA;AACA;AACe,MAAM,eAAO,SAAS,eAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,oCAAoC;AACpC,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,aAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA,gCAAgC,sBAAG;AACnC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,gCAAgC,sBAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA,+BAA+B,sBAAG;AAClC;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA,+BAA+B,iBAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3V2B;AACY;AACX;AAC5B;AACA;AACA;AACA;AACA,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,WAAW,IAAI;AACf;AACe,MAAM,iBAAQ,SAAS,OAAG;AACzC,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAI;AACzB;AACA;AACA;AACA;AACA,eAAe,MAAM,oDAAoD;AACzE;AACA;AACA,uBAAuB,iBAAiB;AACxC,2BAA2B,kBAAkB;AAC7C,mCAAmC,sBAAG;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uCAAuC;AAChE,sBAAsB,yBAAyB;AAC/C;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA;AACA,2DAA2D;AAC3D;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,IAAI;AACnB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC,4CAA4C,iBAAiB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sBAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA,oCAAoC,sBAAG;AACvC;AACA;AACA;AACA;AACA,yCAAyC,sBAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,0BAA0B;AAC5C;;;AChUmC;AACY;AACnB;AACW;AACvC;AACA,YAAY,aAAI;AAChB,gBAAgB,iBAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,aAAM,SAAS,eAAO;AAC3C,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D,6EAA6E,8BAA8B,EAAE;AAC7G;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS,yEAAyE;AAClF;AACA;AACA,2BAA2B,iBAAiB;AAC5C,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,8BAA8B;AAC/D;AACA;AACA;AACA;AACA,mBAAmB,aAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB,sBAAG,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,0BAA0B,sBAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAI;AACnC;AACA;AACA,+BAA+B,iBAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAI;AACzB,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,IAAI;AACzB,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;;;AChO2B;AACC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,mBAAS,SAAS,OAAG;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA,sBAAsB;AACtB;AACA,mBAAmB,sBAAsB;AACzC;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA,qCAAqC,sBAAG;AACxC;AACA;AACA;AACA;AACA,iCAAiC,sBAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA,+CAA+C,sBAAG;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;;;ACjF2B;AACC;AAC5B;AACA;AACA;AACA;AACe,MAAM,uBAAW,SAAS,OAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAG;AACnB,gBAAgB,sBAAG;AACnB;AACA;AACA;AACA,sBAAsB;AACtB,6BAA6B,OAAO;AACpC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,6BAA6B,OAAO;AACpC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,2BAA2B,cAAc;AACzC;AACA;AACA;AACA,oBAAoB,sBAAG;AACvB,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA,uBAAuB,sBAAG;AAC1B;AACA;AACA,2DAA2D;AAC3D,2DAA2D;AAC3D,2DAA2D;AAC3D,2DAA2D;AAC3D;AACA;;;ACvG2B;AACC;AAC5B;AACA;AACA;AACA;AACe,MAAM,iBAAQ,SAAS,OAAG;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sBAAG;AACvC,oCAAoC,sBAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sBAAG;AACtC;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT,uBAAuB,iBAAiB;AACxC,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA,2BAA2B,sBAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzG2B;AACC;AACW;AACvC;AACA;AACA;AACA;AACe,MAAM,WAAK,SAAS,OAAG;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA,2BAA2B,8BAA8B;AACzD,oCAAoC,qFAAqF;AACzH;AACA;AACA;AACA;AACA;AACA,kBAAkB,sBAAG;AACrB,kBAAkB,sBAAG;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sBAAG;AAC5B;AACA;AACA;AACA,6BAA6B,IAAI;AACjC,6BAA6B,IAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sBAAG;AACjC;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD,2BAA2B,8BAA8B;AACzD;AACA;AACA;AACA,iCAAiC,sBAAG;AACpC;AACA;AACA;AACA,uCAAuC,IAAI;AAC3C,uCAAuC,IAAI;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qCAAqC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAG;AAC3B,wBAAwB,sBAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,sBAAG;AAC7C,0CAA0C,sBAAG;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,iBAAiB,sBAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,uBAAuB;AACvB;AACA;AACA,sBAAsB,sBAAG,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,IAAI;AAC5B,wBAAwB,IAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B,2BAA2B,QAAQ;AACnC;AACA,+BAA+B,gCAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9V+B;AACI;AACE;AACJ;AACM;AACI;AACN;AACN;AAChB,6CAAC,CAAC,kBAAK,EAAE,wBAAO,EAAE,2BAAQ,EAAE,qBAAM,EAAE,8BAAS,EAAE,oCAAW,EAAE,2BAAQ,EAAE,kBAAK,EAAE,EAAC;;;ACR7F;AACA;AACA;AACe;AACf;;;ACJ+B;AACH;AACK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,eAAO,SAAS,KAAK;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA,uBAAuB,sBAAG;AAC1B;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA,iCAAiC;AACjC;AACA;AACA;AACA,uBAAuB;AACvB;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,iCAAiC;AACjC;AACA;AACA,iBAAiB,mBAAG;AACpB,iBAAiB,mBAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtGmC;AACpB,2CAAC,CAAC,wBAAO,EAAE,EAAC;;;ACDY;AACvC;AACA;AACA,WAAW,IAAI;AACf,WAAW,IAAI;AACf,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,IAAI;AACf;AACe,MAAM,SAAI;AACzB,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,qBAAqB,IAAI;AACzB,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5C6B;AAC7B;AACA;AACA;AACA;AACA;AACe,MAAM,iBAAQ,SAAS,SAAI;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9D6B;AAC7B;AACA;AACA;AACA;AACA;AACe,MAAM,WAAK,SAAS,SAAI;AACvC,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzFqC;AACN;AAChB,0CAAC,CAAC,2BAAQ,EAAE,kBAAK,EAAE,EAAC;;;ACFnC;AACA;AACA,WAAW,cAAc;AACzB;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzCoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM,iBAAQ;AAC7B,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,uBAAgB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,YAAY,iBAAU;AACtB;AACA,uBAAuB,0BAA0B,OAAO;AACxD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClM0C;AACgB;AACQ;AACV;AACI;AACZ;AACA;AACI;AACF;AACF;AACI;AACuB;AACzC;AAC3B,aAAa,IAAI;AACY;AAC7B,cAAc,SAAK;AACQ;AAC3B,aAAa,oBAAI;;;;;;;;;;;;;;ACjBxB;;AACA;;AAEA;;AAEA,MAAM,KAAK,GAAa,IAAI,aAAJ,EAAxB;AACA,MAAM,QAAQ,GAAG,uBAAY,cAAZ,CAA2B,QAAQ,CAAC,cAAT,CAAwB,KAAxB,CAA3B,CAAjB;AACA,MAAM,IAAI,GAAG,IAAI,WAAJ,CAAS,KAAT,EAAgB,QAAhB,EAA0B,EAA1B,CAAb;AACA,IAAI,CAAC,IAAL;AACA,IAAI,CAAC,OAAL,G;;;;;;;;;;;;;ACTA;;AAEA;;AACA;;AAGA;;AACA;;AAEA,MAAa,IAAb,CAAiB;AAWf,cAAoC,KAApC,EAAqE,QAArE,EAA0G,SAA1G,EAA2H;AAAvF;AAAiC;AAAqC;AAVnG,uBAAsB,CAAtB;AACA,kBAAi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AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,OAAO,WAAW;AAC7B,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,WAAW;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA;AACA,mBAAmB,SAAS,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA,6BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AA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;AAFtB,GADI;AA7BoE,CAA/D,C;;;;;;AClKb,cAAc,mBAAO,CAAC,EAAsB;AAC5C,QAAQ,mBAAO,CAAC,EAAY;AAC5B;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;;AAEA;;AAEA;AACA,8BAA8B,sBAAsB,EAAE;;AAEtD;AACA,8BAA8B,gCAAgC,EAAE;;AAEhE;AACA,4BAA4B,8BAA8B,EAAE;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,qBAAqB,cAAc;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,0CAA0C;;;AAG1C;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,oBAAoB;AACpB,0BAA0B;AAC1B,sBAAsB;;AAEtB;AACA,wDAAwD;AACxD,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA,kCAAkC;AAClC;AACA;AACA,iCAAiC;;AAEjC;AACA,sBAAsB;AACtB,gCAAgC;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA,WAAW,qCAAqC;AAChD,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,sDAAsD;AACtD;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,oCAAoC;AACpC,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA,KAAK;AACL,kCAAkC;AAClC,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,IAAI;AACnB;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,GAAG;AACjB;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,KAAK,mBAAmB;AACxB;AACA,0BAA0B;AAC1B,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,0CAA0C;AAC1C,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,KAAK,OAAO;AACZ;AACA,kBAAkB;AAClB,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA,qCAAqC;AACrC,OAAO;AACP;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,MAAM;AACN;AACA,MAAM;AACN,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,4BAA4B;AAC5B;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,oBAAoB,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,WAAW;AAC9B;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C,gBAAgB,EAAE;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;AACH,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA,GAAG;AACH,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;ACzzDA,gBAAgB,mBAAO,CAAC,EAAc;AACtC,QAAQ,mBAAO,CAAC,EAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,oDAAoD;AACpD;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,iBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5HA;AACA;AACA;AACA,sBAAsB,cAAc,yBAAyB,EAAE,aAAa,wCAAwC,UAAU,qBAAqB,kDAAkD,EAAE,SAAS,qBAAqB,kDAAkD,IAAI,aAAa,WAAW,gEAAgE,uBAAuB,uBAAuB,+BAA+B,kCAAkC,+EAA+E,gDAAgD,4DAA4D,2FAA2F,wBAAwB,sDAAsD,iCAAiC,+DAA+D,iCAAiC,yBAAyB,6BAA6B,8CAA8C,yCAAyC,yCAAyC,kDAAkD,kDAAkD,qCAAqC,mCAAmC,YAAY,mDAAmD,sCAAsC,gCAAgC,qBAAqB,6BAA6B,4DAA4D,KAAK,wCAAwC,6CAA6C,gCAAgC,yBAAyB,gDAAgD,gCAAgC,UAAU,GAAG,8BAA8B,0CAA0C,4DAA4D,6BAA6B,oBAAoB,KAAK,+BAA+B,mCAAmC,4CAA4C,mCAAmC,qCAAqC,0BAA0B,+BAA+B,aAAa,mCAAmC,+BAA+B,uCAAuC,8BAA8B,sBAAsB,mDAAmD,kCAAkC,2BAA2B,0BAA0B,eAAe,yBAAyB,kCAAkC,8BAA8B,iCAAiC,sDAAsD,gBAAgB,+DAA+D,gBAAgB,KAAK,uBAAuB,yFAAyF,QAAQ,gBAAgB,EAAE,uBAAuB,wBAAwB,KAAK,8BAA8B,KAAK,kDAAkD,uBAAuB,kBAAkB,oCAAoC,gCAAgC,+BAA+B,qBAAqB,6BAA6B,EAAE,wBAAwB,mCAAmC,yBAAyB,uBAAuB,2BAA2B,uCAAuC,6BAA6B,mCAAmC,oBAAoB,qBAAqB,gCAAgC,wCAAwC,kCAAkC,aAAa,6BAA6B,eAAe,0BAA0B,gBAAgB,wBAAwB,gBAAgB,mCAAmC,kBAAkB,oCAAoC,aAAa,2BAA2B,mBAAmB,mBAAmB,mBAAmB,qBAAqB,sBAAsB,SAAS,8BAA8B,4BAA4B,uBAAuB,kCAAkC,mBAAmB,cAAc,KAAK,YAAY,qCAAqC,sEAAsE,0DAA0D,mDAAmD,iCAAiC,sFAAsF,kCAAkC,sBAAsB,sDAAsD,qBAAqB,+CAA+C,KAAK,8CAA8C,kDAAkD,YAAY,kCAAkC,KAAK,iCAAiC,iCAAiC,gBAAgB,sGAAsG,kCAAkC,2CAA2C,sCAAsC,mDAAmD,qCAAqC,oBAAoB,YAAY,YAAY,UAAU,KAAK,qCAAqC,mCAAmC,oBAAoB,4CAA4C,wCAAwC,KAAK,6FAA6F,eAAe,8BAA8B,IAAI,yCAAyC,qCAAqC,aAAa,EAAE,4CAA4C,SAAS,6KAA6K,QAAQ,2CAA2C,2BAA2B,qDAAqD,kCAAkC,+BAA+B,uBAAuB,iBAAiB,oCAAoC,YAAY,+BAA+B,6BAA6B,uCAAuC,oBAAoB,0CAA0C,4CAA4C,sBAAsB,4BAA4B,cAAc,aAAa,kCAAkC,cAAc,qBAAqB,kBAAkB,iCAAiC,kBAAkB,oBAAoB,SAAS,yBAAyB,SAAS,KAAK,SAAS,SAAS,WAAW,kBAAkB,SAAS,qBAAqB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,QAAQ,qBAAqB,0CAA0C,0BAA0B,sDAAsD,KAAK,sDAAsD,uFAAuF,gBAAgB,WAAW,EAAE,sDAAsD,4CAA4C,WAAW,YAAY,gBAAgB,KAAK,+BAA+B,YAAY,qCAAqC,mIAAmI,6BAA6B,iBAAiB,yBAAyB,yBAAyB,WAAW,8BAA8B,kBAAkB,2BAA2B,2BAA2B,WAAW,+BAA+B,mBAAmB,6BAA6B,6BAA6B,4CAA4C,WAAW,sCAAsC,uEAAuE,WAAW,0CAA0C,uFAAuF,WAAW,4CAA4C,0BAA0B,gBAAgB,gBAAgB,iBAAiB,YAAY,gJAAgJ,qBAAqB,8FAA8F,gCAAgC,eAAe,kCAAkC,qBAAqB,yBAAyB,2BAA2B,UAAU,IAAI,qBAAqB,WAAW,0GAA0G,YAAY,gBAAgB,aAAa,aAAa,wBAAwB,oBAAoB,6BAA6B,uBAAuB,4BAA4B,uCAAuC,4BAA4B,WAAW,6BAA6B,UAAU,yCAAyC,0CAA0C,6BAA6B,WAAW,GAAG,SAAS,2DAA2D,yDAAyD,yBAAyB,aAAa,YAAY,SAAS,YAAY,cAAc,KAAK,+BAA+B,cAAc,uCAAuC,4BAA4B,KAAK,mBAAmB,+BAA+B,oDAAoD,yCAAyC,YAAY,4CAA4C,eAAe,qBAAqB,OAAO,GAAG,6BAA6B,yDAAyD,OAAO,0DAA0D,gBAAgB,wBAAwB,gCAAgC,yCAAyC,gDAAgD,sBAAsB,0BAA0B,+CAA+C,uBAAuB,GAAG,qCAAqC,4BAA4B,aAAa,yCAAyC,YAAY,GAAG,gDAAgD,EAAE,0BAA0B,iBAAiB,qDAAqD,EAAE,YAAY,QAAQ,KAAK,qCAAqC,4BAA4B,qCAAqC,kDAAkD,EAAE,4BAA4B,EAAE,2CAA2C,GAAG,sCAAsC,aAAa,eAAe,0DAA0D,EAAE,gBAAgB,mCAAmC,yBAAyB,eAAe,gCAAgC,EAAE,iBAAiB,iEAAiE,EAAE,qBAAqB,GAAG,sBAAsB,KAAK,sBAAsB,sBAAsB,yCAAyC,gBAAgB,+CAA+C,aAAa,6BAA6B,MAAM,6BAA6B,MAAM,+BAA+B,MAAM,+BAA+B,MAAM,mRAAmR,MAAM,kCAAkC,MAAM,mCAAmC,MAAM,mDAAmD,4BAA4B,mCAAmC,gBAAgB,+CAA+C,aAAa,8BAA8B,8BAA8B,gCAAgC,gCAAgC,gCAAgC,mCAAmC,oCAAoC,kDAAkD,YAAY,4BAA4B,mBAAmB,kBAAkB,mBAAmB,oBAAoB,iBAAiB,oCAAoC,kCAAkC,oCAAoC,sCAAsC,gCAAgC,4CAA4C,kBAAkB,2BAA2B,cAAc,UAAU,KAAK,eAAe,iBAAiB,kDAAkD,QAAQ,0BAA0B,QAAQ,KAAK,kKAAkK,aAAa,iBAAiB,mBAAmB,mBAAmB,KAAK,SAAS,QAAQ,iBAAiB,cAAc,gBAAgB,kBAAkB,WAAW,sBAAsB,8BAA8B,qBAAqB,KAAK,qCAAqC,WAAW,mCAAmC,cAAc,iBAAiB,6BAA6B,oCAAoC,0BAA0B,aAAa,IAAI,SAAS,0BAA0B,0BAA0B,wBAAwB,yCAAyC,kBAAkB,YAAY,WAAW,4BAA4B,uCAAuC,6BAA6B,iBAAiB,MAAM,QAAQ,SAAS,mBAAmB,sBAAsB,4BAA4B,IAAI,2BAA2B,oBAAoB,WAAW,YAAY,mBAAmB,SAAS,gBAAgB,2FAA2F,sBAAsB,eAAe,kBAAkB,WAAW,mCAAmC,QAAQ,SAAS,KAAK,mBAAmB,0BAA0B,WAAW,8CAA8C,4BAA4B,QAAQ,WAAW,SAAS,gCAAgC,0BAA0B,IAAI,oCAAoC,sCAAsC,mCAAmC,YAAY,aAAa,KAAK,+BAA+B,+BAA+B,iCAAiC,sCAAsC,4BAA4B,QAAQ,WAAW,SAAS,6BAA6B,uBAAuB,IAAI,iBAAiB,mBAAmB,qDAAqD,KAAK,kCAAkC,sCAAsC,mCAAmC,YAAY,oBAAoB,qBAAqB,aAAa,uCAAuC,qCAAqC,+CAA+C,yDAAyD,mCAAmC,QAAQ,4BAA4B,sCAAsC,wBAAwB,6CAA6C,iBAAiB,IAAI,6BAA6B,wCAAwC,sBAAsB,kDAAkD,oCAAoC,+BAA+B,UAAU,QAAQ,kBAAkB,wBAAwB,mBAAmB,QAAQ,gBAAgB,+PAA+P,YAAY,eAAe,iBAAiB,qBAAqB,mBAAmB,WAAW,YAAY,IAAI,aAAa,sBAAsB,uBAAuB,IAAI,qBAAqB,aAAa,qBAAqB,kBAAkB,IAAI,6BAA6B,kCAAkC,2BAA2B,SAAS,SAAS,kBAAkB,kCAAkC,KAAK,SAAS,kCAAkC,+BAA+B,gBAAgB,IAAI,MAAM,iCAAiC,iBAAiB,gBAAgB,YAAY,IAAI,aAAa,wCAAwC,sBAAsB,mBAAmB,qBAAqB,8BAA8B,SAAS,kBAAkB,8BAA8B,QAAQ,wCAAwC,KAAK,2CAA2C,kCAAkC,SAAS,+BAA+B,6BAA6B,aAAa,YAAY,kBAAkB,IAAI,sBAAsB,4BAA4B,+CAA+C,KAAK,SAAS,0CAA0C,gBAAgB,oBAAoB,yBAAyB,KAAK,UAAU,6CAA6C,MAAM,6CAA6C,MAAM,SAAS,IAAI,4BAA4B,eAAe,+BAA+B,UAAU,OAAO,SAAS,kCAAkC,0BAA0B,0BAA0B,IAAI,+CAA+C,OAAO,wBAAwB,mBAAmB,kBAAkB,yDAAyD,YAAY,QAAQ,mBAAmB,YAAY,KAAK,wBAAwB,gBAAgB,IAAI,wCAAwC,eAAe,uDAAuD,6BAA6B,6BAA6B,6BAA6B,gBAAgB,+BAA+B,kCAAkC,eAAe,SAAS,YAAY,0CAA0C,6EAA6E,sEAAsE,cAAc,2BAA2B,gDAAgD,kBAAkB,4BAA4B,GAAG,wBAAwB,kBAAkB,eAAe,IAAI,mBAAmB,SAAS,MAAM,eAAe,oCAAoC,4BAA4B,sBAAsB,mCAAmC,gCAAgC,mBAAmB,4BAA4B,oBAAoB,SAAS,+DAA+D,iDAAiD,wCAAwC,gCAAgC,yBAAyB,wSAAwS,+CAA+C,kDAAkD,+CAA+C,wBAAwB,2DAA2D,6BAA6B,eAAe,KAAK,2BAA2B,+BAA+B,mGAAmG,yBAAyB,kMAAkM,yCAAyC,4BAA4B,8BAA8B,8BAA8B,8BAA8B,gCAAgC,gCAAgC,iCAAiC,iCAAiC,cAAc,8FAA8F,oBAAoB,wBAAwB,sBAAsB,wBAAwB,wBAAwB,wBAAwB,0BAA0B,0BAA0B,0BAA0B,0BAA0B,yCAAyC,0BAA0B,+BAA+B,gCAAgC,WAAW,SAAS,uBAAuB,2BAA2B,6BAA6B,0BAA0B,KAAK,2CAA2C,KAAK,mDAAmD,oBAAoB,kBAAkB,kBAAkB,kBAAkB,qBAAqB,6BAA6B,wBAAwB,kBAAkB,qBAAqB,2EAA2E,+BAA+B,uCAAuC,mCAAmC,6BAA6B,6BAA6B,wBAAwB,iCAAiC,mBAAmB,iCAAiC,uBAAuB,iCAAiC,mBAAmB,mBAAmB,sBAAsB,8EAA8E,gCAAgC,yCAAyC,oCAAoC,yBAAyB,yBAAyB,qDAAqD,uBAAuB,uBAAuB,+CAA+C,0BAA0B,uBAAuB,wDAAwD,uBAAuB,uBAAuB,+CAA+C,0BAA0B,0BAA0B,wDAAwD,wDAAwD,6DAA6D,WAAW,kBAAkB,iBAAiB,YAAY,WAAW,gDAAgD,iCAAiC,WAAW,YAAY,eAAe,KAAK,iBAAiB,YAAY,SAAS,mCAAmC,oBAAoB,4CAA4C,wDAAwD,iDAAiD,QAAQ,sBAAsB,iBAAiB,uBAAuB,OAAO,kDAAkD,0CAA0C,YAAY,eAAe,KAAK,6BAA6B,gDAAgD,oDAAoD,YAAY,aAAa,KAAK,qCAAqC,8CAA8C,gDAAgD,mCAAmC,aAAa,aAAa,mEAAmE,mCAAmC,aAAa,aAAa,yDAAyD,wCAAwC,oBAAoB,aAAa,kFAAkF,cAAc,eAAe,cAAc,eAAe,kCAAkC,uBAAuB,sBAAsB,sBAAsB,sBAAsB,sBAAsB,wBAAwB,wBAAwB,wBAAwB,0BAA0B,sBAAsB,sBAAsB,wBAAwB,wBAAwB,0BAA0B,sBAAsB,wBAAwB,4BAA4B,sBAAsB,sBAAsB,8BAA8B,+BAA+B,8BAA8B,kBAAkB,qCAAqC,mDAAmD,4CAA4C,iCAAiC,kBAAkB,qCAAqC,kDAAkD,uBAAuB,gCAAgC,oCAAoC,0BAA0B,0BAA0B,mCAAmC,2BAA2B,aAAa,kDAAkD,6BAA6B,6BAA6B,2BAA2B,cAAc,2BAA2B,iBAAiB,iBAAiB,gBAAgB,EAAE,EAAE,iBAAiB,mBAAmB,EAAE,EAAE,stgBAAstgB,wEAAwE,2BAA2B,4BAA4B,gCAAgC,oCAAoC,oCAAoC,oCAAoC,6BAA6B,gCAAgC,oCAAoC,oCAAoC,oCAAoC,oCAAoC,oCAAoC,oCAAoC,oCAAoC,2BAA2B,oBAAoB,kBAAkB,EAAE,yBAAyB,qCAAqC,oCAAoC,qBAAqB,4BAA4B,gCAAgC,aAAa,iBAAiB,82CAA82C,wBAAwB,aAAa,yBAAyB,iWAAiW,gSAAgS,wIAAwI,mDAAmD,kCAAkC,0CAA0C,4BAA4B,0BAA0B,4BAA4B,sBAAsB,oBAAoB,qBAAqB,qBAAqB,qBAAqB,mBAAmB,mBAAmB,mBAAmB,mBAAmB,kBAAkB,mBAAmB,kBAAkB,iBAAiB,gBAAgB,iBAAiB,SAAS,0EAA0E,UAAU,gCAAgC,SAAS,sCAAsC,sDAAsD,gBAAgB,yBAAyB,8BAA8B,yDAAyD,iCAAiC,+BAA+B,6BAA6B,YAAY,gBAAgB,wBAAwB,eAAe,+BAA+B,gBAAgB,wBAAwB,eAAe,+BAA+B,wBAAwB,gBAAgB,sBAAsB,oBAAoB,4CAA4C,6BAA6B,4BAA4B,0BAA0B,eAAe,+BAA+B,gBAAgB,GAAG,iCAAiC,qBAAqB,oBAAoB,8CAA8C,uKAAuK,sCAAsC,2BAA2B,YAAY,kCAAkC,kCAAkC,yBAAyB,gBAAgB,uCAAuC,oDAAoD,yDAAyD,mFAAmF,oDAAoD,yCAAyC,YAAY,mBAAmB,KAAK,6EAA6E,yBAAyB,qBAAqB,mDAAmD,yBAAyB,gDAAgD,2CAA2C,uBAAuB,iEAAiE,oBAAoB,yDAAyD,gDAAgD,KAAK,gDAAgD,uKAAuK,0BAA0B,wCAAwC,kBAAkB,kBAAkB,iBAAiB,qBAAqB,iCAAiC,8BAA8B,UAAU,+BAA+B,SAAS,0BAA0B,0CAA0C,gCAAgC,YAAY,+BAA+B,SAAS,IAAI,eAAe,8CAA8C,SAAS,oBAAoB,UAAU,kCAAkC,gCAAgC,YAAY,+BAA+B,SAAS,IAAI,eAAe,uCAAuC,SAAS,oBAAoB,UAAU,yBAAyB,mCAAmC,oBAAoB,iBAAiB,yCAAyC,6BAA6B,4BAA4B,uBAAuB,6CAA6C,qBAAqB,0CAA0C,kCAAkC,SAAS,KAAK,4BAA4B,0BAA0B,6BAA6B,mCAAmC,wCAAwC,qBAAqB,eAAe,0BAA0B,QAAQ,oBAAoB,iJAAiJ,qBAAqB,kEAAkE,KAAK,WAAW,gCAAgC,2CAA2C,WAAW,WAAW,sBAAsB,SAAS,6BAA6B,yBAAyB,kBAAkB,2BAA2B,aAAa,2BAA2B,wBAAwB,0BAA0B,sBAAsB,sBAAsB,mBAAmB,aAAa,8BAA8B,MAAM,2BAA2B,MAAM,6BAA6B,MAAM,wBAAwB,gBAAgB,KAAK,iBAAiB,OAAO,yBAAyB,MAAM,wBAAwB,YAAY,2BAA2B,YAAY,aAAa,wBAAwB,YAAY,2BAA2B,KAAK,0BAA0B,yBAAyB,YAAY,4BAA4B,oCAAoC,aAAa,YAAY,kBAAkB,YAAY,2BAA2B,aAAa,4BAA4B,YAAY,KAAK,SAAS,uCAAuC,0CAA0C,yCAAyC,aAAa,2BAA2B,gBAAgB,YAAY,mBAAmB,YAAY,kCAAkC,2CAA2C,kBAAkB,YAAY,UAAU,KAAK,UAAU,MAAM,2CAA2C,kBAAkB,YAAY,UAAU,KAAK,UAAU,MAAM,kCAAkC,MAAM,kCAAkC,MAAM,qBAAqB,uBAAuB,2BAA2B,kCAAkC,yDAAyD,gCAAgC,mBAAmB,sCAAsC,oBAAoB,YAAY,eAAe,4DAA4D,eAAe,kCAAkC,wDAAwD,iCAAiC,cAAc,yBAAyB,6EAA6E,sDAAsD,mBAAmB,6EAA6E,sDAAsD,0BAA0B,mBAAmB,wDAAwD,6BAA6B,2CAA2C,wBAAwB,eAAe,sCAAsC,wCAAwC,qCAAqC,eAAe,KAAK,uCAAuC,mBAAmB,iBAAiB,oCAAoC,cAAc,YAAY,iBAAiB,KAAK,uDAAuD,wBAAwB,mDAAmD,KAAK,gCAAgC,aAAa,4BAA4B,+BAA+B,mBAAmB,mBAAmB,gBAAgB,KAAK,YAAY,iCAAiC,iBAAiB,gCAAgC,qBAAqB,eAAe,qBAAqB,kBAAkB,qBAAqB,mBAAmB,2BAA2B,kBAAkB,0BAA0B,0CAA0C,kBAAkB,aAAa,KAAK,gBAAgB,oBAAoB,KAAK,oBAAoB,uBAAuB,yCAAyC,4BAA4B,GAAG,OAAO,iDAAiD,iCAAiC,YAAY,mBAAmB,cAAc,kBAAkB,4BAA4B,iCAAiC,kBAAkB,KAAK,oBAAoB,8CAA8C,wBAAwB,eAAe,uBAAuB,kFAAkF,qCAAqC,uCAAuC,sBAAsB,KAAK,uCAAuC,YAAY,0CAA0C,wBAAwB,kDAAkD,gCAAgC,mDAAmD,6BAA6B,4CAA4C,2CAA2C,qBAAqB,6BAA6B,gCAAgC,wGAAwG,+BAA+B,KAAK,2DAA2D,mDAAmD,kDAAkD,0CAA0C,eAAe,qBAAqB,oBAAoB,qBAAqB,sBAAsB,4BAA4B,kBAAkB,aAAa,KAAK,oDAAoD,wCAAwC,KAAK,wCAAwC,yCAAyC,yCAAyC,4BAA4B,GAAG,OAAO,SAAS,0BAA0B,+CAA+C,wDAAwD,mBAAmB,yBAAyB,cAAc,QAAQ,YAAY,YAAY,KAAK,4BAA4B,KAAK,sEAAsE,kBAAkB,yBAAyB,cAAc,OAAO,SAAS,4CAA4C,iBAAiB,aAAa,6CAA6C,OAAO,SAAS,2BAA2B,0BAA0B,OAAO,SAAS,eAAe,OAAO,SAAS,yBAAyB,cAAc,KAAK,wBAAwB,aAAa,KAAK,eAAe,cAAc,WAAW,yCAAyC,0CAA0C,8BAA8B,0EAA0E,4BAA4B,WAAW,iCAAiC,0CAA0C,oCAAoC,0EAA0E,qBAAqB,qBAAqB,iCAAiC,6CAA6C,oCAAoC,0BAA0B,0BAA0B,0BAA0B,sBAAsB,yBAAyB,uBAAuB,gCAAgC,YAAY,0CAA0C,kCAAkC,SAAS,KAAK,YAAY,wBAAwB,mCAAmC,gCAAgC,0BAA0B,0BAA0B,uBAAuB,+BAA+B,4CAA4C,kBAAkB,gCAAgC,4BAA4B,0EAA0E,qBAAqB,qBAAqB,yCAAyC,+BAA+B,0BAA0B,4BAA4B,SAAS,wBAAwB,uBAAuB,uBAAuB,eAAe,gBAAgB,wBAAwB,sCAAsC,wBAAwB,0BAA0B,yCAAyC,qBAAqB,oBAAoB,WAAW,kBAAkB,mCAAmC,0CAA0C,+BAA+B,WAAW,qCAAqC,oBAAoB,yBAAyB,QAAQ,mBAAmB,WAAW,gCAAgC,6CAA6C,WAAW,0BAA0B,yCAAyC,8CAA8C,4BAA4B,SAAS,wCAAwC,wBAAwB,qBAAqB,SAAS,SAAS,iCAAiC,+BAA+B,uCAAuC,iCAAiC,gDAAgD,4BAA4B,4CAA4C,WAAW,8CAA8C,8CAA8C,YAAY,0BAA0B,2BAA2B,sBAAsB,eAAe,iBAAiB,uCAAuC,iBAAiB,6BAA6B,gCAAgC,iCAAiC,2DAA2D,EAAE,mBAAmB,8BAA8B,WAAW,mBAAmB,6BAA6B,sBAAsB,gBAAgB,wBAAwB,sDAAsD,sBAAsB,uCAAuC,kDAAkD,4CAA4C,sCAAsC,4BAA4B,2CAA2C,mDAAmD,kBAAkB,iCAAiC,uDAAuD,0EAA0E,2iBAA2iB,2iBAA2iB,qCAAqC,IAAI,8CAA8C,SAAS,8CAA8C,sBAAsB,6CAA6C,IAAI,+CAA+C,SAAS,8CAA8C,sBAAsB,6BAA6B,IAAI,+BAA+B,SAAS,8CAA8C,sBAAsB,iCAAiC,IAAI,mCAAmC,SAAS,8CAA8C,sBAAsB,6BAA6B,IAAI,sCAAsC,SAAS,8CAA8C,sBAAsB,yBAAyB,IAAI,2BAA2B,SAAS,8CAA8C,sBAAsB,iDAAiD,IAAI,mDAAmD,SAAS,8CAA8C,sBAAsB,iCAAiC,IAAI,0CAA0C,SAAS,8CAA8C,sBAAsB,yCAAyC,IAAI,2CAA2C,SAAS,8CAA8C,sBAAsB,qBAAqB,uNAAuN,sBAAsB,soDAAsoD;AAC778D;AACA,UAAU,mCAAmC,oCAAoC,oCAAoC,oCAAoC,qCAAqC,qCAAqC,sCAAsC,sCAAsC,qBAAqB,sBAAsB,0BAA0B,kBAAkB,oBAAoB,oBAAoB,0BAA0B,oBAAoB,QAAQ,QAAQ,QAAQ,QAAQ,+BAA+B,4CAA4C,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,wBAAwB,sBAAsB,uBAAuB,sBAAsB,sBAAsB,sBAAsB,sBAAsB,uBAAuB,uBAAuB,uBAAuB,wBAAwB,sBAAsB,sBAAsB,wBAAwB,wBAAwB,iBAAiB,kBAAkB,eAAe,uBAAuB,yBAAyB,qBAAqB,sBAAsB,qBAAqB,oBAAoB,0BAA0B,sBAAsB,wBAAwB,iBAAiB,yBAAyB,iBAAiB,iBAAiB,gCAAgC,uBAAuB,qBAAqB,qCAAqC,sCAAsC,gCAAgC,mBAAmB,4BAA4B,iBAAiB,8BAA8B,kCAAkC,mBAAmB,8BAA8B,sCAAsC,oBAAoB,gCAAgC,mBAAmB,yBAAyB,iBAAiB,mBAAmB,+BAA+B,kBAAkB,6BAA6B,gCAAgC,yBAAyB,qBAAqB,kBAAkB,wBAAwB,kBAAkB,sBAAsB,kBAAkB,mBAAmB,iBAAiB,oBAAoB,0BAA0B,kBAAkB,iBAAiB,+BAA+B,kBAAkB;AAC/uE;AACA,eAAe,MAAM,QAAQ,IAAI,QAAQ,WAAW,WAAW,cAAc,WAAW,eAAe,MAAM,IAAI,iBAAiB,MAAM,MAAM,OAAO,IAAI,KAAK,eAAe,MAAM,gBAAgB,oBAAoB,oBAAoB,oBAAoB,eAAe,MAAM,gBAAgB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,eAAe,MAAM,IAAI,cAAc,WAAW,eAAe,MAAM,UAAU,KAAK,eAAe,MAAM,OAAO,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,YAAY,YAAY,YAAY,aAAa,aAAa,mCAAmC,QAAQ,QAAQ,QAAQ,iBAAiB,QAAQ,UAAU,qBAAqB,cAAc,cAAc,2BAA2B,UAAU,aAAa,UAAU,QAAQ,QAAQ,eAAe,QAAQ,sCAAsC,UAAU,aAAa,UAAU,UAAU,qBAAqB,OAAO,IAAI,OAAO,UAAU,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,eAAe,MAAM,YAAY,IAAI,YAAY,OAAO,IAAI,OAAO,YAAY,MAAM,UAAU,YAAY,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,oBAAoB,IAAI,IAAI,WAAW,QAAQ,MAAM,IAAI,IAAI,SAAS,QAAQ,2BAA2B,IAAI,MAAM,YAAY,aAAa,IAAI,IAAI,MAAM,KAAK,gBAAgB,KAAK,wBAAwB,IAAI,IAAI,WAAW,aAAa,IAAI,IAAI,WAAW,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,SAAS,IAAI,YAAY,QAAQ,YAAY,UAAU,YAAY,kBAAkB,IAAI,SAAS,0CAA0C,aAAa,aAAa,WAAW,kCAAkC,kBAAkB,OAAO,IAAI,OAAO,kBAAkB,iBAAiB,aAAa,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,SAAS,IAAI,QAAQ,oBAAoB,IAAI,IAAI,WAAW,QAAQ,QAAQ,YAAY,YAAY,mBAAmB,IAAI,SAAS,IAAI,QAAQ,2BAA2B,IAAI,MAAM,cAAc,YAAY,wBAAwB,IAAI,WAAW,SAAS,oBAAoB,IAAI,IAAI,WAAW,QAAQ,eAAe,iBAAiB,IAAI,IAAI,WAAW,yBAAyB,YAAY,YAAY,UAAU,YAAY,kBAAkB,MAAM,yBAAyB,YAAY,YAAY,UAAU,YAAY,kBAAkB,MAAM,aAAa,IAAI,IAAI,WAAW,iBAAiB,MAAM,MAAM,oBAAoB,IAAI,SAAS,IAAI,YAAY,eAAe,kBAAkB,YAAY,kBAAkB,eAAe,wCAAwC,KAAK,UAAU,kBAAkB,kBAAkB,eAAe,uCAAuC,KAAK,UAAU,kBAAkB,mBAAmB,kBAAkB,OAAO,IAAI,OAAO,kBAAkB,iBAAiB,aAAa,IAAI,OAAO,eAAe,MAAM,wBAAwB,IAAI,aAAa,QAAQ,SAAS,SAAS,YAAY,YAAY,YAAY,aAAa,aAAa,aAAa,YAAY,YAAY,YAAY,aAAa,eAAe,kBAAkB,mBAAmB,mBAAmB,qBAAqB,kBAAkB,kBAAkB,aAAa,qBAAqB,mBAAmB,mBAAmB,mBAAmB,oBAAoB,8BAA8B,gBAAgB,gBAAgB,gBAAgB,UAAU,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,UAAU,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,oBAAoB,cAAc,UAAU,YAAY,YAAY,YAAY,aAAa,aAAa,aAAa,cAAc,cAAc,gBAAgB,gBAAgB,cAAc,eAAe,UAAU,UAAU,YAAY,YAAY,YAAY,aAAa,UAAU,UAAU,YAAY,YAAY,YAAY,aAAa,aAAa,cAAc,cAAc,UAAU,UAAU,UAAU,SAAS,GAAG,UAAU,QAAQ,mBAAmB,QAAQ,SAAS,GAAG,UAAU,QAAQ,mBAAmB,UAAU,aAAa,aAAa,aAAa,cAAc,UAAU,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,MAAM,IAAI,OAAO,eAAe,MAAM,gBAAgB,IAAI,aAAa,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,gBAAgB,WAAW,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,YAAY,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,QAAQ,YAAY,OAAO,IAAI,OAAO,YAAY,MAAM,UAAU,aAAa,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,kDAAkD,IAAI,SAAS,QAAQ,IAAI,UAAU,YAAY,YAAY,UAAU,iCAAiC,UAAU,IAAI,KAAK,UAAU,YAAY,YAAY,UAAU,OAAO,UAAU,QAAQ,YAAY,QAAQ,UAAU,WAAW,QAAQ,QAAQ,sBAAsB,UAAU,UAAU,sBAAsB,UAAU,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,kBAAkB,uBAAuB,MAAM,IAAI,UAAU,YAAY,QAAQ,oBAAoB,UAAU,uBAAuB,WAAW,YAAY,UAAU,yBAAyB,KAAK,SAAS,qBAAqB,0CAA0C,UAAU,wBAAwB,UAAU,sBAAsB,UAAU,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,gBAAgB,YAAY,GAAG,aAAa,iBAAiB,QAAQ,oBAAoB,UAAU,2BAA2B,gBAAgB,gBAAgB,UAAU,YAAY,QAAQ,sBAAsB,UAAU,UAAU,sBAAsB,UAAU,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,YAAY,UAAU,sCAAsC,UAAU,cAAc,YAAY,kBAAkB,kBAAkB,eAAe,QAAQ,oBAAoB,UAAU,UAAU,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,UAAU,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,UAAU,kBAAkB,iBAAiB,MAAM,MAAM,UAAU,IAAI,kCAAkC,UAAU,aAAa,YAAY,UAAU,IAAI,oCAAoC,UAAU,YAAY,YAAY,UAAU,gEAAgE,IAAI,WAAW,6BAA6B,IAAI,WAAW,QAAQ,IAAI,WAAW,iBAAiB,MAAM,MAAM,gEAAgE,IAAI,SAAS,QAAQ,IAAI,UAAU,iBAAiB,IAAI,IAAI,WAAW,YAAY,QAAQ,YAAY,sBAAsB,UAAU,YAAY,iBAAiB,UAAU,WAAW,IAAI,IAAI,KAAK,SAAS,YAAY,mBAAmB,6BAA6B,QAAQ,QAAQ,QAAQ,iEAAiE,IAAI,MAAM,WAAW,QAAQ,+DAA+D,iBAAiB,YAAY,QAAQ,SAAS,QAAQ,mBAAmB,aAAa,IAAI,WAAW,KAAK,IAAI,IAAI,SAAS,QAAQ,YAAY,QAAQ,UAAU,OAAO,UAAU,IAAI,IAAI,WAAW,kBAAkB,kBAAkB,OAAO,sCAAsC,gBAAgB,2BAA2B,WAAW,YAAY,UAAU,YAAY,YAAY,+BAA+B,gBAAgB,YAAY,IAAI,WAAW,KAAK,oBAAoB,UAAU,UAAU,YAAY,UAAU,uBAAuB,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,aAAa,YAAY,YAAY,uBAAuB,eAAe,QAAQ,IAAI,IAAI,WAAW,SAAS,mBAAmB,MAAM,MAAM,MAAM,YAAY,YAAY,OAAO,sCAAsC,gBAAgB,2BAA2B,UAAU,YAAY,UAAU,YAAY,YAAY,+BAA+B,OAAO,eAAe,MAAM,oJAAoJ,IAAI,SAAS,IAAI,UAAU,YAAY,UAAU,uBAAuB,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,YAAY,QAAQ,YAAY,wBAAwB,IAAI,IAAI,UAAU,QAAQ,UAAU,UAAU,IAAI,IAAI,YAAY,QAAQ,YAAY,wBAAwB,IAAI,IAAI,UAAU,QAAQ,UAAU,IAAI,WAAW,UAAU,UAAU,UAAU,UAAU,UAAU,QAAQ,UAAU,UAAU,UAAU,KAAK,IAAI,GAAG,YAAY,6BAA6B,0BAA0B,YAAY,iBAAiB,YAAY,YAAY,eAAe,IAAI,IAAI,GAAG,YAAY,aAAa,kDAAkD,IAAI,cAAc,aAAa,gBAAgB,YAAY,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,sBAAsB,YAAY,QAAQ,qBAAqB,iBAAiB,YAAY,aAAa,YAAY,IAAI,IAAI,KAAK,MAAM,eAAe,IAAI,IAAI,SAAS,SAAS,WAAW,cAAc,+BAA+B,WAAW,QAAQ,MAAM,UAAU,qCAAqC,KAAK,MAAM,YAAY,YAAY,aAAa,eAAe,YAAY,iBAAiB,eAAe,YAAY,UAAU,UAAU,QAAQ,UAAU,UAAU,4FAA4F,KAAK,MAAM,YAAY,cAAc,KAAK,MAAM,YAAY,WAAW,QAAQ,MAAM,UAAU,IAAI,SAAS,eAAe,YAAY,qBAAqB,QAAQ,6CAA6C,qBAAqB,KAAK,SAAS,eAAe,UAAU,UAAU,uCAAuC,wBAAwB,SAAS,cAAc,IAAI,IAAI,cAAc,IAAI,gBAAgB,YAAY,QAAQ,QAAQ,mBAAmB,IAAI,IAAI,cAAc,IAAI,gBAAgB,YAAY,IAAI,QAAQ,mBAAmB,WAAW,KAAK,cAAc,QAAQ,IAAI,cAAc,IAAI,gBAAgB,YAAY,OAAO,MAAM,kBAAkB,YAAY,QAAQ,oDAAoD,oBAAoB,YAAY,uBAAuB,UAAU,YAAY,YAAY,YAAY,2BAA2B,IAAI,IAAI,wBAAwB,gBAAgB,gBAAgB,kBAAkB,SAAS,IAAI,QAAQ,cAAc,IAAI,gBAAgB,YAAY,sBAAsB,aAAa,eAAe,eAAe,KAAK,IAAI,IAAI,iBAAiB,IAAI,MAAM,UAAU,SAAS,QAAQ,sCAAsC,YAAY,yBAAyB,IAAI,oBAAoB,IAAI,UAAU,IAAI,IAAI,YAAY,QAAQ,YAAY,wBAAwB,IAAI,IAAI,UAAU,QAAQ,UAAU,UAAU,IAAI,IAAI,YAAY,QAAQ,YAAY,wBAAwB,IAAI,IAAI,UAAU,QAAQ,UAAU,IAAI,WAAW,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,SAAS,QAAQ,IAAI,gBAAgB,aAAa,eAAe,UAAU,mCAAmC,eAAe,YAAY,UAAU,YAAY,QAAQ,mCAAmC,YAAY,UAAU,YAAY,QAAQ,iBAAiB,UAAU,IAAI,kCAAkC,UAAU,YAAY,UAAU,IAAI,kDAAkD,UAAU,YAAY,IAAI,OAAO,KAAK,UAAU,IAAI,kCAAkC,UAAU,YAAY,UAAU,IAAI,kDAAkD,UAAU,YAAY,IAAI,QAAQ,mBAAmB,MAAM,MAAM,MAAM,4CAA4C,IAAI,SAAS,QAAQ,IAAI,gBAAgB,aAAa,qBAAqB,OAAO,UAAU,UAAU,YAAY,QAAQ,iBAAiB,UAAU,cAAc,YAAY,qBAAqB,UAAU,QAAQ,iBAAiB,UAAU,eAAe,KAAK,UAAU,YAAY,eAAe,eAAe,iBAAiB,YAAY,iBAAiB,YAAY,IAAI,SAAS,QAAQ,8BAA8B,IAAI,QAAQ,mBAAmB,YAAY,SAAS,SAAS,UAAU,gBAAgB,GAAG,YAAY,IAAI,QAAQ,aAAa,cAAc,aAAa,gBAAgB,YAAY,oBAAoB,mBAAmB,YAAY,UAAU,YAAY,eAAe,iBAAiB,YAAY,iBAAiB,YAAY,IAAI,SAAS,QAAQ,8BAA8B,IAAI,QAAQ,mBAAmB,YAAY,SAAS,SAAS,UAAU,kBAAkB,YAAY,IAAI,QAAQ,aAAa,cAAc,aAAa,gBAAgB,YAAY,oBAAoB,mBAAmB,UAAU,iBAAiB,UAAU,IAAI,oCAAoC,UAAU,YAAY,UAAU,IAAI,kDAAkD,UAAU,YAAY,IAAI,OAAO,KAAK,UAAU,IAAI,oCAAoC,UAAU,YAAY,UAAU,IAAI,kDAAkD,UAAU,YAAY,IAAI,QAAQ,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,UAAU,YAAY,aAAa,UAAU,qBAAqB,OAAO,kCAAkC,WAAW,QAAQ,uJAAuJ,qBAAqB,6BAA6B,UAAU,uDAAuD,IAAI,OAAO,iBAAiB,MAAM,MAAM,gCAAgC,IAAI,YAAY,cAAc,IAAI,IAAI,WAAW,gBAAgB,WAAW,QAAQ,MAAM,UAAU,IAAI,SAAS,qBAAqB,yBAAyB,QAAQ,qCAAqC,IAAI,IAAI,MAAM,qBAAqB,IAAI,IAAI,OAAO,aAAa,IAAI,WAAW,SAAS,iBAAiB,MAAM,MAAM,oEAAoE,IAAI,UAAU,uBAAuB,IAAI,OAAO,UAAU,YAAY,UAAU,YAAY,mBAAmB,gBAAgB,UAAU,UAAU,SAAS,UAAU,UAAU,UAAU,UAAU,UAAU,GAAG,UAAU,8BAA8B,6BAA6B,YAAY,aAAa,mEAAmE,SAAS,aAAa,IAAI,+CAA+C,+DAA+D,wDAAwD,YAAY,mBAAmB,mBAAmB,YAAY,cAAc,mBAAmB,uBAAuB,yBAAyB,IAAI,OAAO,UAAU,IAAI,OAAO,eAAe,MAAM,0DAA0D,IAAI,SAAS,qBAAqB,0CAA0C,UAAU,UAAU,wDAAwD,cAAc,0CAA0C,UAAU,2DAA2D,4BAA4B,WAAW,QAAQ,iFAAiF,UAAU,IAAI,kCAAkC,UAAU,aAAa,UAAU,UAAU,UAAU,UAAU,SAAS,+IAA+I,iBAAiB,KAAK,KAAK,MAAM,UAAU,cAAc,IAAI,WAAW,4BAA4B,QAAQ,oCAAoC,WAAW,QAAQ,mDAAmD,IAAI,WAAW,oBAAoB,sCAAsC,IAAI,WAAW,KAAK,qBAAqB,0CAA0C,UAAU,yBAAyB,IAAI,WAAW,SAAS,qBAAqB,MAAM,MAAM,MAAM,MAAM,4JAA4J,IAAI,SAAS,QAAQ,QAAQ,IAAI,QAAQ,YAAY,QAAQ,uBAAuB,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,aAAa,YAAY,uBAAuB,MAAM,UAAU,YAAY,YAAY,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,KAAK,wBAAwB,IAAI,GAAG,YAAY,aAAa,YAAY,kFAAkF,YAAY,YAAY,YAAY,IAAI,GAAG,0BAA0B,6BAA6B,yBAAyB,QAAQ,oBAAoB,kBAAkB,cAAc,gCAAgC,qBAAqB,UAAU,OAAO,kBAAkB,yDAAyD,YAAY,aAAa,qBAAqB,UAAU,eAAe,YAAY,YAAY,IAAI,GAAG,aAAa,0BAA0B,QAAQ,oBAAoB,0BAA0B,kEAAkE,YAAY,mBAAmB,eAAe,KAAK,IAAI,SAAS,IAAI,WAAW,aAAa,YAAY,kBAAkB,8CAA8C,iBAAiB,uBAAuB,OAAO,IAAI,QAAQ,SAAS,iBAAiB,iBAAiB,UAAU,+CAA+C,QAAQ,MAAM,KAAK,QAAQ,OAAO,SAAS,QAAQ,iCAAiC,YAAY,YAAY,GAAG,IAAI,UAAU,mBAAmB,OAAO,QAAQ,sBAAsB,6BAA6B,UAAU,UAAU,eAAe,kBAAkB,UAAU,YAAY,UAAU,kBAAkB,KAAK,UAAU,IAAI,YAAY,gBAAgB,UAAU,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,6BAA6B,aAAa,eAAe,QAAQ,wBAAwB,YAAY,SAAS,UAAU,YAAY,YAAY,YAAY,YAAY,IAAI,GAAG,8BAA8B,QAAQ,YAAY,mBAAmB,eAAe,wBAAwB,YAAY,IAAI,IAAI,SAAS,mBAAmB,YAAY,sBAAsB,mBAAmB,uBAAuB,YAAY,aAAa,YAAY,IAAI,SAAS,sBAAsB,mDAAmD,QAAQ,4BAA4B,iBAAiB,SAAS,KAAK,iBAAiB,QAAQ,SAAS,QAAQ,YAAY,iBAAiB,IAAI,QAAQ,KAAK,IAAI,IAAI,IAAI,6BAA6B,IAAI,IAAI,GAAG,YAAY,mBAAmB,wCAAwC,UAAU,oBAAoB,iBAAiB,YAAY,IAAI,mBAAmB,MAAM,UAAU,cAAc,IAAI,iBAAiB,QAAQ,QAAQ,YAAY,mBAAmB,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,UAAU,IAAI,sDAAsD,UAAU,YAAY,QAAQ,YAAY,QAAQ,UAAU,UAAU,IAAI,sDAAsD,UAAU,YAAY,gBAAgB,KAAK,YAAY,YAAY,YAAY,IAAI,IAAI,GAAG,gFAAgF,QAAQ,mBAAmB,SAAS,aAAa,YAAY,QAAQ,gBAAgB,UAAU,kCAAkC,UAAU,qBAAqB,KAAK,IAAI,OAAO,GAAG,kDAAkD,QAAQ,yBAAyB,IAAI,OAAO,iBAAiB,MAAM,MAAM,oEAAoE,IAAI,YAAY,UAAU,YAAY,UAAU,uCAAuC,UAAU,UAAU,uBAAuB,UAAU,UAAU,UAAU,IAAI,SAAS,8BAA8B,qBAAqB,OAAO,+EAA+E,YAAY,qBAAqB,0CAA0C,IAAI,MAAM,MAAM,cAAc,cAAc,2BAA2B,KAAK,MAAM,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,KAAK,MAAM,YAAY,YAAY,uBAAuB,MAAM,IAAI,UAAU,YAAY,UAAU,YAAY,IAAI,IAAI,oCAAoC,KAAK,KAAK,uBAAuB,iBAAiB,UAAU,QAAQ,YAAY,OAAO,IAAI,KAAK,MAAM,UAAU,YAAY,mBAAmB,qBAAqB,UAAU,YAAY,uCAAuC,UAAU,QAAQ,aAAa,MAAM,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,aAAa,YAAY,QAAQ,UAAU,uBAAuB,MAAM,IAAI,UAAU,YAAY,YAAY,eAAe,KAAK,IAAI,IAAI,WAAW,GAAG,gDAAgD,iBAAiB,UAAU,6BAA6B,YAAY,QAAQ,mBAAmB,IAAI,IAAI,WAAW,mCAAmC,mBAAmB,IAAI,WAAW,SAAS,mBAAmB,MAAM,MAAM,MAAM,oEAAoE,IAAI,SAAS,SAAS,SAAS,QAAQ,IAAI,SAAS,SAAS,kBAAkB,IAAI,GAAG,iDAAiD,QAAQ,yBAAyB,uBAAuB,YAAY,UAAU,UAAU,oBAAoB,UAAU,kBAAkB,iBAAiB,UAAU,aAAa,qBAAqB,IAAI,OAAO,OAAO,UAAU,sBAAsB,gBAAgB,UAAU,kBAAkB,gBAAgB,UAAU,UAAU,SAAS,UAAU,GAAG,UAAU,6BAA6B,OAAO,0BAA0B,YAAY,mBAAmB,mBAAmB,MAAM,UAAU,UAAU,oBAAoB,UAAU,kBAAkB,iBAAiB,UAAU,SAAS,KAAK,uBAAuB,YAAY,aAAa,IAAI,SAAS,sBAAsB,2BAA2B,sBAAsB,YAAY,QAAQ,4BAA4B,cAAc,SAAS,sBAAsB,mBAAmB,mBAAmB,sBAAsB,IAAI,OAAO,eAAe,MAAM,kFAAkF,IAAI,SAAS,QAAQ,IAAI,UAAU,YAAY,sBAAsB,UAAU,UAAU,YAAY,UAAU,oBAAoB,UAAU,YAAY,YAAY,UAAU,UAAU,IAAI,IAAI,GAAG,YAAY,mBAAmB,YAAY,aAAa,YAAY,gBAAgB,qBAAqB,OAAO,8BAA8B,WAAW,QAAQ,8GAA8G,IAAI,MAAM,sDAAsD,IAAI,MAAM,QAAQ,SAAS,SAAS,aAAa,IAAI,iBAAiB,QAAQ,QAAQ,YAAY,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,iEAAiE,IAAI,OAAO,8BAA8B,IAAI,OAAO,iBAAiB,MAAM,MAAM,4EAA4E,IAAI,QAAQ,YAAY,YAAY,UAAU,UAAU,IAAI,IAAI,GAAG,YAAY,mBAAmB,uBAAuB,YAAY,gBAAgB,YAAY,WAAW,QAAQ,MAAM,UAAU,QAAQ,IAAI,GAAG,qBAAqB,yBAAyB,QAAQ,qCAAqC,IAAI,OAAO,mBAAmB,aAAa,IAAI,QAAQ,MAAM,aAAa,WAAW,QAAQ,IAAI,GAAG,eAAe,YAAY,mCAAmC,QAAQ,+CAA+C,6BAA6B,YAAY,QAAQ,QAAQ,sCAAsC,YAAY,WAAW,UAAU,UAAU,QAAQ,QAAQ,mBAAmB,YAAY,IAAI,mBAAmB,KAAK,UAAU,UAAU,SAAS,cAAc,IAAI,iBAAiB,QAAQ,QAAQ,YAAY,mBAAmB,KAAK,IAAI,IAAI,QAAQ,aAAa,IAAI,OAAO,YAAY,IAAI,OAAO,eAAe,MAAM,wDAAwD,IAAI,SAAS,QAAQ,IAAI,UAAU,QAAQ,UAAU,QAAQ,UAAU,UAAU,UAAU,YAAY,YAAY,UAAU,UAAU,IAAI,GAAG,0HAA0H,QAAQ,YAAY,QAAQ,UAAU,mBAAmB,cAAc,YAAY,OAAO,IAAI,OAAO,UAAU,MAAM,UAAU,UAAU,IAAI,OAAO,eAAe,MAAM,4DAA4D,IAAI,UAAU,mCAAmC,UAAU,UAAU,6BAA6B,IAAI,IAAI,WAAW,UAAU,IAAI,cAAc,uCAAuC,IAAI,IAAI,WAAW,cAAc,kBAAkB,cAAc,UAAU,UAAU,kBAAkB,UAAU,IAAI,GAAG,iDAAiD,QAAQ,yBAAyB,YAAY,YAAY,gBAAgB,gBAAgB,IAAI,IAAI,GAAG,mBAAmB,wBAAwB,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,YAAY,QAAQ,UAAU,cAAc,uBAAuB,UAAU,IAAI,GAAG,iDAAiD,QAAQ,YAAY,mBAAmB,YAAY,UAAU,UAAU,UAAU,IAAI,SAAS,YAAY,uBAAuB,cAAc,cAAc,2BAA2B,KAAK,MAAM,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,KAAK,MAAM,YAAY,iBAAiB,aAAa,MAAM,UAAU,YAAY,YAAY,YAAY,8BAA8B,QAAQ,8BAA8B,8BAA8B,UAAU,UAAU,SAAS,yBAAyB,eAAe,2FAA2F,MAAM,gBAAgB,UAAU,UAAU,oDAAoD,IAAI,UAAU,YAAY,IAAI,IAAI,WAAW,UAAU,IAAI,IAAI,WAAW,mBAAmB,MAAM,MAAM,MAAM,wRAAwR,IAAI,SAAS,IAAI,SAAS,SAAS,SAAS,SAAS,UAAU,QAAQ,UAAU,QAAQ,UAAU,UAAU,IAAI,kCAAkC,UAAU,YAAY,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,WAAW,UAAU,UAAU,UAAU,UAAU,SAAS,UAAU,SAAS,WAAW,WAAW,UAAU,UAAU,UAAU,SAAS,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,KAAK,WAAW,kBAAkB,SAAS,WAAW,oBAAoB,QAAQ,MAAM,QAAQ,cAAc,MAAM,QAAQ,KAAK,gBAAgB,6GAA6G,MAAM,QAAQ,KAAK,gBAAgB,6GAA6G,MAAM,QAAQ,gCAAgC,MAAM,QAAQ,gDAAgD,SAAS,aAAa,wBAAwB,MAAM,MAAM,+BAA+B,+BAA+B,WAAW,UAAU,YAAY,UAAU,iDAAiD,MAAM,MAAM,gBAAgB,QAAQ,eAAe,KAAK,YAAY,UAAU,8CAA8C,MAAM,QAAQ,oBAAoB,eAAe,MAAM,qCAAqC,MAAM,YAAY,aAAa,WAAW,eAAe,MAAM,SAAS,gBAAgB,QAAQ,SAAS,oCAAoC,aAAa,yBAAyB,YAAY,cAAc,aAAa,aAAa,6BAA6B,KAAK,qCAAqC,KAAK,YAAY,aAAa,UAAU,iBAAiB,KAAK,MAAM,uBAAuB,aAAa,gBAAgB,mBAAmB,mBAAmB,SAAS,oCAAoC,aAAa,yBAAyB,YAAY,cAAc,aAAa,aAAa,6BAA6B,KAAK,eAAe,aAAa,wBAAwB,gBAAgB,iBAAiB,6BAA6B,MAAM,MAAM,aAAa,WAAW,WAAW,kBAAkB,WAAW,uCAAuC,MAAM,MAAM,aAAa,aAAa,yBAAyB,kBAAkB,SAAS,aAAa,gBAAgB,aAAa,gCAAgC,iBAAiB,YAAY,cAAc,aAAa,aAAa,aAAa,KAAK,GAAG,8BAA8B,gCAAgC,2BAA2B,UAAU,sBAAsB,oBAAoB,mBAAmB,SAAS,oCAAoC,aAAa,yBAAyB,YAAY,cAAc,aAAa,aAAa,6BAA6B,8BAA8B,gCAAgC,sBAAsB,YAAY,eAAe,qBAAqB,WAAW,cAAc,qBAAqB,WAAW,2BAA2B,aAAa,aAAa,aAAa,YAAY,kBAAkB,cAAc,aAAa,aAAa,aAAa,KAAK,cAAc,gBAAgB,gBAAgB,UAAU,mBAAmB,KAAK,KAAK,OAAO,SAAS,YAAY,wCAAwC,uBAAuB,8BAA8B,+CAA+C,wBAAwB,gBAAgB,WAAW,gBAAgB,aAAa,cAAc,gBAAgB,cAAc,UAAU,mDAAmD,iBAAiB,qBAAqB,UAAU,oBAAoB,iBAAiB,qBAAqB,eAAe,8BAA8B,oCAAoC,oBAAoB,gBAAgB,UAAU,YAAY,kBAAkB,KAAK,IAAI,OAAO,SAAS,UAAU,sCAAsC,oBAAoB,4BAA4B,4CAA4C,sBAAsB,cAAc,kBAAkB,QAAQ,iBAAiB,oCAAoC,oBAAoB,aAAa,UAAU,oBAAoB,WAAW,iBAAiB,oCAAoC,YAAY,OAAO,IAAI,OAAO,UAAU,MAAM,UAAU,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,gGAAgG,IAAI,SAAS,IAAI,QAAQ,yBAAyB,SAAS,SAAS,kBAAkB,SAAS,IAAI,GAAG,iDAAiD,QAAQ,yBAAyB,uBAAuB,UAAU,iBAAiB,iBAAiB,IAAI,OAAO,UAAU,IAAI,kCAAkC,UAAU,YAAY,gCAAgC,UAAU,UAAU,mBAAmB,iBAAiB,gBAAgB,mBAAmB,cAAc,WAAW,SAAS,kBAAkB,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS,UAAU,UAAU,QAAQ,8CAA8C,SAAS,UAAU,UAAU,UAAU,UAAU,UAAU,IAAI,SAAS,WAAW,mCAAmC,KAAK,QAAQ,YAAY,IAAI,IAAI,GAAG,QAAQ,SAAS,mBAAmB,UAAU,KAAK,IAAI,IAAI,iBAAiB,IAAI,GAAG,OAAO,UAAU,gBAAgB,UAAU,oBAAoB,mBAAmB,2BAA2B,YAAY,qBAAqB,IAAI,cAAc,0GAA0G,IAAI,cAAc,0GAA0G,WAAW,QAAQ,iDAAiD,cAAc,SAAS,4BAA4B,WAAW,QAAQ,MAAM,0CAA0C,WAAW,QAAQ,wEAAwE,KAAK,UAAU,gBAAgB,kBAAkB,UAAU,IAAI,GAAG,0CAA0C,QAAQ,0BAA0B,QAAQ,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,wEAAwE,IAAI,UAAU,MAAM,UAAU,kBAAkB,UAAU,IAAI,GAAG,OAAO,YAAY,iBAAiB,kBAAkB,eAAe,IAAI,GAAG,uBAAuB,YAAY,YAAY,aAAa,kBAAkB,YAAY,UAAU,mBAAmB,mBAAmB,8BAA8B,QAAQ,yBAAyB,YAAY,SAAS,MAAM,iBAAiB,kBAAkB,eAAe,IAAI,GAAG,uBAAuB,YAAY,YAAY,aAAa,kBAAkB,YAAY,UAAU,mBAAmB,mBAAmB,8BAA8B,QAAQ,yBAAyB,QAAQ,yBAAyB,UAAU,kBAAkB,UAAU,UAAU,UAAU,UAAU,IAAI,GAAG,YAAY,uCAAuC,YAAY,iBAAiB,YAAY,aAAa,oBAAoB,MAAM,qBAAqB,OAAO,8BAA8B,WAAW,QAAQ,uDAAuD,mBAAmB,mCAAmC,MAAM,YAAY,UAAU,mBAAmB,mBAAmB,OAAO,yBAAyB,SAAS,QAAQ,yBAAyB,UAAU,YAAY,YAAY,UAAU,UAAU,YAAY,IAAI,IAAI,GAAG,aAAa,YAAY,YAAY,aAAa,YAAY,eAAe,YAAY,YAAY,UAAU,mBAAmB,mBAAmB,YAAY,IAAI,mBAAmB,KAAK,qBAAqB,UAAU,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,UAAU,YAAY,YAAY,UAAU,UAAU,YAAY,IAAI,IAAI,GAAG,aAAa,YAAY,YAAY,aAAa,YAAY,eAAe,YAAY,YAAY,UAAU,mBAAmB,mBAAmB,YAAY,IAAI,mBAAmB,KAAK,qBAAqB,UAAU,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,aAAa,IAAI,OAAO,YAAY,IAAI,OAAO,eAAe,MAAM,gCAAgC,IAAI,SAAS,IAAI,QAAQ,UAAU,UAAU,4BAA4B,YAAY,YAAY,YAAY,aAAa,QAAQ,SAAS,UAAU,QAAQ,qBAAqB,eAAe,mBAAmB,YAAY,eAAe,sBAAsB,UAAU,YAAY,WAAW,gBAAgB,kBAAkB,sBAAsB,mBAAmB,IAAI,OAAO,cAAc,gBAAgB,IAAI,SAAS,IAAI,SAAS,SAAS,SAAS,0BAA0B,YAAY,UAAU,UAAU,SAAS,SAAS,mBAAmB,mBAAmB,mBAAmB,UAAU,0BAA0B,YAAY,UAAU,UAAU,SAAS,SAAS,mBAAmB,mBAAmB,mBAAmB,WAAW,0BAA0B,YAAY,WAAW,WAAW,SAAS,SAAS,mBAAmB,mBAAmB,mBAAmB,WAAW,2BAA2B,YAAY,WAAW,SAAS,SAAS,SAAS,mBAAmB,mBAAmB,mBAAmB,kBAAkB,6BAA6B,WAAW,SAAS,UAAU,YAAY,SAAS,6BAA6B,WAAW,SAAS,UAAU,YAAY,SAAS,6BAA6B,WAAW,UAAU,6BAA6B,WAAW,UAAU,6BAA6B,WAAW,SAAS,UAAU,qBAAqB,WAAW,6BAA6B,YAAY,WAAW,SAAS,UAAU,UAAU,mBAAmB,mBAAmB,mBAAmB,WAAW,6BAA6B,YAAY,WAAW,SAAS,UAAU,UAAU,mBAAmB,mBAAmB,mBAAmB,UAAU,6BAA6B,WAAW,SAAS,UAAU,qBAAqB,SAAS,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,iBAAiB,MAAM,MAAM,oDAAoD,IAAI,SAAS,IAAI,QAAQ,oBAAoB,IAAI,IAAI,WAAW,QAAQ,QAAQ,YAAY,YAAY,mBAAmB,IAAI,SAAS,IAAI,QAAQ,2BAA2B,IAAI,MAAM,cAAc,YAAY,wBAAwB,IAAI,WAAW,SAAS,oBAAoB,IAAI,IAAI,WAAW,QAAQ,WAAW,iBAAiB,IAAI,IAAI,WAAW,cAAc,kCAAkC,YAAY,YAAY,UAAU,YAAY,mBAAmB,MAAM,cAAc,kCAAkC,YAAY,YAAY,UAAU,YAAY,mBAAmB,MAAM,aAAa,IAAI,IAAI,WAAW,iBAAiB,MAAM,MAAM,8CAA8C,IAAI,SAAS,IAAI,YAAY,eAAe,0BAA0B,cAAc,cAAc,0BAA0B,cAAc,kBAAkB,YAAY,YAAY,SAAS,UAAU,gBAAgB,oBAAoB,SAAS,UAAU,gBAAgB,oBAAoB,aAAa,SAAS,UAAU,gBAAgB,oBAAoB,mBAAmB,OAAO,IAAI,OAAO,kBAAkB,kBAAkB,aAAa,IAAI,OAAO,iBAAiB,MAAM,MAAM,wBAAwB,IAAI,QAAQ,YAAY,mBAAmB,KAAK,IAAI,OAAO,SAAS,sBAAsB,6BAA6B,UAAU,iBAAiB,IAAI,OAAO,6BAA6B,uBAAuB,sDAAsD,UAAU,IAAI,OAAO,eAAe,MAAM,gCAAgC,IAAI,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,YAAY,OAAO,IAAI,OAAO,QAAQ,YAAY,YAAY,IAAI,GAAG,eAAe,YAAY,MAAM,qBAAqB,MAAM,UAAU,qBAAqB,YAAY,YAAY,QAAQ,mBAAmB,UAAU,MAAM,UAAU,YAAY,IAAI,OAAO,iBAAiB,MAAM,MAAM,4CAA4C,IAAI,SAAS,QAAQ,IAAI,YAAY,QAAQ,QAAQ,sBAAsB,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,iBAAiB,UAAU,sCAAsC,UAAU,cAAc,YAAY,gBAAgB,YAAY,GAAG,eAAe,MAAM,UAAU,qBAAqB,qBAAqB,QAAQ,oBAAoB,UAAU,YAAY,YAAY,0BAA0B,IAAI,SAAS,UAAU,oBAAoB,UAAU,IAAI,OAAO,qBAAqB,YAAY,SAAS,UAAU,oBAAoB,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,gCAAgC,IAAI,QAAQ,uBAAuB,IAAI,OAAO,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,YAAY,UAAU,sCAAsC,UAAU,cAAc,YAAY,gBAAgB,YAAY,GAAG,QAAQ,eAAe,QAAQ,oBAAoB,UAAU,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,oCAAoC,IAAI,QAAQ,QAAQ,uBAAuB,YAAY,QAAQ,UAAU,IAAI,OAAO,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,YAAY,UAAU,sCAAsC,UAAU,cAAc,YAAY,kBAAkB,kBAAkB,eAAe,QAAQ,oBAAoB,UAAU,YAAY,QAAQ,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,4CAA4C,IAAI,SAAS,IAAI,UAAU,SAAS,QAAQ,SAAS,sBAAsB,SAAS,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,sDAAsD,UAAU,mCAAmC,QAAQ,YAAY,mBAAmB,YAAY,mBAAmB,OAAO,IAAI,aAAa,UAAU,aAAa,UAAU,IAAI,OAAO,SAAS,SAAS,IAAI,WAAW,aAAa,YAAY,kBAAkB,uCAAuC,KAAK,MAAM,iBAAiB,uBAAuB,OAAO,IAAI,KAAK,OAAO,cAAc,aAAa,UAAU,aAAa,UAAU,IAAI,QAAQ,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,QAAQ,YAAY,QAAQ,YAAY,+BAA+B,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,iBAAiB,YAAY,YAAY,aAAa,OAAO,IAAI,OAAO,gBAAgB,IAAI,OAAO,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,QAAQ,YAAY,QAAQ,YAAY,+BAA+B,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,iBAAiB,YAAY,YAAY,aAAa,OAAO,IAAI,OAAO,gBAAgB,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,4CAA4C,IAAI,SAAS,QAAQ,QAAQ,IAAI,aAAa,UAAU,eAAe,KAAK,IAAI,OAAO,GAAG,IAAI,QAAQ,gBAAgB,IAAI,IAAI,GAAG,4CAA4C,QAAQ,oBAAoB,SAAS,aAAa,YAAY,aAAa,gBAAgB,UAAU,oBAAoB,IAAI,OAAO,6BAA6B,KAAK,IAAI,SAAS,GAAG,QAAQ,aAAa,YAAY,mBAAmB,GAAG,UAAU,aAAa,YAAY,mBAAmB,sBAAsB,UAAU,UAAU,sBAAsB,UAAU,QAAQ,sBAAsB,UAAU,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,4BAA4B,IAAI,MAAM,iBAAiB,QAAQ,+BAA+B,QAAQ,sBAAsB,YAAY,QAAQ,UAAU,gCAAgC,uBAAuB,OAAO,IAAI,WAAW,YAAY,sBAAsB,eAAe,UAAU,kBAAkB,YAAY,IAAI,GAAG,gCAAgC,QAAQ,yBAAyB,YAAY,WAAW,IAAI,WAAW,QAAQ,QAAQ,qBAAqB,IAAI,WAAW,OAAO,IAAI,IAAI,KAAK,IAAI,IAAI,GAAG,qCAAqC,QAAQ,mBAAmB,mBAAmB,IAAI,WAAW,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,QAAQ,YAAY,QAAQ,YAAY,+BAA+B,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,iBAAiB,YAAY,YAAY,aAAa,OAAO,IAAI,OAAO,IAAI,cAAc,IAAI,gBAAgB,YAAY,IAAI,OAAO,eAAe,MAAM,oEAAoE,IAAI,YAAY,YAAY,QAAQ,iCAAiC,UAAU,eAAe,iBAAiB,kBAAkB,oBAAoB,UAAU,aAAa,IAAI,WAAW,YAAY,SAAS,IAAI,IAAI,SAAS,aAAa,gBAAgB,mBAAmB,mBAAmB,kBAAkB,kBAAkB,kBAAkB,WAAW,IAAI,IAAI,KAAK,KAAK,kBAAkB,mBAAmB,IAAI,kBAAkB,IAAI,aAAa,IAAI,IAAI,8BAA8B,iBAAiB,iBAAiB,SAAS,YAAY,iBAAiB,IAAI,MAAM,SAAS,iBAAiB,iBAAiB,IAAI,WAAW,mBAAmB,MAAM,MAAM,MAAM,gCAAgC,IAAI,YAAY,QAAQ,QAAQ,uBAAuB,IAAI,OAAO,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,YAAY,UAAU,sCAAsC,UAAU,cAAc,YAAY,kBAAkB,sBAAsB,QAAQ,oBAAoB,UAAU,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,oEAAoE,IAAI,SAAS,QAAQ,QAAQ,IAAI,aAAa,UAAU,aAAa,IAAI,OAAO,YAAY,IAAI,GAAG,IAAI,QAAQ,gBAAgB,YAAY,IAAI,IAAI,GAAG,0BAA0B,YAAY,QAAQ,aAAa,0BAA0B,kBAAkB,gBAAgB,+CAA+C,QAAQ,oBAAoB,SAAS,aAAa,YAAY,aAAa,gBAAgB,UAAU,oBAAoB,IAAI,OAAO,6BAA6B,KAAK,IAAI,SAAS,QAAQ,aAAa,YAAY,YAAY,YAAY,aAAa,YAAY,aAAa,YAAY,0BAA0B,QAAQ,0DAA0D,IAAI,QAAQ,QAAQ,aAAa,YAAY,aAAa,YAAY,cAAc,IAAI,OAAO,SAAS,SAAS,UAAU,aAAa,aAAa,0BAA0B,mBAAmB,kBAAkB,iEAAiE,UAAU,aAAa,IAAI,SAAS,sBAAsB,gBAAgB,UAAU,UAAU,oBAAoB,UAAU,QAAQ,UAAU,oBAAoB,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,gEAAgE,IAAI,QAAQ,YAAY,YAAY,YAAY,eAAe,IAAI,GAAG,+BAA+B,QAAQ,YAAY,mBAAmB,MAAM,UAAU,IAAI,QAAQ,kBAAkB,SAAS,IAAI,GAAG,uBAAuB,iCAAiC,QAAQ,QAAQ,yBAAyB,YAAY,aAAa,IAAI,OAAO,YAAY,SAAS,SAAS,IAAI,YAAY,SAAS,UAAU,mBAAmB,SAAS,qBAAqB,IAAI,SAAS,aAAa,gBAAgB,mBAAmB,mBAAmB,kBAAkB,kBAAkB,kBAAkB,WAAW,IAAI,IAAI,MAAM,KAAK,kBAAkB,mBAAmB,IAAI,kBAAkB,KAAK,cAAc,IAAI,IAAI,gCAAgC,iBAAiB,2BAA2B,SAAS,YAAY,iBAAiB,IAAI,MAAM,UAAU,SAAS,SAAS,iBAAiB,2BAA2B,kBAAkB,YAAY,IAAI,OAAO,eAAe,MAAM,gEAAgE,IAAI,SAAS,YAAY,SAAS,YAAY,YAAY,SAAS,SAAS,IAAI,GAAG,aAAa,YAAY,0BAA0B,YAAY,iBAAiB,YAAY,YAAY,eAAe,IAAI,IAAI,GAAG,YAAY,aAAa,kDAAkD,IAAI,cAAc,aAAa,gBAAgB,YAAY,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,gCAAgC,YAAY,YAAY,QAAQ,mBAAmB,OAAO,IAAI,OAAO,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,wBAAwB,IAAI,YAAY,yBAAyB,2BAA2B,QAAQ,sBAAsB,YAAY,QAAQ,UAAU,gCAAgC,uBAAuB,OAAO,IAAI,WAAW,kBAAkB,UAAU,uBAAuB,IAAI,GAAG,kCAAkC,QAAQ,iCAAiC,YAAY,WAAW,IAAI,WAAW,QAAQ,eAAe,WAAW,yBAAyB,IAAI,WAAW,KAAK,0BAA0B,IAAI,WAAW,SAAS,eAAe,MAAM,4BAA4B,IAAI,SAAS,IAAI,MAAM,aAAa,mBAAmB,mBAAmB,mBAAmB,oBAAoB,sBAAsB,sBAAsB,sBAAsB,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,UAAU,UAAU,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,cAAc,UAAU,YAAY,YAAY,YAAY,aAAa,aAAa,aAAa,UAAU,UAAU,UAAU,cAAc,cAAc,UAAU,YAAY,YAAY,YAAY,aAAa,aAAa,aAAa,cAAc,cAAc,UAAU,UAAU,cAAc,cAAc,YAAY,YAAY,YAAY,aAAa,aAAa,YAAY,YAAY,YAAY,aAAa,aAAa,aAAa,QAAQ,UAAU,QAAQ,UAAU,YAAY,UAAU,sDAAsD,WAAW,UAAU,cAAc,wBAAwB,cAAc,OAAO,IAAI,OAAO,UAAU,MAAM,UAAU,UAAU,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,MAAM,IAAI,OAAO,eAAe,MAAM,gBAAgB,IAAI,aAAa,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,YAAY,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,OAAO,MAAM,IAAI,OAAO,cAAc,MAAM,UAAU,cAAc,MAAM,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,4BAA4B,IAAI,SAAS,SAAS,QAAQ,SAAS,QAAQ,IAAI,kBAAkB,sBAAsB,cAAc,UAAU,gBAAgB,gBAAgB,qBAAqB,IAAI,WAAW,UAAU,OAAO,UAAU,oBAAoB,UAAU,YAAY,oBAAoB,UAAU,cAAc,gBAAgB,cAAc,IAAI,WAAW,qBAAqB,MAAM,MAAM,MAAM,MAAM,oEAAoE,IAAI,SAAS,QAAQ,IAAI,SAAS,UAAU,QAAQ,UAAU,QAAQ,UAAU,YAAY,UAAU,UAAU,uBAAuB,MAAM,UAAU,YAAY,YAAY,UAAU,UAAU,IAAI,GAAG,8BAA8B,UAAU,kBAAkB,iBAAiB,UAAU,QAAQ,YAAY,QAAQ,mBAAmB,kBAAkB,UAAU,YAAY,KAAK,IAAI,IAAI,QAAQ,kDAAkD,+BAA+B,KAAK,QAAQ,YAAY,UAAU,YAAY,QAAQ,iHAAiH,UAAU,QAAQ,GAAG,YAAY,mBAAmB,UAAU,mBAAmB,YAAY,iBAAiB,YAAY,QAAQ,MAAM,UAAU,IAAI,SAAS,qBAAqB,UAAU,+CAA+C,UAAU,mBAAmB,YAAY,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,QAAQ,KAAK,IAAI,KAAK,SAAS,cAAc,IAAI,6BAA6B,QAAQ,eAAe,8BAA8B,YAAY,UAAU,IAAI,GAAG,mBAAmB,sBAAsB,qBAAqB,QAAQ,mBAAmB,YAAY,OAAO,IAAI,OAAO,UAAU,MAAM,UAAU,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,wHAAwH,IAAI,SAAS,IAAI,eAAe,IAAI,IAAI,WAAW,UAAU,iBAAiB,IAAI,IAAI,WAAW,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,SAAS,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,WAAW,sEAAsE,MAAM,YAAY,YAAY,QAAQ,iCAAiC,+CAA+C,mCAAmC,KAAK,MAAM,YAAY,cAAc,KAAK,MAAM,eAAe,SAAS,SAAS,YAAY,YAAY,uBAAuB,UAAU,YAAY,iBAAiB,kBAAkB,oBAAoB,UAAU,mBAAmB,wBAAwB,2HAA2H,qCAAqC,gBAAgB,eAAe,cAAc,kBAAkB,YAAY,UAAU,iBAAiB,KAAK,QAAQ,mCAAmC,+JAA+J,KAAK,QAAQ,gFAAgF,YAAY,iBAAiB,cAAc,8BAA8B,mBAAmB,gBAAgB,aAAa,YAAY,KAAK,YAAY,IAAI,GAAG,+BAA+B,QAAQ,yBAAyB,UAAU,gCAAgC,gCAAgC,SAAS,OAAO,mFAAmF,KAAK,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,cAAc,UAAU,YAAY,MAAM,cAAc,MAAM,UAAU,cAAc,UAAU,YAAY,mBAAmB,UAAU,KAAK,YAAY,IAAI,GAAG,+BAA+B,QAAQ,yBAAyB,KAAK,cAAc,UAAU,MAAM,UAAU,cAAc,cAAc,UAAU,cAAc,cAAc,wBAAwB,MAAM,8BAA8B,8CAA8C,uCAAuC,gBAAgB,oBAAoB,eAAe,qBAAqB,IAAI,WAAW,iBAAiB,MAAM,MAAM,oDAAoD,IAAI,SAAS,IAAI,UAAU,UAAU,YAAY,mCAAmC,IAAI,IAAI,WAAW,iBAAiB,IAAI,IAAI,WAAW,qBAAqB,IAAI,IAAI,WAAW,YAAY,mBAAmB,IAAI,IAAI,WAAW,iCAAiC,UAAU,2BAA2B,cAAc,wBAAwB,IAAI,IAAI,WAAW,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,IAAI,GAAG,eAAe,wCAAwC,6BAA6B,sBAAsB,iCAAiC,sBAAsB,aAAa,uEAAuE,QAAQ,iCAAiC,IAAI,IAAI,WAAW,iBAAiB,MAAM,MAAM,wDAAwD,IAAI,SAAS,QAAQ,QAAQ,IAAI,oBAAoB,cAAc,QAAQ,YAAY,iBAAiB,UAAU,IAAI,SAAS,6BAA6B,6BAA6B,QAAQ,QAAQ,YAAY,QAAQ,8CAA8C,YAAY,QAAQ,4CAA4C,YAAY,oBAAoB,WAAW,YAAY,QAAQ,wBAAwB,QAAQ,IAAI,IAAI,WAAW,SAAS,gBAAgB,QAAQ,IAAI,WAAW,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,SAAS,IAAI,2BAA2B,qBAAqB,QAAQ,IAAI,OAAO,wBAAwB,QAAQ,IAAI,OAAO,UAAU,UAAU,UAAU,IAAI,GAAG,eAAe,6BAA6B,wBAAwB,iBAAiB,aAAa,UAAU,kBAAkB,iBAAiB,UAAU,QAAQ,QAAQ,iCAAiC,QAAQ,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,oDAAoD,IAAI,SAAS,QAAQ,IAAI,gBAAgB,aAAa,cAAc,wBAAwB,QAAQ,YAAY,YAAY,kBAAkB,QAAQ,IAAI,SAAS,QAAQ,gCAAgC,IAAI,QAAQ,mBAAmB,YAAY,KAAK,IAAI,IAAI,SAAS,UAAU,kBAAkB,IAAI,QAAQ,kCAAkC,YAAY,QAAQ,UAAU,mBAAmB,QAAQ,kCAAkC,YAAY,WAAW,UAAU,QAAQ,OAAO,IAAI,IAAI,KAAK,IAAI,IAAI,GAAG,qCAAqC,QAAQ,mBAAmB,mBAAmB,KAAK,UAAU,YAAY,YAAY,kBAAkB,QAAQ,IAAI,SAAS,QAAQ,gCAAgC,IAAI,QAAQ,mBAAmB,YAAY,KAAK,IAAI,IAAI,SAAS,UAAU,kBAAkB,IAAI,QAAQ,kCAAkC,YAAY,QAAQ,UAAU,mBAAmB,QAAQ,kCAAkC,YAAY,WAAW,UAAU,QAAQ,OAAO,IAAI,IAAI,KAAK,IAAI,IAAI,GAAG,qCAAqC,QAAQ,mBAAmB,mBAAmB,QAAQ,OAAO,gBAAgB,eAAe,iBAAiB,YAAY,iBAAiB,YAAY,IAAI,SAAS,QAAQ,qCAAqC,mBAAmB,KAAK,IAAI,QAAQ,SAAS,SAAS,UAAU,gBAAgB,YAAY,GAAG,IAAI,QAAQ,8BAA8B,oBAAoB,mBAAmB,UAAU,2BAA2B,wBAAwB,QAAQ,wBAAwB,IAAI,IAAI,WAAW,qBAAqB,iCAAiC,QAAQ,QAAQ,YAAY,QAAQ,4CAA4C,YAAY,QAAQ,yCAAyC,IAAI,IAAI,YAAY,KAAK,UAAU,oBAAoB,WAAW,gBAAgB,IAAI,WAAW,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,oCAAoC,IAAI,SAAS,QAAQ,IAAI,UAAU,sBAAsB,yBAAyB,0CAA0C,QAAQ,QAAQ,YAAY,kBAAkB,IAAI,WAAW,qBAAqB,yBAAyB,YAAY,kBAAkB,IAAI,SAAS,qBAAqB,QAAQ,qBAAqB,4BAA4B,mBAAmB,IAAI,QAAQ,aAAa,SAAS,UAAU,QAAQ,YAAY,SAAS,QAAQ,4BAA4B,IAAI,WAAW,SAAS,YAAY,cAAc,IAAI,IAAI,WAAW,IAAI,GAAG,qBAAqB,oBAAoB,UAAU,QAAQ,YAAY,QAAQ,uBAAuB,IAAI,IAAI,WAAW,eAAe,MAAM,gFAAgF,IAAI,UAAU,iBAAiB,IAAI,OAAO,UAAU,UAAU,UAAU,UAAU,UAAU,IAAI,SAAS,YAAY,YAAY,QAAQ,iCAAiC,sBAAsB,oEAAoE,YAAY,yBAAyB,QAAQ,UAAU,YAAY,YAAY,UAAU,UAAU,UAAU,UAAU,IAAI,GAAG,0BAA0B,kBAAkB,cAAc,YAAY,iBAAiB,YAAY,YAAY,qBAAqB,IAAI,IAAI,GAAG,mBAAmB,4CAA4C,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,UAAU,YAAY,iBAAiB,YAAY,YAAY,eAAe,IAAI,GAAG,6BAA6B,kCAAkC,QAAQ,8CAA8C,qBAAqB,YAAY,QAAQ,mBAAmB,sBAAsB,YAAY,QAAQ,mBAAmB,IAAI,SAAS,SAAS,YAAY,YAAY,QAAQ,iCAAiC,sBAAsB,oEAAoE,YAAY,2BAA2B,QAAQ,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,wJAAwJ,IAAI,SAAS,IAAI,SAAS,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,UAAU,SAAS,UAAU,UAAU,UAAU,UAAU,IAAI,IAAI,IAAI,WAAW,YAAY,GAAG,YAAY,cAAc,QAAQ,uBAAuB,SAAS,wCAAwC,IAAI,KAAK,QAAQ,cAAc,IAAI,QAAQ,uBAAuB,+CAA+C,YAAY,8DAA8D,6BAA6B,kBAAkB,OAAO,IAAI,IAAI,KAAK,IAAI,IAAI,GAAG,qCAAqC,QAAQ,mBAAmB,mBAAmB,gBAAgB,YAAY,6BAA6B,QAAQ,YAAY,mBAAmB,UAAU,YAAY,aAAa,YAAY,kBAAkB,sBAAsB,QAAQ,mBAAmB,YAAY,8BAA8B,YAAY,YAAY,eAAe,YAAY,IAAI,SAAS,eAAe,aAAa,aAAa,YAAY,QAAQ,IAAI,GAAG,sBAAsB,oDAAoD,QAAQ,mBAAmB,kBAAkB,cAAc,YAAY,iBAAiB,YAAY,YAAY,qBAAqB,IAAI,IAAI,GAAG,mBAAmB,4CAA4C,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,UAAU,YAAY,qBAAqB,iBAAiB,qBAAqB,cAAc,SAAS,YAAY,kBAAkB,mBAAmB,YAAY,aAAa,YAAY,2JAA2J,eAAe,gBAAgB,aAAa,KAAK,IAAI,aAAa,SAAS,mBAAmB,mBAAmB,IAAI,SAAS,mBAAmB,iBAAiB,KAAK,QAAQ,QAAQ,0BAA0B,yBAAyB,KAAK,IAAI,SAAS,8BAA8B,IAAI,QAAQ,QAAQ,yBAAyB,SAAS,QAAQ,sBAAsB,SAAS,mBAAmB,0BAA0B,YAAY,oBAAoB,mBAAmB,IAAI,KAAK,QAAQ,QAAQ,kCAAkC,QAAQ,SAAS,QAAQ,QAAQ,SAAS,QAAQ,kCAAkC,aAAa,QAAQ,gBAAgB,IAAI,IAAI,WAAW,mBAAmB,IAAI,WAAW,SAAS,mBAAmB,MAAM,MAAM,MAAM,wDAAwD,IAAI,SAAS,SAAS,QAAQ,QAAQ,IAAI,2BAA2B,cAAc,IAAI,IAAI,WAAW,cAAc,IAAI,IAAI,WAAW,oBAAoB,cAAc,YAAY,aAAa,UAAU,IAAI,KAAK,GAAG,qBAAqB,OAAO,yHAAyH,YAAY,oBAAoB,WAAW,YAAY,SAAS,QAAQ,uBAAuB,UAAU,gBAAgB,QAAQ,OAAO,UAAU,sBAAsB,UAAU,oBAAoB,mBAAmB,IAAI,IAAI,YAAY,IAAI,IAAI,WAAW,iBAAiB,MAAM,MAAM,4CAA4C,IAAI,sBAAsB,UAAU,cAAc,YAAY,iBAAiB,YAAY,YAAY,UAAU,qBAAqB,IAAI,IAAI,GAAG,mBAAmB,4CAA4C,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,UAAU,YAAY,4BAA4B,YAAY,QAAQ,4CAA4C,IAAI,IAAI,WAAW,iBAAiB,YAAY,OAAO,IAAI,IAAI,WAAW,iBAAiB,eAAe,IAAI,SAAS,4CAA4C,IAAI,MAAM,QAAQ,8BAA8B,IAAI,WAAW,SAAS,YAAY,IAAI,WAAW,iBAAiB,MAAM,MAAM,4LAA4L,IAAI,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,IAAI,sBAAsB,UAAU,cAAc,YAAY,iBAAiB,YAAY,YAAY,UAAU,qBAAqB,IAAI,IAAI,GAAG,mBAAmB,4CAA4C,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,UAAU,YAAY,eAAe,UAAU,QAAQ,UAAU,QAAQ,UAAU,UAAU,QAAQ,UAAU,QAAQ,UAAU,iBAAiB,uBAAuB,UAAU,OAAO,IAAI,GAAG,uBAAuB,6BAA6B,YAAY,QAAQ,kBAAkB,IAAI,SAAS,QAAQ,gCAAgC,IAAI,QAAQ,mBAAmB,YAAY,SAAS,SAAS,sBAAsB,QAAQ,YAAY,mBAAmB,YAAY,UAAU,MAAM,YAAY,UAAU,UAAU,YAAY,YAAY,UAAU,UAAU,UAAU,IAAI,IAAI,SAAS,MAAM,aAAa,YAAY,YAAY,IAAI,GAAG,mBAAmB,0BAA0B,QAAQ,UAAU,0CAA0C,QAAQ,QAAQ,QAAQ,QAAQ,YAAY,QAAQ,UAAU,YAAY,kBAAkB,IAAI,SAAS,mBAAmB,yBAAyB,kBAAkB,IAAI,SAAS,mBAAmB,QAAQ,qBAAqB,wBAAwB,0BAA0B,aAAa,SAAS,QAAQ,SAAS,QAAQ,qBAAqB,KAAK,QAAQ,UAAU,SAAS,cAAc,IAAI,6BAA6B,IAAI,QAAQ,YAAY,0BAA0B,IAAI,QAAQ,aAAa,QAAQ,mBAAmB,QAAQ,iBAAiB,KAAK,QAAQ,KAAK,IAAI,MAAM,KAAK,IAAI,IAAI,KAAK,SAAS,mBAAmB,0BAA0B,UAAU,kBAAkB,cAAc,UAAU,IAAI,oCAAoC,UAAU,YAAY,UAAU,UAAU,uEAAuE,kDAAkD,UAAU,sBAAsB,YAAY,gBAAgB,UAAU,YAAY,UAAU,YAAY,UAAU,IAAI,GAAG,oCAAoC,YAAY,uBAAuB,IAAI,KAAK,GAAG,eAAe,gBAAgB,QAAQ,gCAAgC,QAAQ,iCAAiC,UAAU,YAAY,aAAa,YAAY,aAAa,gBAAgB,UAAU,wBAAwB,QAAQ,QAAQ,mBAAmB,aAAa,QAAQ,UAAU,QAAQ,KAAK,UAAU,MAAM,UAAU,YAAY,UAAU,IAAI,GAAG,oCAAoC,YAAY,uBAAuB,IAAI,KAAK,GAAG,eAAe,gBAAgB,QAAQ,gCAAgC,QAAQ,iCAAiC,UAAU,YAAY,aAAa,YAAY,aAAa,gBAAgB,UAAU,wBAAwB,QAAQ,QAAQ,mBAAmB,eAAe,QAAQ,UAAU,QAAQ,kBAAkB,IAAI,GAAG,iCAAiC,QAAQ,yBAAyB,UAAU,WAAW,UAAU,YAAY,YAAY,eAAe,KAAK,IAAI,SAAS,QAAQ,yBAAyB,GAAG,aAAa,IAAI,GAAG,YAAY,wEAAwE,IAAI,QAAQ,QAAQ,mBAAmB,QAAQ,mBAAmB,SAAS,YAAY,eAAe,YAAY,MAAM,qBAAqB,MAAM,UAAU,qBAAqB,UAAU,OAAO,YAAY,iBAAiB,2DAA2D,UAAU,MAAM,UAAU,qBAAqB,YAAY,MAAM,iBAAiB,2DAA2D,UAAU,MAAM,UAAU,qBAAqB,YAAY,YAAY,SAAS,MAAM,UAAU,MAAM,UAAU,UAAU,YAAY,OAAO,IAAI,WAAW,UAAU,MAAM,UAAU,UAAU,IAAI,WAAW,iBAAiB,MAAM,MAAM,gEAAgE,IAAI,qBAAqB,IAAI,OAAO,UAAU,kBAAkB,UAAU,UAAU,UAAU,UAAU,IAAI,GAAG,YAAY,iBAAiB,YAAY,YAAY,qBAAqB,IAAI,IAAI,GAAG,mBAAmB,4CAA4C,iBAAiB,YAAY,QAAQ,QAAQ,mBAAmB,KAAK,IAAI,IAAI,QAAQ,uBAAuB,sBAAsB,YAAY,iBAAiB,kBAAkB,eAAe,IAAI,GAAG,uBAAuB,YAAY,YAAY,aAAa,kBAAkB,YAAY,UAAU,mBAAmB,mBAAmB,8BAA8B,QAAQ,yBAAyB,QAAQ,yBAAyB,UAAU,gBAAgB,UAAU,YAAY,QAAQ,qCAAqC,iBAAiB,UAAU,UAAU,SAAS,6BAA6B,QAAQ,+BAA+B,YAAY,aAAa,YAAY,WAAW,YAAY,YAAY,mBAAmB,mBAAmB,IAAI,0BAA0B,QAAQ,UAAU,oBAAoB,aAAa,eAAe,SAAS,UAAU,YAAY,YAAY,aAAa,kBAAkB,YAAY,UAAU,mBAAmB,mBAAmB,IAAI,OAAO,KAAK,yBAAyB,IAAI,QAAQ,eAAe,MAAM,wCAAwC,IAAI,SAAS,IAAI,QAAQ,UAAU,UAAU,UAAU,4BAA4B,YAAY,YAAY,YAAY,aAAa,QAAQ,SAAS,UAAU,kBAAkB,QAAQ,QAAQ,qBAAqB,eAAe,mBAAmB,YAAY,eAAe,kBAAkB,YAAY,WAAW,gBAAgB,kBAAkB,sBAAsB,mBAAmB,IAAI,OAAO,cAAc,gBAAgB,IAAI,SAAS,IAAI,UAAU,UAAU,UAAU,6BAA6B,WAAW,UAAU,6BAA6B,WAAW,UAAU,6BAA6B,WAAW,UAAU,6BAA6B,WAAW,SAAS,oBAAoB,qBAAqB,SAAS,4BAA4B,WAAW,SAAS,WAAW,qBAAqB,UAAU,6BAA6B,WAAW,SAAS,WAAW,qBAAqB,WAAW,6BAA6B,YAAY,WAAW,SAAS,UAAU,UAAU,oBAAoB,oBAAoB,oBAAoB,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,oBAAoB,IAAI,UAAU,QAAQ,UAAU,QAAQ,UAAU,aAAa,IAAI,OAAO,SAAS,cAAc,UAAU,eAAe,UAAU,sDAAsD,YAAY,kBAAkB,aAAa,eAAe,QAAQ,oBAAoB,UAAU,IAAI,OAAO,eAAe,MAAM,gCAAgC,IAAI,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,SAAS,YAAY,MAAM,aAAa,MAAM,UAAU,aAAa,YAAY,OAAO,IAAI,OAAO,QAAQ,YAAY,YAAY,IAAI,GAAG,eAAe,YAAY,MAAM,qBAAqB,MAAM,UAAU,qBAAqB,YAAY,YAAY,QAAQ,mBAAmB,UAAU,MAAM,UAAU,YAAY,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,oCAAoC,IAAI,YAAY,QAAQ,QAAQ,uBAAuB,YAAY,aAAa,UAAU,IAAI,OAAO,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,gBAAgB,YAAY,GAAG,aAAa,eAAe,QAAQ,oBAAoB,UAAU,YAAY,aAAa,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,oCAAoC,IAAI,YAAY,QAAQ,QAAQ,sBAAsB,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,iBAAiB,UAAU,sCAAsC,UAAU,cAAc,YAAY,gBAAgB,YAAY,GAAG,eAAe,MAAM,UAAU,qBAAqB,qBAAqB,QAAQ,oBAAoB,UAAU,YAAY,SAAS,YAAY,uBAAuB,qBAAqB,YAAY,SAAS,QAAQ,SAAS,uBAAuB,IAAI,OAAO,SAAS,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,YAAY,UAAU,sCAAsC,UAAU,cAAc,YAAY,kBAAkB,sBAAsB,QAAQ,oBAAoB,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,4DAA4D,IAAI,SAAS,IAAI,UAAU,SAAS,QAAQ,SAAS,sBAAsB,SAAS,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,sDAAsD,UAAU,mCAAmC,QAAQ,YAAY,mBAAmB,YAAY,mBAAmB,OAAO,IAAI,aAAa,UAAU,aAAa,UAAU,IAAI,OAAO,SAAS,OAAO,MAAM,SAAS,IAAI,WAAW,aAAa,YAAY,kBAAkB,mBAAmB,mBAAmB,wDAAwD,IAAI,OAAO,mBAAmB,uBAAuB,wDAAwD,IAAI,4CAA4C,KAAK,MAAM,iBAAiB,uBAAuB,OAAO,IAAI,KAAK,OAAO,cAAc,aAAa,UAAU,aAAa,UAAU,IAAI,QAAQ,iBAAiB,MAAM,MAAM,oEAAoE,IAAI,UAAU,wBAAwB,+CAA+C,SAAS,gBAAgB,8BAA8B,IAAI,OAAO,8BAA8B,IAAI,OAAO,4BAA4B,YAAY,QAAQ,8CAA8C,IAAI,MAAM,WAAW,KAAK,IAAI,QAAQ,SAAS,mEAAmE,YAAY,mBAAmB,eAAe,KAAK,UAAU,OAAO,MAAM,SAAS,IAAI,WAAW,aAAa,YAAY,kBAAkB,mBAAmB,mBAAmB,wDAAwD,IAAI,OAAO,mBAAmB,uBAAuB,wDAAwD,IAAI,mDAAmD,iBAAiB,uBAAuB,OAAO,IAAI,QAAQ,SAAS,iBAAiB,iBAAiB,gBAAgB,IAAI,OAAO,QAAQ,IAAI,OAAO,iBAAiB,MAAM,MAAM,wEAAwE,IAAI,YAAY,mBAAmB,SAAS,QAAQ,YAAY,iBAAiB,IAAI,SAAS,aAAa,UAAU,YAAY,aAAa,UAAU,IAAI,OAAO,SAAS,OAAO,MAAM,SAAS,SAAS,aAAa,gBAAgB,mBAAmB,mBAAmB,OAAO,kBAAkB,mBAAmB,uBAAuB,wDAAwD,IAAI,OAAO,mBAAmB,uBAAuB,wDAAwD,IAAI,4CAA4C,IAAI,KAAK,KAAK,mBAAmB,kBAAkB,IAAI,aAAa,IAAI,IAAI,OAAO,mBAAmB,uBAAuB,wDAAwD,IAAI,mBAAmB,mBAAmB,wDAAwD,IAAI,4CAA4C,KAAK,MAAM,iBAAiB,2BAA2B,SAAS,YAAY,iBAAiB,IAAI,KAAK,MAAM,SAAS,cAAc,aAAa,UAAU,YAAY,aAAa,UAAU,IAAI,QAAQ,iBAAiB,MAAM,MAAM,gCAAgC,IAAI,YAAY,MAAM,QAAQ,YAAY,iBAAiB,IAAI,SAAS,eAAe,YAAY,MAAM,qBAAqB,MAAM,UAAU,qBAAqB,YAAY,QAAQ,wBAAwB,aAAa,SAAS,UAAU,MAAM,cAAc,UAAU,aAAa,SAAS,YAAY,gCAAgC,MAAM,UAAU,aAAa,SAAS,YAAY,OAAO,IAAI,OAAO,aAAa,OAAO,IAAI,OAAO,MAAM,UAAU,aAAa,IAAI,OAAO,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,YAAY,QAAQ,MAAM,UAAU,MAAM,MAAM,UAAU,YAAY,KAAK,SAAS,mBAAmB,SAAS,UAAU,SAAS,UAAU,IAAI,OAAO,QAAQ,YAAY,YAAY,SAAS,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,oBAAoB,aAAa,eAAe,YAAY,aAAa,UAAU,SAAS,UAAU,SAAS,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,SAAS,IAAI,SAAS,YAAY,YAAY,2BAA2B,YAAY,QAAQ,YAAY,iBAAiB,UAAU,IAAI,SAAS,uBAAuB,IAAI,OAAO,mBAAmB,YAAY,YAAY,gBAAgB,YAAY,YAAY,IAAI,SAAS,QAAQ,8BAA8B,QAAQ,YAAY,iBAAiB,IAAI,MAAM,UAAU,SAAS,YAAY,kBAAkB,YAAY,IAAI,SAAS,8BAA8B,QAAQ,4BAA4B,aAAa,YAAY,UAAU,UAAU,cAAc,KAAK,UAAU,MAAM,UAAU,QAAQ,UAAU,gBAAgB,QAAQ,gBAAgB,QAAQ,gBAAgB,UAAU,UAAU,UAAU,IAAI,OAAO,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,QAAQ,YAAY,QAAQ,YAAY,+BAA+B,cAAc,cAAc,2BAA2B,UAAU,aAAa,YAAY,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,iBAAiB,YAAY,YAAY,aAAa,OAAO,IAAI,OAAO,gBAAgB,IAAI,OAAO,cAAc,YAAY,IAAI,WAAW,YAAY,MAAM,IAAI,WAAW,eAAe,MAAM,QAAQ,IAAI,OAAO,IAAI,OAAO,8BAA8B,IAAI,OAAO,cAAc,gBAAgB,IAAI,SAAS,IAAI,YAAY,MAAM,SAAS,UAAU,WAAW,oBAAoB,YAAY,IAAI,OAAO,eAAe,MAAM,gBAAgB,IAAI,SAAS,IAAI,sBAAsB,IAAI,OAAO,GAAG,WAAW,oBAAoB,YAAY,iBAAiB,SAAS,mBAAmB,IAAI,OAAO,eAAe,MAAM,wCAAwC,IAAI,SAAS,SAAS,QAAQ,IAAI,UAAU,QAAQ,UAAU,QAAQ,UAAU,YAAY,QAAQ,kBAAkB,uBAAuB,WAAW,oBAAoB,YAAY,iBAAiB,SAAS,mBAAmB,oBAAoB,QAAQ,QAAQ,YAAY,gBAAgB,WAAW,UAAU,QAAQ,YAAY,YAAY,OAAO,IAAI,WAAW,UAAU,MAAM,UAAU,UAAU,IAAI,WAAW,cAAc,oBAAoB,IAAI,SAAS,IAAI,WAAW,UAAU,aAAa,aAAa,aAAa,cAAc,+BAA+B,YAAY,IAAI,uBAAuB,cAAc,iCAAiC,cAAc,gBAAgB,eAAe,MAAM,4BAA4B,IAAI,SAAS,SAAS,QAAQ,IAAI,UAAU,QAAQ,UAAU,QAAQ,UAAU,aAAa,QAAQ,WAAW,UAAU,aAAa,aAAa,aAAa,cAAc,cAAc,YAAY,iBAAiB,YAAY,OAAO,IAAI,WAAW,UAAU,MAAM,UAAU,UAAU,IAAI,WAAW,eAAe,MAAM,gBAAgB,IAAI,SAAS,IAAI,WAAW,eAAe,UAAU,2BAA2B,QAAQ,UAAU,IAAI,OAAO,cAAc,6BAA6B,cAAc,6BAA6B,iBAAiB,MAAM,MAAM,wCAAwC,IAAI,YAAY,QAAQ,kBAAkB,KAAK,UAAU,IAAI,QAAQ,YAAY,QAAQ,gBAAgB,QAAQ,YAAY,gBAAgB,WAAW,cAAc,kBAAkB,2BAA2B,UAAU,aAAa,QAAQ,UAAU,eAAe,UAAU,sCAAsC,UAAU,cAAc,YAAY,6BAA6B,aAAa,eAAe,QAAQ,wBAAwB,YAAY,SAAS,UAAU,YAAY,aAAa,IAAI,OAAO,YAAY,YAAY,IAAI,GAAG,8BAA8B,QAAQ,yBAAyB,IAAI,OAAO,iBAAiB,MAAM,MAAM,QAAQ,IAAI,SAAS,UAAU,YAAY,kBAAkB,aAAa,KAAK,cAAc,YAAY,IAAI,SAAS,oBAAoB,kBAAkB,IAAI,WAAW,gBAAgB,SAAS,eAAe,MAAM,YAAY,IAAI,eAAe,UAAU,MAAM,IAAI,WAAW,SAAS,SAAS,OAAO,IAAI,MAAM,UAAU,UAAU,MAAM,IAAI,OAAO,aAAa,UAAU,aAAa,gBAAgB,kBAAkB,IAAI,WAAW,SAAS,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,eAAe,MAAM,OAAO,eAAe,MAAM,YAAY,eAAe,MAAM,QAAQ,IAAI,SAAS,UAAU,WAAW,cAAc,YAAY,SAAS,8HAA8H,WAAW,WAAW,MAAM,cAAc,QAAQ,YAAY,YAAY,WAAW,eAAe,MAAM,OAAO,eAAe,MAAM,OAAO,eAAe,MAAM,OAAO,eAAe,MAAM,OAAO,eAAe,MAAM,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,eAAe,MAAM,QAAQ,IAAI,MAAM,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,oBAAoB,IAAI,SAAS,IAAI,iBAAiB,IAAI,IAAI,WAAW,OAAO,IAAI,IAAI,WAAW,sBAAsB,OAAO,IAAI,IAAI,WAAW,QAAQ,SAAS,GAAG,UAAU,QAAQ,mBAAmB,UAAU,YAAY,cAAc,aAAa,4CAA4C,sBAAsB,IAAI,IAAI,WAAW,mBAAmB,IAAI,IAAI,WAAW,qBAAqB,MAAM,MAAM,MAAM,MAAM,YAAY,IAAI,SAAS,YAAY,OAAO,UAAU,aAAa,aAAa,IAAI,OAAO,iBAAiB,SAAS,sBAAsB,aAAa,aAAa,IAAI,OAAO,SAAS,mBAAmB,IAAI,OAAO,UAAU,IAAI,OAAO,qBAAqB,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,yBAAyB,IAAI,OAAO,YAAY,IAAI,OAAO,qBAAqB,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,yBAAyB,YAAY,IAAI,OAAO,KAAK,cAAc,oCAAoC,IAAI,QAAQ,qBAAqB,MAAM,MAAM,MAAM,MAAM,wCAAwC,IAAI,SAAS,IAAI,YAAY,sBAAsB,gBAAgB,UAAU,YAAY,YAAY,aAAa,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,eAAe,QAAQ,SAAS,GAAG,UAAU,QAAQ,mBAAmB,aAAa,aAAa,MAAM,aAAa,wCAAwC,qBAAqB,IAAI,WAAW,sCAAsC,eAAe,OAAO,2DAA2D,IAAI,WAAW,kBAAkB,qEAAqE,IAAI,IAAI,WAAW,YAAY,IAAI,WAAW,KAAK,IAAI,IAAI,WAAW,SAAS,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,aAAa,yBAAyB,IAAI,OAAO,aAAa,SAAS,YAAY,OAAO,UAAU,aAAa,aAAa,oCAAoC,IAAI,OAAO,aAAa,IAAI,OAAO,iBAAiB,SAAS,sBAAsB,aAAa,IAAI,OAAO,SAAS,YAAY,sBAAsB,SAAS,oCAAoC,IAAI,OAAO,aAAa,IAAI,OAAO,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,wBAAwB,IAAI,yBAAyB,yBAAyB,IAAI,OAAO,SAAS,mBAAmB,IAAI,OAAO,UAAU,IAAI,OAAO,uBAAuB,cAAc,sCAAsC,IAAI,OAAO,0DAA0D,aAAa,SAAS,mBAAmB,IAAI,OAAO,SAAS,UAAU,SAAS,UAAU,cAAc,wCAAwC,cAAc,iBAAiB,IAAI,MAAM,KAAK,IAAI,KAAK,iBAAiB,UAAU,SAAS,sBAAsB,0CAA0C,aAAa,WAAW,UAAU,uBAAuB,UAAU,IAAI,OAAO,SAAS,UAAU,IAAI,OAAO,aAAa,IAAI,OAAO,aAAa,IAAI,OAAO,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,yBAAyB,yBAAyB,IAAI,OAAO,SAAS,mBAAmB,IAAI,OAAO,UAAU,IAAI,OAAO,uBAAuB,IAAI,OAAO,0DAA0D,aAAa,UAAU,SAAS,sBAAsB,sDAAsD,aAAa,IAAI,OAAO,aAAa,IAAI,OAAO,aAAa,IAAI,OAAO,yBAAyB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,QAAQ,IAAI,yBAAyB,cAAc,IAAI,OAAO,KAAK,cAAc,wCAAwC,IAAI,QAAQ,yBAAyB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI,yBAAyB,IAAI,OAAO,cAAc,IAAI,OAAO,mBAAmB,MAAM,MAAM,MAAM,YAAY,IAAI,SAAS,IAAI,gBAAgB,sCAAsC,MAAM,OAAO,IAAI,WAAW,gBAAgB,IAAI,WAAW,eAAe,MAAM,QAAQ,IAAI,UAAU,gCAAgC,IAAI,aAAa,cAAc,wBAAwB,IAAI,SAAS,IAAI,SAAS,SAAS,iBAAiB,YAAY,iBAAiB,SAAS,YAAY,cAAc,gDAAgD,eAAe,UAAU,sDAAsD,cAAc,UAAU,YAAY,cAAc,8CAA8C,YAAY,WAAW,iCAAiC,UAAU,YAAY,YAAY,WAAW,KAAK,eAAe,YAAY,YAAY,cAAc,QAAQ,IAAI,SAAS,qBAAqB,IAAI,OAAO,gBAAgB,eAAe,MAAM,QAAQ,IAAI,SAAS,MAAM,yBAAyB,IAAI,OAAO,gBAAgB,eAAe,MAAM,gIAAgI,IAAI,iBAAiB,iBAAiB,eAAe,QAAQ,YAAY,QAAQ,QAAQ,cAAc,OAAO,gBAAgB,kBAAkB,YAAY,QAAQ,YAAY,oBAAoB,8BAA8B,SAAS,uBAAuB,UAAU,UAAU,MAAM,UAAU,uBAAuB,SAAS,OAAO,cAAc,YAAY,kBAAkB,IAAI,IAAI,WAAW,YAAY,gBAAgB,MAAM,OAAO,eAAe,gBAAgB,YAAY,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,wBAAwB,OAAO,gBAAgB,kBAAkB,YAAY,QAAQ,YAAY,oBAAoB,8BAA8B,SAAS,uBAAuB,UAAU,UAAU,YAAY,MAAM,UAAU,KAAK,kBAAkB,IAAI,SAAS,OAAO,QAAQ,cAAc,QAAQ,kBAAkB,YAAY,MAAM,YAAY,QAAQ,OAAO,gBAAgB,YAAY,OAAO,QAAQ,kBAAkB,YAAY,8BAA8B,KAAK,IAAI,KAAK,KAAK,YAAY,kBAAkB,IAAI,UAAU,aAAa,YAAY,aAAa,UAAU,UAAU,IAAI,IAAI,WAAW,YAAY,MAAM,gBAAgB,YAAY,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,wCAAwC,qBAAqB,IAAI,SAAS,eAAe,OAAO,eAAe,YAAY,qBAAqB,cAAc,QAAQ,IAAI,QAAQ,YAAY,oBAAoB,QAAQ,qBAAqB,eAAe,eAAe,oBAAoB,SAAS,YAAY,OAAO,SAAS,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,cAAc,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,SAAS,eAAe,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,YAAY,YAAY,oBAAoB,aAAa,eAAe,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,eAAe,mCAAmC,KAAK,aAAa,aAAa,OAAO,SAAS,aAAa,QAAQ,cAAc,YAAY,kBAAkB,KAAK,cAAc,kBAAkB,gBAAgB,YAAY,MAAM,YAAY,QAAQ,OAAO,gBAAgB,YAAY,OAAO,QAAQ,kBAAkB,YAAY,8BAA8B,KAAK,IAAI,KAAK,KAAK,YAAY,kBAAkB,IAAI,UAAU,aAAa,YAAY,aAAa,UAAU,UAAU,QAAQ,IAAI,aAAa,2BAA2B,SAAS,OAAO,YAAY,MAAM,QAAQ,QAAQ,4BAA4B,KAAK,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,sBAAsB,YAAY,IAAI,IAAI,KAAK,iBAAiB,oBAAoB,IAAI,OAAO,IAAI,SAAS,eAAe,QAAQ,gCAAgC,IAAI,IAAI,IAAI,QAAQ,KAAK,IAAI,IAAI,eAAe,2BAA2B,4BAA4B,YAAY,aAAa,SAAS,sBAAsB,OAAO,YAAY,YAAY,gBAAgB,YAAY,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,QAAQ,UAAU,wCAAwC,cAAc,qBAAqB,cAAc,QAAQ,QAAQ,eAAe,MAAM,IAAI,SAAS,eAAe,YAAY,2CAA2C,YAAY,oBAAoB,QAAQ,qBAAqB,eAAe,eAAe,oBAAoB,SAAS,YAAY,OAAO,SAAS,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,cAAc,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,SAAS,eAAe,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,YAAY,YAAY,oBAAoB,aAAa,eAAe,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,eAAe,mCAAmC,KAAK,aAAa,aAAa,OAAO,SAAS,mBAAmB,cAAc,kBAAkB,gBAAgB,QAAQ,cAAc,OAAO,gBAAgB,YAAY,OAAO,cAAc,YAAY,kBAAkB,IAAI,KAAK,kBAAkB,YAAY,2BAA2B,IAAI,IAAI,MAAM,KAAK,SAAS,UAAU,aAAa,gBAAgB,iBAAiB,MAAM,QAAQ,4BAA4B,KAAK,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,gBAAgB,iBAAiB,iBAAiB,iBAAiB,YAAY,OAAO,WAAW,YAAY,UAAU,iBAAiB,iBAAiB,gBAAgB,MAAM,YAAY,iBAAiB,oBAAoB,iCAAiC,OAAO,SAAS,qBAAqB,YAAY,YAAY,4BAA4B,IAAI,QAAQ,KAAK,OAAO,KAAK,8BAA8B,KAAK,UAAU,iBAAiB,iBAAiB,gBAAgB,SAAS,SAAS,SAAS,QAAQ,YAAY,YAAY,8BAA8B,aAAa,UAAU,gBAAgB,iBAAiB,iBAAiB,MAAM,UAAU,KAAK,QAAQ,cAAc,YAAY,kBAAkB,SAAS,QAAQ,IAAI,aAAa,UAAU,SAAS,YAAY,iBAAiB,QAAQ,YAAY,aAAa,YAAY,UAAU,kBAAkB,YAAY,cAAc,KAAK,UAAU,UAAU,cAAc,YAAY,kBAAkB,QAAQ,IAAI,WAAW,YAAY,gBAAgB,QAAQ,UAAU,YAAY,YAAY,kBAAkB,cAAc,QAAQ,IAAI,WAAW,oBAAoB,WAAW,eAAe,UAAU,UAAU,WAAW,WAAW,UAAU,UAAU,iCAAiC,MAAM,UAAU,SAAS,SAAS,YAAY,SAAS,QAAQ,QAAQ,MAAM,iBAAiB,IAAI,IAAI,WAAW,YAAY,8DAA8D,IAAI,IAAI,WAAW,sBAAsB,YAAY,WAAW,SAAS,SAAS,YAAY,8DAA8D,cAAc,OAAO,MAAM,SAAS,MAAM,kBAAkB,qBAAqB,YAAY,uCAAuC,IAAI,MAAM,KAAK,IAAI,OAAO,SAAS,WAAW,WAAW,SAAS,kBAAkB,UAAU,kBAAkB,IAAI,YAAY,UAAU,cAAc,uBAAuB,YAAY,QAAQ,iCAAiC,YAAY,wCAAwC,IAAI,MAAM,YAAY,iBAAiB,IAAI,MAAM,WAAW,SAAS,SAAS,SAAS,oBAAoB,kBAAkB,IAAI,MAAM,SAAS,oBAAoB,QAAQ,sHAAsH,UAAU,IAAI,QAAQ,KAAK,QAAQ,MAAM,SAAS,qBAAqB,KAAK,IAAI,MAAM,SAAS,SAAS,kBAAkB,MAAM,KAAK,IAAI,MAAM,SAAS,2IAA2I,IAAI,QAAQ,MAAM,eAAe,kBAAkB,UAAU,mCAAmC,YAAY,WAAW,SAAS,SAAS,YAAY,QAAQ,YAAY,mBAAmB,MAAM,MAAM,cAAc,YAAY,SAAS,kEAAkE,YAAY,kBAAkB,QAAQ,cAAc,aAAa,QAAQ,YAAY,UAAU,kBAAkB,iBAAiB,gBAAgB,MAAM,YAAY,gBAAgB,UAAU,IAAI,QAAQ,SAAS,SAAS,uBAAuB,MAAM,MAAM,cAAc,YAAY,SAAS,qCAAqC,UAAU,QAAQ,sBAAsB,QAAQ,cAAc,aAAa,YAAY,cAAc,aAAa,YAAY,QAAQ,QAAQ,cAAc,kBAAkB,sBAAsB,uBAAuB,kBAAkB,UAAU,UAAU,kBAAkB,gBAAgB,MAAM,QAAQ,kBAAkB,eAAe,OAAO,QAAQ,oBAAoB,uBAAuB,qBAAqB,oBAAoB,OAAO,YAAY,YAAY,OAAO,YAAY,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,sBAAsB,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,YAAY,qBAAqB,gBAAgB,0BAA0B,8BAA8B,SAAS,gCAAgC,kBAAkB,cAAc,KAAK,UAAU,WAAW,wBAAwB,QAAQ,SAAS,YAAY,oBAAoB,aAAa,OAAO,kBAAkB,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,kBAAkB,YAAY,8BAA8B,KAAK,aAAa,aAAa,OAAO,KAAK,sBAAsB,qBAAqB,mBAAmB,oBAAoB,oBAAoB,+BAA+B,KAAK,SAAS,iBAAiB,wBAAwB,MAAM,2BAA2B,KAAK,oBAAoB,QAAQ,uBAAuB,IAAI,MAAM,KAAK,SAAS,aAAa,UAAU,SAAS,gBAAgB,QAAQ,QAAQ,mBAAmB,kBAAkB,gBAAgB,QAAQ,cAAc,OAAO,gBAAgB,YAAY,OAAO,cAAc,YAAY,kBAAkB,IAAI,KAAK,kBAAkB,YAAY,2BAA2B,IAAI,IAAI,MAAM,KAAK,SAAS,UAAU,aAAa,gBAAgB,iBAAiB,MAAM,QAAQ,aAAa,KAAK,mBAAmB,KAAK,MAAM,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,gBAAgB,iBAAiB,iBAAiB,iBAAiB,YAAY,OAAO,WAAW,YAAY,UAAU,iBAAiB,iBAAiB,gBAAgB,MAAM,YAAY,iBAAiB,oBAAoB,iCAAiC,OAAO,SAAS,qBAAqB,YAAY,YAAY,4BAA4B,IAAI,QAAQ,KAAK,OAAO,KAAK,8BAA8B,KAAK,UAAU,iBAAiB,iBAAiB,gBAAgB,SAAS,SAAS,SAAS,QAAQ,YAAY,YAAY,8BAA8B,aAAa,UAAU,gBAAgB,iBAAiB,iBAAiB,MAAM,UAAU,KAAK,kBAAkB,UAAU,UAAU,kBAAkB,SAAS,YAAY,IAAI,WAAW,SAAS,SAAS,YAAY,4DAA4D,cAAc,eAAe,cAAc,aAAa,iBAAiB,yBAAyB,QAAQ,QAAQ,cAAc,aAAa,aAAa,YAAY,UAAU,kBAAkB,oBAAoB,gBAAgB,aAAa,kBAAkB,kBAAkB,kBAAkB,mBAAmB,UAAU,UAAU,UAAU,UAAU,SAAS,UAAU,yBAAyB,IAAI,QAAQ,UAAU,yBAAyB,iBAAiB,QAAQ,YAAY,mBAAmB,cAAc,YAAY,QAAQ,cAAc,OAAO,gBAAgB,YAAY,OAAO,cAAc,YAAY,kBAAkB,IAAI,KAAK,kBAAkB,YAAY,2BAA2B,IAAI,IAAI,MAAM,KAAK,SAAS,UAAU,aAAa,YAAY,aAAa,MAAM,QAAQ,4BAA4B,KAAK,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,gBAAgB,aAAa,aAAa,aAAa,YAAY,OAAO,WAAW,YAAY,UAAU,aAAa,aAAa,YAAY,MAAM,YAAY,iBAAiB,oBAAoB,iCAAiC,OAAO,IAAI,SAAS,qBAAqB,YAAY,YAAY,4BAA4B,IAAI,QAAQ,KAAK,OAAO,KAAK,8BAA8B,KAAK,UAAU,aAAa,aAAa,YAAY,SAAS,SAAS,SAAS,QAAQ,YAAY,YAAY,8BAA8B,aAAa,UAAU,YAAY,aAAa,aAAa,MAAM,WAAW,KAAK,YAAY,kCAAkC,UAAU,UAAU,UAAU,gBAAgB,WAAW,IAAI,GAAG,OAAO,gBAAgB,sBAAsB,sBAAsB,QAAQ,iBAAiB,QAAQ,cAAc,aAAa,aAAa,YAAY,UAAU,kBAAkB,oBAAoB,gBAAgB,SAAS,YAAY,gBAAgB,QAAQ,UAAU,YAAY,YAAY,kBAAkB,cAAc,QAAQ,IAAI,YAAY,kBAAkB,IAAI,IAAI,WAAW,eAAe,MAAM,oFAAoF,IAAI,OAAO,IAAI,OAAO,UAAU,YAAY,oBAAoB,gBAAgB,MAAM,iBAAiB,OAAO,cAAc,cAAc,YAAY,OAAO,IAAI,OAAO,SAAS,QAAQ,QAAQ,oBAAoB,uBAAuB,cAAc,YAAY,eAAe,IAAI,IAAI,MAAM,UAAU,aAAa,kBAAkB,UAAU,IAAI,OAAO,QAAQ,cAAc,kBAAkB,mBAAmB,mBAAmB,iBAAiB,oBAAoB,8BAA8B,iBAAiB,wBAAwB,IAAI,IAAI,MAAM,iBAAiB,oBAAoB,QAAQ,0BAA0B,UAAU,aAAa,aAAa,UAAU,IAAI,IAAI,MAAM,mBAAmB,mBAAmB,oBAAoB,aAAa,YAAY,OAAO,aAAa,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,kBAAkB,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,MAAM,mBAAmB,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,IAAI,IAAI,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,OAAO,IAAI,IAAI,OAAO,YAAY,oBAAoB,aAAa,mBAAmB,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,mBAAmB,mCAAmC,KAAK,aAAa,aAAa,IAAI,IAAI,MAAM,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,SAAS,qBAAqB,cAAc,YAAY,eAAe,WAAW,uBAAuB,kBAAkB,UAAU,UAAU,cAAc,uBAAuB,IAAI,OAAO,UAAU,UAAU,IAAI,OAAO,uBAAuB,kBAAkB,UAAU,UAAU,cAAc,YAAY,IAAI,OAAO,aAAa,QAAQ,kBAAkB,mBAAmB,kBAAkB,oBAAoB,aAAa,YAAY,OAAO,YAAY,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,8BAA8B,KAAK,UAAU,IAAI,OAAO,KAAK,cAAc,8BAA8B,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,MAAM,mBAAmB,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,YAAY,YAAY,oBAAoB,aAAa,kBAAkB,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,mBAAmB,mCAAmC,KAAK,aAAa,aAAa,QAAQ,KAAK,cAAc,kBAAkB,mBAAmB,iBAAiB,8BAA8B,8BAA8B,iBAAiB,wBAAwB,MAAM,iBAAiB,8BAA8B,QAAQ,0BAA0B,UAAU,aAAa,aAAa,UAAU,SAAS,cAAc,YAAY,uBAAuB,UAAU,IAAI,QAAQ,KAAK,aAAa,cAAc,YAAY,QAAQ,cAAc,OAAO,gBAAgB,YAAY,OAAO,QAAQ,kBAAkB,YAAY,8BAA8B,KAAK,IAAI,KAAK,KAAK,YAAY,kBAAkB,IAAI,UAAU,aAAa,YAAY,aAAa,IAAI,OAAO,QAAQ,4BAA4B,KAAK,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,gBAAgB,aAAa,aAAa,aAAa,YAAY,OAAO,aAAa,YAAY,iBAAiB,oBAAoB,iCAAiC,OAAO,SAAS,qBAAqB,YAAY,YAAY,4BAA4B,IAAI,QAAQ,KAAK,OAAO,KAAK,8BAA8B,KAAK,UAAU,aAAa,aAAa,YAAY,SAAS,SAAS,SAAS,QAAQ,YAAY,YAAY,8BAA8B,aAAa,UAAU,YAAY,aAAa,aAAa,MAAM,UAAU,KAAK,YAAY,UAAU,aAAa,aAAa,YAAY,SAAS,oBAAoB,UAAU,eAAe,KAAK,IAAI,OAAO,SAAS,YAAY,YAAY,aAAa,WAAW,IAAI,OAAO,iBAAiB,MAAM,MAAM,gBAAgB,IAAI,SAAS,qBAAqB,kBAAkB,IAAI,MAAM,iBAAiB,eAAe,kBAAkB,MAAM,QAAQ,MAAM,UAAU,UAAU,KAAK,gBAAgB,4BAA4B,kCAAkC,OAAO,eAAe,SAAS,IAAI,WAAW,eAAe,MAAM,iBAAiB,uBAAuB,aAAa,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,gDAAgD,IAAI,aAAa,kBAAkB,IAAI,IAAI,IAAI,IAAI,WAAW,QAAQ,UAAU,GAAG,YAAY,0BAA0B,YAAY,YAAY,eAAe,oBAAoB,2BAA2B,sBAAsB,YAAY,0BAA0B,YAAY,YAAY,MAAM,KAAK,UAAU,OAAO,SAAS,SAAS,WAAW,8BAA8B,YAAY,0BAA0B,YAAY,YAAY,eAAe,uBAAuB,IAAI,KAAK,MAAM,KAAK,KAAK,MAAM,YAAY,0BAA0B,YAAY,YAAY,eAAe,wBAAwB,iBAAiB,8BAA8B,OAAO,QAAQ,IAAI,IAAI,IAAI,IAAI,WAAW,MAAM,IAAI,IAAI,IAAI,IAAI,WAAW,wBAAwB,IAAI,IAAI,IAAI,IAAI,WAAW,KAAK,KAAK,MAAM,KAAK,SAAS,mCAAmC,KAAK,qCAAqC,QAAQ,kBAAkB,IAAI,IAAI,IAAI,IAAI,YAAY,SAAS,2BAA2B,WAAW,aAAa,IAAI,GAAG,eAAe,YAAY,0BAA0B,YAAY,YAAY,eAAe,WAAW,gCAAgC,IAAI,KAAK,IAAI,IAAI,WAAW,aAAa,GAAG,qBAAqB,IAAI,oBAAoB,KAAK,+CAA+C,wBAAwB,IAAI,YAAY,0BAA0B,YAAY,YAAY,eAAe,WAAW,oEAAoE,aAAa,KAAK,OAAO,UAAU,mBAAmB,eAAe,gCAAgC,iBAAiB,QAAQ,gBAAgB,IAAI,IAAI,GAAG,SAAS,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,QAAQ,mCAAmC,IAAI,KAAK,IAAI,IAAI,IAAI,kBAAkB,IAAI,8DAA8D,IAAI,KAAK,MAAM,SAAS,oBAAoB,IAAI,UAAU,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,8DAA8D,IAAI,KAAK,UAAU,iBAAiB,QAAQ,gBAAgB,IAAI,GAAG,kBAAkB,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,QAAQ,mCAAmC,IAAI,KAAK,IAAI,IAAI,IAAI,sBAAsB,oBAAoB,IAAI,SAAS,yCAAyC,IAAI,KAAK,QAAQ,sBAAsB,IAAI,QAAQ,4CAA4C,IAAI,KAAK,QAAQ,sBAAsB,IAAI,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,uBAAuB,IAAI,KAAK,QAAQ,KAAK,IAAI,MAAM,SAAS,4CAA4C,GAAG,YAAY,0BAA0B,YAAY,YAAY,eAAe,kCAAkC,kBAAkB,IAAI,IAAI,qCAAqC,4CAA4C,gCAAgC,kBAAkB,sBAAsB,IAAI,IAAI,IAAI,WAAW,yCAAyC,kBAAkB,IAAI,IAAI,IAAI,IAAI,YAAY,oBAAoB,4BAA4B,IAAI,IAAI,IAAI;;;;AAIxs9G,mBAAmB,MAAM,MAAM,MAAM,gIAAgI,IAAI,UAAU,IAAI,OAAO,KAAK,OAAO,kBAAkB,KAAK,QAAQ,kBAAkB,KAAK,QAAQ,KAAK,MAAM,IAAI,SAAS,QAAQ,UAAU,GAAG,YAAY,0BAA0B,YAAY,YAAY,eAAe,oBAAoB,2BAA2B,yBAAyB,YAAY,0BAA0B,YAAY,YAAY,MAAM,KAAK,UAAU,OAAO,SAAS,SAAS,IAAI,GAAG,oCAAoC,eAAe,YAAY,0BAA0B,YAAY,YAAY,MAAM,KAAK,UAAU,OAAO,SAAS,QAAQ,eAAe,oBAAoB,kBAAkB,WAAW,+BAA+B,KAAK,KAAK,MAAM,YAAY,IAAI,GAAG,sCAAsC,eAAe,YAAY,0BAA0B,YAAY,YAAY,MAAM,KAAK,UAAU,OAAO,SAAS,QAAQ,eAAe,SAAS,OAAO,iBAAiB,YAAY,0BAA0B,YAAY,YAAY,eAAe,kBAAkB,iBAAiB,KAAK,MAAM,wBAAwB,KAAK,MAAM,YAAY,0BAA0B,YAAY,YAAY,IAAI,KAAK,UAAU,IAAI,SAAS,cAAc,KAAK,MAAM,mBAAmB,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,MAAM,MAAM,YAAY,0BAA0B,YAAY,YAAY,IAAI,SAAS,KAAK,UAAU,IAAI,UAAU,cAAc,YAAY,0BAA0B,YAAY,YAAY,eAAe,cAAc,IAAI,IAAI,GAAG,YAAY,0BAA0B,YAAY,YAAY,eAAe,sBAAsB,IAAI,iBAAiB,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,MAAM,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,IAAI,OAAO,WAAW,WAAW,iBAAiB,OAAO,YAAY,iCAAiC,YAAY,IAAI,IAAI,IAAI,MAAM,KAAK,KAAK,QAAQ,KAAK,sBAAsB,KAAK,OAAO,UAAU,SAAS,cAAc,IAAI,mCAAmC,8BAA8B,UAAU,IAAI,aAAa,MAAM,yBAAyB,KAAK,IAAI,IAAI,UAAU,KAAK,IAAI,aAAa,SAAS,oBAAoB,IAAI,IAAI,IAAI,YAAY,0BAA0B,YAAY,YAAY,SAAS,KAAK,UAAU,UAAU,OAAO,iBAAiB,8BAA8B,MAAM,2DAA2D,aAAa,aAAa,IAAI,SAAS,WAAW,QAAQ,QAAQ,+BAA+B,OAAO,oBAAoB,IAAI,gCAAgC,qBAAqB,YAAY,IAAI,sCAAsC,QAAQ,MAAM,IAAI,SAAS,KAAK,iBAAiB,IAAI,IAAI,MAAM,wBAAwB,IAAI,IAAI,OAAO,sBAAsB,IAAI,IAAI,KAAK,wBAAwB,IAAI,IAAI,SAAS,kBAAkB,uBAAuB,wBAAwB,IAAI,OAAO,aAAa,IAAI,SAAS,uCAAuC,kBAAkB,yDAAyD,IAAI,SAAS,YAAY,oBAAoB,yCAAyC,kBAAkB,yDAAyD,IAAI,SAAS,eAAe,OAAO,gBAAgB,KAAK,SAAS,MAAM,MAAM,sBAAsB,IAAI,gBAAgB,qCAAqC,wBAAwB,IAAI,4CAA4C,IAAI,MAAM,KAAK,IAAI,MAAM,WAAW,gCAAgC,KAAK,IAAI,SAAS,MAAM,eAAe,SAAS,IAAI,IAAI,6BAA6B,6BAA6B,yCAAyC,+BAA+B,WAAW,IAAI,SAAS,SAAS,QAAQ,QAAQ,IAAI,SAAS,cAAc,MAAM,MAAM,mBAAmB,IAAI,IAAI,IAAI,MAAM,YAAY,0BAA0B,YAAY,YAAY,IAAI,SAAS,KAAK,UAAU,IAAI,UAAU,eAAe,YAAY,0BAA0B,YAAY,YAAY,eAAe,cAAc,IAAI,IAAI,GAAG,sBAAsB,IAAI,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,UAAU,WAAW,YAAY,oBAAoB,UAAU,IAAI,IAAI,IAAI,IAAI,IAAI,WAAW,eAAe,IAAI,IAAI,IAAI,aAAa,KAAK,oBAAoB,IAAI,YAAY,eAAe,OAAO,IAAI,MAAM,kBAAkB,IAAI,MAAM,aAAa,mCAAmC,UAAU,QAAQ,WAAW,IAAI,IAAI,QAAQ,YAAY,QAAQ,SAAS,YAAY,0BAA0B,YAAY,YAAY,eAAe,WAAW,YAAY,kBAAkB,MAAM,SAAS,WAAW,MAAM,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,MAAM,SAAS,kBAAkB,WAAW,QAAQ,QAAQ,WAAW,mCAAmC,MAAM,MAAM,KAAK,MAAM,MAAM,YAAY,IAAI,yCAAyC,QAAQ,MAAM,IAAI,SAAS,KAAK,iBAAiB,IAAI,IAAI,MAAM,wBAAwB,IAAI,IAAI,MAAM,SAAS,wBAAwB,IAAI,SAAS,4BAA4B,wBAAwB,SAAS,WAAW,WAAW,uBAAuB,WAAW,eAAe,kBAAkB,QAAQ,MAAM,IAAI,SAAS,YAAY,OAAO,aAAa,IAAI,SAAS,kFAAkF,kBAAkB,IAAI,SAAS,aAAa,oBAAoB,yCAAyC,kBAAkB,yDAAyD,IAAI,SAAS,YAAY,oBAAoB,yCAAyC,kBAAkB,yDAAyD,IAAI,SAAS,MAAM,YAAY,aAAa,YAAY,GAAG,SAAS,QAAQ,gBAAgB,UAAU,QAAQ,oCAAoC,aAAa,4BAA4B,IAAI,SAAS,YAAY,qDAAqD,IAAI,SAAS,sBAAsB,YAAY,0BAA0B,8CAA8C,IAAI,UAAU,YAAY,OAAO,IAAI,IAAI,KAAK,mBAAmB,wBAAwB,MAAM,cAAc,IAAI,IAAI,IAAI,GAAG,aAAa,YAAY,0BAA0B,UAAU,4BAA4B,IAAI,QAAQ,0BAA0B,QAAQ,WAAW,oBAAoB,MAAM,iBAAiB,SAAS,KAAK,IAAI,IAAI,IAAI,UAAU,WAAW,aAAa,aAAa,GAAG,IAAI,UAAU,SAAS,QAAQ,aAAa,uBAAuB,sBAAsB,IAAI,+BAA+B,sBAAsB,sBAAsB,IAAI,SAAS,UAAU,eAAe,4CAA4C,WAAW,eAAe,WAAW,gBAAgB,KAAK,mBAAmB,GAAG,6BAA6B,KAAK,QAAQ,IAAI,UAAU,SAAS,QAAQ,aAAa,uBAAuB,sBAAsB,IAAI,+BAA+B,sBAAsB,sBAAsB,IAAI,SAAS,UAAU,eAAe,4CAA4C,WAAW,eAAe,WAAW,gBAAgB,YAAY,iBAAiB,YAAY,uBAAuB,+BAA+B,IAAI,iBAAiB,QAAQ,WAAW,UAAU,uBAAuB,SAAS,YAAY,eAAe,SAAS,IAAI,SAAS,UAAU,iBAAiB,IAAI,MAAM,mBAAmB,sBAAsB,gBAAgB,IAAI,MAAM,QAAQ,qBAAqB,eAAe,KAAK,IAAI,OAAO,sBAAsB,QAAQ,oBAAoB,WAAW,eAAe,UAAU,IAAI,IAAI,GAAG,aAAa,YAAY,cAAc,UAAU,cAAc,wBAAwB,UAAU,cAAc,QAAQ,oBAAoB,OAAO,IAAI,SAAS,sBAAsB,kBAAkB,IAAI,iBAAiB,IAAI,IAAI,QAAQ,iBAAiB,qBAAqB,IAAI,4BAA4B,UAAU,iBAAiB,UAAU,qBAAqB,SAAS,yCAAyC,SAAS,QAAQ,2BAA2B,IAAI,IAAI,MAAM,KAAK,IAAI,IAAI,MAAM,KAAK,IAAI,MAAM,gCAAgC,KAAK,MAAM,MAAM,eAAe,8BAA8B,6BAA6B,IAAI,IAAI,UAAU,UAAU,oBAAoB,mBAAmB,kBAAkB,cAAc,UAAU,MAAM,uBAAuB,SAAS,MAAM,KAAK,UAAU,OAAO,KAAK,uCAAuC,UAAU,SAAS,qBAAqB,0BAA0B,QAAQ,SAAS,QAAQ,iCAAiC,+BAA+B,4BAA4B,QAAQ,OAAO,8CAA8C,kBAAkB,SAAS,WAAW,IAAI,SAAS,kBAAkB,YAAY,0BAA0B,YAAY,YAAY,eAAe,iBAAiB,KAAK,iBAAiB,IAAI,IAAI,SAAS,wBAAwB,IAAI,IAAI,SAAS,SAAS,YAAY,0BAA0B,YAAY,YAAY,eAAe,iFAAiF,QAAQ,cAAc,IAAI,IAAI,SAAS,iBAAiB,8BAA8B,OAAO,kBAAkB,QAAQ,MAAM,IAAI,SAAS,eAAe,IAAI,IAAI,SAAS,GAAG,UAAU,wBAAwB,gBAAgB,IAAI,IAAI,SAAS,KAAK,qCAAqC,kBAAkB,QAAQ,MAAM,IAAI,UAAU,SAAS,cAAc,iBAAiB,8BAA8B,4BAA4B,wBAAwB,UAAU,eAAe,WAAW,IAAI,SAAS,iBAAiB,MAAM,MAAM,oBAAoB,IAAI,cAAc,cAAc,cAAc,QAAQ,cAAc,yBAAyB,gBAAgB,IAAI,OAAO,KAAK,cAAc,IAAI,QAAQ,eAAe,MAAM,gCAAgC,IAAI,UAAU,YAAY,4CAA4C,oCAAoC,YAAY,cAAc,sFAAsF,mBAAmB,cAAc,MAAM,UAAU,0BAA0B,UAAU,yBAAyB,IAAI,IAAI,WAAW,UAAU,IAAI,IAAI,WAAW,cAAc,KAAK,IAAI,WAAW,iBAAiB,KAAK,MAAM,YAAY,IAAI,eAAe,0BAA0B,aAAa,eAAe,aAAa,oBAAoB,0BAA0B,SAAS,qBAAqB,4BAA4B,WAAW,gBAAgB,WAAW,sBAAsB,4BAA4B,SAAS,sBAAsB,IAAI,UAAU,YAAY,aAAa,IAAI,SAAS,iBAAiB,KAAK,MAAM,QAAQ,IAAI,WAAW,IAAI,SAAS,eAAe,MAAM,gBAAgB,IAAI,SAAS,YAAY,gBAAgB,SAAS,SAAS,6DAA6D,aAAa,aAAa,UAAU,YAAY,YAAY,YAAY,YAAY,YAAY,IAAI,IAAI,WAAW,WAAW,KAAK,IAAI,WAAW,aAAa,KAAK,IAAI,WAAW,eAAe,MAAM,YAAY,IAAI,SAAS,IAAI,wCAAwC,mDAAmD,UAAU,IAAI,WAAW,iBAAiB,MAAM,MAAM,0BAA0B,IAAI,UAAU,IAAI,QAAQ,UAAU,GAAG,UAAU,QAAQ,mBAAmB,QAAQ,UAAU,QAAQ,WAAW,aAAa,cAAc,QAAQ,aAAa,4CAA4C,OAAO,IAAI,SAAS,aAAa,UAAU,IAAI,SAAS,mBAAmB,MAAM,MAAM,MAAM,gBAAgB,IAAI,UAAU,IAAI,UAAU,QAAQ,UAAU,aAAa,wBAAwB,4BAA4B,cAAc,QAAQ,4BAA4B,OAAO,IAAI,WAAW,sDAAsD,IAAI,WAAW,iBAAiB,MAAM,MAAM,gBAAgB,IAAI,YAAY,YAAY,2CAA2C,KAAK,GAAG,QAAQ,QAAQ,YAAY,YAAY,8CAA8C,IAAI,IAAI,wBAAwB,iBAAiB,MAAM,MAAM,4DAA4D,IAAI,QAAQ,YAAY,OAAO,QAAQ,YAAY,MAAM,6CAA6C,YAAY,YAAY,eAAe,OAAO,cAAc,IAAI,IAAI,WAAW,qDAAqD,IAAI,IAAI,WAAW,IAAI,IAAI,WAAW,iBAAiB,QAAQ,cAAc,IAAI,IAAI,WAAW,gBAAgB,kBAAkB,kBAAkB,YAAY,IAAI,IAAI,WAAW,uBAAuB,kBAAkB,iBAAiB,IAAI,IAAI,WAAW,QAAQ,gBAAgB,kBAAkB,YAAY,UAAU,IAAI,IAAI,WAAW,uBAAuB,kBAAkB,gBAAgB,IAAI,IAAI,WAAW,QAAQ,aAAa,gBAAgB,kBAAkB,YAAY,YAAY,mBAAmB,QAAQ,KAAK,gBAAgB,YAAY,kBAAkB,IAAI,IAAI,UAAU,UAAU,IAAI,IAAI,WAAW,QAAQ,IAAI,IAAI,WAAW,aAAa,gBAAgB,IAAI,IAAI,WAAW,QAAQ,QAAQ,kBAAkB,mBAAmB,mBAAmB,oBAAoB,aAAa,YAAY,OAAO,aAAa,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,kBAAkB,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,MAAM,mBAAmB,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,YAAY,YAAY,oBAAoB,aAAa,mBAAmB,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,mBAAmB,mCAAmC,KAAK,aAAa,aAAa,QAAQ,KAAK,kBAAkB,mBAAmB,mBAAmB,iBAAiB,oBAAoB,8BAA8B,iBAAiB,wBAAwB,MAAM,iBAAiB,oBAAoB,QAAQ,0BAA0B,UAAU,aAAa,aAAa,UAAU,SAAS,aAAa,gBAAgB,YAAY,kBAAkB,IAAI,IAAI,WAAW,KAAK,gBAAgB,kBAAkB,YAAY,kBAAkB,YAAY,IAAI,IAAI,WAAW,SAAS,iBAAiB,MAAM,MAAM,4EAA4E,IAAI,QAAQ,cAAc,cAAc,YAAY,WAAW,IAAI,OAAO,YAAY,QAAQ,YAAY,oBAAoB,uBAAuB,YAAY,YAAY,eAAe,IAAI,IAAI,MAAM,UAAU,aAAa,kBAAkB,UAAU,IAAI,OAAO,QAAQ,cAAc,kBAAkB,mBAAmB,mBAAmB,iBAAiB,oBAAoB,8BAA8B,iBAAiB,wBAAwB,IAAI,IAAI,MAAM,iBAAiB,oBAAoB,QAAQ,0BAA0B,UAAU,aAAa,aAAa,UAAU,IAAI,IAAI,MAAM,mBAAmB,mBAAmB,oBAAoB,SAAS,YAAY,YAAY,OAAO,QAAQ,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,kBAAkB,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,MAAM,mBAAmB,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,IAAI,IAAI,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,OAAO,IAAI,IAAI,OAAO,YAAY,oBAAoB,aAAa,SAAS,cAAc,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,kBAAkB,mCAAmC,KAAK,aAAa,aAAa,IAAI,IAAI,MAAM,KAAK,IAAI,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,SAAS,YAAY,oBAAoB,YAAY,YAAY,WAAW,uBAAuB,kBAAkB,UAAU,UAAU,cAAc,uBAAuB,IAAI,OAAO,UAAU,UAAU,IAAI,OAAO,uBAAuB,kBAAkB,UAAU,UAAU,cAAc,YAAY,IAAI,OAAO,aAAa,QAAQ,kBAAkB,mBAAmB,mBAAmB,oBAAoB,aAAa,YAAY,OAAO,aAAa,YAAY,OAAO,IAAI,OAAO,SAAS,SAAS,YAAY,MAAM,IAAI,IAAI,SAAS,SAAS,YAAY,YAAY,KAAK,IAAI,KAAK,oBAAoB,KAAK,UAAU,IAAI,OAAO,KAAK,kBAAkB,oBAAoB,SAAS,2BAA2B,QAAQ,uBAAuB,UAAU,UAAU,IAAI,MAAM,UAAU,SAAS,MAAM,mBAAmB,gBAAgB,uBAAuB,UAAU,OAAO,wBAAwB,OAAO,KAAK,8BAA8B,SAAS,gCAAgC,kBAAkB,YAAY,YAAY,oBAAoB,aAAa,mBAAmB,4BAA4B,KAAK,aAAa,aAAa,MAAM,SAAS,mBAAmB,mCAAmC,KAAK,aAAa,aAAa,QAAQ,KAAK,kBAAkB,mBAAmB,mBAAmB,iBAAiB,oBAAoB,8BAA8B,iBAAiB,wBAAwB,MAAM,iBAAiB,oBAAoB,QAAQ,0BAA0B,UAAU,aAAa,aAAa,UAAU,SAAS,cAAc,YAAY,uBAAuB,UAAU,IAAI,QAAQ,KAAK,aAAa,cAAc,YAAY,QAAQ,cAAc,OAAO,gBAAgB,YAAY,OAAO,QAAQ,kBAAkB,YAAY,8BAA8B,KAAK,IAAI,KAAK,KAAK,YAAY,kBAAkB,IAAI,UAAU,aAAa,YAAY,aAAa,IAAI,OAAO,QAAQ,4BAA4B,KAAK,uBAAuB,OAAO,sBAAsB,OAAO,sBAAsB,2BAA2B,qBAAqB,SAAS,gBAAgB,aAAa,aAAa,aAAa,YAAY,OAAO,WAAW,YAAY,UAAU,aAAa,aAAa,YAAY,IAAI,OAAO,YAAY,iBAAiB,oBAAoB,iCAAiC,OAAO,IAAI,SAAS,qBAAqB,YAAY,YAAY,mCAAmC,KAAK,OAAO,KAAK,8BAA8B,UAAU,aAAa,aAAa,YAAY,IAAI,OAAO,SAAS,QAAQ,YAAY,YAAY,qCAAqC,aAAa,UAAU,YAAY,aAAa,aAAa,IAAI,OAAO,iBAAiB,MAAM,MAAM,4BAA4B,IAAI,QAAQ,YAAY,UAAU,0BAA0B,YAAY,YAAY,eAAe,wBAAwB,YAAY,cAAc,0BAA0B,YAAY,YAAY,eAAe,sEAAsE,SAAS,qBAAqB,iBAAiB,cAAc,IAAI,IAAI,IAAI,WAAW,wBAAwB,cAAc,IAAI,IAAI,IAAI,WAAW,SAAS,GAAG,oBAAoB,YAAY,0BAA0B,YAAY,YAAY,eAAe,yCAAyC,oBAAoB,wBAAwB,qBAAqB,IAAI,uCAAuC,wBAAwB,IAAI,YAAY,0BAA0B,YAAY,YAAY,eAAe,2EAA2E,wBAAwB,YAAY,0BAA0B,YAAY,YAAY,eAAe,yBAAyB,qCAAqC,WAAW,oBAAoB,QAAQ,QAAQ,IAAI,IAAI,WAAW,eAAe,qBAAqB,MAAM,MAAM,MAAM,MAAM,0BAA0B,wBAAwB,mBAAmB,MAAM,MAAM,MAAM,oBAAoB,QAAQ,cAAc,QAAQ,MAAM,qBAAqB,OAAO,MAAM,UAAU,mBAAmB,UAAU,SAAS,mBAAmB,UAAU,SAAS,mBAAmB,UAAU,QAAQ,aAAa,mBAAmB,MAAM,MAAM,MAAM,aAAa,iCAAiC,YAAY,UAAU,SAAS,eAAe,MAAM,QAAQ,IAAI,wBAAwB,aAAa,qBAAqB,MAAM,MAAM,MAAM,MAAM,UAAU,wCAAwC,mBAAmB,MAAM,MAAM,MAAM,aAAa,QAAQ,gCAAgC,IAAI,kBAAkB,mBAAmB,MAAM,MAAM,MAAM,QAAQ,wCAAwC,MAAM,iBAAiB,WAAW,iBAAiB,kBAAkB,QAAQ,QAAQ,QAAQ,gBAAgB,gBAAgB,QAAQ,QAAQ,SAAS,eAAe,kBAAkB,QAAQ,QAAQ,QAAQ,WAAW,mBAAmB,MAAM,MAAM,MAAM,aAAa,OAAO,gCAAgC,eAAe,iBAAiB,eAAe,MAAM,QAAQ,qBAAqB,sBAAsB,wBAAwB,wBAAwB,uBAAuB,yBAAyB,+BAA+B,eAAe,MAAM,QAAQ,oBAAoB,sBAAsB,uBAAuB,wBAAwB,wBAAwB,yBAAyB,gCAAgC,iBAAiB,MAAM,MAAM,oBAAoB,UAAU,UAAU,YAAY,SAAS,yBAAyB,SAAS,YAAY,4EAA4E,qBAAqB,MAAM,MAAM,MAAM,MAAM,4BAA4B,0BAA0B,uCAAuC,0BAA0B,uCAAuC,oBAAoB,IAAI,MAAM,MAAM,oDAAoD,WAAW,qBAAqB,MAAM,MAAM,MAAM,MAAM,4BAA4B,IAAI,QAAQ,MAAM,0BAA0B,uCAAuC,0BAA0B,uCAAuC,oBAAoB,IAAI,gCAAgC,kCAAkC,IAAI,IAAI,gBAAgB,qBAAqB,MAAM,MAAM,MAAM,MAAM,YAAY,IAAI,IAAI,YAAY,IAAI,gDAAgD,qBAAqB,MAAM,MAAM,MAAM,MAAM,kBAAkB,WAAW,qBAAqB,MAAM,MAAM,MAAM,MAAM,YAAY,IAAI,QAAQ,MAAM,gBAAgB,IAAI,kCAAkC,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,4CAA4C,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,OAAO,WAAW,OAAO,MAAM,wBAAwB,YAAY,IAAI,sBAAsB,gBAAgB,KAAK,OAAO,IAAI,IAAI,gBAAgB,YAAY,cAAc,IAAI,IAAI,iBAAiB,WAAW,SAAS,OAAO,4BAA4B,cAAc,QAAQ,SAAS,WAAW,IAAI,qBAAqB,gBAAgB,IAAI,OAAO,MAAM,OAAO,IAAI,IAAI,gBAAgB,YAAY,gBAAgB,IAAI,IAAI,gBAAgB,QAAQ,QAAQ,+BAA+B,SAAS,SAAS,QAAQ,SAAS,QAAQ,IAAI,2CAA2C,gBAAgB,SAAS,qCAAqC,MAAM,MAAM,YAAY,YAAY,aAAa,QAAQ,QAAQ,gBAAgB,KAAK,YAAY,gBAAgB,wBAAwB,iBAAiB,KAAK,MAAM,MAAM,wBAAwB,YAAY,IAAI,sBAAsB,gBAAgB,OAAO,MAAM,UAAU,0BAA0B,IAAI,sBAAsB,gBAAgB,QAAQ,WAAW,MAAM,YAAY,kBAAkB,IAAI,wBAAwB,gBAAgB,4BAA4B,cAAc,QAAQ,SAAS,IAAI,mBAAmB,cAAc,IAAI,OAAO,MAAM,OAAO,IAAI,IAAI,gBAAgB,YAAY,gBAAgB,IAAI,IAAI,gBAAgB,SAAS,OAAO,IAAI,IAAI,IAAI,KAAK,QAAQ,QAAQ,kBAAkB,IAAI,IAAI,GAAG,IAAI,cAAc,SAAS,gBAAgB,gBAAgB,cAAc,IAAI,0BAA0B,MAAM,yDAAyD,IAAI,QAAQ,gBAAgB,IAAI,IAAI,IAAI,MAAM,UAAU,YAAY,wCAAwC,qBAAqB,gBAAgB,qBAAqB,MAAM,MAAM,MAAM,MAAM,8BAA8B,yBAAyB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,6BAA6B,iBAAiB,MAAM,MAAM,cAAc,mBAAmB,MAAM,MAAM,MAAM,iBAAiB,iBAAiB,MAAM,MAAM,sBAAsB,eAAe,MAAM,UAAU,2BAA2B,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,iCAAiC,mBAAmB,MAAM,MAAM,MAAM,0BAA0B,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,yBAAyB,mBAAmB,MAAM,MAAM,MAAM,MAAM,SAAS,uBAAuB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,eAAe,MAAM,MAAM,iBAAiB,MAAM,MAAM,MAAM,eAAe,MAAM,MAAM,SAAS,cAAc,MAAM,cAAc,KAAK,yBAAyB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,iBAAiB,MAAM,MAAM,MAAM,SAAS,qBAAqB,MAAM,MAAM,MAAM,MAAM;;;;;AAK5hyB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAqB,yGAAyG,qBAAqB,eAAe,qBAAqB,qBAAqB,qBAAqB,qBAAqB,OAAO,+nBAA+nB;;;AAG34B;AACA,kDAAkD,iCAAiC,6CAA6C,sDAAsD,qEAAqE,uCAAuC,0CAA0C,kEAAkE,4DAA4D,0FAA0F,6CAA6C,yDAAyD,6CAA6C,0FAA0F,sDAAsD,4DAA4D,wEAAwE,gDAAgD,6CAA6C,kEAAkE,wEAAwE,sDAAsD,8EAA8E,uCAAuC,6CAA6C,+DAA+D,wEAAwE,yDAAyD,4DAA4D,kEAAkE,sDAAsD,yDAAyD,sDAAsD,mDAAmD,qEAAqE,yDAAyD,+DAA+D,qCAAqC,mCAAmC,yCAAyC,uCAAuC,uCAAuC,wBAAwB,UAAU,SAAS,mCAAmC,gBAAgB,kBAAkB,EAAE,4BAA4B,wCAAwC,2BAA2B,8CAA8C,cAAc,kBAAkB,iDAAiD,2BAA2B,oCAAoC,WAAW,EAAE,2CAA2C,mCAAmC,2BAA2B,gDAAgD,gCAAgC,iDAAiD,gCAAgC,iBAAiB,kDAAkD,KAAK,0GAA0G,EAAE,oDAAoD,4CAA4C,EAAE,mDAAmD,kBAAkB,iDAAiD,wBAAwB,sBAAsB,0CAA0C,uBAAuB,kEAAkE,6BAA6B,iEAAiE,8DAA8D,+BAA+B,YAAY,aAAa,MAAM,kCAAkC,kDAAkD,WAAW,0DAA0D,oEAAoE,KAAK,qCAAqC,qDAAqD,cAAc,EAAE,qCAAqC,qCAAqC,6FAA6F,gEAAgE,6FAA6F,6FAA6F,gEAAgE,8CAA8C,6CAA6C,kDAAkD,4EAA4E,iEAAiE,yDAAyD,2CAA2C,iBAAiB,EAAE,8CAA8C,2EAA2E,EAAE,uDAAuD,wBAAwB,sBAAsB,0CAA0C,kBAAkB,UAAU,sBAAsB,0CAA0C,+CAA+C,4BAA4B,+CAA+C,uDAAuD,KAAK,yCAAyC,8DAA8D,aAAa,cAAc,YAAY,iCAAiC,+DAA+D,kCAAkC,WAAW,iBAAiB,qBAAqB,KAAK,uBAAuB,kBAAkB,0BAA0B,EAAE,iDAAiD,kBAAkB,EAAE,gDAAgD,iBAAiB,EAAE,wDAAwD,uEAAuE,EAAE,mDAAmD,sBAAsB,0CAA0C,UAAU,KAAK,sCAAsC,KAAK,2CAA2C,eAAe,MAAM,OAAO,oBAAoB,OAAO,mCAAmC,EAAE,4CAA4C,mCAAmC,EAAE,gDAAgD,oBAAoB,EAAE,2CAA2C,uBAAuB,EAAE,iDAAiD,sDAAsD,EAAE,oDAAoD,sDAAsD,EAAE,mDAAmD,6BAA6B,EAAE,0DAA0D,8BAA8B,EAAE,sDAAsD,6BAA6B,EAAE,6DAA6D,8BAA8B,EAAE,kDAAkD,uBAAuB,SAAS,8BAA8B,gCAAgC,uBAAuB,SAAS,uBAAuB,SAAS,sCAAsC,SAAS,KAAK,UAAU,EAAE,4CAA4C,0CAA0C,gCAAgC,KAAK,2CAA2C,EAAE,8CAA8C,wBAAwB,yBAAyB,uBAAuB,wBAAwB,yBAAyB,0BAA0B,wBAAwB,yBAAyB,4BAA4B,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,WAAW,wDAAwD,EAAE,mDAAmD,gCAAgC,EAAE,mDAAmD,kBAAkB,2BAA2B,wBAAwB,2BAA2B,0CAA0C,kEAAkE,gDAAgD,iEAAiE,sBAAsB,uBAAuB,8CAA8C,KAAK,+CAA+C,4BAA4B,8CAA8C,0FAA0F,mEAAmE,wBAAwB,yBAAyB,uBAAuB,wBAAwB,yBAAyB,0BAA0B,wBAAwB,yBAAyB,4BAA4B,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,aAAa,cAAc,WAAW,qCAAqC,WAAW,wDAAwD,EAAE,8CAA8C,mBAAmB,gCAAgC,uBAAuB,2BAA2B,0CAA0C,2EAA2E,gCAAgC,gDAAgD,0BAA0B,KAAK,gCAAgC,4CAA4C,uCAAuC,oEAAoE,KAAK,8CAA8C,sCAAsC,gBAAgB,gDAAgD,2BAA2B,sBAAsB,uBAAuB,yCAAyC,KAAK,0CAA0C,4BAA4B,yCAAyC,4BAA4B,aAAa,qCAAqC,mEAAmE,8CAA8C,yCAAyC,gDAAgD,wCAAwC,0DAA0D,cAAc,4CAA4C,oCAAoC,uBAAuB,6BAA6B,uBAAuB,4BAA4B,WAAW,EAAE,iDAAiD,sDAAsD,EAAE,yCAAyC,uDAAuD,EAAE,8CAA8C,4EAA4E,EAAE,6CAA6C,4EAA4E,EAAE,8CAA8C,4EAA4E,EAAE,sDAAsD,YAAY,eAAe,YAAY,KAAK,kBAAkB,eAAe,oBAAoB,4EAA4E,KAAK,oDAAoD,EAAE,uDAAuD,YAAY,eAAe,YAAY,KAAK,oBAAoB,eAAe,kBAAkB,6EAA6E,KAAK,gEAAgE,EAAE,+DAA+D,YAAY,eAAe,YAAY,KAAK,oBAAoB,eAAe,kBAAkB,8EAA8E,qBAAqB,uCAAuC,KAAK,sDAAsD,EAAE,eAAe,0BAA0B,UAAU,0BAA0B,qCAAqC,2BAA2B,wDAAwD,2DAA2D,0BAA0B,eAAe,4BAA4B,0BAA0B,cAAc,yBAAyB,yBAAyB,kBAAkB,SAAS,0BAA0B,wBAAwB,cAAc,oBAAoB,oBAAoB,gBAAgB,2CAA2C,kCAAkC,oBAAoB,SAAS,0BAA0B,wBAAwB,cAAc,oBAAoB,oBAAoB,gBAAgB,8BAA8B,uBAAuB,mBAAmB,SAAS,2DAA2D,4BAA4B,SAAS,6CAA6C,4BAA4B,SAAS,KAAK,4BAA4B,SAAS,8BAA8B,qCAAqC,iCAAiC,aAAa,0CAA0C,oCAAoC,sCAAsC,iDAAiD,oBAAoB,UAAU,qBAAqB,SAAS,MAAM,oBAAoB,qBAAqB,UAAU,MAAM,oBAAoB,qBAAqB,UAAU,MAAM,oBAAoB,qBAAqB,uBAAuB,oBAAoB,6BAA6B,oBAAoB,sBAAsB,mBAAmB,KAAK,iBAAiB,WAAW,WAAW,uBAAuB,SAAS,gBAAgB,iBAAiB,0BAA0B,cAAc,gBAAgB,YAAY,aAAa,SAAS,4BAA4B,MAAM,aAAa,iBAAiB,mBAAmB,iBAAiB,kBAAkB,iBAAiB,KAAK,oBAAoB,OAAO,SAAS,SAAS,6BAA6B,cAAc,+BAA+B,QAAQ,4BAA4B,SAAS,SAAS,0BAA0B,sBAAsB,0CAA0C,6BAA6B,2BAA2B,MAAM,2BAA2B,wBAAwB,UAAU,8CAA8C,aAAa,uCAAuC,oBAAoB,qBAAqB,2CAA2C,uBAAuB,gDAAgD,MAAM,aAAa,iBAAiB,iBAAiB,kBAAkB,iBAAiB,4BAA4B,wCAAwC,0BAA0B,UAAU,gCAAgC,OAAO,cAAc,YAAY,QAAQ,0BAA0B,6BAA6B,KAAK,qBAAqB,SAAS,WAAW,KAAK,cAAc,qBAAqB,eAAe,oBAAoB,YAAY,8BAA8B,SAAS,iBAAiB,mCAAmC,wBAAwB,iBAAiB,iBAAiB,aAAa,QAAQ,6BAA6B,6CAA6C,SAAS,kBAAkB,UAAU,kBAAkB,IAAI,MAAM,gBAAgB,IAAI,KAAK,gBAAgB,IAAI,KAAK,gBAAgB,IAAI,KAAK,gBAAgB,IAAI,KAAK,SAAS,uBAAuB,sBAAsB,+DAA+D,2BAA2B,MAAM,eAAe,KAAK,mBAAmB,UAAU,KAAK,WAAW,aAAa,WAAW,2BAA2B,YAAY,SAAS,mBAAmB,yBAAyB,WAAW,0BAA0B,iBAAiB,mBAAmB,kBAAkB,oDAAoD,eAAe,KAAK,KAAK,yBAAyB,mBAAmB,WAAW,KAAK,WAAW,QAAQ,gBAAgB,WAAW,UAAU,0BAA0B,WAAW,6BAA6B,eAAe,MAAM,OAAO,iBAAiB,mBAAmB,iBAAiB,kBAAkB,eAAe,SAAS,KAAK,6BAA6B,oBAAoB,yCAAyC,cAAc,UAAU,uBAAuB,mCAAmC,WAAW,gBAAgB,iBAAiB,YAAY,eAAe,OAAO,gBAAgB,WAAW,iBAAiB,YAAY,UAAU,KAAK,UAAU,aAAa,QAAQ,iBAAiB,YAAY,OAAO,aAAa,yBAAyB,qBAAqB,MAAM,UAAU,4BAA4B,2BAA2B,UAAU,UAAU,oBAAoB,QAAQ,MAAM,oCAAoC,MAAM,UAAU,0CAA0C,wBAAwB,iBAAiB,gBAAgB,oBAAoB,QAAQ,QAAQ,KAAK,6BAA6B,yDAAyD,eAAe,cAAc,0CAA0C,MAAM,UAAU,4BAA4B,eAAe,kBAAkB,kBAAkB,cAAc,wBAAwB,0BAA0B,OAAO,mBAAmB,6BAA6B,kCAAkC,UAAU,mBAAmB,mBAAmB,KAAK,aAAa,aAAa,WAAW,eAAe,gBAAgB,iDAAiD,kDAAkD,mCAAmC,iBAAiB,sBAAsB,WAAW,aAAa,+BAA+B,aAAa,wBAAwB,cAAc,4DAA4D,mCAAmC,iBAAiB,aAAa,8BAA8B,YAAY,kBAAkB,qCAAqC,OAAO,UAAU,2BAA2B,mCAAmC,kBAAkB,YAAY,8BAA8B,yDAAyD,SAAS,oBAAoB,SAAS,qBAAqB,sDAAsD,cAAc,oBAAoB,SAAS,oBAAoB,0BAA0B,uBAAuB,kBAAkB,eAAe,qBAAqB,cAAc,eAAe,mCAAmC,iCAAiC,iCAAiC,+BAA+B,+BAA+B,uBAAuB,qBAAqB,cAAc,qBAAqB,UAAU,oBAAoB,sBAAsB,kCAAkC,4BAA4B,wBAAwB,uBAAuB,SAAS,qBAAqB,uBAAuB,qBAAqB,uBAAuB,eAAe,wBAAwB,YAAY,8BAA8B,0BAA0B,2DAA2D,SAAS,uBAAuB,YAAY,YAAY,eAAe,SAAS,uBAAuB,+BAA+B,YAAY,WAAW,KAAK,iBAAiB,sEAAsE,aAAa,qCAAqC,kBAAkB,WAAW,UAAU,UAAU,wBAAwB,4CAA4C,wBAAwB,cAAc,eAAe,0BAA0B,kBAAkB,eAAe,yCAAyC,uCAAuC,uCAAuC,qCAAqC,qCAAqC,qBAAqB,qCAAqC,qBAAqB,2CAA2C,oDAAoD,YAAY,cAAc,cAAc,8BAA8B,KAAK,QAAQ,KAAK,MAAM,mBAAmB,0BAA0B,MAAM,sCAAsC,yBAAyB,qBAAqB,sCAAsC,wCAAwC,8CAA8C,oCAAoC,4CAA4C,4CAA4C,0CAA0C,0CAA0C,oCAAoC,8CAA8C,0CAA0C,0CAA0C,0CAA0C,sCAAsC,gCAAgC,yCAAyC,qCAAqC,+BAA+B,2CAA2C,2CAA2C,+BAA+B,2CAA2C,uBAAuB,sBAAsB,2BAA2B,gBAAgB,gBAAgB,yBAAyB,sCAAsC,YAAY,WAAW,KAAK,iBAAiB,QAAQ,8CAA8C,SAAS,QAAQ,YAAY,kBAAkB,qBAAqB,IAAI,KAAK,QAAQ,8BAA8B,qBAAqB,uCAAuC,yBAAyB,gDAAgD,oBAAoB,qBAAqB,kDAAkD,cAAc,yBAAyB,4CAA4C,SAAS,aAAa,4BAA4B,eAAe,iCAAiC,WAAW,wBAAwB,iBAAiB,gCAAgC,WAAW,uBAAuB,gBAAgB,yCAAyC,yBAAyB,qBAAqB,kCAAkC,qBAAqB,oBAAoB,2CAA2C,kBAAkB,kCAAkC,sBAAsB,aAAa,oCAAoC,2BAA2B,iCAAiC,2BAA2B,mDAAmD,uBAAuB,mCAAmC,WAAW,gBAAgB,iBAAiB,YAAY,eAAe,OAAO,gBAAgB,WAAW,iBAAiB,YAAY,UAAU,KAAK,UAAU,aAAa,QAAQ,iBAAiB,YAAY,OAAO,aAAa,gBAAgB,8BAA8B,MAAM,UAAU,4CAA4C,4CAA4C,qCAAqC,4CAA4C,8CAA8C,wCAAwC,yCAAyC,oCAAoC,aAAa,mBAAmB,8BAA8B,QAAQ,mBAAmB,eAAe,KAAK,MAAM,kCAAkC,qCAAqC,0BAA0B,+BAA+B,0BAA0B,6BAA6B,0CAA0C,6BAA6B,oDAAoD,6BAA6B,6BAA6B,2BAA2B,qBAAqB,8BAA8B,qBAAqB,8BAA8B,qBAAqB,8BAA8B,qBAAqB,aAAa,SAAS,oCAAoC,6CAA6C,0BAA0B,sBAAsB,0BAA0B,0BAA0B,mBAAmB,gCAAgC,qBAAqB,WAAW,kDAAkD,sBAAsB,0BAA0B,4BAA4B,0BAA0B,0BAA0B,0BAA0B,0BAA0B,kDAAkD,wBAAwB,iCAAiC,YAAY,gBAAgB,+BAA+B,cAAc,WAAW,oCAAoC,cAAc,WAAW,qDAAqD,kCAAkC,qCAAqC,4BAA4B,GAAG,eAAe,IAAI,sBAAsB,6CAA6C,0DAA0D,8CAA8C,yEAAyE,8CAA8C,iDAAiD,6BAA6B,KAAK,uCAAuC,oDAAoD,6BAA6B,0CAA0C,kBAAkB,4DAA4D,IAAI,4BAA4B,uBAAuB,wDAAwD,mBAAmB,+BAA+B,4CAA4C,oBAAoB,0BAA0B,qBAAqB,2CAA2C,4CAA4C,yDAAyD,2DAA2D,qGAAqG,4FAA4F,cAAc,oBAAoB,uBAAuB,eAAe,YAAY,MAAM,KAAK,cAAc,iFAAiF,MAAM,YAAY,SAAS,OAAO,mEAAmE,MAAM,aAAa,uCAAuC,yBAAyB,IAAI,qCAAqC,UAAU,SAAS,4BAA4B,OAAO,mCAAmC,6BAA6B,OAAO,KAAK,qFAAqF,SAAS,QAAQ,kBAAkB,mBAAmB,+BAA+B,uDAAuD,sBAAsB,OAAO,SAAS,4BAA4B,8BAA8B,iBAAiB,8BAA8B,yBAAyB,gBAAgB,oBAAoB,UAAU,gDAAgD,4EAA4E,kCAAkC,yBAAyB,UAAU,wBAAwB,kCAAkC,uBAAuB,uBAAuB,wBAAwB,KAAK,QAAQ,KAAK,KAAK,SAAS,6BAA6B,sBAAsB,4BAA4B,OAAO,WAAW,kBAAkB,yBAAyB,cAAc,wBAAwB,8CAA8C,wBAAwB,GAAG,iBAAiB,uBAAuB,wBAAwB,OAAO,wDAAwD,aAAa,6BAA6B,gCAAgC,qBAAqB,SAAS,mBAAmB,sBAAsB,WAAW,aAAa,yGAAyG,sCAAsC,mCAAmC,sBAAsB,8EAA8E,kCAAkC,2BAA2B,sBAAsB,2BAA2B,mBAAmB,MAAM,8BAA8B,0BAA0B,cAAc,6CAA6C,mBAAmB,mBAAmB,iCAAiC,2CAA2C,GAAG,yBAAyB,mCAAmC,iCAAiC,yBAAyB,SAAS,SAAS,wBAAwB,yCAAyC,WAAW,EAAE,8BAA8B,QAAQ,0DAA0D,2CAA2C,qBAAqB,EAAE,4BAA4B,wBAAwB,qBAAqB,iBAAiB,gCAAgC,mBAAmB,6BAA6B,yBAAyB,sBAAsB,EAAE,GAAG,IAA2B,EAAE;;;;;;;;;;;;;;;;;;;AC3Bv56B;;AACA;;AACA;;AACA;;AAEA;;AAEA;;AAEA;;AAIA,SAAgB,IAAhB,CAAqB,KAArB,EAAsC,GAAtC,EAAqD,KAArD,EAAoE,MAApE,EAAoF,MAApF,EAAoG,WAApG,EAAqI;AACnI,QAAM,SAAS,GAAG,KAAK,CAAC,YAAN,CAAuC,MAAvC,EAA+C,WAA/C,CAAlB;AACA,QAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,SAAS,CAAC,MAA9C,EAAsD,QAAtD,CAAf;AAEA,QAAM,iBAAiB,GAAoB;AAAE,UAAM,EAAE,EAAV;AAAc,QAAI,EAAE,EAApB;AAAwB,UAAM,EAAE;AAAhC,GAA3C;AACA,aAAW,CAAC,UAAZ,CAAuB,OAAvB,CAA+B,CAAC,IAAG;AACjC,qBAAiB,CAAC,CAAC,CAAC,SAAH,CAAjB,CAA+B,IAA/B,CAAoC,GAAG,WAAW,CAAC,MAAD,EAAS,CAAT,CAAlD;AACD,GAFD;AAGA,QAAM,UAAU,GAAa,WAAW,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,iBAA5B,EAA+C,SAAS,CAAC,KAAV,CAAgB,MAAhB,EAA/C,CAAxC;AAEA,QAAM,kBAAkB,GAAoB;AAAE,UAAM,EAAE,EAAV;AAAc,QAAI,EAAE,EAApB;AAAwB,UAAM,EAAE;AAAhC,GAA5C;AACA,aAAW,CAAC,WAAZ,CAAwB,OAAxB,CAAgC,CAAC,IAAG;AAClC,sBAAkB,CAAC,CAAC,CAAC,SAAH,CAAlB,CAAgC,IAAhC,CAAqC,GAAG,WAAW,CAAC,MAAD,EAAS,CAAT,CAAnD;AACD,GAFD;AAGA,aAAW,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,kBAA5B,EAAgD,SAAS,CAAC,KAAV,CAAgB,MAAhB,EAAhD,CAAX;AAEA,QAAM,YAAY,GAAmB,EAArC;AACA,aAAW,CAAC,KAAZ,CAAkB,OAAlB,CAA0B,CAAC,IAAI,YAAY,CAAC,IAAb,CAAkB,GAAG,WAAW,CAAC,MAAD,EAAS,CAAT,CAAhC,CAA/B;AAEA,QAAM,iBAAiB,GAAuB,EAA9C;AACA,aAAW,CAAC,IAAZ,CAAiB,OAAjB,CAAyB,CAAC,IAAI,iBAAiB,CAAC,IAAlB,CAAuB,GAAG,WAAW,CAAC,MAAD,EAAS,CAAT,CAArC,CAA9B;AACA,wBAAsB,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,MAAM,CAAC,IAAnC,EAAyC,iBAAzC,EAA4D,SAAS,CAAC,KAAV,CAAgB,MAAhB,EAA5D,CAAtB;;AAEA,MAAI,UAAU,CAAC,MAAX,GAAoB,CAAxB,EAA2B;AACzB,UAAM,YAAY,GAAa,YAAY,CAAC,GAAb,CAAiB,CAAC,IAAI,sCAA8B,KAA9B,EAAqC,CAArC,EAAwC,MAAxC,EAAgD,MAAM,CAAC,IAAvD,CAAtB,CAA/B;AACA,gBAAY,CAAC,OAAb,CAAqB,IAAI,IAAG;AAC1B,YAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,UAAZ,CAAlB;AACA,WAAK,CAAC,YAAN,CAAuC,SAAvC,EAAkD,WAAlD,EAAgE,OAAhE,CAAwE,IAAxE,CAA6E,IAA7E;AACD,KAHD;AAID;AACF;;AA9BD;;AAgCA,SAAS,WAAT,CAAwB,MAAxB,EAAwC,MAAxC,EAAyD;AACvD,QAAM,MAAM,GAAG,MAAM,CAAC,cAAP,CAAsB,MAAM,CAAC,UAAP,CAAkB,OAAxC,EAAiD,MAAM,CAAC,UAAP,CAAkB,OAAnE,CAAf;AACA,QAAM,MAAM,GAAQ,EAApB;;AACA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAAiC;AAC/B,UAAM,CAAC,IAAP,CAAY,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,KAAnB,CAAZ;AACD;;AACD,SAAO,MAAP;AACD;;AAED,SAAS,WAAT,CACE,KADF,EAEE,GAFF,EAGE,KAHF,EAIE,MAJF,EAKE,UALF,EAME,MANF,EAMmB;AAEjB,SAAO,CACL,GAAG,iBAAiB,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,UAAU,CAAC,IAAvC,EAA6C,MAA7C,CADf,EAEL,GAAG,kBAAkB,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,UAAU,CAAC,MAAvC,EAA+C,MAA/C,CAFhB,EAGL,GAAG,kBAAkB,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,MAApB,EAA4B,UAAU,CAAC,MAAvC,EAA+C,MAA/C,CAHhB,CAAP;AAKD;;AAED,SAAS,iBAAT,CACE,KADF,EAEE,GAFF,EAGE,KAHF,EAIE,MAJF,EAKE,MALF,EAME,MANF,EAMmB;AAEjB,QAAM,YAAY,GAAa,EAA/B;AACA,gBAAM,MAAN,EAAc,MAAd,EAAsB,CAAC,IAAG;AACxB,UAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,sBAAZ,CAAlB;AACA,UAAM,iBAAiB,GAAG,uBAAW,SAAX,CAA1B;AACA,UAAM,MAAM,GAAG,MAAM,CAAC,QAAP,CAAgB,SAAhB,CAAf;AACA,UAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,MAAM,CAAC,MAAP,GAAgB,CAA3B,CAAV;AACA,UAAM,MAAM,GAAG,iBAAO,aAAP,CAAqB,SAArB,EACZ,aADY,GAEZ,IAFY,CAEP,MAAM,CAAC,cAAP,CAAsB,CAAC,CAAvB,EAA0B,CAA1B,CAFO,CAAf;AAGA,UAAM,CAAC,GAAG,MAAM,CAAC,GAAP,CAAW,MAAX,CAAV;AACA,UAAM,KAAK,GAAG,qBAAa,CAAb,EAAgB,CAAhB,EAAmB,iBAAnB,CAAd;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,GAAN,CAAU,CAAC,IACxB,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,WAAlB,CAA8B,KAA9B,EAAqC,CAArC,EAAwC,CAAC,IAAI,CAAC,KAAK,SAAN,KAAoB,CAAC,CAAC,OAAF,OAAgB,oBAAS,IAAzB,IAAiC,CAAC,CAAC,OAAF,OAAgB,oBAAS,QAA9E,CAA7C,CADa,CAAf;;AAGA,QAAI,MAAJ,EAAY;AACV,kBAAY,CAAC,IAAb,CAAkB,6BAAqB,KAArB,EAA4B,MAA5B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,CAAlD,CAAlB;AACD;;AACD,WAAO,MAAP;AACD,GAjBD;AAkBA,SAAO,YAAP;AACD;;AAED,SAAS,kBAAT,CACE,KADF,EAEE,GAFF,EAGE,KAHF,EAIE,MAJF,EAKE,MALF,EAME,MANF,EAMmB;AAEjB,QAAM,YAAY,GAAa,EAA/B;AACA,gBAAM,MAAN,EAAc,MAAd,EAAsB,CAAC,IAAG;AACxB,UAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,sBAAZ,CAAlB;AACA,UAAM,QAAQ,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,cAAP,CAAsB,MAAM,CAAC,IAA7B,EAAmC,MAAM,CAAC,KAA1C,CAAD,EAAmD,MAAM,CAAC,cAAP,CAAsB,MAAM,CAAC,GAA7B,EAAkC,MAAM,CAAC,MAAzC,CAAnD,CAAX,CAAjB;AACA,UAAM,KAAK,GAAG,qBAAa,CAAb,EAAgB,QAAhB,EAA0B,SAA1B,CAAd;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,GAAN,CAAU,CAAC,IAAI,QAAQ,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,CAApB,CAAvB,CAAf;;AACA,QAAI,MAAJ,EAAY;AACV,kBAAY,CAAC,IAAb,CAAkB,6BAAqB,KAArB,EAA4B,MAA5B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,CAAlD,CAAlB;AACD;;AACD,WAAO,MAAP;AACD,GATD;AAUA,SAAO,YAAP;AACD;;AAED,SAAS,kBAAT,CACE,KADF,EAEE,GAFF,EAGE,KAHF,EAIE,MAJF,EAKE,MALF,EAME,MANF,EAMmB;AAEjB,QAAM,YAAY,GAAa,EAA/B;AACA,gBAAM,MAAN,EAAc,MAAd,EAAsB,CAAC,IAAG;AACxB,UAAM,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,sBAAZ,CAAlB;AACA,UAAM,QAAQ,GAAG,MAAM,CAAC,MAAxB;AACA,UAAM,KAAK,GAAG,qBAAa,CAAb,EAAgB,QAAhB,EAA0B,SAA1B,CAAd;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,GAAN,CAAU,CAAC,IAAI,QAAQ,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,CAApB,CAAvB,CAAf;;AACA,QAAI,MAAJ,EAAY;AACV,kBAAY,CAAC,IAAb,CAAkB,6BAAqB,KAArB,EAA4B,MAA5B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,CAAlD,CAAlB;AACD;;AACD,WAAO,MAAP;AACD,GATD;AAUA,SAAO,YAAP;AACD;;AAED,SAAS,sBAAT,CACE,KADF,EAEE,GAFF,EAGE,KAHF,EAIE,MAJF,EAKE,MALF,EAME,UANF,EAOE,MAPF,EAOmB;AAEjB,QAAM,gBAAgB,GAAa,EAAnC;AACA,gBAAM,MAAN,EAAc,UAAd,EAA0B,OAAO,IAAG;AAClC,UAAM,QAAQ,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,cAAP,CAAsB,MAAM,CAAC,IAA7B,EAAmC,MAAM,CAAC,KAA1C,CAAD,EAAmD,MAAM,CAAC,cAAP,CAAsB,MAAM,CAAC,GAA7B,EAAkC,MAAM,CAAC,MAAzC,CAAnD,CAAX,CAAjB;AACA,UAAM,MAAM,GAAG,QAAQ,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAoB,QAApB,CAAvB;;AACA,QAAI,MAAJ,EAAY;AACV,YAAM,SAAS,GAAG,OAAO,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAAwB,EAAxB,CAAzB;AACA,uCAAe,KAAf,EAAsB,SAAtB,EAAiC,KAAjC,EAAwC,QAAxC;AACA,sBAAgB,CAAC,IAAjB,CAAsB,SAAtB;AACD;;AACD,WAAO,MAAP;AACD,GATD;AAUA,SAAO,gBAAP;AACD;;AAED,SAAS,QAAT,CAAkB,KAAlB,EAAmC,GAAnC,EAAkD,KAAlD,EAAiE,QAAjE,EAAiF;AAC/E,SAAO,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,WAAlB,CAA8B,KAA9B,EAAqC,QAArC,EAA+C,CAAC,IAAI,CAAC,KAAK,SAAN,IAAmB,CAAC,CAAC,OAAF,GAAY,MAAnF,CAAP;AACD,C;;;;;;;;;;;;;AC7KD;;AAKA,SAAgB,cAAhB,CAA+B,KAA/B,EAAgD,MAAhD,EAAgE,KAAhE,EAA+E,QAA/E,EAA+F;AAC7F,QAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,KAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,YAAlB,CAA+B,QAA/B,EAAyC,MAAzC;AACA,OAAK,CAAC,UAAN,CAAiB,MAAjB,EAAyB,aAAzB,CAA0D,UAA1D,EAAsE,4BAAiB,KAAjB,EAAwB,QAAxB,CAAtE;AACD;;AAJD,wC;;;;;;;;;;;;;ACCA,SAAgB,gBAAhB,CAAiC,KAAjC,EAAgD,QAAhD,EAAgE;AAC9D,SAAO;AAAE,SAAF;AAAS,YAAQ,EAAE,QAAQ,CAAC;AAA5B,GAAP;AACD;;AAFD,4C;;;;;;;;;;;;;;;;;;;;;ACJA;;AAGA;;AAEA,MAAa,gBAAb,CAA6B;AAI3B,cAAmB,GAAnB,EAAoC;AAClC,SAAK,MAAL,GAAc,IAAI,eAAJ,CAAW,GAAX,CAAd;AACA,SAAK,YAAL,GAAoB,CAAC,IAAI,YAAY,CAAC,OAAjB,CAAyB,EAAzB,CAAD,CAApB;AACD;;AAEM,qBAAmB,CAAC,WAAD,EAAyB;AACjD,SAAK,YAAL,CAAkB,IAAlB,CAAuB,WAAvB;AACD;;AAEM,WAAS,CAAC,KAAD,EAAe,KAAf,EAA8B;AAC5C,UAAM,YAAY,GAAG,KAAK,YAAL,CAAkB,MAAlB,CAAyB,CAAC,IAAI,CAAC,CAAC,YAAF,CAAe,KAAf,EAAsB,KAAtB,KAAgC,CAAC,CAAC,MAAF,GAAW,CAAzE,CAArB;AACA,QAAI,WAAW,GAAgB,KAAK,YAAL,CAAkB,CAAlB,CAA/B;;AACA,QAAI,YAAY,CAAC,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,YAAM,QAAQ,GAAG,KAAK,MAAL,CAAY,gBAAZ,CAA6B,YAAY,CAAC,GAAb,CAAiB,CAAC,IAAI,CAAC,CAAC,MAAxB,CAA7B,CAAjB;AACA,iBAAW,GAAG,YAAY,CAAC,QAAD,CAA1B;AACD;;AACD,WAAO,WAAW,CAAC,SAAZ,CAAsB,IAAtB,EAA4B,KAAK,MAAjC,EAAyC,KAAzC,EAAgD,KAAhD,CAAP;AACD;;AAEM,YAAU,CAAC,KAAD,EAAe,KAAf,EAA8B;AAC7C,WAAO;AAAE,UAAI,EAAE,OAAR;AAAiB,WAAjB;AAAwB,WAAxB;AAA+B,UAAI,EAAE;AAArC,KAAP;AACD;;AACM,gBAAc,CAAC,KAAD,EAAe,KAAf,EAA8B;AACjD,WAAO;AAAE,UAAI,EAAE,OAAR;AAAiB,WAAjB;AAAwB,WAAxB;AAA+B,UAAI,EAAE;AAArC,KAAP;AACD;;AACM,mBAAiB,CAAC,KAAD,EAAe,IAAf,EAA2B;AACjD,WAAO,KAAK,CACT,MADI,GAEJ,IAFI,GAGJ,cAHI,CAGW,IAHX,CAAP;AAID;;AAlC0B;;AAA7B,4C;;;;;;;;;;;;;ACJA;;AAGA;;AAEA,MAAa,aAAb,CAA0B;AACxB,cAAoC,aAApC,EAA4E,YAA5E,EAAgG;AAA5D;AAAwC;AAErE,kBAAS,EAAT;AAF6F;;AAI7F,cAAY,CAAC,KAAD,EAAe,KAAf,EAA8B;AAC/C,UAAM,IAAI,GAAG,KAAK,CAAC,CAAD,CAAlB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,MAAN,GAAe,IAAf,EAAf;AACA,UAAM,IAAI,GAAS,MAAM,CAAC,GAAP,KAAe,IAAI,CAAC,CAApB,IAAyB,MAAM,CAAC,MAAP,KAAkB,IAAI,CAAC,CAAhD,GAAoD,GAApD,GAA0D,GAA7E;AACA,UAAM,iBAAiB,GAAG,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,KAAhB,EAAuB,MAAM,CAAC,MAA9B,CAA1B;AACA,UAAM,sBAAsB,GAC1B,IAAI,KAAK,GAAT,GAAe,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAL,GAAS,MAAM,CAAC,IAAzB,EAA+B,MAAM,CAAC,KAAP,GAAe,IAAI,CAAC,CAAnD,CAAf,GAAuE,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAL,GAAS,MAAM,CAAC,GAAzB,EAA8B,MAAM,CAAC,MAAP,GAAgB,IAAI,CAAC,CAAnD,CADzE;AAEA,UAAM,gBAAgB,GAAG,sBAAsB,GAAG,KAAK,YAAL,GAAoB,IAAI,CAAC,IAAL,CAAU,KAAK,aAAL,GAAqB,CAA/B,CAAtE;AACA,WAAO,gBAAgB,IAAI,iBAAiB,GAAG,KAAK,YAApD;AACD;;AAEM,WAAS,CAAC,OAAD,EAA4B,MAA5B,EAA4C,KAA5C,EAA0D,KAA1D,EAAyE;AACvF,UAAM,CAAC,IAAD,EAAO,GAAG,IAAV,IAAkB,KAAxB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,MAAN,EAAf;AACA,UAAM,IAAI,GAAS,MAAM,CAAC,IAAP,GAAc,GAAd,KAAsB,IAAI,CAAC,CAA3B,IAAgC,MAAM,CAAC,IAAP,GAAc,MAAd,KAAyB,IAAI,CAAC,CAA9D,GAAkE,GAAlE,GAAwE,GAA3F;AACA,UAAM,KAAK,GAAG,IAAI,KAAK,GAAT,GAAe,IAAI,CAAC,CAAL,GAAS,MAAM,CAAC,IAA/B,GAAsC,IAAI,CAAC,CAAL,GAAS,MAAM,CAAC,GAApE;AACA,UAAM,CAAC,IAAD,EAAO,MAAP,EAAe,KAAf,IAAwB,KAAK,KAAL,CAAW,MAAX,EAAmB,IAAnB,EAAyB,KAAK,GAAG,IAAI,CAAC,IAAL,CAAU,KAAK,aAAL,GAAqB,CAA/B,CAAjC,EAAoE,KAAK,aAAzE,CAA9B;AAEA,UAAM,OAAO,GAAG,iBAAO,aAAP,CAAqB,MAArB,EAA6B,IAA7B,CAAkC,CAAlC,CAAhB;AACA,UAAM,OAAO,GAAG,iBAAO,aAAP,CAAqB,OAArB,EAA8B,IAA9B,CAAmC,CAAnC,CAAhB;AACA,UAAM,QAAQ,GACZ,IAAI,KAAK,GAAT,GACI,MAAM,CAAC,cAAP,CAAsB,IAAI,CAAC,IAAL,GAAY,QAAZ,CAAqB,GAArB,CAAyB,OAAzB,CAAtB,EAAyD,IAAI,CAAC,IAAL,GAAY,WAAZ,CAAwB,KAAxB,CAA8B,OAA9B,CAAzD,CADJ,GAEI,MAAM,CAAC,cAAP,CAAsB,IAAI,CAAC,IAAL,GAAY,UAAZ,CAAuB,GAAvB,CAA2B,OAA3B,CAAtB,EAA2D,IAAI,CAAC,IAAL,GAAY,WAAZ,CAAwB,KAAxB,CAA8B,OAA9B,CAA3D,CAHN;AAIA,UAAM,SAAS,GACb,IAAI,KAAK,GAAT,GACI,MAAM,CAAC,cAAP,CAAsB,KAAK,CAAC,IAAN,GAAa,OAAb,CAAqB,GAArB,CAAyB,OAAzB,CAAtB,EAAyD,KAAK,CAAC,IAAN,GAAa,UAAb,CAAwB,KAAxB,CAA8B,OAA9B,CAAzD,CADJ,GAEI,MAAM,CAAC,cAAP,CAAsB,KAAK,CAAC,IAAN,GAAa,OAAb,CAAqB,GAArB,CAAyB,OAAzB,CAAtB,EAAyD,KAAK,CAAC,IAAN,GAAa,QAAb,CAAsB,KAAtB,CAA4B,OAA5B,CAAzD,CAHN;AAIA,UAAM,QAAQ,GAAG,IAAI,CAAC,MAAL,CAAY,CAAC,IAAI,OAAO,CAAC,iBAAR,CAA0B,IAA1B,EAAgC,CAAhC,CAAjB,CAAjB;AACA,UAAM,SAAS,GAAG,IAAI,CAAC,MAAL,CAAY,CAAC,IAAI,OAAO,CAAC,iBAAR,CAA0B,KAA1B,EAAiC,CAAjC,CAAjB,CAAlB;AACA,WAAO;AACL,WADK;AAEL,UAAI,EAAE,MAFD;AAGL,UAAI,EAAE,CAHD;AAIL,gBAAU,EAAE,CACV,OAAO,CAAC,SAAR,CAAkB,IAAlB,EAAwB,CAAC,QAAD,EAAW,GAAG,QAAd,CAAxB,CADU,EAEV,OAAO,CAAC,cAAR,CAAuB,MAAvB,EAA+B,KAA/B,CAFU,EAGV,OAAO,CAAC,SAAR,CAAkB,KAAlB,EAAyB,CAAC,SAAD,EAAY,GAAG,SAAf,CAAzB,CAHU,CAJP;AASL,iBAAW,EAAE,CACX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OADW,EAEX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAFW;AATR,KAAP;AAcD;;AAEO,OAAK,CAAC,CAAD,EAAe,IAAf,EAA2B,KAA3B,EAA0C,KAA1C,EAAuD;AAClE,QAAI,CAAJ;AACA,QAAI,CAAJ;AACA,QAAI,CAAJ;;AACA,QAAI,IAAI,KAAK,GAAb,EAAkB;AAChB,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,IAAF,GAAS,KAAT,GAAiB,CAA9C,EAAiD,CAAC,CAAC,GAAnD,EAAwD,CAAC,CAAC,MAA1D,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,KAAF,GAAU,CAA/B,EAAkC,CAAC,CAAC,KAAF,GAAU,CAAV,GAAc,KAAhD,EAAuD,CAAC,CAAC,GAAzD,EAA8D,CAAC,CAAC,MAAhE,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,KAAF,GAAU,CAA/B,EAAkC,CAAC,CAAC,KAApC,EAA2C,CAAC,CAAC,GAA7C,EAAkD,CAAC,CAAC,MAApD,CAAJ;AACD,KAJD,MAIO;AACL,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,KAA/B,EAAsC,CAAC,CAAC,GAAxC,EAA6C,CAAC,CAAC,GAAF,GAAQ,KAAR,GAAgB,CAA7D,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,KAA/B,EAAsC,CAAC,CAAC,MAAF,GAAW,CAAjD,EAAoD,CAAC,CAAC,MAAF,GAAW,CAAX,GAAe,KAAnE,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,KAA/B,EAAsC,CAAC,CAAC,MAAF,GAAW,CAAjD,EAAoD,CAAC,CAAC,MAAtD,CAAJ;AACD;;AACD,WAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAP;AACD;;AAjEuB;;AAA1B,sC;;;;;;;;;;;;;ACHA,MAAa,OAAb,CAAoB;AAClB,cAAoC,YAApC,EAAwD;AAApB;AAE7B,kBAAS,CAAT;AAFqD;;AAIrD,cAAY,CAAC,KAAD,EAAa;AAC9B,WAAO,KAAK,CAAC,MAAN,GAAe,KAAf,IAAwB,KAAK,YAA7B,IAA6C,KAAK,CAAC,MAAN,GAAe,MAAf,IAAyB,KAAK,YAAlF;AACD;;AAEM,WAAS,CAAC,OAAD,EAA4B,OAA5B,EAA6C,KAA7C,EAA2D,KAA3D,EAA0E;AACxF,WAAO,OAAO,CAAC,UAAR,CAAmB,KAAnB,EAA0B,KAA1B,CAAP;AACD;;AAXiB;;AAApB,0B;;;;;;;;;;;;;ACLA;;AAMA,MAAa,mBAAb,CAAgC;AAC9B,cAAoC,UAApC,EAAyE,aAAzE,EAA8F;AAA1D;AAAqC;AAElE,kBAAS,CAAT;AAF2F;;AAI3F,cAAY,CAAC,KAAD,EAAa;AAC9B,UAAM,MAAM,GAAG,KAAK,CAAC,MAAN,EAAf;AACA,UAAM,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,MAAM,CAAC,KAAhB,EAAuB,MAAM,CAAC,MAA9B,CAAd;AACA,WAAO,KAAK,GAAG,KAAK,UAAb,GAA0B,CAA1B,GAA8B,KAAK,aAA1C;AACD;;AAEM,WAAS,CAAC,OAAD,EAA4B,OAA5B,EAA6C,KAA7C,EAA2D,KAA3D,EAA0E;AACxF,UAAM,KAAK,GAAG,KAAK,CAAC,MAAN,CAAa,KAAK,UAAL,GAAkB,CAA/B,CAAd;AACA,UAAM,KAAK,GAAG,IAAI,uBAAJ,CAAe,KAAf,EAAsB,KAAK,CAAC,IAAN,EAAtB,CAAd;AACA,UAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,GAAe,IAAf,GAAsB,UAAvC;AACA,WAAO;AACL,WADK;AAEL,UAAI,EAAE,MAFD;AAGL,UAAI,EAAE,CAHD;AAIL,gBAAU,EAAE,CAAC,OAAO,CAAC,SAAR,CAAkB,KAAlB,EAAyB,CAAC,QAAD,CAAzB,CAAD,EAAuC,OAAO,CAAC,cAAR,CAAuB,KAAvB,EAA8B,KAA9B,CAAvC,CAJP;AAKL,iBAAW,EAAE,CAAC;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAAD;AALR,KAAP;AAOD;;AAtB6B;;AAAhC,kD;;;;;;;;;;;;;ACDA;;AAGA,MAAa,SAAb,CAAsB;AACpB,cAAoC,YAApC,EAAwD;AAApB;AAE7B,kBAAS,EAAT;AAFqD;;AAIrD,cAAY,CAAC,KAAD,EAAe,KAAf,EAA8B;AAC/C,UAAM,IAAI,GAAG,KAAK,CAAC,CAAD,CAAlB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,MAAN,GAAe,IAAf,EAAf;AACA,UAAM,IAAI,GAAS,MAAM,CAAC,GAAP,KAAe,IAAI,CAAC,CAApB,IAAyB,MAAM,CAAC,MAAP,KAAkB,IAAI,CAAC,CAAhD,GAAoD,GAApD,GAA0D,GAA7E;AACA,UAAM,UAAU,GAAG,IAAI,KAAK,GAAT,GAAe,MAAM,CAAC,KAAtB,GAA8B,MAAM,CAAC,MAAxD;AACA,WAAO,UAAU,GAAG,IAAI,KAAK,YAA7B;AACD;;AAEM,WAAS,CAAC,OAAD,EAA4B,MAA5B,EAA4C,KAA5C,EAA0D,KAA1D,EAAyE;AACvF,UAAM,CAAC,IAAD,EAAO,GAAG,IAAV,IAAkB,KAAxB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,MAAN,EAAf;AACA,UAAM,IAAI,GAAS,MAAM,CAAC,IAAP,GAAc,GAAd,KAAsB,IAAI,CAAC,CAA3B,IAAgC,MAAM,CAAC,IAAP,GAAc,MAAd,KAAyB,IAAI,CAAC,CAA9D,GAAkE,GAAlE,GAAwE,GAA3F;AACA,UAAM,UAAU,GAAG,IAAI,KAAK,GAAT,GAAe,MAAM,CAAC,KAAtB,GAA8B,MAAM,CAAC,MAAxD;AACA,UAAM,KAAK,GAAG,MAAM,CAAC,cAAP,CAAsB,KAAK,YAA3B,EAAyC,UAAU,GAAG,KAAK,YAA3D,CAAd;AACA,QAAI,CAAC,IAAD,EAAO,KAAP,IAAgB,KAAK,KAAL,CAAW,MAAX,EAAmB,IAAnB,EAAyB,KAAzB,CAApB;AACA,QAAI,IAAI,GAAG,IAAI,KAAK,GAAT,GAAe,IAAI,CAAC,IAAL,GAAY,WAA3B,GAAyC,IAAI,CAAC,IAAL,GAAY,YAAhE;;AACA,QAAI,OAAO,CAAC,iBAAR,CAA0B,KAA1B,EAAiC,IAAjC,CAAJ,EAA4C;AAC1C;AAAC,OAAC,IAAD,EAAO,KAAP,IAAgB,CAAC,KAAD,EAAQ,IAAR,CAAhB;AACF;;AACD,UAAM,QAAQ,GAAG,IAAI,CAAC,MAAL,CAAY,CAAC,IAAI,OAAO,CAAC,iBAAR,CAA0B,IAA1B,EAAgC,CAAhC,CAAjB,CAAjB;AACA,UAAM,SAAS,GAAG,IAAI,CAAC,MAAL,CAAY,CAAC,IAAI,OAAO,CAAC,iBAAR,CAA0B,KAA1B,EAAiC,CAAjC,CAAjB,CAAlB;AACA,WAAO;AACL,WADK;AAEL,UAAI,EAAE,MAFD;AAGL,UAAI,EAAE,CAHD;AAIL,gBAAU,EAAE,CAAC,OAAO,CAAC,SAAR,CAAkB,IAAlB,EAAwB,CAAC,IAAD,EAAO,IAAP,EAAa,GAAG,QAAhB,CAAxB,CAAD,EAAqD,OAAO,CAAC,SAAR,CAAkB,KAAlB,EAAyB,CAAC,IAAD,EAAO,GAAG,SAAV,CAAzB,CAArD,CAJP;AAKL,iBAAW,EAAE,CAAC;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAAD;AALR,KAAP;AAOD;;AAEM,OAAK,CAAC,CAAD,EAAe,IAAf,EAA2B,KAA3B,EAAwC;AAClD,QAAI,CAAJ;AACA,QAAI,CAAJ;;AACA,QAAI,IAAI,KAAK,GAAb,EAAkB;AAChB,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,IAAF,GAAS,KAAtC,EAA6C,CAAC,CAAC,GAA/C,EAAoD,CAAC,CAAC,MAAtD,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,KAAF,GAAU,CAA/B,EAAkC,CAAC,CAAC,KAApC,EAA2C,CAAC,CAAC,GAA7C,EAAkD,CAAC,CAAC,MAApD,CAAJ;AACD,KAHD,MAGO;AACL,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,KAA/B,EAAsC,CAAC,CAAC,GAAxC,EAA6C,CAAC,CAAC,GAAF,GAAQ,KAArD,CAAJ;AACA,OAAC,GAAG,sBAAU,UAAV,CAAqB,CAAC,CAAC,IAAvB,EAA6B,CAAC,CAAC,KAA/B,EAAsC,CAAC,CAAC,MAAF,GAAW,CAAjD,EAAoD,CAAC,CAAC,MAAtD,CAAJ;AACD;;AACD,WAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACD;;AA9CmB;;AAAtB,8B;;;;;;;;;;;;;ACJA;;AACA;;AACA;;AA6BA,MAAa,WAAb,CAAwB;AAAxB;AACS,kBAAS,CAAT;AA8IR;;AA5IQ,cAAY,CAAC,MAAD,EAAc;AAC/B,WAAO,IAAP;AACD;;AAEM,WAAS,CAAC,OAAD,EAA4B,OAA5B,EAA6C,KAA7C,EAA2D,KAA3D,EAA0E;AACxF,UAAM,aAAa,GAAG,CAAtB;AACA,UAAM,SAAS,GAAG,CAAlB;AACA,UAAM,MAAM,GAAG,IAAI,qBAAJ,CAAc,KAAK,CAAC,MAAN,GAAe,MAAf,CAAsB,CAAtB,GAA0B,CAAxC,EAA2C,KAAK,CAAC,MAAN,GAAe,MAAf,CAAsB,CAAjE,EAAoE,EAApE,EAAwE,EAAxE,CAAf;AACA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CAAc,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,CAArC,EAAwC,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,aAAvB,GAAuC,CAA/E,EAAkF,aAAa,GAAG,SAAlG,EAA6G,aAA7G,CAAX;AACA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,SAApB,GAAgC,CADvB,EAET,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,aAApB,GAAoC,SAF3B,EAGT,aAHS,EAIT,SAAS,GAAG,MAAM,CAAC,MAJV,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,SAAnB,GAA+B,aADtB,EAET,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,aAAnB,GAAmC,SAF1B,EAGT,aAAa,GAAG,IAAI,SAApB,GAAgC,MAAM,CAAC,KAH9B,EAIT,aAJS,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,SAAnB,GAA+B,aADtB,EAET,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,SAFV,EAGT,aAHS,EAIT,MAAM,CAAC,MAAP,GAAgB,SAJP,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,UAAP,CAAkB,CAAlB,GAAsB,IAAI,aAA1B,GAA0C,IAAI,SADrC,EAET,MAAM,CAAC,UAAP,CAAkB,CAAlB,GAAsB,aAAtB,GAAsC,CAF7B,EAGT,aAAa,GAAG,SAHP,EAIT,aAJS,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SADlC,EAET,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SAFlC,EAGT,aAHS,EAIT,MAAM,CAAC,MAAP,GAAgB,aAAhB,GAAgC,KAAK,SAAS,GAAG,aAAjB,CAJvB,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,aAAnB,GAAmC,IAAI,SAD9B,EAET,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SAFlC,EAGT,MAAM,CAAC,KAAP,GAAe,IAAI,aAAnB,GAAmC,IAAI,SAH9B,EAIT,aAJS,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CACT,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,aAApB,GAAoC,IAAI,SAAxC,GAAoD,CAD3C,EAET,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,aAApB,GAAoC,IAAI,SAF/B,EAGT,aAHS,EAIT,MAAM,CAAC,MAAP,GAAgB,IAAI,aAApB,GAAoC,IAAI,SAJ/B,CAAX;AAMA,UAAM,EAAE,GAAG,IAAI,qBAAJ,CAAc,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,CAArC,EAAwC,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,SAAvB,GAAmC,CAA3E,EAA8E,aAAa,GAAG,IAAI,SAAlG,EAA6G,aAA7G,CAAX;AACA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,CADb,EAEV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,SAAvB,GAAmC,CAAnC,GAAuC,aAF7B,EAGV,aAHU,EAIV,aAAa,GAAG,SAJN,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,CAAvB,GAA2B,aADjB,EAEV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,IAAI,SAA3B,GAAuC,CAAvC,GAA2C,aAFjC,EAGV,IAAI,aAAJ,GAAoB,IAAI,SAHd,EAIV,aAJU,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,IAAI,aAAxB,GAAwC,IAAI,SAA5C,GAAwD,CAD9C,EAEV,MAAM,CAAC,QAAP,CAAgB,CAAhB,GAAoB,IAAI,aAAxB,GAAwC,IAAI,SAFlC,EAGV,aAHU,EAIV,MAAM,CAAC,MAAP,GAAgB,IAAI,aAApB,GAAoC,IAAI,SAJ9B,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SADjC,EAEV,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SAFjC,EAGV,MAAM,CAAC,KAAP,GAAe,IAAI,aAAnB,GAAmC,IAAI,SAH7B,EAIV,aAJU,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SADjC,EAEV,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SAFjC,EAGV,aAHU,EAIV,MAAM,CAAC,MAAP,GAAgB,IAAI,aAApB,GAAoC,IAAI,SAJ9B,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,OAAP,CAAe,CAAf,GAAmB,IAAI,aAAvB,GAAuC,IAAI,SADjC,EAEV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,SAAvB,GAAmC,CAFzB,EAGV,MAAM,CAAC,KAAP,GAAe,IAAI,aAAnB,GAAmC,IAAI,SAH7B,EAIV,aAJU,CAAZ;AAMA,UAAM,GAAG,GAAG,IAAI,qBAAJ,CACV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,CAAvB,GAA2B,SAA3B,GAAuC,aAD7B,EAEV,MAAM,CAAC,WAAP,CAAmB,CAAnB,GAAuB,SAAvB,GAAmC,CAAnC,GAAuC,aAF7B,EAGV,aAHU,EAIV,aAAa,GAAG,SAJN,CAAZ;AAMA,UAAM,IAAI,GAAG,cAAM,EAAN,CAAS,MAAT,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,EAAqC,EAArC,EAAyC,EAAzC,EAA6C,EAA7C,EAAiD,EAAjD,EAAqD,GAArD,EAA0D,GAA1D,EAA+D,GAA/D,EAAoE,GAApE,EAAyE,GAAzE,EAA8E,GAA9E,EAAmF,GAAnF,CAAb;AACA,UAAM,KAAK,GAAG,IAAI,uBAAJ,CAAe,KAAf,EAAsB,IAAI,CAAC,IAAL,EAAtB,CAAd;AACA,WAAO;AACL,WADK;AAEL,UAAI,EAAE,MAFD;AAGL,UAAI,EAAE,CAHD;AAIL,gBAAU,EAAE,CACV,OAAO,CAAC,UAAR,CAAmB,MAAnB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,UAAX,CAA3B,CADU,EAEV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,YAAX,CAA3B,CAFU,EAGV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,WAAX,CAA3B,CAHU,EAIV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,SAAX,CAA3B,CAJU,EAKV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,WAAX,CAA3B,CALU,EAMV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,YAAX,CAA3B,CANU,EAOV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,UAAX,CAA3B,CAPU,EAQV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,SAAX,CAA3B,CARU,EASV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,EAAE,CAAC,IAAH,GAAU,WAAX,CAA3B,CATU,EAUV,OAAO,CAAC,cAAR,CAAuB,EAAvB,EAA2B,CAAC,GAAG,CAAC,IAAJ,GAAW,SAAZ,CAA3B,CAVU,EAWV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,UAAZ,CAA5B,CAXU,EAYV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,YAAZ,CAA5B,CAZU,EAaV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,WAAZ,CAA5B,CAbU,EAcV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,UAAZ,CAA5B,CAdU,EAeV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,UAAZ,CAA5B,CAfU,EAgBV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,SAAZ,CAA5B,CAhBU,EAiBV,OAAO,CAAC,cAAR,CAAuB,GAAvB,EAA4B,CAAC,GAAG,CAAC,IAAJ,GAAW,YAAZ,CAA5B,CAjBU,EAkBV,OAAO,CAAC,cAAR,CAAuB,KAAvB,EAA8B,KAA9B,CAlBU,CAJP;AAwBL,iBAAW,EAAE,CACX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OADW,EAEX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAFW,EAGX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAHW,EAIX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAJW,EAKX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OALW,EAMX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OANW,EAOX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAPW,EAQX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OARW,EASX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OATW,EAUX;AAAE,YAAI,EAAE,CAAR;AAAW,UAAE,EAAE;AAAf,OAVW,EAWX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAXW,EAYX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAZW,EAaX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAbW,EAcX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAdW,EAeX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAfW,EAgBX;AAAE,YAAI,EAAE,EAAR;AAAY,UAAE,EAAE;AAAhB,OAhBW;AAxBR,KAAP;AA2CD;;AA9IqB;;AAAxB,kC;;;;;;;;;;;;;ACpCA;;AAIA,MAAa,KAAb,SAA2B,qBAA3B,CAAwC;AACtC,cAAmC,MAAnC,EAAkE,MAAlE,EAA+E;AAC7E;AADiC;AAA+B;AAEjE;;AAEM,SAAO,EAAP,CAAU,GAAG,MAAb,EAA4B;AACjC,WAAO,MAAM,CAAC,MAAP,CAAc,CAAC,CAAD,EAAI,CAAJ,KAAU,IAAI,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAxB,CAAP;AACD;;AAEM,QAAM;AACX,WAAO,KAAK,MAAL,CAAY,MAAZ,GAAqB,IAArB,CAA0B,KAAK,MAAL,CAAY,MAAZ,EAA1B,CAAP;AACD;;AAEM,gBAAc,CAAC,CAAD,EAAU;AAC7B,WAAO,KAAK,MAAL,CAAY,cAAZ,CAA2B,CAA3B,KAAiC,KAAK,MAAL,CAAY,cAAZ,CAA2B,CAA3B,CAAxC;AACD;;AAEM,MAAI,CAAC,QAAgB,CAAjB,EAAkB;AAC3B,WAAO,IAAI,KAAJ,CAAU,KAAK,MAAL,CAAY,IAAZ,CAAiB,KAAjB,CAAV,EAAmC,KAAK,MAAL,CAAY,IAAZ,CAAiB,KAAjB,CAAnC,CAAP;AACD;;AAEM,QAAM,CAAC,QAAgB,CAAjB,EAAkB;AAC7B,WAAO,IAAI,KAAJ,CAAU,KAAK,MAAL,CAAY,MAAZ,CAAmB,KAAnB,CAAV,EAAqC,KAAK,MAAL,CAAY,MAAZ,CAAmB,KAAnB,CAArC,CAAP;AACD;;AAEM,WAAS,CAAC,CAAD,EAAU;AACxB,WAAO,IAAI,KAAJ,CAAU,KAAK,MAAL,CAAY,SAAZ,CAAsB,CAAtB,CAAV,EAAoC,KAAK,MAAL,CAAY,SAAZ,CAAsB,CAAtB,CAApC,CAAP;AACD;;AAEM,KAAG,CAAC,CAAD,EAA0B;AAClC,WAAO,KAAK,MAAL,GAAc,GAAd,CAAkB,CAAC,IAAG;AAC3B,UAAI,KAAK,cAAL,CAAoB,CAApB,CAAJ,EAA4B;AAC1B,eAAO,CAAC,CAAC,CAAD,CAAR;AACD;;AACD,aAAO,IAAP;AACD,KALM,CAAP;AAMD;;AApCqC;;AAAxC,sB;;;;;;;;;;;;;ACMA;;AAEA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAGA,MAAa,kBAAb,CAA+B;AAI7B,cAAmC,OAAnC,EAAqE,SAArE,EAAkG,GAAlG,EAAmH;AAAhF;AAAkC;AAA6B;AAHlF,sBAA8B,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,CAA9B;AAId,SAAK,MAAL,GAAc,IAAI,eAAJ,CAAW,GAAX,CAAd;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC3C,UAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,CAAf;AACA,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,WAA9C,CAAjB;AACA,UAAM,aAAa,GAAG,MAAM,KAAK,SAAjC;;AACA,QAAI,CAAC,aAAL,EAAoB;AAClB,YAAM,UAAU,GAAG,QAAQ,CAAC,KAAT,IAAkB,QAAQ,CAAC,KAA9C;;AACA,UAAI,CAAC,UAAL,EAAiB;AACf,cAAM,gBAAgB,GAAG,8CAA0B,KAA1B,EAAiC,MAAjC,EAAyC,IAAzC,CAAzB;AACA,aAAK,MAAL,CAAY,KAAZ,EAAmB,MAAnB,EAA2B,QAA3B,EAAqC,gBAArC;AACD,OAHD,MAGO;AACL,aAAK,OAAL,CAAa,KAAb,EAAoB,MAApB;AACD;AACF;AACF;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA+D,gBAA/D,EAAmG;AAC9G,UAAM,EAAE,GAAO,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAf;AACA,UAAM,KAAK,GAAU,KAAK,CAAC,WAAN,CAAiC,OAAjC,CAArB;;AAEA,QAAI,QAAQ,CAAC,cAAT,KAA4B,SAAhC,EAA2C;AACzC,QAAE,CAAC,kBAAH,CAAsB,gBAAtB;AACA,cAAQ,CAAC,cAAT,GAA0B;AACxB,wBAAgB,EAAE,CADM;AAExB,sBAAc,EAAE;AAFQ,OAA1B;AAID,KAND,MAMO,IAAI,QAAQ,CAAC,cAAT,CAAwB,SAAxB,KAAsC,SAA1C,EAAqD;AAC1D,YAAM,SAAS,GAAG,EAAE,CAAC,cAAH,EAAlB;;AACA,UAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,gBAAQ,CAAC,cAAT,CAAwB,SAAxB,GAAoC,SAApC;AACA,UAAE,CAAC,aAAH;AACD;AACF,KANM,MAMA;AACL,YAAM,IAAI,GAAG,KAAK,CAAC,QAAN,CAAe,QAAf,CAAb;AACA,YAAM,MAAM,GAAG,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAmC,MAAlD;AACA,YAAM,cAAc,GAAG,MAAM,CAAC,UAAP,CAAkB,MAAzC;AACA,YAAM,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,gBAAxB,IAA4C,cAA5D;;AACA,UAAI,CAAC,OAAL,EAAc;AACZ,YAAI,IAAJ,EAAU;AACR,kBAAQ,CAAC,cAAT,CAAwB,gBAAxB,IAA4C,CAA5C;AACA,kBAAQ,CAAC,cAAT,CAAwB,cAAxB,IAA0C,CAA1C;AACD,SAHD,MAGO;AACL,gBAAM,gBAAgB,GAAG,MAAM,CAAC,UAAP,CAAkB,QAAQ,CAAC,cAAT,CAAwB,gBAA1C,CAAzB;AACA,gBAAM,IAAI,GAAG,KAAK,eAAL,CAAqB,KAArB,EAA4B,MAA5B,EAAoC,MAApC,EAA4C,gBAA5C,EAA8D,QAAQ,CAAC,cAAvE,CAAb;;AACA,cAAI,IAAJ,EAAU;AACR,oBAAQ,CAAC,cAAT,CAAwB,gBAAxB,IAA4C,CAA5C;AACD;AACF;AACF,OAXD,MAWO;AACL,2CAAoB,KAApB,EAA2B,MAA3B;AACA,cAAM,MAAM,GAAG,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAmC,MAAlD;AACA,cAAM,gCAAgC,GAAG,cAAc,IAAI,CAAlB,IAAuB,cAAc,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAzC,GAA0D,CAA1H;;AACA,YAAI,gCAAJ,EAAsC;AACpC,kBAAQ,MAAM,CAAC,IAAf;AACE,iBAAK,QAAL;AACE,sBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;;AACF,iBAAK,UAAL;AACE,sBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;;AACF,iBAAK,QAAL;AACE,kBAAI,QAAQ,CAAC,KAAb,EAAoB;AAClB,wBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACD,eAFD,MAEO;AACL,wBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACD;;AACD;;AACF,iBAAK,KAAL;AACA,iBAAK,MAAL;AACE,sBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA,sBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;AAlBJ;AAoBD;;AACD,gBAAQ,CAAC,cAAT,GAA0B,SAA1B;AACD;AACF;AACF;;AAEM,iBAAe,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,SAAlD,EAAwE,KAAxE,EAA6F;AACjH,YAAQ,SAAS,CAAC,IAAlB;AACE,WAAK,QAAL;AACE,YAAI,KAAK,CAAC,MAAN,KAAiB,SAArB,EAAgC;AAC9B,eAAK,CAAC,MAAN,GAAe,KAAK,UAAL,CAAgB,KAAhB,EAAuB,MAAvB,EAA+B,SAA/B,CAAf;AACA,iBAAO,KAAP;AACD,SAHD,MAGO;AACL,gBAAM,MAAM,GAAG,6BAAa,KAAb,EAAoB,KAAK,MAAzB,EAAiC,MAAjC,EAAyC,KAAK,CAAC,MAA/C,EAAwD,SAAxD,CAAf;;AACA,cAAI,SAAS,CAAC,MAAd,EAAsB;AACpB,kBAAM,CAAC,UAAP,CAAkB,MAAlB,CAAyB,KAAK,CAAC,gBAAN,GAAyB,CAAlD,EAAqD,CAArD,EAAwD,GAAG,SAAS,CAAC,MAAV,CAAiB,MAAjB,CAA3D;AACD;;AACD,eAAK,CAAC,MAAN,GAAe,SAAf;AACA,iBAAO,IAAP;AACD;;AACH,WAAK,UAAL;AACA,WAAK,MAAL;AACE,eAAO,KAAK,IAAL,CAAU,KAAV,EAAiB,MAAjB,EAAyB,SAAzB,CAAP;;AACF,WAAK,QAAL;AAEE,aAAK,CAAC,cAAN,IAAwB,CAAxB;AACA,eAAO,KAAK,MAAL,CAAY,KAAZ,EAAmB,MAAnB,EAA2B,SAA3B,EAAsC,KAAK,CAAC,SAAN,CAAiB,MAAvD,CAAP;;AACF,WAAK,iBAAL;AACE,eAAO,KAAK,eAAL,CAAqB,KAArB,EAA4B,MAA5B,CAAP;;AACF,WAAK,SAAL;AACE,eAAO,KAAK,OAAL,CAAa,KAAb,EAAoB,MAApB,EAA4B,KAAK,CAAC,SAAN,CAAiB,MAA7C,CAAP;AAvBJ;AAyBD;;AAEM,SAAO,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC5C,SAAK,CACF,UADH,CACc,MADd,EAEG,eAFH,CAEmB,WAFnB,EAGG,aAHH,CAGiB,WAHjB,EAG8B,EAH9B;AAID;;AAEM,MAAI,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA2D;AACpE,UAAM,EAAE,GAAG,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAX;AACA,MAAE,CAAC,oBAAH,CAAwB,MAAxB,EAAgC,KAAK,OAArC,EAA8C,QAA9C;AACA,UAAM,IAAI,GAAG,EAAE,CAAC,gBAAH,EAAb;;AACA,QAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,QAAE,CAAC,aAAH;AACA,WAAK,CAAC,UAAN,CAAiB,MAAjB,EAAyB,aAAzB,CAAwD,QAAxD,EAAkE;AAChE,YAAI,EAAE,IAAI,CAAC;AADqD,OAAlE;AAGA,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AAEM,YAAU,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAgD;AAC/D,UAAM,QAAQ,GAAa,KAAK,CAAC,WAAN,CAAoC,UAApC,CAA3B;AACA,UAAM,GAAG,GAAa,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAtB;AACA,UAAM,EAAE,GAAG,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAX;AACA,MAAE,CAAC,kBAAH,CAAsB,MAAtB,EAA8B,KAAK,OAAnC,EAA4C,MAAM,CAAC,KAAnD;AACA,UAAM,IAAI,GAAG,EAAE,CAAC,cAAH,EAAb;;AACA,QAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,IAAL,CAAU,MAA9B,EAAsC,EAAE,CAAxC,EAA2C;AACzC,cAAM,MAAM,GAAG,GAAG,CAAC,MAAJ,CAAW,QAAQ,CAAC,KAApB,CAAf;AACA,YAAI,MAAM,GAAG,MAAM,CAAC,YAAP,CAAoB,IAAI,CAAC,IAAL,CAAU,CAAV,CAApB,CAAb;AACA,cAAM,QAAQ,GAAG,MAAM,KAAK,SAAX,IAAwB,MAAM,KAAK,MAApD;;AACA,YAAI,QAAJ,EAAc;AACZ,YAAE,CAAC,aAAH;AACA,iBAAO,MAAP;AACD;AACF;AACF;;AACD,WAAO,SAAP;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,IAAlD,EAA8D;AACzE,UAAM,MAAM,GAAG,MAAM,CAAC,MAAP,KAAkB,MAAlB,GAA2B,IAA3B,GAAkC,MAAjD;AACA,UAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,MAAM,IAAG;AAC9B,iCAAY,KAAZ,EAAmB,KAAK,MAAxB,EAAgC,MAAhC,EAAwC;AAAE,cAAM,EAAE,IAAV;AAAgB,cAAhB;AAAwB,kBAAU,EAAE,KAApC;AAA2C,kBAAU,EAAE;AAAvD,OAAxC;AACD,KAFD;AAGA,UAAM,aAAa,GAAG,KAAK,CAAC,YAAN,CAAkC,IAAlC,EAAwC,MAAxC,CAAtB;;AACA,QAAI,aAAa,KAAK,SAAlB,IAA+B,aAAa,CAAC,IAAd,CAAmB,IAAnB,KAA4B,YAA/D,EAA6E;AAC3E,iCAAY,KAAZ,EAAmB,MAAnB,EAA2B,IAA3B;AACD;;AACD,WAAO,IAAP;AACD;;AAEM,SAAO,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAgD;AAC5D,SAAK,CACF,UADH,CACc,MADd,EAEG,aAFH,CAEiB,QAFjB,EAE2B,EAF3B,EAGG,aAHH,CAGuC,cAHvC,EAGuD;AAAE;AAAF,KAHvD;AAIA,WAAO,IAAP;AACD;;AAEM,iBAAe,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AACpD,UAAM,EAAE,GAAG,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAX;AACA,QAAI,SAAS,GAAuB,SAApC;AACA,UAAM,SAAS,GAAG,mDAA2B,KAA3B,EAAkC,MAAlC,CAAlB;;AACA,QAAI,CAAC,EAAE,CAAC,0BAAH,EAAL,EAAsC;AACpC,YAAM,KAAK,GAAG,SAAS,CAAC,KAAV,CACX,MADW,CACJ,CAAC,IAAI,CAAC,CAAC,IAAF,CAAO,WAAP,GAAqB,CADtB,EAEX,GAFW,CAEP,CAAC,KAAK;AACT,cAAM,EAAE,CAAC,CAAC,MADD;AAET,mBAAW,EAAE,CAAC,CAAC,IAAF,CAAO,IAAP,IAAe,SAAS,CAAC,SAAV,CAAoB,IAApB,CAAyB,CAAC,IAAI,CAAC,CAAC,MAAF,KAAa,CAAC,CAAC,MAA7C,IAAuD,GAAvD,GAA6D,EAA5E;AAFJ,OAAL,CAFM,CAAd;AAMA,QAAE,CAAC,uBAAH,CAA2B,KAA3B,EAAkC,aAAlC,EAAiD,KAAjD;AACA,WAAK,SAAL,CAAe,IAAI,aAAJ,CAAU,KAAK,CAAC,iBAAN,EAAV,CAAf;AACD,KATD,MASO;AACL,eAAS,GAAG,EAAE,CAAC,mBAAH,EAAZ;AACA,QAAE,CAAC,uBAAH;AACD;;AACD,QAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,YAAM;AAAE;AAAF,UAAW,mCAAgB,KAAhB,EAAuB,SAAvB,CAAjB;AACA,YAAM,gBAAgB,GAAG,SAAS,CAAC,SAAV,CAAoB,SAApB,CAA8B,CAAC,IAAI,CAAC,CAAC,MAAF,KAAa,SAAhD,CAAzB;;AAEA,UAAI,gBAAgB,IAAI,CAAxB,EAA2B;AACzB,6BAAQ,KAAR,EAAe,MAAf,EAAuB,SAAvB;AACD,OAFD,MAEO;AACL,oCAAe,KAAf,EAAsB,MAAtB,EAA8B,SAA9B,EAAyC,IAAzC;AACD;;AACD,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AA5M4B;;AAA/B,gD;;;;;;;;;;;;;ACpBA;;AACA;;AACA;;AAWA,SAAgB,kBAAhB,CAAmC,KAAnC,EAAoD,MAApD,EAAoE,MAApE,EAAoF,MAApF,EAAkG;AAChG,QAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;AACA,QAAM,cAAc,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAvB;AAEA,QAAM,KAAK,GAAG,uBAAe,KAAf,EAAsB,cAAc,CAAC,KAArC,EAA4C,QAAQ,CAAC,QAArD,EAA+D,cAAc,CAAC,QAA9E,CAAd;AAEA,QAAM,QAAQ,GAAG,IAAI,gBAAJ,CAAW,CAAC,QAAQ,CAAC,QAAT,CAAkB,EAAlB,GAAuB,cAAc,CAAC,QAAf,CAAwB,EAAhD,EAAoD,QAAQ,CAAC,QAAT,CAAkB,EAAlB,GAAuB,cAAc,CAAC,QAAf,CAAwB,EAAnG,CAAX,EAAmH,EAAnH,EAAjB;AACA,QAAM,kBAAkB,GAAI,MAAM,QAAQ,GAAG,CAAjB,CAAD,GAAwB,MAAM,CAAC,KAA1D;AAEA,QAAM,GAAG,GAAG,eAAO,KAAP,EAAc,MAAd,IAAwB,EAApC;AACA,QAAM,QAAQ,GAAG,MAAM,CAAC,QAAP,GAAkB,EAAnC;AACA,QAAM,WAAW,GAAG,0BAAkB,KAAlB,EAAyB,MAAzB,IAAmC,EAAvD;AAEA,QAAM,IAAI,GAAG,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,QAAd,CAAb;AACA,QAAM,eAAe,GAAG,kBAAkB,GAAG,CAArB,GAAyB,CAAzB,GAA6B,kBAAkB,GAAG,CAArB,GAAyB,GAAzB,GAA+B,GAApF;AACA,QAAM,YAAY,GAAG,KAAK,KAAK,MAAV,GAAmB,GAAnB,GAAyB,KAAK,KAAK,SAAV,GAAsB,GAAtB,GAA4B,CAA1E;AACA,SAAO;AACL,QADK;AAEL,mBAFK;AAGL,gBAHK;AAIL,SAAK,EAAE,IAAI,GAAG,eAAP,GAAyB,YAJ3B;AAML;AANK,GAAP;AAQD;;AAxBD,gD;;;;;;;;;;;;;AChBA;;AAQA;;AACA;;AAGA;;AAEA;;AACA;;AAOA,MAAa,OAAb,CAAoB;AAIlB,cAA0B,GAA1B,EAA6D,SAA7D,EAA8F;AAApE;AAAmC;AAH7C,sBAA8B,CAAC,QAAD,EAAW,UAAX,CAA9B;AAId,SAAK,MAAL,GAAc,IAAI,eAAJ,CAAW,GAAX,CAAd;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC3C,QAAI,OAAO,GAAG,IAAd;AACA,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;;AACA,YAAQ,QAAQ,CAAC,IAAjB;AACE,WAAK,QAAL;AACE,eAAO,GAAG,KAAK,YAAL,CAAkB,KAAlB,EAAyB,MAAzB,EAAiC,QAAjC,CAAV;AACA;;AACF,WAAK,OAAL;AACE,eAAO,GAAG,KAAK,WAAL,CAAiB,KAAjB,EAAwB,MAAxB,EAAgC,QAAhC,CAAV;AACA;AANJ;;AASA,QAAI,OAAJ,EAAa;AACX,WAAK,CACF,UADH,CACc,MADd,EAEG,eAFH,CAEmB,QAFnB,EAGG,eAHH,CAGmB,cAHnB;AAID;AACF;;AAEM,cAAY,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA6D;AAC9E,UAAM,MAAM,GAAG,KAAK,SAAL,CAAe,KAAf,EAAsB,MAAtB,EAA8B,QAA9B,CAAf;AACA,UAAM,WAAW,GAAG,KAAK,CAAC,YAAN,CAAyC,MAAzC,EAAiD,cAAjD,CAApB;AACA,UAAM,MAAM,GAAG,eACb,KAAK,CAAC,WAAN,CAA8B,IAA9B,CADa,EAEb,KAFa,EAGb,KAAK,MAHQ,EAIb,MAAM,CAAC,IAJM,EAKb,WAAW,CAAC,MALC,EAMb,MANa,EAOb,KAAK,SAPQ,CAAf;;AASA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,cAAQ,MAAM,CAAC,IAAf;AACE,aAAK,QAAL;AAAe;AACb,kBAAM,EAAE,GAAG,KAAK,CAAC,YAAN,CAAgC,MAAhC,EAAwC,IAAxC,CAAX;;AACA,gBAAI,EAAE,KAAK,SAAX,EAAsB;AACpB,0BAAO,KAAP,EAAc,EAAd,EAAkB,MAAlB,EAA0B,WAAW,CAAC,MAAtC,EAA8C,KAAK,SAAnD;AACD;;AACD;AACD;;AACD,aAAK,eAAL;AAAsB;AACpB,kBAAM,CAAC,GAAG,KAAK,CAAC,YAAN,CAAsC,WAAW,CAAC,MAAlD,EAA0D,UAA1D,CAAV;AACA,4BAAK,KAAL,EAAY,WAAW,CAAC,MAAxB,EAAgC,CAAC,CAAC,KAAF,GAAU,CAA1C,EAA6C,CAAC,CAAC,QAA/C;AACA;AACD;;AACD,aAAK,iBAAL;AAAwB;AACtB,kBAAM,CAAC,GAAG,KAAK,CAAC,YAAN,CAAsC,WAAW,CAAC,MAAlD,EAA0D,UAA1D,CAAV;AACA,4BAAK,KAAL,EAAY,WAAW,CAAC,MAAxB,EAAgC,CAAC,CAAC,KAAF,GAAU,CAA1C,EAA6C,CAAC,CAAC,QAA/C;AACA;AACD;;AACD,aAAK,aAAL;AAAoB;AAClB,kBAAM,IAAI,GAAG,KAAK,CAAC,YAAN,CAAkC,MAAlC,EAA0C,MAA1C,CAAb;AACA,iBAAK,CAAC,WAAN,CAAoC,UAApC,EAAgD,UAAhD,CAA2D,KAA3D,EAAkE,IAAI,CAAC,IAAvE;AACA;AACD;;AACD,aAAK,aAAL;AAAoB;AAClB,kBAAM,KAAK,GAAG,KAAK,CAAC,YAAN,CAAmC,MAAnC,EAA2C,OAA3C,CAAd;AACA,iBAAK,CAAC,WAAN,CAAoC,UAApC,EAAgD,UAAhD,CAA2D,KAA3D,EAAkE,KAAK,CAAC,IAAxE;AACA;AACD;;AACD,aAAK,SAAL;AAAgB;AACd,iBAAK,CACF,UADH,CACc,MAAM,CAAC,MADrB,EAEG,aAFH,CAEiB,QAFjB,EAE2B,EAF3B,EAGG,aAHH,CAGuC,cAHvC,EAGuD;AAAE,oBAAM,EAAE,WAAW,CAAC;AAAtB,aAHvD;AAIA;AACD;AAlCH;;AAoCA,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AAEO,WAAS,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA6D;AAC5E,QAAI,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,CAAb;;AACA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,YAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,QAAQ,CAAC,QAAT,CAAkB,CAAlB,CAApC,EAA0D,QAA1D,CAAT;AACD;;AACD,WAAO,MAAP;AACD;;AAEM,aAAW,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA6D;AAC7E,UAAM,KAAK,GAAG,KAAK,CAAC,YAAN,CAAmC,MAAnC,EAA2C,OAA3C,CAAd;;AACA,YAAQ,KAAK,CAAC,IAAd;AACE,WAAK,MAAL;AACE,eAAO,KAAK,IAAL,CAAU,KAAV,EAAiB,QAAjB,CAAP;;AACF,WAAK,MAAL;AACE,eAAO,KAAK,IAAL,CAAU,KAAV,EAAiB,MAAjB,EAAyB,QAAzB,EAAmC,IAAnC,CAAP;;AACF,WAAK,UAAL;AACA,WAAK,UAAL;AACE,eAAO,KAAK,YAAL,CAAkB,KAAlB,EAAyB,MAAzB,EAAiC,QAAjC,CAAP;;AACF,WAAK,OAAL;AACA,WAAK,QAAL;AACA,WAAK,OAAL;AACE,eAAO,KAAK,IAAL,CAAU,KAAV,EAAiB,MAAjB,EAAyB,QAAzB,EAAmC,KAAnC,CAAP;;AACF,WAAK,WAAL;AACE,aAAK,GAAL,CAAS,KAAT,EAAgB,QAAhB;AACA,eAAO,IAAP;;AACF;AACE,eAAO,IAAP;AAhBJ;AAkBD;;AAEM,MAAI,CAAC,KAAD,EAAkB,QAAlB,EAA6C;AACtD,UAAM,GAAG,GAAa,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAtB;AACA,UAAM,eAAe,GAAG,QAAQ,CAAC,QAAT,CAAkB,IAAlB,CAAuB,CAAC,IAAG;AACjD,YAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,CAAtC,EAAyC,UAAzC,CAAjB;AACA,aAAO,GAAG,CAAC,MAAJ,CAAW,QAAQ,CAAC,KAApB,EAA2B,YAA3B,CAAwC,QAAQ,CAAC,QAAjD,MAA+D,SAAtE;AACD,KAHuB,CAAxB;;AAIA,QAAI,CAAC,eAAL,EAAsB;AACpB,cAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,QAAQ,IAAI,KAAK,oBAAL,CAA0B,KAA1B,EAAiC,QAAjC,CAAtC;AACD;;AACD,WAAO,IAAP;AACD;;AAEM,MAAI,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA+D,MAA/D,EAA8E;AACvF,UAAM,GAAG,GAAa,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAtB;AACA,UAAM,EAAE,GAAO,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAf;;AACA,QAAI,CAAC,EAAE,CAAC,OAAR,EAAiB;AACf,YAAM,WAAW,GAAG,KAAK,CAAC,YAAN,CAAyC,MAAzC,EAAiD,cAAjD,CAApB;AACA,YAAM,aAAa,GAAG,KAAK,CAAC,YAAN,CAAqC,QAAQ,CAAC,QAAT,CAAkB,CAAlB,CAArC,EAA2D,SAA3D,CAAtB;AACA,YAAM,aAAa,GAAG,KAAK,CAAC,YAAN,CAAqC,WAAW,CAAC,MAAjD,EAAyD,SAAzD,CAAtB;AACA,YAAM,UAAU,GAAG,aAAa,CAAC,OAAd,GAAwB,IAA3C;AACA,YAAM,UAAU,GAAG,aAAa,CAAC,OAAd,GAAwB,IAA3C;AACA,QAAE,CAAC,0BAAH,CAA8B,KAA9B,EAAqC,MAArC,EAA6C,UAA7C,EAAyD,WAAW,CAAC,MAArE,EAA6E,UAA7E;AACA,WAAK,SAAL,CAAe,IAAI,aAAJ,CAAU,KAAK,CAAC,iBAAN,EAAV,CAAf;AACD,KARD,MAQO,IAAI,CAAC,EAAE,CAAC,6BAAH,EAAL,EAAyC;AAC9C,QAAE,CAAC,OAAH,GAAa,KAAb;AACA,YAAM,SAAS,GAAG,KAAK,CAAC,YAAN,CAAuC,MAAvC,EAA+C,WAA/C,CAAlB;;AACA,UAAI,MAAM,IAAI,SAAS,CAAC,OAAV,CAAkB,MAAlB,KAA6B,CAA3C,EAA8C;AAC5C,4BAAY,KAAZ,EAAmB,GAAnB,EAAwB,MAAxB;AACD;;AACD,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AAEM,KAAG,CAAC,KAAD,EAAkB,IAAlB,EAA8B;AACtC,UAAM,GAAG,GAAQ,KAAK,CAAC,WAAN,CAA+B,KAA/B,CAAjB;AACA,OAAG,CAAC,IAAJ,CAAS,IAAT;AACD;;AAEM,sBAAoB,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AACzD,UAAM,OAAO,GAAG,KAAK,CAAC,YAAN,CAAqC,MAArC,EAA6C,SAA7C,CAAhB;AACA,UAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,CAAf;AACA,UAAM,CAAC,GAAG,OAAO,CAAC,OAAlB;AACA,WAAO,CAAC,OAAR,GAAkB,MAAM,CAAC,OAAzB;AACA,UAAM,CAAC,OAAP,GAAiB,CAAjB;AACD;;AA7JiB;;AAApB,0B;;;;;;;;;;;;;AClBA;;AACA;;AAEA;;AAGA,MAAa,MAAb,CAAmB;AAAnB;AACkB,sBAA8B,CAAC,QAAD,CAA9B;AAmDjB;;AAjDQ,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC3C,UAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,CAAf;AACA,UAAM,YAAY,GAAG,MAAM,CAAC,IAAP,CAAY,GAAZ,EAArB;;AACA,QAAI,YAAY,KAAK,SAArB,EAAgC;AAC9B,WAAK,CAAC,UAAN,CAAiB,MAAjB,EAAyB,eAAzB,CAAyC,QAAzC;AACD,KAFD,MAEO;AACL,YAAM,IAAI,GAAG,KAAK,aAAL,CAAmB,KAAnB,EAA0B,MAA1B,EAAkC,YAAlC,CAAb;;AACA,UAAI,CAAC,IAAL,EAAW;AACT,cAAM,CAAC,IAAP,CAAY,IAAZ,CAAiB,YAAjB;AACD;AACF;AACF;;AAEM,eAAa,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAgD;AAClE,UAAM,KAAK,GAAG,KAAK,CAAC,YAAN,CAA4C,MAA5C,EAAoD,iBAApD,CAAd;AACA,UAAM,OAAO,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAhB;AACA,UAAM,KAAK,GAAG,MAAM,CAAC,MAAP,CAAc,KAAd,CAAoB,OAAO,CAAC,QAA5B,EAAsC,SAAtC,EAAd;;AACA,QAAI,KAAK,CAAC,KAAN,EAAJ,EAAmB;AACjB,aAAO,CAAC,IAAR,CAAa,wBAAb;AACA,aAAO,IAAP;AACD;;AAED,UAAM,QAAQ,GAAG,KAAK,CAAC,IAAN,CAAW,wBAAM,KAAN,CAAX,CAAjB;AACA,QAAI,WAAW,GAAG,OAAO,CAAC,QAAR,CAAiB,GAAjB,CAAqB,QAArB,CAAlB;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,UAAM,KAAK,GAAG,GAAG,CAAC,MAAJ,CAAW,OAAO,CAAC,KAAnB,CAAd;AAEA,UAAM,SAAS,GAAG,KAAK,CAAC,UAAN,CAAiB,KAAjB,EAAwB,WAAxB,EAAqC,MAArC,CAAlB;AACA,UAAM,OAAO,GAAG,8BAAoB,KAApB,EAA2B,KAAK,CAAC,OAAN,CAAc,WAAd,CAA3B,CAAhB;;AACA,QAAI,SAAS,IAAI,OAAO,KAAK,SAAzB,IAAsC,KAAK,CAAC,YAAN,CAAsC,OAAtC,EAA+C,UAA/C,EAA4D,WAAtG,EAAmH;AACjH,WAAK,CACF,UADH,CACc,OADd,EAEG,aAFH,CAEiB,QAFjB,EAE2B,EAF3B,EAGG,aAHH,CAGuC,cAHvC,EAGuD;AAAE;AAAF,OAHvD;AAIA,WAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,EAAuD,IAAvD,GAA8D,EAA9D;AACA,aAAO,KAAP;AACD,KAPD,MAOO;AACL,YAAM,UAAU,GAAG,IAAI,WAAJ,CAAS,MAAM,CAAC,MAAhB,EAAwB,KAAK,CAAC,aAAN,EAAxB,CAAnB;AACA,UAAI,OAAO,GAAG,KAAd;;AACA,UAAI,UAAU,CAAC,IAAX,CAAgB,OAAO,CAAC,QAAxB,MAAsC,UAAU,CAAC,IAAX,CAAgB,WAAhB,CAA1C,EAAwE;AACtE,mBAAW,GAAG,MAAM,CAAC,MAArB;AACA,eAAO,GAAG,IAAV;AACD;;AACD,WAAK,CAAC,eAAN,CAAsB,OAAO,CAAC,QAA9B;AACA,WAAK,CAAC,YAAN,CAAmB,WAAnB,EAAgC,MAAhC;AACA,aAAO,CAAC,QAAR,GAAmB,WAAnB;AACA,aAAO,OAAP;AACD;AACF;;AAnDgB;;AAAnB,wB;;;;;;;;;;;;;ACTA,MAAa,IAAb,CAAiB;AACf,cAA0B,MAA1B,EAAiD,SAAjD,EAAkE;AAAxC;AAAuB;AAAqB;;AAE/D,MAAI,CAAC,KAAD,EAAc;AACvB,UAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAN,GAAU,KAAK,MAAL,CAAY,CAAvB,IAA4B,KAAK,SAAL,CAAe,CAA3C,GAA+C,CAAC,KAAK,CAAC,CAAN,GAAU,KAAK,MAAL,CAAY,CAAvB,IAA4B,KAAK,SAAL,CAAe,CAApG;;AACA,QAAI,CAAC,GAAG,CAAR,EAAW;AACT,aAAO,MAAP;AACD,KAFD,MAEO,IAAI,CAAC,KAAK,CAAV,EAAa;AAClB,aAAO,QAAP;AACD,KAFM,MAEA;AACL,aAAO,OAAP;AACD;AACF;;AAEM,SAAO,CAAC,IAAD,EAAW;AACvB,WAAO,KAAK,IAAL,CAAU,IAAI,CAAC,MAAf,MAA2B,QAA3B,IAAuC,KAAK,IAAL,CAAU,IAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB,IAAI,CAAC,SAArB,CAAV,MAA+C,QAA7F;AACD;;AAhBc;;AAAjB,oB;;;;;;;;;;;;;ACFA;;AAKA;;AAGA;;AAEA,MAAa,KAAb,CAAkB;AAUhB,cAAmB,KAAnB,EAAgC;AAC9B,SAAK,QAAL,GAAgB,IAAI,qBAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAApB,EAA2B,KAA3B,CAAhB;AAEA,SAAK,KAAL,GAAa,IAAI,uBAAJ,CAAkB,KAAlB,CAAb;AACA,SAAK,UAAL,GAAkB,IAAI,4BAAJ,CAAuB,KAAvB,CAAlB;AACA,SAAK,UAAL,GAAkB,IAAI,uBAAJ,CAAkB,KAAlB,CAAlB;AAEA,SAAK,OAAL,GAAe,IAAI,oBAAJ,CAAa,KAAb,CAAf;AACA,SAAK,UAAL,GAAkB,IAAI,oBAAJ,CAAa,KAAb,CAAlB;AACD;;AAEM,SAAO,CAAC,QAAD,EAAmB,MAAnB,EAAiC;AAC7C,SAAK,KAAL,CAAW,GAAX,CAAe,QAAf,EAAyB,MAAzB;AACD;;AACM,SAAO,CAAC,QAAD,EAAiB;AAC7B,WAAO,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CAAP;AACD;;AACM,YAAU,CAAC,QAAD,EAAiB;AAChC,WAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,QAAlB,CAAP;AACD;;AAEM,cAAY,CAAC,QAAD,EAAmB,MAAnB,EAAiC;AAClD,SAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,EAA8B,MAA9B;AACD;;AACM,cAAY,CAAC,QAAD,EAAiB;AAClC,WAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAAP;AACD;;AAEM,cAAY,CAAC,QAAD,EAAmB,MAAnB,EAAiC;AAClD,SAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,EAA8B,MAA9B;AACD;;AACM,cAAY,CAAC,QAAD,EAAiB;AAClC,WAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAAP;AACD;;AACM,iBAAe,CAAC,QAAD,EAAiB;AACrC,WAAO,KAAK,UAAL,CAAgB,MAAhB,CAAuB,QAAvB,CAAP;AACD;;AAEM,cAAY,CAAC,QAAD,EAAiB;AAClC,WAAO,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAAP;AACD;;AACM,WAAS,CAAC,QAAD,EAAiB;AAC/B,WAAO,KAAK,OAAL,CAAa,GAAb,CAAiB,QAAjB,CAAP;AACD;;AAEM,YAAU,CAAC,KAAD,EAAkB,QAAlB,EAAkC;AACjD,WAAO,KAAK,WAAL,CAAiB,KAAjB,EAAwB,QAAxB,EAAkC,CAAC,IAAG;AAC3C,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,IAAP;AACD;;AACD,aAAO,CAAC,CAAC,OAAF,GAAY,KAAZ,KAAsB,MAA7B;AACD,KALM,CAAP;AAMD;;AAEM,YAAU,CAAC,KAAD,EAAkB,QAAlB,EAAoC,IAApC,EAA6D;AAC5E,WACE,KAAK,WAAL,CAAiB,KAAjB,EAAwB,QAAxB,EAAkC,CAAC,IAAG;AACpC,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,IAAP;AACD;;AACD,aAAO,CAAC,CAAC,OAAF,GAAY,QAAnB;AACD,KALD,KAMA,KAAK,gBAAL,CACE,KADF,EAEE,QAFF,EAGG,CAAD,IAAoC;AAClC,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,KAAP;AACD;;AACD,aAAO,CAAC,CAAC,OAAF,GAAY,QAAnB;AACD,KARH,EASE,IATF,CAPF;AAmBD;;AAEM,iBAAe,CAAC,KAAD,EAAkB,QAAlB,EAAkC;AACtD,WACE,KAAK,WAAL,CAAiB,KAAjB,EAAwB,QAAxB,EAAmC,CAAD,IAAoC;AACpE,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,IAAP;AACD;;AACD,aAAO,CAAC,CAAC,OAAF,GAAY,aAAnB;AACD,KALD,KAMA,KAAK,gBAAL,CAAsB,KAAtB,EAA6B,QAA7B,EAAwC,CAAD,IAAoC;AACzE,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,KAAP;AACD;;AACD,aAAO,CAAC,CAAC,OAAF,GAAY,aAAnB;AACD,KALD,CAPF;AAcD;;AAEM,aAAW,CAAC,KAAD,EAAkB,QAAlB,EAAoC,SAApC,EAA2F;AAC3G,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CAA3B,EAAqD,SAArD,CAAP;AACD;;AAEM,kBAAgB,CACrB,KADqB,EAErB,QAFqB,EAGrB,SAHqB,EAIrB,IAJqB,EAII;AAEzB,UAAM,SAAS,GAAG,KAAK,UAAL,CAAgB,GAAhB,CAAoB,QAApB,CAAlB;;AACA,QAAI,SAAS,KAAK,SAAd,IAA2B,IAAI,KAAK,SAApC,IAAiD,IAAI,KAAK,SAA9D,EAAyE;AACvE,aAAO,KAAP;AACD;;AACD,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,SAA3B,EAAsC,SAAtC,CAAP;AACD;;AAEM,gBAAc,CAAC,KAAD,EAAkB,MAAlB,EAA8C,SAA9C,EAAqG;AACxH,QAAI,OAAJ;;AACA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,aAAO,GAAG,KAAK,CAAC,YAAN,CAAqC,MAArC,EAA6C,SAA7C,CAAV;AACD;;AACD,WAAO,SAAS,CAAC,OAAD,CAAhB;AACD;;AAEM,aAAW,CAAC,KAAD,EAAkB,KAAlB,EAA8B;AAC9C,WAAO,KAAK,WAAL,CAAiB,KAAjB,EAAwB,KAAxB,EAA+B,CAAC,IAAI,CAAC,KAAK,SAA1C,CAAP;AACD;;AAEM,gBAAc,CAAC,KAAD,EAAkB,KAAlB,EAA8B;AACjD,WAAO,KAAK,YAAL,CAAkB,KAAlB,EAAyB,KAAzB,EAAgC,CAAC,IAAI,CAAC,KAAK,SAA3C,CAAP;AACD;;AAEM,aAAW,CAAC,KAAD,EAAkB,KAAlB,EAAgC,SAAhC,EAAuF;AACvG,WAAO,KAAK,CAAC,GAAN,CAAU,CAAC,IAAI,KAAK,WAAL,CAAiB,KAAjB,EAAwB,CAAxB,EAA2B,SAA3B,CAAf,CAAP;AACD;;AAEM,cAAY,CAAC,KAAD,EAAkB,KAAlB,EAAgC,SAAhC,EAAuF;AACxG,WAAO,KAAK,CAAC,IAAN,CAAW,CAAC,IAAI,KAAK,WAAL,CAAiB,KAAjB,EAAwB,CAAxB,EAA2B,SAA3B,CAAhB,CAAP;AACD;;AA9Ie;;AAAlB;;AAqJA,MAAa,gBAAb,CAA6B;AAK3B,cAAmC,KAAnC,EAAgD;AAAb;AAJnB,gBAAqB,KAArB;AAEA,kBAAkB,EAAlB;AAGd,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,KAAJ,CAAU,KAAK,KAAf,CAAjB;AACD;;AAEM,QAAM,CAAC,KAAD,EAAgB;AAC3B,SAAK,CAAC,UAAN,CAAiB,GAAjB,CAAqB,QAArB,EAAgC,OAAhC,CAAwC,MAAM,IAAG;AAC/C,YAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;;AACA,UAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,cAAM,KAAK,GAAG,KAAK,MAAL,CAAY,QAAQ,CAAC,KAArB,CAAd;AACA,cAAM,GAAG,GAAG,KAAK,CAAC,YAAN,CAAiC,MAAjC,EAAyC,KAAzC,CAAZ;;AACA,YAAI,GAAG,KAAK,SAAZ,EAAuB;AACrB,eAAK,CAAC,OAAN,GAAgB,GAAG,CAAC,GAApB;AACA,eAAK,CAAC,UAAN,CAAiB,GAAjB,CAAqB,GAAG,CAAC,GAAzB;AACD;AACF;AACF,KAVD;AAWD;;AA1B0B;;AAA7B,4C;;;;;;;;;;;;;AC/JA;;AAMA;;AAGA;;AA0BA,MAAM,aAAa,GAAgD;AACjE,UAAQ,EAAE,IAAI,aAAJ,CAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAV,CADuD;AAEjE,kBAAgB,IAAI,aAAJ,CAAU,CAAC,EAAD,EAAK,EAAL,EAAS,GAAT,CAAV,CAFiD;AAGjE,UAAQ,EAAE,SAHuD;AAIjE,cAAY,mBAAQ,CAAR,CAJqD;AAKjE,cAAY,mBAAQ,CAAR,CALqD;AAMjE,gBAAc,mBAAQ,CAAR,CANmD;AAOjE,gBAAc,mBAAQ,CAAR,CAPmD;AAQjE,iBAAe,mBAAQ,CAAR,CARkD;AASjE,iBAAe,mBAAQ,CAAR,CATkD;AAUjE,eAAa,mBAAQ,CAAR,CAVoD;AAWjE,eAAa,mBAAQ,CAAR,CAXoD;AAYjE,MAAI,EAAE,mBAAQ,CAAR;AAZ2D,CAAnE;;AAeA,MAAa,gBAAb,CAA6B;AAU3B,cAAmC,UAAnC,EAAqD;AAAlB;AATnB,gBAAqB,UAArB;AAET,sBAAsB,KAAtB;AACA,mBAAkB,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAlB;AACA,iBAAgB,CAAhB;AACA,wBAAsB,IAAI,aAAJ,CAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAV,CAAtB;AAES,kBAAkB,EAAlB;AAEyC;;AAElD,QAAM,CAAC,KAAD,EAAgB;AAC3B,UAAM,KAAK,GAAU,KAAK,CAAC,WAAN,CAAiC,OAAjC,CAArB;;AACA,QAAI,KAAK,CAAC,QAAN,CAAe,MAAf,CAAJ,EAA4B;AAC1B,WAAK,UAAL,GAAkB,CAAC,KAAK,UAAxB;AACD;;AAED,SAAK,CAAC,UAAN,CAAiB,GAAjB,CAAqB,gBAArB,EAAwC,OAAxC,CAAgD,KAAK,IAAG;AACtD,YAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,KAAtC,EAA6C,UAA7C,CAAjB;;AACA,UAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,aAAK,KAAL,CAAW,QAAQ,CAAC,KAApB,EAA2B,QAAQ,CAAC,QAApC;AACD;AACF,KALD;AAOA,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,UAAM,SAAS,GAAG,GAAG,CAAC,MAAJ,CAAW,KAAK,KAAhB,EAAuB,YAAvB,CAAoC,KAAK,MAAL,EAApC,CAAlB;;AACA,QAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,YAAM,CAAC,GAAG,KAAK,CAAC,YAAN,CAAuC,SAAvC,EAAkD,WAAlD,CAAV;AACA,YAAM,CAAC,GAAG,KAAK,CAAC,YAAN,CAAoC,CAAC,CAAC,MAAtC,EAA8C,QAA9C,CAAV;AACA,YAAM,KAAK,GAAG,aAAa,CAAC,CAAC,CAAC,IAAH,CAA3B;;AACA,UAAI,KAAK,KAAK,SAAd,EAAyB;AACvB,aAAK,YAAL,GAAoB,KAApB;AACD;AACF;AACF;;AAEM,QAAM;AACX,UAAM,CAAC,GAAG,KAAK,OAAL,CAAa,CAAb,GAAiB,IAAI,CAAC,KAAL,CAAW,KAAK,UAAL,CAAgB,CAAhB,GAAoB,CAA/B,CAAjB,GAAqD,CAA/D;AACA,UAAM,CAAC,GAAG,KAAK,OAAL,CAAa,CAAb,GAAiB,IAAI,CAAC,KAAL,CAAW,KAAK,UAAL,CAAgB,CAAhB,GAAoB,CAA/B,CAAjB,GAAqD,CAA/D;AACA,WAAO,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAP;AACD;;AAEM,oBAAkB,CAAC,KAAD,EAAgB;AACvC,UAAM,WAAW,GAAiB,EAAlC;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,UAAL,CAAgB,CAApC,EAAuC,CAAC,EAAxC,EAA4C;AAC1C,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,UAAL,CAAgB,CAApC,EAAuC,CAAC,EAAxC,EAA4C;AAC1C,aAAK,IAAI,CAAC,GAAG,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAAlC,EAAqC,CAAC,IAAI,CAA1C,EAA6C,CAAC,EAA9C,EAAkD;AAChD,gBAAM,KAAK,GAAG,KAAK,MAAL,CAAY,CAAZ,CAAd;AACA,cAAI,UAAJ;;AACA,cAAI,KAAK,CAAC,WAAV,EAAuB;AACrB,sBAAU,GAAG,KAAK,CAAC,aAAN,CAAoB,KAApB,EAA2B,KAAK,KAAhC,EAAuC,KAAK,WAAL,CAAiB;AAAE,eAAF;AAAK;AAAL,aAAjB,CAAvC,CAAb;AACD,WAFD,MAEO;AACL,sBAAU,GAAG,KAAK,CAAC,aAAN,CAAoB,KAApB,EAA2B,KAAK,KAAhC,EAAuC,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAvC,CAAb;AACD;;AACD,cAAI,UAAU,CAAC,MAAX,KAAsB,SAA1B,EAAqC;AACnC,uBAAW,CAAC,IAAZ,CAAiB,UAAjB;AACD;;AACD,cAAI,CAAC,UAAU,CAAC,MAAhB,EAAwB;AACtB;AACD;AACF;AACF;AACF;;AACD,WAAO,WAAW,CAAC,OAAZ,EAAP;AACD;;AAEM,UAAQ,CAAC,KAAD,EAAa;AAC1B,SAAK,MAAL,CAAY,IAAZ,CAAiB,KAAjB;AACD;;AAEM,aAAW,CAAC,CAAD,EAAY;AAC5B,WAAO,IAAI,gBAAJ,CAAW,CAAC,KAAK,OAAL,CAAa,CAAb,GAAiB,CAAC,CAAC,CAApB,EAAuB,KAAK,OAAL,CAAa,CAAb,GAAiB,CAAC,CAAC,CAA1C,CAAX,CAAP;AACD;;AAEM,WAAS,CAAC,CAAD,EAAY,QAAZ,EAA6B;AAC3C,UAAM,QAAQ,GAAG;AAAE,OAAC,EAAE,CAAC,CAAC,CAAF,GAAM,KAAK,OAAL,CAAa,CAAxB;AAA2B,OAAC,EAAE,CAAC,CAAC,CAAF,GAAM,KAAK,OAAL,CAAa;AAAjD,KAAjB;;AACA,QAAI,KAAK,UAAT,EAAqB;AACnB,cAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,KAAL,CAAW,QAAQ,CAAC,CAApB,CAAb;AACA,cAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,KAAL,CAAW,QAAQ,CAAC,CAApB,CAAb;AACD;;AACD,QAAI,CAAC,KAAK,UAAN,IAAoB,QAAxB,EAAkC;AAChC,cAAQ,CAAC,CAAT,IAAc,GAAd;AACA,cAAQ,CAAC,CAAT,IAAc,IAAd;AACD;;AACD,WAAO,QAAP;AACD;;AAEM,OAAK,CAAC,KAAD,EAAgB,QAAhB,EAAgC;AAC1C,SAAK,KAAL,GAAa,KAAb;AAEA,UAAM,CAAC,GAAG,QAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,KAAL,CAAW,KAAK,UAAL,CAAgB,CAAhB,GAAoB,CAA/B,CAAb,GAAiD,CAA3D;AACA,UAAM,CAAC,GAAG,QAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,KAAL,CAAW,KAAK,UAAL,CAAgB,CAAhB,GAAoB,CAA/B,CAAb,GAAiD,CAA3D;;AACA,QAAI,KAAK,UAAT,EAAqB;AACnB,WAAK,OAAL,GAAe,IAAI,gBAAJ,CAAW,CAAC,IAAI,CAAC,KAAL,CAAW,CAAX,CAAD,EAAgB,IAAI,CAAC,KAAL,CAAW,CAAX,CAAhB,CAAX,CAAf;AACD,KAFD,MAEO;AACL,WAAK,OAAL,GAAe,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAf;AACD;AACF;;AAlG0B;;AAA7B,4C;;;;;;;;;;;;;ACjDA;;AAUA,SAAS,GAAT,CAAa,GAAb,EAAwB;AACtB,SAAO;AACL,QAAI,EAAE,KADD;AAEL,QAAI,EAAE,KAFD;AAGL,OAAG,EAAE,KAHA;AAIL;AAJK,GAAP;AAMD;;AAEY,4BAAuD;AAElE,MAAI,EAAE,GAAG,CAAC,GAAD,CAFyD;AAGlE,MAAI,EAAE,GAAG,CAAC,GAAD,CAHyD;AAIlE,IAAE,EAAE,GAAG,CAAC,GAAD,CAJ2D;AAKlE,OAAK,EAAE,GAAG,CAAC,GAAD,CALwD;AAMlE,KAAG,EAAE,GAAG,CAAC,GAAD,CAN0D;AAOlE,MAAI,EAAE,GAAG,CAAC,GAAD,CAPyD;AAQlE,OAAK,EAAE,GAAG,CAAC,GAAD,CARwD;AAWlE,QAAM,EAAE,GAAG,CAAC,OAAD,CAXuD;AAYlE,QAAM,EAAE,GAAG,CAAC,QAAD,CAZuD;AAclE,KAAG,GAAG,CAAC,GAAD,CAd4D;AAelE,KAAG,GAAG,CAAC,GAAD,CAf4D;AAgBlE,KAAG,GAAG,CAAC,GAAD,CAhB4D;AAiBlE,KAAG,GAAG,CAAC,GAAD,CAjB4D;AAkBlE,KAAG,GAAG,CAAC,GAAD,CAlB4D;AAmBlE,KAAG,GAAG,CAAC,GAAD,CAnB4D;AAoBlE,KAAG,GAAG,CAAC,GAAD,CApB4D;AAqBlE,KAAG,GAAG,CAAC,GAAD,CArB4D;AAsBlE,KAAG,GAAG,CAAC,GAAD,CAtB4D;AAyBlE,WAAS,EAAE,GAAG,CAAC,GAAD,CAzBoD;AA0BlE,KAAG,EAAE,GAAG,CAAC,GAAD,CA1B0D;AA2BlE,UAAQ,EAAE,GAAG,CAAC,GAAD,CA3BqD;AA4BlE,OAAK,EAAE,GAAG,CAAC,GAAD,CA5BwD;AA+BlE,MAAI,EAAE,GAAG,CAAC,GAAD;AA/ByD,CAAvD;;AA0Db,MAAa,aAAb,CAA0B;AAqBxB,cAAmC,eAAnC,EAA4G;AAAzE;AApBnB,gBAAqB,OAArB;AAET,oBAAiC,SAAjC;AAEA,qBAAqB,KAArB;AACA,wBAAwB,KAAxB;AACA,yBAAyB,KAAzB;AAEA,iBAAiB,KAAjB;AACA,gBAAgB,KAAhB;AACA,eAAe,KAAf;AACA,gBAAgB,KAAhB;AAEA,mBAAuB,IAAI,GAAJ,EAAvB;AACA,sBAA0B,IAAI,GAAJ,EAA1B;AACA,uBAA2B,IAAI,GAAJ,EAA3B;AAEC,sBAAqC,SAArC;AACA,qBAA6B,EAA7B;AAGN,YAAQ,CAAC,gBAAT,CAA0B,WAA1B,EAAuC,CAAC,IAAK,KAAK,UAAL,GAAkB,CAA/D;AACA,YAAQ,CAAC,gBAAT,CAA0B,WAA1B,EAAuC,CAAC,IAAK,KAAK,UAAL,GAAkB,CAA/D;AACA,YAAQ,CAAC,gBAAT,CAA0B,SAA1B,EAAqC,CAAC,IAAI,KAAK,SAAL,CAAe,IAAf,CAAoB,CAApB,CAA1C;AACA,YAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,CAAC,IAAI,KAAK,SAAL,CAAe,IAAf,CAAoB,CAApB,CAAxC;AACD;;AAEM,QAAM;AACX,SAAK,gBAAL;AACA,SAAK,oBAAL;AACD;;AAED,UAAQ,CAAC,OAAD,EAAyB;AAC/B,UAAM,MAAM,GAAG,0BAAkB,OAAlB,CAAf;AACA,WAAO,KAAK,GAAL,KAAa,MAAM,CAAC,GAApB,IAA2B,KAAK,IAAL,KAAc,MAAM,CAAC,IAAhD,IAAwD,KAAK,IAAL,KAAc,MAAM,CAAC,IAA7E,IAAqF,KAAK,UAAL,CAAgB,GAAhB,CAAoB,MAAM,CAAC,GAA3B,CAA5F;AACD;;AAED,QAAM,CAAC,OAAD,EAAyB;AAC7B,UAAM,MAAM,GAAG,0BAAkB,OAAlB,CAAf;AACA,WAAO,KAAK,GAAL,KAAa,MAAM,CAAC,GAApB,IAA2B,KAAK,IAAL,KAAc,MAAM,CAAC,IAAhD,IAAwD,KAAK,IAAL,KAAc,MAAM,CAAC,IAA7E,IAAqF,KAAK,OAAL,CAAa,GAAb,CAAiB,MAAM,CAAC,GAAxB,CAA5F;AACD;;AAED,eAAa;AACX,UAAM,QAAQ,GAA6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAA3C;AACA,WAAO,QAAQ,CAAC,IAAT,CAAc,CAAC,IAAI,KAAK,QAAL,CAAc,CAAd,CAAnB,CAAP;AACD;;AAEM,qBAAmB;AACxB,QAAI,KAAK,GAAG,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAZ;;AACA,QAAI,KAAK,MAAL,CAAY,MAAZ,CAAJ,EAAyB;AACvB,WAAK,GAAG,KAAK,CAAC,GAAN,CAAU,iBAAO,aAAP,CAAqB,MAArB,CAAV,CAAR;AACD;;AACD,QAAI,KAAK,MAAL,CAAY,MAAZ,CAAJ,EAAyB;AACvB,WAAK,GAAG,KAAK,CAAC,GAAN,CAAU,iBAAO,aAAP,CAAqB,MAArB,CAAV,CAAR;AACD;;AACD,QAAI,KAAK,MAAL,CAAY,IAAZ,CAAJ,EAAuB;AACrB,WAAK,GAAG,KAAK,CAAC,GAAN,CAAU,iBAAO,aAAP,CAAqB,IAArB,CAAV,CAAR;AACD;;AACD,QAAI,KAAK,MAAL,CAAY,OAAZ,CAAJ,EAA0B;AACxB,WAAK,GAAG,KAAK,CAAC,GAAN,CAAU,iBAAO,aAAP,CAAqB,OAArB,CAAV,CAAR;AACD;;AACD,WAAO,KAAK,CAAC,SAAN,EAAP;AACD;;AAEO,kBAAgB;AACtB,SAAK,aAAL,GAAqB,KAArB;AACA,SAAK,YAAL,GAAoB,KAApB;;AACA,QAAI,KAAK,UAAT,EAAqB;AACnB,WAAK,QAAL,GAAgB,KAAK,eAAL,CAAqB,KAAK,UAA1B,CAAhB;AACA,YAAM,OAAO,GAAG,KAAK,UAAL,CAAgB,OAAhB,GAA0B,CAA1C;;AACA,UAAI,OAAJ,EAAa;AACX,YAAI,KAAK,QAAT,EAAmB;AACjB,eAAK,YAAL,GAAoB,IAApB;AACA,eAAK,SAAL,GAAiB,IAAjB;AACD;AACF,OALD,MAKO;AACL,aAAK,SAAL,GAAiB,KAAjB;AACA,aAAK,aAAL,GAAqB,IAArB;AACD;;AACD,WAAK,UAAL,GAAkB,SAAlB;AACD;AACF;;AAEO,sBAAoB;AAC1B,SAAK,UAAL,CAAgB,KAAhB;AACA,SAAK,WAAL,CAAiB,KAAjB;;AACA,SAAK,MAAM,CAAX,IAAgB,KAAK,SAArB,EAAgC;AAC9B,WAAK,KAAL,GAAa,CAAC,CAAC,QAAf;AACA,WAAK,IAAL,GAAY,CAAC,CAAC,OAAd;AACA,WAAK,GAAL,GAAW,CAAC,CAAC,MAAb;AACA,WAAK,IAAL,GAAY,CAAC,CAAC,OAAd;;AACA,UAAI,CAAC,CAAC,IAAF,KAAW,SAAf,EAA0B;AACxB,aAAK,UAAL,CAAgB,GAAhB,CAAoB,CAAC,CAAC,GAAtB;AACA,aAAK,OAAL,CAAa,GAAb,CAAiB,CAAC,CAAC,GAAnB;AACD,OAHD,MAGO;AACL,aAAK,WAAL,CAAiB,GAAjB,CAAqB,CAAC,CAAC,GAAvB;AACA,aAAK,OAAL,CAAa,MAAb,CAAoB,CAAC,CAAC,GAAtB;AACD;AACF;;AACD,SAAK,SAAL,GAAiB,EAAjB;AACD;;AArGuB;;AAA1B,sC;;;;;;;;;;;;;AC5EA;;AAaA,MAAa,WAAb,CAAwB;AAAxB;AACkB,gBAAqB,KAArB;AAEhB,mBAAoB,EAApB;AA0ED;;AAxEQ,QAAM,CAAC,EAAD,EAAa,CAAU;;AAE7B,QAAM,CAAC,EAAD,EAAa,CAAU;;AAE7B,YAAU,CAAC,MAAD,EAAiB,KAAjB,EAA8B;AAC7C,UAAM,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,KAAK,OAAL,CAAa,MAAb,GAAsB,MAAtB,GAA+B,KAA3C,CAAd;AACA,UAAM,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,KAAK,OAAL,CAAa,MAAtB,EAA8B,KAAK,GAAG,KAAtC,CAAZ;AACA,WAAO,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,EAA0B,GAA1B,CAAP;AACD;;AAEM,MAAI,CAAC,IAAD,EAAa;AACtB,SAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,MAAlD,EAAsE;AACjF,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,KAAb,EAAoB,MAApB,CAAhB;AACA,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,KAAb,EAAoB,MAApB,CAAf;AAEA,QAAI,UAAU,GAAG,GAAG,OAAO,IAAI,KAAK,OAAL,CAAa,OAAb,EAAsB,KAAtB,CAA4B,WAAW,MAAM,KAAK,KAAK,UAAL,CAC/E,MAAM,CAAC,MAAP,CAAc,KADiE,CAEhF,YAAY,KAAK,UAAL,CAAgB,MAAM,CAAC,MAAP,CAAc,WAA9B,CAA0C,QAFvD;AAIA,QAAI,OAAO,GAAG,GAAG,OAAO,IAAI,MAAM,CAAC,UAAP,GAAoB,YAApB,GAAmC,EAAE,IAC/D,MAAM,CAAC,KAAP,GAAe,KAAK,OAAL,CAAa,OAAb,EAAsB,KAAtB,CAAf,GAA8C,KAAK,OAAL,CAAa,OAAb,EAAsB,MAAtB,CAChD,IAAI,MAAM,EAFV;AAGA,QAAI,SAAS,GAAG,GAAG,OAAO,IAAI,KAAK,OAAL,CAAa,OAAb,EAAsB,MAAtB,CAA6B,IAAI,MAAM,EAArE;AACA,SAAK,OAAL,CAAa,IAAb,CAAkB,UAAlB;AACA,UAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,CAAC,IAAG;AACzB,UAAI,CAAC,CAAC,IAAF,KAAW,QAAf,EAAyB;AACvB,aAAK,OAAL,CAAa,IAAb,CAAkB,GAAG,OAAO,IAAI,CAAC,CAAC,WAAW,GAAG,MAAM,CAAC,UAAP,GAAoB,GAApB,GAA0B,EAAE,QAAQ,CAAC,CAAC,OAAO,MAA7F;AACD,OAFD,MAEO;AACL,aAAK,OAAL,CAAa,IAAb,CAAkB,GAAG,SAAS,IAAI,CAAC,CAAC,IAAI,EAAxC;AACD;AACF,KAND;AAOD;;AAEM,MAAI,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AACzC,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,KAAb,EAAoB,MAApB,CAAhB;AACA,SAAK,OAAL,CAAa,IAAb,CAAkB,GAAG,OAAO,OAA5B;AACD;;AAEM,YAAU,CAAC,KAAD,EAAc;AAC7B,WAAO,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,GAAG,GAAnB,CAAuB,GAAjC;AACD;;AAEM,SAAO,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC5C,UAAM,OAAO,GAAG,qBAAW,KAAX,EAAkB,MAAlB,CAAhB;;AACA,QAAI,OAAO,KAAK,SAAhB,EAA2B;AACzB,aAAO,OAAO,CAAC,IAAf;AACD;;AACD,WAAO,WAAP;AACD;;AAEM,SAAO,CAAC,MAAD,EAAiB,IAAjB,EAA6B;AACzC,QAAI,MAAM,KAAK,KAAf,EAAsB;AACpB,UAAI,IAAI,KAAK,MAAb,EAAqB;AACnB,eAAO,QAAP;AACD;;AACD,UAAI,IAAI,KAAK,KAAb,EAAoB;AAClB,eAAO,OAAP;AACD;;AACD,aAAO,IAAI,GAAG,GAAd;AACD;;AACD,WAAO,IAAP;AACD;;AAEM,OAAK,CAAC,MAAD,EAAe;AACzB,QAAI,MAAM,KAAK,KAAf,EAAsB;AACpB,aAAO,MAAP;AACD;;AACD,WAAO,GAAG,MAAM,IAAhB;AACD;;AA5EqB;;AAAxB,kC;;;;;;;;;;;;;ACRA;;AAEA;;AAEA;;AAEA;;AAEA,MAAa,cAAb,CAA2B;AAIzB,cAAmC,OAAnC,EAAqD,YAArD,EAA+E;AAA5C;AAHnB,sBAA8B,CAAC,WAAD,EAAc,IAAd,EAAoB,UAApB,CAA9B;AAId,SAAK,MAAL,GAAc,IAAI,eAAJ,CAAW,YAAX,CAAd;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC3C,UAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,MAApC,EAA4C,QAA5C,CAAf;AACA,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,WAA9C,CAAjB;AAEA,UAAM,aAAa,GAAG,MAAM,KAAK,SAAjC;AACA,UAAM,UAAU,GAAG,QAAQ,CAAC,KAAT,IAAkB,QAAQ,CAAC,KAA9C;;AACA,QAAI,CAAC,aAAL,EAAoB;AAClB,UAAI,CAAC,UAAL,EAAiB;AACf,YAAI,QAAQ,CAAC,cAAT,KAA4B,SAAhC,EAA2C;AACzC,gBAAM,gBAAgB,GAAG,8CAA0B,KAA1B,EAAiC,MAAjC,EAAyC,KAAzC,CAAzB;AACA,eAAK,YAAL,CAAkB,KAAlB,EAAyB,MAAzB,EAAiC,QAAjC,EAA2C,gBAA3C;AACD,SAHD,MAGO;AACL,eAAK,UAAL,CAAgB,KAAhB,EAAuB,MAAvB,EAA+B,QAA/B,EAAyC,QAAQ,CAAC,cAAlD;AACD;AACF,OAPD,MAOO;AACL,aAAK,OAAL,CAAa,KAAb,EAAoB,MAApB;AACD;AACF;AACF;;AAEM,cAAY,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA+D,iBAA/D,EAAoG;AACrH,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;AACA,QAAI,MAAM,GAAG,KAAK,UAAL,CAAgB,KAAhB,EAAuB,QAAQ,CAAC,QAAhC,CAAb;;AAEA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,YAAM,cAAc,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAvB;AACA,YAAM,IAAI,GAAG,KAAK,OAAL,CAAa,GAAb,CAAiB,KAAjB,EAAwB,QAAQ,CAAC,KAAjC,EAAwC,QAAQ,CAAC,QAAjD,EAA2D,cAAc,CAAC,QAA1E,EAAoF,EAApF,CAAb;AAEA,YAAM,eAAe,GAAqB,EAA1C;AACA,YAAM,YAAY,GAAqB,EAAvC;AACA,YAAM,UAAU,GAAqB,EAArC;;AACA,WAAK,MAAM,gBAAX,IAA+B,iBAA/B,EAAkD;AAChD,cAAM,cAAc,GAAG;AAAE,gBAAM,EAAE,gBAAgB,CAAC,MAA3B;AAAmC,gBAAM,EAAE,gBAAgB,CAAC;AAA5D,SAAvB;AACA,cAAM,WAAW,GAAG,gBAAgB,CAAC,MAAjB,CAAwB,UAAxB,CAAmC,IAAnC,CAAwC,CAAC,IAAI,CAAC,CAAC,IAAF,KAAW,UAAxD,MAAwE,SAA5F;;AACA,YAAI,WAAJ,EAAiB;AACf,yBAAe,CAAC,IAAhB,CAAqB,cAArB;AACD;;AACD,cAAM,SAAS,GACb,gBAAgB,CAAC,MAAjB,CAAwB,UAAxB,CAAmC,IAAnC,CAAwC,CAAC,IAAI,IAAI,KAAK,SAAT,IAAsB,CAAC,CAAC,IAAF,KAAW,QAAjC,IAA6C,CAAC,CAAC,KAAF,IAAW,IAAI,CAAC,IAA1G,MAAoH,SADtH;;AAEA,YAAI,SAAJ,EAAe;AACb,sBAAY,CAAC,IAAb,CAAkB,cAAlB;AACD;;AACD,kBAAU,CAAC,IAAX,CAAgB,cAAhB;AACD;;AAED,YAAM,IAAI,GAAG,cAAc,CAAC,QAAf,CAAwB,KAAxB,CAA8B,QAAQ,CAAC,QAAvC,CAAb;AACA,UAAI,SAAS,GAA+B,SAA5C;AACA,YAAM,YAAY,GAAG,IAAI,CAAC,EAAL,KAAY,CAAZ,IAAiB,eAAe,CAAC,MAAhB,GAAyB,CAA/D;AACA,YAAM,SAAS,GAAG,IAAI,KAAK,SAA3B;;AACA,UAAI,YAAJ,EAAkB;AAChB,iBAAS,GAAG,KAAK,MAAL,CAAY,IAAZ,CAAiB,eAAjB,CAAZ;AACD,OAFD,MAEO,IAAI,YAAY,CAAC,MAAb,GAAsB,CAAtB,IAA2B,SAA/B,EAA0C;AAC/C,iBAAS,GAAG,KAAK,MAAL,CAAY,IAAZ,CAAiB,YAAjB,CAAZ;AACD,OAFM,MAEA;AACL,iBAAS,GAAG,UAAU,CAAC,IAAX,CAAgB,CAAC,IAAI,CAAC,CAAC,MAAF,CAAS,IAAT,KAAkB,SAAvC,CAAZ;AACD;;AAED,UAAI,SAAS,KAAK,SAAlB,EAA6B;AAC3B,gBAAQ,CAAC,cAAT,GAA0B;AACxB,wBAAc,EAAE,CADQ;AAExB,gBAFwB;AAGxB,0BAAgB,EAAE,CAHM;AAIxB;AAJwB,SAA1B;AAMD,OAPD,MAOO;AACL,aAAK,OAAL,CAAa,KAAb,EAAoB,MAApB;AACD;AACF,KA3CD,MA2CO;AACL,WAAK,OAAL,CAAa,KAAb,EAAoB,MAApB;AACD;AACF;;AAEM,YAAU,CAAC,KAAD,EAAkB,MAAlB,EAAkC,QAAlC,EAA+D,KAA/D,EAAoF;AACnG,UAAM,MAAM,GAAG,KAAK,CAAC,SAAN,CAAiB,MAAhC;AACA,UAAM,UAAU,GAAG,MAAM,CAAC,UAAP,CAAkB,MAArC;;AACA,QAAI,KAAK,CAAC,gBAAN,IAA0B,UAA9B,EAA0C;AACxC,yCAAoB,KAApB,EAA2B,MAA3B;;AACA,cAAQ,MAAM,CAAC,IAAf;AACE,aAAK,QAAL;AACE,kBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;;AACF,aAAK,UAAL;AACE,kBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;;AACF,aAAK,QAAL;AACE,cAAI,QAAQ,CAAC,KAAb,EAAoB;AAClB,oBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACD,WAFD,MAEO;AACL,oBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACD;;AACD;;AACF,aAAK,KAAL;AACA,aAAK,MAAL;AACE,kBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA,kBAAQ,CAAC,KAAT,GAAiB,IAAjB;AACA;AAlBJ;;AAoBA,cAAQ,CAAC,cAAT,GAA0B,SAA1B;AACD,KAvBD,MAuBO;AACL,YAAM,aAAa,GAAG,MAAM,CAAC,UAAP,CAAkB,KAAK,CAAC,gBAAxB,CAAtB;;AACA,cAAQ,aAAa,CAAC,IAAtB;AACE,aAAK,UAAL;AACE,eAAK,IAAL,CAAU,KAAV,EAAiB,MAAjB,EAAyB,KAAK,CAAC,MAA/B,EAAwC,aAAxC;AACA;;AACF,aAAK,QAAL;AACE,eAAK,MAAL,CAAY,KAAZ,EAAmB,MAAnB,EAA2B,KAAK,CAAC,MAAjC,EAA0C,aAA1C;AACA;;AACF,aAAK,QAAL;AACE,eAAK,MAAL,CAAY,KAAZ,EAAmB,MAAnB,EAA2B,aAA3B,EAA0C,KAAK,CAAC,SAAN,CAAiB,MAA3D;AACA;AATJ;;AAWA,WAAK,CAAC,gBAAN;AACD;AACF;;AAEM,MAAI,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,QAAlD,EAAoE;AAC7E,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;AACA,UAAM,cAAc,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAvB;AACA,UAAM,IAAI,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,KAA1B,EAAiC,QAAQ,CAAC,KAA1C,EAAiD,QAAQ,CAAC,QAA1D,EAAoE,cAAc,CAAC,QAAnF,EAA6F;AACxG,UAAI,EAAE,MADkG;AAExG,iBAAW,EAAE,QAAQ,CAAC,KAFkF;AAGxG,eAAS,EAAE,IAH6F;AAIxG,gBAAU,EAAE;AAJ4F,KAA7F,CAAb;;AAMA,QAAI,IAAI,KAAK,SAAT,IAAsB,IAAI,CAAC,IAAL,CAAU,MAAV,GAAmB,CAA7C,EAAgD;AAC9C,WAAK,CAAC,UAAN,CAAiB,MAAjB,EAAyB,aAAzB,CAAwD,QAAxD,EAAkE;AAChE,YAAI,EAAE,IAAI,CAAC;AADqD,OAAlE;AAGD;AACF;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,MAAlD,EAAgE;AAC3E,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAjB;AACA,UAAM,cAAc,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA+C,UAA/C,CAAvB;AACA,UAAM,IAAI,GAAG,KAAK,OAAL,CAAa,GAAb,CAAiB,KAAjB,EAAwB,QAAQ,CAAC,KAAjC,EAAwC,QAAQ,CAAC,QAAjD,EAA2D,cAAc,CAAC,QAA1E,EAAoF,EAApF,CAAb;;AACA,QAAI,IAAI,KAAK,SAAT,IAAsB,IAAI,CAAC,IAAL,IAAa,MAAM,CAAC,KAA9C,EAAqD;AACnD,mCAAa,KAAb,EAAoB,KAAK,MAAzB,EAAiC,MAAjC,EAAyC,MAAzC,EAAkD,MAAlD;AACD;AACF;;AAEM,YAAU,CAAC,KAAD,EAAkB,QAAlB,EAAkC;AACjD,QAAI,aAAJ;AACA,QAAI,QAAQ,GAAG,MAAM,CAAC,gBAAtB;AACA,SAAK,CAAC,UAAN,CAAiB,QAAjB,EAA2B,OAA3B,CAAmC,MAAM,IAAG;AAC1C,YAAM,cAAc,GAAG,KAAK,CAAC,YAAN,CAAsC,MAAtC,EAA8C,UAA9C,CAAvB;;AACA,UAAI,cAAc,KAAK,SAAvB,EAAkC;AAChC,cAAM,IAAI,GAAG,QAAQ,CAAC,KAAT,CAAe,cAAc,CAAC,QAA9B,EAAwC,aAAxC,EAAb;;AACA,YAAI,aAAa,KAAK,SAAlB,IAA+B,IAAI,GAAG,QAA1C,EAAoD;AAClD,uBAAa,GAAG,MAAhB;AACA,kBAAQ,GAAG,IAAX;AACD;AACF;AACF,KATD;AAUA,WAAO,aAAP;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAkC,MAAlC,EAAkD,IAAlD,EAA8D;AACzE,UAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,MAAM,IAAG;AAC9B,iCAAY,KAAZ,EAAmB,KAAK,MAAxB,EAAgC,MAAhC,EAAwC;AAAE,cAAM,EAAE,IAAV;AAAgB,cAAhB;AAAwB,kBAAU,EAAE,KAApC;AAA2C,kBAAU,EAAE;AAAvD,OAAxC;AACD,KAFD;AAGA,WAAO,IAAP;AACD;;AAEM,SAAO,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC5C,SAAK,CACF,UADH,CACc,MADd,EAEG,eAFH,CAEmB,WAFnB,EAGG,aAHH,CAGiB,WAHjB,EAG8B,EAH9B;AAID;;AAhLwB;;AAA3B,wC;;;;;;;;;;;;;ACZA;;AACA;;AAIA,MAAa,UAAb,CAAuB;AAIrB,cAAmB,GAAnB,EAAoC;AAHpB,sBAA8B,CAAC,YAAD,CAA9B;AAId,SAAK,OAAL,GAAe,IAAI,eAAJ,CAAW,GAAX,CAAf;AACD;;AAEM,QAAM,CAAC,KAAD,EAAkB,MAAlB,EAAgC;AAC3C,uCAAoB,KAApB,EAA2B,MAA3B;AACA,iCAAc,KAAd,EAAqB,MAArB,EAA6B,KAAK,OAAlC;AACA,SAAK,CAAC,YAAN,CAAuC,MAAvC,EAA+C,WAA/C,EAA6D,OAA7D,CAAqE,OAArE,CAA6E,IAAI,IAAG;AAClF,yCAAoB,KAApB,EAA2B,IAA3B;AACA,mCAAc,KAAd,EAAqB,IAArB,EAA2B,KAAK,OAAhC;AACD,KAHD;AAKA,SAAK,CACF,UADH,CACc,MADd,EAEG,eAFH,CAEmB,YAFnB,EAGG,aAHH,CAGoC,WAHpC,EAGiD;AAC7C,WAAK,EAAE,KADsC;AAE7C,WAAK,EAAE,KAFsC;AAG7C,oBAAc,EAAE;AAH6B,KAHjD;AAQD;;AAxBoB;;AAAvB,gC;;;;;;;;;;;;;ACKA,MAAa,gBAAb,CAA6B;AAA7B;AACkB,gBAAqB,UAArB;AAEA,wBAA8B,IAAI,GAAJ,EAA9B;AACA,wBAA+B,IAAI,GAAJ,EAA/B;AAiBjB;;AAfQ,QAAM,CAAC,EAAD,EAAa,CAAU;;AAE7B,QAAM,CAAC,EAAD,EAAa,CAAU;;AAE7B,YAAU,CAAC,KAAD,EAAkB,IAAlB,EAAgC;AAC/C,SAAK,YAAL,CAAkB,GAAlB,CAAsB,IAAtB;AACA,UAAM,GAAG,GAAQ,KAAK,CAAC,WAAN,CAA+B,KAA/B,CAAjB;AACA,OAAG,CAAC,IAAJ,CAAS,gBAAgB,IAAI,GAA7B;AACD;;AAEM,YAAU,CAAC,KAAD,EAAkB,KAAlB,EAAkC;AACjD,SAAK,YAAL,CAAkB,GAAlB,CAAsB,KAAtB;AACA,UAAM,GAAG,GAAQ,KAAK,CAAC,WAAN,CAA+B,KAA/B,CAAjB;AACA,OAAG,CAAC,IAAJ,CAAS,qBAAqB,KAAK,GAAnC;AACD;;AApB0B;;AAA7B,4C;;;;;;;;;;;;;ACXA;;AAKA;;AACA;;AACA;;AAGA,MAAa,OAAb,SAA6B,qBAA7B,CAA0C;AAExC,cAAmB,GAAnB,EAAoC;AAClC,UAAM,SAAN,EAAiB,CAAC,KAAD,EAAQ,gBAAR,EAA0B,oBAA1B,EAAgD,KAAhD,EAAuD,SAAvD,EAAkE,mBAAlE,CAAjB;AACA,SAAK,OAAL,GAAe,IAAI,eAAJ,CAAW,GAAX,CAAf;AACD;;AAEM,OAAK,CAAC,KAAD,EAAgB;AAC1B,UAAM,KAAN,CAAY,KAAZ;;AACA,QAAI,KAAK,CAAC,UAAN,CAAiB,GAAjB,CAAqB,gBAArB,EAAwC,IAAxC,OAAmD,CAAvD,EAA0D;AACxD,WAAK,mBAAL,CAAyB,KAAzB;AACD;;AACD,SAAK,CAAC,WAAN,CAA8B,IAA9B,EAAoC,KAApC;AACD;;AAEM,qBAAmB,CAAC,KAAD,EAAgB;AACxC,UAAM,GAAG,GAAa,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAtB;AACA,SAAK,CAAC,UAAN,CAAiB,GAAjB,CAAqB,OAArB,EAA+B,OAA/B,CAAuC,KAAK,IAAG;AAC7C,WAAK,WAAL,CAAiB,KAAjB,EAAwB,KAAK,OAA7B,EAAsC,GAAtC,EAA2C,KAA3C;AACD,KAFD;AAGA,SAAK,aAAL,CAAmB,KAAnB;AACD;;AAEM,aAAW,CAAC,KAAD,EAAkB,MAAlB,EAAkC,GAAlC,EAAiD,KAAjD,EAA8D;AAC9E,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,KAAtC,EAA6C,UAA7C,CAAjB;AACA,UAAM,MAAM,GAAG,+BAAkB,MAAlB,CAAyB,KAAzB,EAAgC,MAAhC,EAAwC,UAAxC,EAAoD;AACjE,UAAI,EAAE,MAAM,CAAC,IAAP,CAAY,CAAC,YAAD,EAAe,cAAf,EAA+B,eAA/B,EAAgD,aAAhD,CAAZ;AAD2D,KAApD,CAAf;AAGA,SAAK,CACF,UADH,CACc,MADd,EAEG,aAFH,CAEiB,UAFjB,EAE6B,EAAE,GAAG;AAAL,KAF7B,EAGG,aAHH,CAGqB,gBAHrB,EAGuC,EAHvC;AAKA,UAAM,EAAE,GAAG,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAX;AACA,MAAE,CAAC,UAAH,CAAc,KAAd,EAAqB,MAArB;AAEA,OAAG,CAAC,MAAJ,CAAW,QAAQ,CAAC,KAApB,EAA2B,YAA3B,CAAwC,QAAQ,CAAC,QAAjD,EAA2D,MAA3D;AACD;;AAEM,eAAa,CAAC,KAAD,EAAgB;AAClC,UAAM,QAAQ,GAAa,KAAK,CAAC,WAAN,CAAoC,UAApC,CAA3B;AACA,YAAQ,CAAC,QAAT,CAAkB;AAChB,mBAAa,EAAE,CAAC,KAAD,EAAQ,CAAR,EAAW,QAAX,KAAuB;AACpC,cAAM,EAAE,GAAG,KAAK,CAAC,WAAN,CAA8B,IAA9B,CAAX;AACA,eAAO;AAAE,gBAAM,EAAE,SAAV;AAAqB,gBAAM,EAAE,CAAC,EAAE,CAAC,UAAH,CAAc,QAAd,CAA9B;AAAuD,kBAAQ,EAAE;AAAjE,SAAP;AACD,OAJe;AAKhB,iBAAW,EAAE;AALG,KAAlB;AAOD;;AAEM,QAAM,CAAC,KAAD,EAAkB,SAAlB,EAAmD;AAC9D,UAAM,MAAM,GAAW,KAAK,CAAC,UAAN,CAAiB,QAAjB,EAA2B,KAA3B,EAAvB;;AACA,QAAI,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,MAA3B,CAAJ,EAAwC;AACtC,eAAS,CAAC,IAAI,oBAAJ,EAAD,CAAT;AACD;AACF;;AAEM,eAAa;AAClB,WAAO,IAAP;AACD;;AA3DuC;;AAA1C,0B;;;;;;;;;;;;;ACXA;;AAGA,MAAa,QAAb,SAA8B,qBAA9B,CAA2C;AACzC;AACE,UAAM,WAAN,EAAmB,CAAC,mBAAD,CAAnB;AACD;;AAEM,OAAK,CAAC,KAAD,EAAgB;AAC1B,UAAM,KAAN,CAAY,KAAZ;AACA,UAAM,KAAK,GAAG,KAAK,CAAC,UAAN,CAAiB,gBAAjB,EAAmC,KAAnC,EAAd;AACA,SAAK,CAAC,UAAN,CAAiB,gBAAjB,EAAmC,KAAnC;AAEA,UAAM,QAAQ,GAAG,KAAK,CAAC,YAAN,CAAsC,KAAtC,EAA6C,UAA7C,CAAjB;;AACA,QAAI,QAAJ,EAAc;AACZ,WAAK,CACF,YADH,GAEG,aAFH,CAEqB,kBAFrB,EAEyC,EAFzC,EAGG,aAHH,CAGiB,gBAHjB,EAGmC,EAHnC,EAIG,aAJH,CAIoC,UAJpC,EAIgD,EAAE,GAAG;AAAL,OAJhD;AAKD;AACF;;AAEM,QAAM,CAAC,MAAD,EAAiB;AAC5B,WAAO,KAAP;AACD;;AAEM,QAAM,CAAC,MAAD,EAAiB,CAAU;;AAEjC,eAAa;AAClB,WAAO,IAAP;AACD;;AA5BwC;;AAA3C,4B;;;;;;;;;;;;;ACHA;;AAOA;;AACA;;AAEA;;AAEA,MAAa,WAAb,SAAiC,qBAAjC,CAA8C;AAG5C;AACE,UAAM,cAAN,EAAsB,CAAC,gBAAD,CAAtB;AACD;;AAEM,OAAK,CAAC,KAAD,EAAgB;AAC1B,UAAM,KAAN,CAAY,KAAZ;AAEA,UAAM,QAAQ,GAAa,KAAK,CAAC,WAAN,CAAoC,UAApC,CAA3B;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,YAAQ,CAAC,QAAT,CAAkB;AAChB,mBAAa,EAAE,CAAC,MAAD,EAAS,KAAT,EAAgB,QAAhB,KAA4B;AACzC,cAAM,MAAM,GAAG,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,OAAlB,CAA0B,QAA1B,CAAf;AACA,eAAO;AAAE,gBAAF;AAAU,gBAAM,EAAE,IAAlB;AAAwB,kBAAQ,EAAE;AAAlC,SAAP;AACD,OAJe;AAKhB,iBAAW,EAAE;AALG,KAAlB;AAOA,YAAQ,CAAC,QAAT,CAAkB;AAChB,mBAAa,EAAE,CAAC,MAAD,EAAS,KAAT,EAAgB,QAAhB,KAA4B;AACzC,cAAM,MAAM,GAAG,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,YAAlB,CAA+B,QAA/B,CAAf;AACA,eAAO;AAAE,gBAAF;AAAU,gBAAM,EAAE,IAAlB;AAAwB,kBAAQ,EAAE;AAAlC,SAAP;AACD,OAJe;AAKhB,iBAAW,EAAE;AALG,KAAlB;AAQA,SAAK,WAAL,GAAmB,wBAAO,KAAP,CAAnB;AACD;;AAEM,QAAM,CAAC,EAAD,EAAa,CAAU;;AAE7B,MAAI,CAAC,KAAD,EAAgB;AACzB,UAAM,IAAN,CAAW,KAAX;;AACA,QAAI,KAAK,WAAL,KAAqB,SAAzB,EAAoC;AAClC,YAAM,MAAM,GAAG,KAAK,CAAC,YAAN,CAAoC,KAAK,WAAzC,EAAsD,QAAtD,CAAf;AACA,WAAK,CACF,YADH,GAEG,aAFH,CAEoC,UAFpC,EAEgD;AAAE,aAAK,EAAE,MAAM,CAAC,KAAhB;AAAuB,gBAAQ,EAAE,MAAM,CAAC,KAAP,CAAa,CAAb;AAAjC,OAFhD,EAGG,aAHH,CAGiB,OAHjB,EAG0B,EAH1B;AAID;;AACD,SAAK,SAAL,CAAe,KAAf;AACD;;AAEM,eAAa;AAClB,WAAO,KAAP;AACD;;AAEO,WAAS,CAAC,KAAD,EAAgB;AAC/B,UAAM,GAAG,GAAa,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAtB;AACA,OAAG,CAAC,MAAJ,CAAW,OAAX,CAAmB,CAAC,MAAD,EAAS,KAAT,KAAkB;AACnC,YAAM,CAAC,QAAP,CAAgB,OAAhB,CAAwB,CAAC,IAAG;AAC1B,cAAM,cAAc,GAAG,mCAAgB,EAAhB,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAzB,EAAgC,IAAhC,CAAqC,EAAE,IAAG;AAC/D,gBAAM,CAAC,GAAG,MAAM,CAAC,OAAP,CAAe,EAAf,CAAV;AACA,iBAAO,CAAC,KAAK,SAAN,IAAmB,KAAK,CAAC,YAAN,CAAqC,CAArC,EAAwC,SAAxC,EAAoD,OAApD,GAA8D,IAA9D,KAAuE,MAAjG;AACD,SAHsB,CAAvB;;AAIA,YAAI,MAAM,CAAC,OAAP,CAAe,CAAf,MAAsB,SAAtB,IAAmC,cAAvC,EAAuD;AACrD,0CAAsB,KAAtB,EAA6B,KAA7B,EAAoC,CAApC,EAAuC,MAAvC;AACD;AACF,OARD;AASD,KAVD;AAWD;;AA7D2C;;AAA9C,kC;;;;;;;;;;;;;ACXA;;AAGA;;AAEA,SAAS,eAAT,CAAyB,IAAzB,EAA4C,KAA5C,EAA0D,KAA1D,EAA2E,KAA3E,EAAwF;AACtF,SAAO;AAAE,QAAF;AAAQ,SAAR;AAAe,SAAf;AAAsB,SAAtB;AAA6B,cAAU,EAAE,IAAI,GAAJ;AAAzC,GAAP;AACD;;AAED,SAAgB,YAAhB,CAA6B,KAA7B,EAA8C,KAA9C,EAA6D,IAA7D,EAAgF,KAAhF,EAA8F,KAA9F,EAA6G;AAC3G,SAAO,KAAK,CACT,YADI,GAEJ,aAFI,CAE2B,QAF3B,EAEqC,eAAe,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,EAAqB,KAArB,CAFpD,EAGJ,aAHI,CAGU,QAHV,EAGoB,EAHpB,EAGwB,MAH/B;AAID;;AALD;AAOA,MAAM,UAAU,GAAG,IAAI,qBAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,EAApB,EAAwB,EAAxB,CAAnB;AACA,MAAM,WAAW,GAAG,IAAI,qBAAJ,CAAc,EAAd,EAAkB,CAAlB,EAAqB,EAArB,EAAyB,EAAzB,CAApB;AACA,MAAM,YAAY,GAAG,IAAI,qBAAJ,CAAc,CAAd,EAAiB,EAAjB,EAAqB,CAArB,EAAwB,CAAxB,CAArB;AACA,MAAM,aAAa,GAAG,IAAI,qBAAJ,CAAc,GAAd,EAAmB,EAAnB,EAAuB,CAAvB,EAA0B,CAA1B,CAAtB;AACA,MAAM,aAAa,GAAG,IAAI,gBAAJ,CAAW,CAAC,EAAD,EAAK,EAAL,CAAX,CAAtB;AAEA,MAAM,cAAc,GAAG,IAAI,qBAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,EAApB,EAAwB,EAAxB,CAAvB;AACA,MAAM,cAAc,GAAG,IAAI,qBAAJ,CAAc,EAAd,EAAkB,CAAlB,EAAqB,EAArB,EAAyB,EAAzB,CAAvB;;AAEA,SAAgB,SAAhB,CAA0B,KAA1B,EAAyC;AACvC,QAAM,UAAU,GAAG,IAAI,qBAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,EAApB,EAAwB,EAAxB,CAAnB;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,YAAvB,EAAqC,CAAC,YAAY,CAAC,WAAd,CAArC,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,MAAX,EAAmB,UAAnB,EAA+B,CAAC,YAAY,CAAC,IAAb,GAAoB,WAArB,EAAkC,aAAa,CAAC,IAAd,GAAqB,UAAvD,CAA/B,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,aAAvB,EAAsC,CAAC,aAAa,CAAC,UAAf,CAAtC,CAAZ;AACD;;AALD;;AAOA,SAAgB,eAAhB,CAAgC,KAAhC,EAA+C;AAC7C,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,WAAX,EAAwB,cAAxB,EAAwC,CAAC,cAAc,CAAC,IAAf,GAAsB,WAAvB,CAAxC,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,WAAX,EAAwB,cAAxB,EAAwC,CAAC,cAAc,CAAC,IAAf,GAAsB,UAAvB,CAAxC,CAAZ;AACD;;AAHD;;AAKA,SAAgB,UAAhB,CAA2B,KAA3B,EAA4C,KAA5C,EAA2D,IAA3D,EAA8E,KAA9E,EAAgG;AAC9F,cAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,UAAf,EAA2B,YAA3B,EAAyC,CAAC,YAAY,CAAC,WAAd,CAAzC,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,IAAf,EAAqB,UAArB,EAAiC,CAAC,YAAY,CAAC,IAAb,GAAoB,WAArB,EAAkC,aAAlC,CAAjC,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,WAAtB,EAAmC,CAAC,aAAa,CAAC,IAAd,GAAqB,UAAtB,EAAkC,aAAlC,CAAnC,CAAZ;AACA,SAAO,YAAY,CAAC,KAAD,EAAQ,KAAR,EAAe,UAAf,EAA2B,aAA3B,EAA0C,CAAC,aAAa,CAAC,UAAf,CAA1C,CAAnB;AACD;;AALD;;AAOA,SAAgB,gBAAhB,CAAiC,KAAjC,EAAgD;AAC9C,QAAM,iBAAiB,GAAG,IAAI,qBAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,EAApB,EAAwB,EAAxB,CAA1B;AACA,QAAM,cAAc,GAAG,IAAI,qBAAJ,CAAc,EAAd,EAAkB,EAAlB,EAAsB,EAAtB,EAA0B,EAA1B,CAAvB;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,YAAvB,EAAqC,CAAC,YAAY,CAAC,WAAd,CAArC,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,cAAX,EAA2B,iBAA3B,EAA8C,CAAC,cAAc,CAAC,IAAf,GAAsB,SAAvB,CAA9C,CAAZ;AACA,cAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,aAAvB,EAAsC,CAAC,aAAa,CAAC,UAAf,CAAtC,CAAZ;AACA,SAAO,YAAY,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,cAAvB,EAAuC,CAAC,cAAc,CAAC,MAAhB,CAAvC,CAAnB;AACD;;AAPD;;AASA,SAAgB,MAAhB,CAAuB,KAAvB,EAAsC;AACpC,WAAS,CAAC,KAAD,CAAT;AACA,iBAAe,CAAC,KAAD,CAAf;AACA,YAAU,CAAC,KAAD,EAAQ,CAAR,EAAW,UAAX,EAAuB,YAAvB,CAAV;AACA,YAAU,CAAC,KAAD,EAAQ,CAAR,EAAW,aAAX,EAA0B,UAA1B,CAAV;AACA,YAAU,CAAC,KAAD,EAAQ,CAAR,EAAW,YAAX,EAAyB,aAAzB,CAAV;AACA,SAAO,gBAAgB,CAAC,KAAD,CAAvB;AACD;;AAPD,wB;;;;;;;;;;;;;ACrDA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAYA,MAAa,OAAb,CAAoB;AACX,KAAG,CAAC,KAAD,EAAkB,KAAlB,EAAiC,MAAjC,EAAiD,QAAjD,EAAgF;AACxF,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,UAAM,GAAG,GAAG,IAAI,8BAAJ,CAAkB,GAAG,CAAC,KAAtB,EAA6B,GAAG,CAAC,KAAjC,EAAwC,CAAC,CAAD,EAAI,CAAJ,KAAU,CAAC,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,eAAlB,CAAkC,KAAlC,EAAyC,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAzC,CAAnD,CAAZ;AACA,OAAG,CAAC,OAAJ,CAAY,WAAW,CAAC,CAAxB,EAA2B,WAAW,CAAC,CAAvC,EAA0C,EAA1C,EAA8C,CAAC,CAAD,EAAI,CAAJ,KAAS;AACrD,cAAQ,CAAC,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAD,CAAR;AACD,KAFD;AAGD;;AAEM,SAAO,CACZ,KADY,EAEZ,KAFY,EAGZ,MAHY,EAIZ,KAJY,EAKZ,MALY,EAKoB;AAEhC,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,YAAY,GAAG,MAAM,CAAC,WAAP,IAAsB,MAAM,CAAC,gBAAlD;AACA,UAAM,cAAc,GAAG,MAAM,CAAC,cAAP,IAAyB,KAAhD;AACA,cACE,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,QAAlB,CAA2B,KAD7B,EAEE,WAFF,EAGE,MAAM,IAAI,mCAAgB,EAAhB,CAAmB,MAAnB,EAA2B,CAA3B,EAA8B,KAA9B,CAHZ,EAIE,KAJF,EAKE,CAAC,MAAD,EAAS,KAAT,KAAkB;AAChB,UAAI,KAAK,IAAI,YAAT,IAAyB,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,UAAlB,CAA6B,KAA7B,EAAoC,MAApC,CAA7B,EAA0E;AACxE,eAAO,KAAP;AACD;;AACD,aAAO,cAAc,GAAG,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,YAAlB,CAA+B,MAA/B,CAAH,GAA4C,IAAjE;AACD,KAVH;AAYD;;AAEM,cAAY,CAAC,KAAD,EAAkB,KAAlB,EAAiC,MAAjC,EAAiD,MAAjD,EAAiE,MAAjE,EAAiG;AAClH,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,EAA2C,MAA3C,CAAkD,KAAlD,CAAZ;AACA,UAAM,cAAc,GAAG,MAAM,CAAC,cAAP,IAAyB,KAAhD;AACA,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,WAAW,GAAG,MAAM,CAAC,WAAP,IAAsB,MAAM,CAAC,gBAAjD;AACA,UAAM,UAAU,GAAG,MAAM,CAAC,UAAP,IAAqB,KAAxC;AACA,UAAM,SAAS,GAAG,MAAM,CAAC,SAAP,IAAoB,KAAtC;AACA,UAAM,IAAI,GAAG,MAAM,CAAC,IAAP,IAAe,KAA5B;;AACA,QAAI,CAAC,UAAD,IAAe,GAAG,CAAC,UAAJ,CAAe,KAAf,EAAsB,MAAtB,CAAnB,EAAkD;AAChD,aAAO,SAAP;AACD;;AAED,UAAM,SAAS,GAAI,CAAD,IAAgB,IAAI,GAAG,GAAG,CAAC,UAAJ,CAAe,KAAf,EAAsB,CAAtB,CAAH,GAA8B,GAAG,CAAC,UAAJ,CAAe,KAAf,EAAsB,CAAtB,EAAyB,MAAM,CAAC,IAAhC,CAApE;;AAEA,UAAM,IAAI,GAAG,cACX,WADW,EAEX,WAFW,EAGX,CAAC,OAAD,EAAU,SAAV,KAAuB;AACrB,UAAI,cAAc,IAAI,CAAC,GAAG,CAAC,YAAJ,CAAiB,SAAjB,CAAvB,EAAoD;AAClD,eAAO,SAAP;AACD;;AAED,UAAI,SAAS,CAAC,SAAD,CAAb,EAA0B;AACxB,YAAI,SAAS,IAAI,GAAG,CAAC,WAAJ,CAAgB,KAAhB,EAAuB,SAAvB,EAAkC,CAAC,IAAI,CAAC,KAAK,SAAN,IAAmB,CAAC,CAAC,OAAF,GAAY,IAAZ,KAAqB,MAA/E,CAAjB,EAAyG;AACvG,iBAAO,OAAO,CAAC,KAAR,CAAc,SAAd,EAAyB,EAAzB,EAAP;AACD;;AACD,eAAO,SAAP;AACD;;AACD,aAAO,OAAO,CAAC,KAAR,CAAc,SAAd,EAAyB,EAAzB,EAAP;AACD,KAfU,EAgBX,CAAC,IAAG;AACF,UAAI,SAAS,IAAI,CAAC,UAAd,IAA4B,SAAS,CAAC,CAAD,CAAzC,EAA8C;AAC5C,eAAO,mCAAgB,KAAhB,CAAsB,CAAtB,CAAP;AACD;;AACD,aAAO,mCAAgB,EAAhB,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAzB,CAAP;AACD,KArBU,EAsBX,CAAC,IAAI,WAAW,CAAC,KAAZ,CAAkB,CAAlB,EAAqB,EAArB,EAtBM,EAuBX,WAvBW,EAwBX,UAxBW,CAAb;;AA2BA,QAAI,IAAI,KAAK,SAAT,IAAsB,IAAI,CAAC,IAAL,CAAU,MAAV,GAAmB,CAAnB,IAAwB,WAAlD,EAA+D;AAC7D,aAAO;AAAE,YAAI,EAAE,IAAI,CAAC,IAAL,CAAU,KAAV,CAAgB,CAAhB,EAAmB,IAAI,CAAC,IAAL,CAAU,MAAV,GAAmB,CAAtC,CAAR;AAAkD,YAAI,EAAE,IAAI,CAAC;AAA7D,OAAP;AACD;;AACD,WAAO,SAAP;AACD;;AAEM,KAAG,CAAC,KAAD,EAAkB,KAAlB,EAAiC,MAAjC,EAAiD,MAAjD,EAAiE,MAAjE,EAAiG;AACzG,UAAM,GAAG,GAAG,KAAK,CAAC,WAAN,CAAoC,KAApC,CAAZ;AACA,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,WAAW,GAAG,IAAI,gBAAJ,CAAW,CAAC,MAAM,CAAC,EAAR,EAAY,MAAM,CAAC,EAAnB,CAAX,CAApB;AACA,UAAM,WAAW,GAAG,MAAM,CAAC,WAAP,IAAsB,MAAM,CAAC,gBAAjD;;AACA,QAAI,WAAW,CAAC,KAAZ,CAAkB,WAAlB,EAA+B,MAA/B,MAA2C,WAA/C,EAA4D;AAC1D,YAAM,IAAI,GAAG,2BAAY,WAAZ,EAAyB,WAAzB,EAAsC,CAAC,IAAI,GAAG,CAAC,MAAJ,CAAW,KAAX,EAAkB,eAAlB,CAAkC,KAAlC,EAAyC,CAAzC,CAA3C,CAAb;;AACA,UAAI,IAAI,KAAK,SAAb,EAAwB;AACtB,eAAO;AAAE,cAAI,EAAE,IAAI,CAAC,KAAL,CAAW,CAAX,EAAc,IAAI,CAAC,MAAnB,CAAR;AAAoC,cAAI,EAAE,IAAI,CAAC,MAAL,GAAc;AAAxD,SAAP;AACD;AACF;;AACD,WAAO,SAAP;AACD;;AA/FiB;;AAApB,0B;;;;;;;;;;;;;AClBA;;AAEA,SAAgB,GAAhB,CACE,KADF,EAEE,MAFF,EAGE,aAHF,EAIE,KAJF,EAKE,QALF,EAKsD;AAEpD,QAAM,OAAO,GAAa,IAAI,oBAAJ,CAAa,KAAb,CAA1B;AACA,SAAO,CAAC,GAAR,CAAY,MAAZ;AACA,MAAI,YAAY,GAAW,CAA3B;AACA,MAAI,YAAY,GAAa,EAA7B;AACA,MAAI,SAAS,GAAa,EAA1B;AACA,4BAA0B,CAAC,OAAD,EAAU,aAAa,CAAC,MAAD,CAAvB,EAAiC,YAAjC,EAA+C,CAAC,IAAI,QAAQ,CAAC,CAAD,EAAI,YAAJ,CAA5D,CAA1B;AAEA,MAAI,QAAQ,GAAG,KAAf;;AACA,SAAO,CAAC,QAAR,EAAkB;AAChB,UAAM,OAAO,GAAG,YAAY,CAAC,GAAb,EAAhB;;AACA,QAAI,OAAO,KAAK,SAAhB,EAA2B;AACzB,cAAQ,GAAG,KAAK,CAAC,OAAD,EAAU,YAAV,CAAhB;AACA,gCAA0B,CAAC,OAAD,EAAU,aAAa,CAAC,OAAD,CAAvB,EAAkC,SAAlC,EAA6C,CAAC,IAAI,QAAQ,CAAC,CAAD,EAAI,YAAJ,CAA1D,CAA1B;AACD,KAHD,MAGO;AACL,kBAAY,GAAG,SAAf;AACA,eAAS,GAAG,EAAZ;AACA,kBAAY;;AACZ,UAAI,YAAY,CAAC,MAAb,KAAwB,CAA5B,EAA+B;AAC7B;AACD;AACF;AACF;AACF;;AA7BD;;AA+BA,SAAS,0BAAT,CACE,OADF,EAEE,aAFF,EAGE,KAHF,EAIE,QAJF,EAI0C;AAExC,eAAa,CAAC,OAAd,CAAsB,SAAS,IAAG;AAChC,QAAI,CAAC,OAAO,CAAC,GAAR,CAAY,SAAZ,CAAD,IAA2B,QAAQ,CAAC,SAAD,CAAvC,EAAoD;AAClD,WAAK,CAAC,IAAN,CAAW,SAAX;AACA,aAAO,CAAC,GAAR,CAAY,SAAZ;AACD;AACF,GALD;AAMD,C;;;;;;;;;;;;;AC/CD;;AASA,SAAgB,KAAhB,CACE,IADF,EAEE,EAFF,EAGE,IAHF,EAIE,aAJF,EAKE,SALF,EAME,WANF,EAOE,aAAsB,KAPxB,EAO6B;AAE3B,QAAM,iBAAiB,GAAG,UAAU,GAAG,MAAM,CAAC,gBAAV,GAA6B,WAAjE;AACA,QAAM;AAAE,UAAF;AAAU,WAAV;AAAmB;AAAnB,MAA+B,cAAc,CAAC,IAAD,EAAO,EAAP,EAAW,IAAX,EAAiB,aAAjB,EAAgC,SAAhC,EAA2C,iBAA3C,CAAnD;;AACA,MAAI,UAAU,KAAK,KAAf,IAAwB,OAAO,CAAC,GAAR,KAAgB,EAAE,CAAC,GAA/C,EAAoD;AAClD,WAAO,SAAP;AACD;;AACD,SAAO,WAAW,CAAC,OAAD,EAAU,MAAV,EAAkB,OAAlB,EAA2B,WAA3B,CAAlB;AACD;;AAfD;;AAiBA,SAAS,cAAT,CACE,IADF,EAEE,EAFF,EAGE,IAHF,EAIE,aAJF,EAKE,SALF,EAME,WANF,EAMqB;AAEnB,QAAM,SAAS,GAAG,EAAE,CAAC,GAArB;AACA,QAAM,MAAM,GAAwB,IAAI,GAAJ,EAApC;AACA,QAAM,MAAM,GAAgB,IAAI,GAAJ,EAA5B;AACA,QAAM,IAAI,GAAsB,IAAI,sBAAJ,CAAc,GAAd,CAAhC;AACA,QAAM,OAAO,GAAwB,IAAI,GAAJ,EAArC;AACA,MAAI,OAAO,GAAG,IAAd;AACA,MAAI,YAAY,GAAG,SAAS,CAAC,IAAD,CAA5B;AACA,MAAI,CAAC,MAAL,CAAY,IAAI,CAAC,GAAjB,EAAsB,IAAtB,EAA4B,YAA5B;AACA,SAAO,CAAC,GAAR,CAAY,IAAI,CAAC,GAAjB,EAAsB,CAAtB;AACA,QAAM,CAAC,GAAP,CAAW,IAAI,CAAC,GAAhB,EAAqB,IAArB;;AAEA,SAAO,IAAP,EAAa;AACX,UAAM,QAAQ,GAAG,IAAI,CAAC,UAAL,EAAjB;;AACA,QAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B;AACD;;AACD,UAAM,gBAAgB,GAAG,SAAS,CAAC,QAAD,CAAlC;;AACA,QAAI,gBAAgB,IAAI,YAAxB,EAAsC;AACpC,aAAO,GAAG,QAAV;AACA,kBAAY,GAAG,gBAAf;AACD;;AACD,UAAM,UAAU,GAAG,QAAQ,CAAC,GAA5B;;AACA,QAAI,SAAS,KAAK,UAAd,IAA4B,gBAAgB,GAAG,IAAI,YAAvD,EAAqE;AACnE;AACD;;AAED,UAAM,CAAC,GAAP,CAAW,UAAX;AACA,UAAM,WAAW,GAAG,OAAO,CAAC,GAAR,CAAY,UAAZ,CAApB;AAEA,iBAAa,CAAC,QAAD,CAAb,CAAwB,OAAxB,CAAgC,QAAQ,IAAG;AACzC,YAAM,GAAG,GAAG,QAAQ,CAAC,GAArB;;AACA,UAAI,CAAC,MAAM,CAAC,GAAP,CAAW,GAAX,CAAL,EAAsB;AACpB,cAAM,QAAQ,GAAG,IAAI,CAAC,QAAD,EAAW,QAAX,CAArB;;AACA,YAAI,QAAQ,KAAK,SAAjB,EAA4B;AAC1B,gBAAM,SAAS,GAAG,WAAW,GAAG,QAAhC;AACA,gBAAM,YAAY,GAAG,OAAO,CAAC,GAAR,CAAY,GAAZ,KAAoB,MAAM,CAAC,gBAAhD;;AACA,cAAI,SAAS,GAAG,YAAZ,IAA4B,SAAS,IAAI,WAA7C,EAA0D;AACxD,kBAAM,CAAC,GAAP,CAAW,GAAX,EAAgB,QAAhB;AACA,mBAAO,CAAC,GAAR,CAAY,GAAZ,EAAiB,SAAjB;AAEA,kBAAM,cAAc,GAAG,SAAS,GAAG,SAAS,CAAC,QAAD,CAA5C;;AACA,gBAAI,IAAI,CAAC,WAAL,CAAiB,GAAjB,MAA0B,SAA9B,EAAyC;AACvC,kBAAI,CAAC,MAAL,CAAY,GAAZ,EAAiB,QAAjB,EAA2B,cAA3B;AACD,aAFD,MAEO;AACL,kBAAI,CAAC,gBAAL,CAAsB,GAAtB,EAA2B,cAA3B;AACD;AACF;AACF;AACF;AACF,KApBD;AAqBD;;AACD,SAAO;AAAE,UAAF;AAAU,WAAV;AAAmB;AAAnB,GAAP;AACD;;AAED,SAAS,WAAT,CAAqB,EAArB,EAAiC,MAAjC,EAA8D,OAA9D,EAA4F,WAA5F,EAA+G;AAC7G,MAAI,IAAI,GAAa,EAArB;AACA,MAAI,OAAO,GAAG,EAAd;AACA,MAAI,IAAI,GAAG,OAAO,CAAC,GAAR,CAAY,EAAE,CAAC,GAAf,CAAX;;AACA,SAAO,IAAP,EAAa;AACX,UAAM,GAAG,GAAG,OAAO,CAAC,GAApB;AACA,UAAM,aAAa,GAAG,OAAO,CAAC,GAAR,CAAY,OAAO,CAAC,GAApB,CAAtB;;AACA,QAAI,IAAI,GAAG,WAAX,EAAwB;AACtB,UAAI,GAAG,aAAP;AACD;;AACD,QAAI,IAAI,IAAI,WAAZ,EAAyB;AACvB,UAAI,CAAC,IAAL,CAAU,OAAV;AACD;;AAED,UAAM,WAAW,GAAG,MAAM,CAAC,GAAP,CAAW,GAAX,CAApB;;AACA,QAAI,WAAW,KAAK,SAApB,EAA+B;AAC7B,aAAO,SAAP;AACD;;AACD,QAAI,OAAO,CAAC,GAAR,KAAgB,WAAW,CAAC,GAAhC,EAAqC;AACnC;AACD;;AACD,WAAO,GAAG,WAAV;AACD;;AACD,SAAO;AAAE,QAAF;AAAQ;AAAR,GAAP;AACD,C;;;;;;;;;;;;;AChHD;;AAQA,MAAa,SAAb,CAAsB;AAMpB,cAA4B,cAA5B,EAAkD;AAAtB;AAJZ,yBAAqC,IAAI,GAAJ,EAArC;AACA,mBAAwB,EAAxB;AACA,sBAAuB,EAAvB;AAGd,SAAK,WAAL,GAAmB,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,IAAL,CAAU,cAAc,GAAG,CAA3B,CAAX,IAA4C,CAA/D;AACA,SAAK,UAAL,CAAgB,CAAhB,IAAqB,CAArB;AACA,SAAK,OAAL,CAAa,CAAb,IAAkB,EAAlB;AACA,SAAK,UAAL,CAAgB,CAAhB,IAAqB,CAArB;AACA,SAAK,OAAL,CAAa,CAAb,IAAkB,EAAlB;AACA,SAAK,UAAL,CAAgB,KAAK,WAAL,GAAmB,CAAnC,IAAwC,cAAxC;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,IAAI,KAAK,WAA1B,EAAuC,CAAC,EAAxC,EAA4C;AAC1C,WAAK,UAAL,CAAgB,CAAhB,IAAqB,KAAM,CAAC,GAAG,CAA/B;AACA,WAAK,OAAL,CAAa,CAAb,IAAkB,EAAlB;AACD;AACF;;AAED,QAAM,CAAC,GAAD,EAAc,KAAd,EAAwB,QAAxB,EAAwC;AAC5C,SAAK,+BAAL,CAAqC,GAArC,EAA0C,KAA1C,EAAiD,QAAjD,EAA2D,KAAK,WAAhE;AACD;;AAED,aAAW,CAAC,GAAD,EAAY;AACrB,QAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,GAAnB,CAAuB,GAAvB,CAAb;;AACA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,aAAO,SAAP;AACD;;AACD,WAAO,KAAK,YAAL,CAAkB,MAAlB,EAA0B,GAA1B,CAAP;AACD;;AAED,kBAAgB,CAAC,GAAD,EAAc,QAAd,EAA8B;AAC5C,QAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,GAAnB,CAAuB,GAAvB,CAAb;;AACA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,YAAM,KAAK,CAAC,0BAA0B,GAAG,EAA9B,CAAX;AACD;;AACD,UAAM,KAAK,GAAG,KAAK,gBAAL,CAAsB,GAAtB,EAA2B,MAA3B,CAAd;AACA,SAAK,+BAAL,CAAqC,GAArC,EAA0C,KAAK,CAAC,KAAhD,EAAuD,QAAvD,EAAiE,MAAjE;AACD;;AAED,YAAU;AACR,QAAI,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,GAAhB,EAAb;;AACA,QAAI,MAAM,KAAK,SAAf,EAA0B;AACxB,UAAI,MAAM,GAAG,CAAb;;AACA,aAAO,MAAM,IAAI,KAAK,WAAf,IAA8B,KAAK,OAAL,CAAa,MAAb,EAAqB,MAArB,KAAgC,CAArE,EAAwE;AACtE,cAAM;AACP;;AACD,UAAI,MAAM,GAAG,KAAK,WAAlB,EAA+B;AAC7B,eAAO,SAAP;AACD;;AACD,UAAI,SAAS,GAAG,MAAM,CAAC,gBAAvB;AACA,YAAM,aAAa,GAAG,KAAK,OAAL,CAAa,MAAb,CAAtB;AACA,WAAK,OAAL,CAAa,MAAb,IAAuB,EAAvB;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,aAAa,CAAC,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC7C,cAAM,KAAK,GAAG,aAAa,CAAC,CAAD,CAA3B;;AACA,YAAI,SAAS,GAAG,KAAK,CAAC,QAAtB,EAAgC;AAC9B,mBAAS,GAAG,KAAK,CAAC,QAAlB;AACD;;AACD,aAAK,aAAL,CAAmB,MAAnB,CAA0B,KAAK,CAAC,GAAhC;AACD;;AAED,WAAK,UAAL,CAAgB,CAAhB,IAAqB,SAArB;AACA,WAAK,UAAL,CAAgB,CAAhB,IAAqB,SAAS,GAAG,CAAjC;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,IAAI,MAArB,EAA6B,CAAC,EAA9B,EAAkC;AAChC,aAAK,UAAL,CAAgB,CAAhB,IAAqB,IAAI,CAAC,GAAL,CAAS,KAAK,UAAL,CAAgB,CAAC,GAAG,CAApB,KAA0B,KAAM,CAAC,GAAG,CAApC,CAAT,EAAkD,KAAK,UAAL,CAAgB,MAAM,GAAG,CAAzB,CAAlD,CAArB;AACD;;AACD,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,aAAa,CAAC,MAAlC,EAA0C,CAAC,EAA3C,EAA+C;AAC7C,cAAM,KAAK,GAAG,aAAa,CAAC,CAAD,CAA3B;AACA,aAAK,+BAAL,CAAqC,KAAK,CAAC,GAA3C,EAAgD,KAAK,CAAC,KAAtD,EAA6D,KAAK,CAAC,QAAnE,EAA6E,MAA7E;AACD;;AACD,YAAM,GAAG,KAAK,OAAL,CAAa,CAAb,EAAgB,GAAhB,EAAT;AACD;;AACD,SAAK,aAAL,CAAmB,MAAnB,CAA0B,MAAO,CAAC,GAAlC;AACA,WAAO,MAAO,CAAC,KAAf;AACD;;AAEO,kBAAgB,CAAC,GAAD,EAAc,MAAd,EAA4B;AAClD,SAAK,aAAL,CAAmB,MAAnB,CAA0B,GAA1B;AACA,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,MAAb,CAAtB;AACA,UAAM,KAAK,GAAG,aAAa,CAAC,SAAd,CAAwB,CAAC,IAAI,CAAC,CAAC,GAAF,KAAU,GAAvC,CAAd;AACA,UAAM,KAAK,GAAG,aAAa,CAAC,KAAD,CAA3B;AACA,yBAAO,aAAP,EAAsB,KAAtB;AACA,WAAO,KAAP;AACD;;AAEO,iCAA+B,CAAC,GAAD,EAAc,KAAd,EAAwB,QAAxB,EAA0C,MAA1C,EAAwD;AAC7F,WAAO,KAAK,UAAL,CAAgB,MAAhB,IAA0B,QAAjC,EAA2C;AACzC,QAAE,MAAF;AACD;;AACD,SAAK,OAAL,CAAa,MAAb,EAAqB,IAArB,CAA0B;AAAE,SAAF;AAAO,WAAP;AAAc;AAAd,KAA1B;AACA,SAAK,aAAL,CAAmB,GAAnB,CAAuB,GAAvB,EAA4B,MAA5B;AACD;;AAEO,cAAY,CAAC,MAAD,EAAiB,GAAjB,EAA4B;AAC9C,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,MAAb,CAAtB;AACA,UAAM,KAAK,GAAG,aAAa,CAAC,SAAd,CAAwB,CAAC,IAAI,CAAC,CAAC,GAAF,KAAU,GAAvC,CAAd;AACA,UAAM,KAAK,GAAG,aAAa,CAAC,KAAD,CAA3B;;AACA,QAAI,KAAK,KAAK,SAAd,EAAyB;AACvB,aAAO,KAAK,CAAC,QAAb;AACD;;AACD,WAAO,SAAP;AACD;;AArGmB;;AAAtB,8B;;;;;;;;;;;;;ACPA;;AAEA,SAAgB,WAAhB,CAA4B,IAA5B,EAA0C,EAA1C,EAAsD,SAAtD,EAAuF;AACrF,QAAM,MAAM,GAAG,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAL,GAAS,EAAE,CAAC,CAArB,CAAT,EAAkC,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAL,GAAS,EAAE,CAAC,CAArB,CAAlC,CAAf;AACA,QAAM,MAAM,GAAG,CAAC,IAAI,CAAC,KAAL,CAAW,MAAM,GAAG,CAApB,CAAhB;;AACA,OAAK,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,KAAL,CAAW,MAAM,GAAG,CAApB,CAAhB,EAAwC,GAAG,GAAG,MAAM,GAAG,MAAvD,EAA+D,GAAG,EAAlE,EAAsE;AACpE,QAAI,IAAI,GAAG,IAAX;AACA,UAAM,IAAI,GAAa,EAAvB;;AACA,SAAK,MAAM,CAAX,IAAgB,sBAAU,IAAV,EAAgB,EAAhB,EAAoB,KAApB,EAA2B,GAA3B,CAAhB,EAAiD;AAC/C,UAAI,CAAC,IAAL,CAAU,CAAV;;AACA,UAAI,SAAS,CAAC,CAAD,CAAb,EAAkB;AAChB,YAAI,GAAG,KAAP;AACA,WAAG,IAAI,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,MAAM,GAAG,IAAI,CAAC,MAA1B,CAAP;AACA;AACD;AACF;;AACD,QAAI,IAAJ,EAAU;AACR,aAAO,IAAP;AACD;AACF;;AACD,SAAO,SAAP;AACD;;AAnBD,kC;;;;;;;;;;;;;ACHA;;AAEA,UAAiB,SAAjB,CAA2B,IAA3B,EAAyC,EAAzC,EAAqD,YAAqB,KAA1E,EAAiF,aAAqB,CAAtG,EAAuG;AACrG,QAAM,EAAE,GAAG,EAAE,CAAC,CAAH,GAAO,IAAI,CAAC,CAAvB;AACA,QAAM,EAAE,GAAG,EAAE,CAAC,CAAH,GAAO,IAAI,CAAC,CAAvB;AACA,QAAM,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAT,CAAZ;AACA,QAAM,GAAG,GAAG,IAAI,CAAC,GAAL,CAAS,EAAT,CAAZ;AACA,QAAM,EAAE,GAAG,EAAE,GAAG,CAAL,GAAS,CAAT,GAAa,CAAC,CAAzB;AACA,QAAM,EAAE,GAAG,EAAE,GAAG,CAAL,GAAS,CAAT,GAAa,CAAC,CAAzB;AACA,MAAI,GAAG,GAAG,UAAV;;AACA,MAAI,GAAG,GAAG,GAAV,EAAe;AACb,SAAK,IAAI,CAAC,GAAG,IAAI,CAAC,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,CAA9B,EAAiC,SAAS,IAAI,EAAE,GAAG,CAAlB,GAAsB,CAAC,IAAI,EAAE,CAAC,CAA9B,GAAkC,CAAC,IAAI,EAAE,CAAC,CAA3E,EAA8E,CAAC,IAAI,EAAnF,EAAuF;AACrF,YAAM,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAN;AACA,SAAG,IAAI,GAAP;;AACA,UAAI,GAAG,IAAI,CAAP,IAAY,GAAhB,EAAqB;AACnB,SAAC,IAAI,EAAL;AACA,WAAG,IAAI,GAAP;AACD;AACF;AACF,GATD,MASO;AACL,SAAK,IAAI,CAAC,GAAG,IAAI,CAAC,CAAb,EAAgB,CAAC,GAAG,IAAI,CAAC,CAA9B,EAAiC,EAAE,GAAG,CAAL,GAAS,CAAC,IAAI,EAAE,CAAC,CAAjB,GAAqB,CAAC,IAAI,EAAE,CAAC,CAA9D,EAAiE,CAAC,IAAI,EAAtE,EAA0E;AACxE,YAAM,IAAI,gBAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,CAAX,CAAN;AACA,SAAG,IAAI,GAAP;;AACA,UAAI,GAAG,IAAI,CAAP,IAAY,GAAhB,EAAqB;AACnB,SAAC,IAAI,EAAL;AACA,WAAG,IAAI,GAAP;AACD;AACF;AACF;AACF;;AA3BD,8B;;;;;;;ACFa;AACb,8CAA8C,cAAc;AAC5D,aAAa,mBAAO,CAAC,GAAQ;AAC7B,aAAa,mBAAO,CAAC,GAAQ;AAC7B,cAAc,mBAAO,CAAC,GAAS;AAC/B,iBAAiB,mBAAO,CAAC,GAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA,gCAAgC,6CAA6C;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,SAAS;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,SAAS;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtIa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACda;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjDa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACTa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;ACbA;;AAMA,MAAa,OAAb,CAAoB;AAGlB,cAAmB,IAAnB,EAA+B;AAC7B,SAAK,GAAL,GAAW,qBAAO,IAAP,CAAX;AACD;;AAEM,QAAM;AACX,WAAO,KAAK,GAAL,CAAS,MAAT,EAAP;AACD;;AATiB;;AAApB;;AAYA,MAAa,WAAb,CAAwB;AAOtB,cAAmC,YAAnC,EAA+E,SAAiB,CAAhG,EAAiG;AAA9D;AAA4C;AAC7E,SAAK,KAAL,GAAa,IAAI,IAAI,CAAC,GAAL,CAAS,CAAC,KAAK,MAAf,CAAjB;AACD;;AARM,SAAO,QAAP,CAAgB,IAAhB,EAA8B,SAAiB,CAA/C,EAAgD;AACrD,WAAO,IAAI,WAAJ,CAAgB,IAAI,OAAJ,CAAY,IAAZ,CAAhB,EAAmC,MAAnC,CAAP;AACD;;AAQM,QAAM;AACX,UAAM,CAAC,GAAG,KAAK,YAAL,CAAkB,MAAlB,EAAV;AACA,WAAO,CAAC,IAAI,CAAC,GAAL,CAAS,IAAI,KAAK,KAAL,GAAa,CAA1B,CAAD,GAAgC,KAAK,MAA5C;AACD;;AAdqB;;AAAxB,kC;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb,gBAAgB,mBAAO,CAAC,GAAqB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,6CAA6C;AAC7C,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,YAAY;AACZ,YAAY;AACZ,uBAAuB;AACvB,QAAQ;AACR,QAAQ;AACR,YAAY;;AAEZ;AACA;AACA;AACA,wBAAwB;;AAExB;AACA,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG;AAChG;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD,8CAA8C;AAC9C,sCAAsC;AACtC,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf,cAAc,kBAAkB,OAAO;AACvC,4BAA4B;AAC5B,eAAe,OAAO,OAAO;AAC7B;AACA;AACA;AACA;AACA;AAC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","file":"tlb.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 51);\n","/**\n * This code is an implementation of Alea algorithm; (C) 2010 Johannes Baagøe.\n * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.\n */\nconst FRAC = 2.3283064365386963e-10; /* 2^-32 */\nclass RNG {\n    constructor() {\n        this._seed = 0;\n        this._s0 = 0;\n        this._s1 = 0;\n        this._s2 = 0;\n        this._c = 0;\n    }\n    getSeed() { return this._seed; }\n    /**\n     * Seed the number generator\n     */\n    setSeed(seed) {\n        seed = (seed < 1 ? 1 / seed : seed);\n        this._seed = seed;\n        this._s0 = (seed >>> 0) * FRAC;\n        seed = (seed * 69069 + 1) >>> 0;\n        this._s1 = seed * FRAC;\n        seed = (seed * 69069 + 1) >>> 0;\n        this._s2 = seed * FRAC;\n        this._c = 1;\n        return this;\n    }\n    /**\n     * @returns Pseudorandom value [0,1), uniformly distributed\n     */\n    getUniform() {\n        let t = 2091639 * this._s0 + this._c * FRAC;\n        this._s0 = this._s1;\n        this._s1 = this._s2;\n        this._c = t | 0;\n        this._s2 = t - this._c;\n        return this._s2;\n    }\n    /**\n     * @param lowerBound The lower end of the range to return a value from, inclusive\n     * @param upperBound The upper end of the range to return a value from, inclusive\n     * @returns Pseudorandom value [lowerBound, upperBound], using ROT.RNG.getUniform() to distribute the value\n     */\n    getUniformInt(lowerBound, upperBound) {\n        let max = Math.max(lowerBound, upperBound);\n        let min = Math.min(lowerBound, upperBound);\n        return Math.floor(this.getUniform() * (max - min + 1)) + min;\n    }\n    /**\n     * @param mean Mean value\n     * @param stddev Standard deviation. ~95% of the absolute values will be lower than 2*stddev.\n     * @returns A normally distributed pseudorandom value\n     */\n    getNormal(mean = 0, stddev = 1) {\n        let u, v, r;\n        do {\n            u = 2 * this.getUniform() - 1;\n            v = 2 * this.getUniform() - 1;\n            r = u * u + v * v;\n        } while (r > 1 || r == 0);\n        let gauss = u * Math.sqrt(-2 * Math.log(r) / r);\n        return mean + gauss * stddev;\n    }\n    /**\n     * @returns Pseudorandom value [1,100] inclusive, uniformly distributed\n     */\n    getPercentage() {\n        return 1 + Math.floor(this.getUniform() * 100);\n    }\n    /**\n     * @returns Randomly picked item, null when length=0\n     */\n    getItem(array) {\n        if (!array.length) {\n            return null;\n        }\n        return array[Math.floor(this.getUniform() * array.length)];\n    }\n    /**\n     * @returns New array with randomized items\n     */\n    shuffle(array) {\n        let result = [];\n        let clone = array.slice();\n        while (clone.length) {\n            let index = clone.indexOf(this.getItem(clone));\n            result.push(clone.splice(index, 1)[0]);\n        }\n        return result;\n    }\n    /**\n     * @param data key=whatever, value=weight (relative probability)\n     * @returns whatever\n     */\n    getWeightedValue(data) {\n        let total = 0;\n        for (let id in data) {\n            total += data[id];\n        }\n        let random = this.getUniform() * total;\n        let id, part = 0;\n        for (id in data) {\n            part += data[id];\n            if (random < part) {\n                return id;\n            }\n        }\n        // If by some floating-point annoyance we have\n        // random >= total, just return the last id.\n        return id;\n    }\n    /**\n     * Get RNG state. Useful for storing the state and re-setting it via setState.\n     * @returns Internal state\n     */\n    getState() { return [this._s0, this._s1, this._s2, this._c]; }\n    /**\n     * Set a previously retrieved state.\n     */\n    setState(state) {\n        this._s0 = state[0];\n        this._s1 = state[1];\n        this._s2 = state[2];\n        this._c = state[3];\n        return this;\n    }\n    /**\n     * Returns a cloned RNG\n     */\n    clone() {\n        let clone = new RNG();\n        return clone.setState(this.getState());\n    }\n}\nexport default new RNG().setSeed(Date.now());\n","export * from './space'\nexport * from './vector'\n","import { Color } from './color'\n\nexport const primary: Color[] = [\n  Color.fromHex('#FD971F'),\n  Color.fromHex('#A6E22E'),\n  Color.fromHex('#66D9EF'),\n  Color.fromHex('#F92672'),\n  Color.fromHex('#272822'),\n]\nexport const gray: Color[] = [\n  Color.fromHex('#E6E6E6'),\n  Color.fromHex('#6f7261'),\n  Color.fromHex('#46483d'),\n  Color.fromHex('#272822'),\n  Color.fromHex('#080807'),\n]\n","import { AbstractShape } from './shape'\nimport { Vector } from '../spatial'\nimport { Direction } from '../spatial/direction'\n\nexport class Rectangle extends AbstractShape {\n  public static fromBounds(left: number, right: number, top: number, bottom: number): Rectangle {\n    return new Rectangle(left, top, right - left + 1, bottom - top + 1)\n  }\n\n  public static footprint(position: Vector, direction: Direction, size: Vector): Rectangle {\n    const up: Vector = Vector.fromDirection(direction).abs()\n    const right: Vector = Vector.fromDirection(direction)\n      .perpendicular()\n      .abs()\n    const cx = Math.floor(size.x / 2)\n    const cy = Math.floor(size.y / 2)\n    const topLeft = position.add(right.mult(-cx)).add(up.mult(-cy))\n    const bottomRight = topLeft.add(right.mult(size.x - 1)).add(up.mult(size.y - 1))\n    return Rectangle.fromBounds(topLeft.x, bottomRight.x, topLeft.y, bottomRight.y)\n  }\n\n  public static centerAt(x: number, y: number, size: number): Rectangle {\n    return new Rectangle(x - size, y - size, 2 * size + 1, 2 * size + 1)\n  }\n\n  public constructor(public readonly x: number, public readonly y: number, public readonly width: number, public readonly height: number) {\n    super()\n  }\n\n  public get left(): number {\n    return this.x\n  }\n\n  public get right(): number {\n    return this.x + this.width - 1\n  }\n\n  public get top(): number {\n    return this.y\n  }\n\n  public get bottom(): number {\n    return this.y + this.height - 1\n  }\n\n  public get topLeft(): Vector {\n    return new Vector([this.left, this.top])\n  }\n\n  public get topRight(): Vector {\n    return new Vector([this.right, this.top])\n  }\n\n  public get bottomRight(): Vector {\n    return new Vector([this.right, this.bottom])\n  }\n\n  public get bottomLeft(): Vector {\n    return new Vector([this.left, this.bottom])\n  }\n\n  public get center(): Vector {\n    const cx = (this.left + this.right) / 2\n    const cy = (this.top + this.bottom) / 2\n    return new Vector([Math.floor(cx), Math.floor(cy)])\n  }\n\n  public centerOf(direction: Direction): Vector {\n    switch (direction) {\n      case 'up':\n        return this.centerTop\n      case 'right':\n        return this.centerRight\n      case 'down':\n        return this.centerBottom\n      case 'left':\n        return this.centerLeft\n    }\n  }\n\n  public get centerLeft(): Vector {\n    const cy = (this.top + this.bottom) / 2\n    return new Vector([this.left, Math.floor(cy)])\n  }\n\n  public get centerRight(): Vector {\n    const cy = (this.top + this.bottom) / 2\n    return new Vector([this.right, Math.floor(cy)])\n  }\n\n  public get centerTop(): Vector {\n    const cx = (this.left + this.right) / 2\n    return new Vector([Math.floor(cx), this.top])\n  }\n\n  public get centerBottom(): Vector {\n    const cx = (this.left + this.right) / 2\n    return new Vector([Math.floor(cx), this.bottom])\n  }\n\n  public plus(other: Rectangle): Rectangle {\n    return Rectangle.fromBounds(\n      Math.min(this.left, other.left),\n      Math.max(this.right, other.right),\n      Math.min(this.top, other.top),\n      Math.max(this.bottom, other.bottom)\n    )\n  }\n\n  public intersect(other: Rectangle): Rectangle {\n    return Rectangle.fromBounds(\n      Math.max(this.left, other.left),\n      Math.min(this.right, other.right),\n      Math.max(this.top, other.top),\n      Math.min(this.bottom, other.bottom)\n    )\n  }\n\n  public cover(other: Vector): Rectangle {\n    return Rectangle.fromBounds(\n      Math.min(this.left, other.x),\n      Math.max(this.right, other.x),\n      Math.min(this.top, other.y),\n      Math.max(this.bottom, other.y)\n    )\n  }\n\n  public getWall(other: Vector): Direction | undefined {\n    if (this.containsVector(other)) {\n      if (other.x === this.left) {\n        return 'left'\n      }\n      if (other.x === this.right) {\n        return 'right'\n      }\n      if (other.y === this.top) {\n        return 'up'\n      }\n      if (other.y === this.bottom) {\n        return 'down'\n      }\n    }\n    return undefined\n  }\n\n  public bounds(): Rectangle {\n    return this\n  }\n\n  public containsVector(p: Vector): boolean {\n    return p.x >= this.x && p.x < this.x + this.width && p.y >= this.y && p.y < this.y + this.height\n  }\n\n  public translate(t: Vector): Rectangle {\n    return new Rectangle(this.x + t.x, this.y + t.y, this.width, this.height)\n  }\n\n  public grow(cells: number = 1): Rectangle {\n    return new Rectangle(this.x - cells, this.y - cells, this.width + 2 * cells, this.height + 2 * cells)\n  }\n\n  public shrink(cells: number = 1): Rectangle {\n    const w = this.width - 2 * cells\n    const h = this.height - 2 * cells\n    return new Rectangle(w > 0 ? this.x + cells : this.x, h > 0 ? this.y + cells : this.y, w > 0 ? w : 0, h > 0 ? h : 0)\n  }\n\n  public all(f: (position: Vector) => boolean): boolean {\n    for (let i = 0; i < this.height; i++) {\n      for (let j = 0; j < this.width; j++) {\n        const position = new Vector([j + this.x, i + this.y])\n        if (!f(position)) {\n          return false\n        }\n      }\n    }\n    return true\n  }\n}\n","/**\n * Always positive modulus\n * @param x Operand\n * @param n Modulus\n * @returns x modulo n\n */\nexport function mod(x, n) {\n    return (x % n + n) % n;\n}\nexport function clamp(val, min = 0, max = 1) {\n    if (val < min)\n        return min;\n    if (val > max)\n        return max;\n    return val;\n}\nexport function capitalize(string) {\n    return string.charAt(0).toUpperCase() + string.substring(1);\n}\n/**\n * Format a string in a flexible way. Scans for %s strings and replaces them with arguments. List of patterns is modifiable via String.format.map.\n * @param {string} template\n * @param {any} [argv]\n */\nexport function format(template, ...args) {\n    let map = format.map;\n    let replacer = function (match, group1, group2, index) {\n        if (template.charAt(index - 1) == \"%\") {\n            return match.substring(1);\n        }\n        if (!args.length) {\n            return match;\n        }\n        let obj = args[0];\n        let group = group1 || group2;\n        let parts = group.split(\",\");\n        let name = parts.shift() || \"\";\n        let method = map[name.toLowerCase()];\n        if (!method) {\n            return match;\n        }\n        obj = args.shift();\n        let replaced = obj[method].apply(obj, parts);\n        let first = name.charAt(0);\n        if (first != first.toLowerCase()) {\n            replaced = capitalize(replaced);\n        }\n        return replaced;\n    };\n    return template.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi, replacer);\n}\nformat.map = {\n    \"s\": \"toString\"\n};\n","import { Distribution } from './distributions'\nimport { Rectangle } from '../geometry/rectangle'\nimport { Vector } from '../spatial'\nimport { swap } from '../array-utils'\n\nexport class Random {\n  public constructor(public readonly distribution: Distribution) {}\n\n  public floatBetween(minInclusive: number, maxExclusive: number): number {\n    return this.distribution.sample() * (maxExclusive - minInclusive) + minInclusive\n  }\n\n  public integerBetween(minInclusive: number, maxInclusive: number): number {\n    const c = this.distribution.sample()\n    return Math.floor(c * (maxInclusive - minInclusive + 1)) + minInclusive\n  }\n\n  public decision(probability: number): boolean {\n    return this.distribution.sample() < probability\n  }\n\n  public weightedDecision(weights: number[]): number {\n    const sum = weights.reduce((v, c) => v + c, 0)\n    const pick = this.integerBetween(0, sum - 1)\n    let agg = 0\n    for (let i = 0; i < weights.length; i++) {\n      agg += weights[i]\n      if (pick < agg) {\n        return i\n      }\n    }\n    throw new Error('invalid input to weighted decision')\n  }\n\n  public pickN<T>(array: T[], n = 1): T[] {\n    const a = [...array]\n    const l = a.length\n    for (let i = l - 1; i >= l - n; --i) {\n      swap(a, i, this.integerBetween(0, i - 1))\n    }\n    return a.slice(l - n, l)\n  }\n\n  public pick<T>(array: T[]): T {\n    return array[this.integerBetween(0, array.length - 1)]\n  }\n\n  public pickIndex<T>(array: T[]): number {\n    return this.integerBetween(0, array.length - 1)\n  }\n\n  public shuffle<T>(array: T[]): void {\n    for (let i = array.length - 1; i >= 0; i--) {\n      const j = this.integerBetween(0, i)\n      const t = array[i]\n      array[i] = array[j]\n      array[j] = t\n    }\n  }\n\n  public insideRectangle(rectangle: Rectangle): Vector {\n    return new Vector([this.integerBetween(rectangle.left, rectangle.right), this.integerBetween(rectangle.top, rectangle.bottom)])\n  }\n\n  public betweenVectors(a: Vector, b: Vector): Vector {\n    return new Vector([this.integerBetween(a.x, b.x), this.integerBetween(a.y, b.y)])\n  }\n}\n","import { clamp } from \"./util.js\";\nimport RNG from \"./rng.js\";\nexport function fromString(str) {\n    let cached, r;\n    if (str in CACHE) {\n        cached = CACHE[str];\n    }\n    else {\n        if (str.charAt(0) == \"#\") { // hex rgb\n            let matched = str.match(/[0-9a-f]/gi) || [];\n            let values = matched.map((x) => parseInt(x, 16));\n            if (values.length == 3) {\n                cached = values.map((x) => x * 17);\n            }\n            else {\n                for (let i = 0; i < 3; i++) {\n                    values[i + 1] += 16 * values[i];\n                    values.splice(i, 1);\n                }\n                cached = values;\n            }\n        }\n        else if ((r = str.match(/rgb\\(([0-9, ]+)\\)/i))) { // decimal rgb\n            cached = r[1].split(/\\s*,\\s*/).map((x) => parseInt(x));\n        }\n        else { // html name\n            cached = [0, 0, 0];\n        }\n        CACHE[str] = cached;\n    }\n    return cached.slice();\n}\n/**\n * Add two or more colors\n */\nexport function add(color1, ...colors) {\n    let result = color1.slice();\n    for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < colors.length; j++) {\n            result[i] += colors[j][i];\n        }\n    }\n    return result;\n}\n/**\n * Add two or more colors, MODIFIES FIRST ARGUMENT\n */\nexport function add_(color1, ...colors) {\n    for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < colors.length; j++) {\n            color1[i] += colors[j][i];\n        }\n    }\n    return color1;\n}\n/**\n * Multiply (mix) two or more colors\n */\nexport function multiply(color1, ...colors) {\n    let result = color1.slice();\n    for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < colors.length; j++) {\n            result[i] *= colors[j][i] / 255;\n        }\n        result[i] = Math.round(result[i]);\n    }\n    return result;\n}\n/**\n * Multiply (mix) two or more colors, MODIFIES FIRST ARGUMENT\n */\nexport function multiply_(color1, ...colors) {\n    for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < colors.length; j++) {\n            color1[i] *= colors[j][i] / 255;\n        }\n        color1[i] = Math.round(color1[i]);\n    }\n    return color1;\n}\n/**\n * Interpolate (blend) two colors with a given factor\n */\nexport function interpolate(color1, color2, factor = 0.5) {\n    let result = color1.slice();\n    for (let i = 0; i < 3; i++) {\n        result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\n    }\n    return result;\n}\nexport const lerp = interpolate;\n/**\n * Interpolate (blend) two colors with a given factor in HSL mode\n */\nexport function interpolateHSL(color1, color2, factor = 0.5) {\n    let hsl1 = rgb2hsl(color1);\n    let hsl2 = rgb2hsl(color2);\n    for (let i = 0; i < 3; i++) {\n        hsl1[i] += factor * (hsl2[i] - hsl1[i]);\n    }\n    return hsl2rgb(hsl1);\n}\nexport const lerpHSL = interpolateHSL;\n/**\n * Create a new random color based on this one\n * @param color\n * @param diff Set of standard deviations\n */\nexport function randomize(color, diff) {\n    if (!(diff instanceof Array)) {\n        diff = Math.round(RNG.getNormal(0, diff));\n    }\n    let result = color.slice();\n    for (let i = 0; i < 3; i++) {\n        result[i] += (diff instanceof Array ? Math.round(RNG.getNormal(0, diff[i])) : diff);\n    }\n    return result;\n}\n/**\n * Converts an RGB color value to HSL. Expects 0..255 inputs, produces 0..1 outputs.\n */\nexport function rgb2hsl(color) {\n    let r = color[0] / 255;\n    let g = color[1] / 255;\n    let b = color[2] / 255;\n    let max = Math.max(r, g, b), min = Math.min(r, g, b);\n    let h = 0, s, l = (max + min) / 2;\n    if (max == min) {\n        s = 0; // achromatic\n    }\n    else {\n        let d = max - min;\n        s = (l > 0.5 ? d / (2 - max - min) : d / (max + min));\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = (b - r) / d + 2;\n                break;\n            case b:\n                h = (r - g) / d + 4;\n                break;\n        }\n        h /= 6;\n    }\n    return [h, s, l];\n}\nfunction hue2rgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\n/**\n * Converts an HSL color value to RGB. Expects 0..1 inputs, produces 0..255 outputs.\n */\nexport function hsl2rgb(color) {\n    let l = color[2];\n    if (color[1] == 0) {\n        l = Math.round(l * 255);\n        return [l, l, l];\n    }\n    else {\n        let s = color[1];\n        let q = (l < 0.5 ? l * (1 + s) : l + s - l * s);\n        let p = 2 * l - q;\n        let r = hue2rgb(p, q, color[0] + 1 / 3);\n        let g = hue2rgb(p, q, color[0]);\n        let b = hue2rgb(p, q, color[0] - 1 / 3);\n        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    }\n}\nexport function toRGB(color) {\n    let clamped = color.map(x => clamp(x, 0, 255));\n    return `rgb(${clamped.join(\",\")})`;\n}\nexport function toHex(color) {\n    let clamped = color.map(x => clamp(x, 0, 255).toString(16).padStart(2, \"0\"));\n    return `#${clamped.join(\"\")}`;\n}\nconst CACHE = {\n    \"black\": [0, 0, 0],\n    \"navy\": [0, 0, 128],\n    \"darkblue\": [0, 0, 139],\n    \"mediumblue\": [0, 0, 205],\n    \"blue\": [0, 0, 255],\n    \"darkgreen\": [0, 100, 0],\n    \"green\": [0, 128, 0],\n    \"teal\": [0, 128, 128],\n    \"darkcyan\": [0, 139, 139],\n    \"deepskyblue\": [0, 191, 255],\n    \"darkturquoise\": [0, 206, 209],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"lime\": [0, 255, 0],\n    \"springgreen\": [0, 255, 127],\n    \"aqua\": [0, 255, 255],\n    \"cyan\": [0, 255, 255],\n    \"midnightblue\": [25, 25, 112],\n    \"dodgerblue\": [30, 144, 255],\n    \"forestgreen\": [34, 139, 34],\n    \"seagreen\": [46, 139, 87],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"limegreen\": [50, 205, 50],\n    \"mediumseagreen\": [60, 179, 113],\n    \"turquoise\": [64, 224, 208],\n    \"royalblue\": [65, 105, 225],\n    \"steelblue\": [70, 130, 180],\n    \"darkslateblue\": [72, 61, 139],\n    \"mediumturquoise\": [72, 209, 204],\n    \"indigo\": [75, 0, 130],\n    \"darkolivegreen\": [85, 107, 47],\n    \"cadetblue\": [95, 158, 160],\n    \"cornflowerblue\": [100, 149, 237],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"slateblue\": [106, 90, 205],\n    \"olivedrab\": [107, 142, 35],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"mediumslateblue\": [123, 104, 238],\n    \"lawngreen\": [124, 252, 0],\n    \"chartreuse\": [127, 255, 0],\n    \"aquamarine\": [127, 255, 212],\n    \"maroon\": [128, 0, 0],\n    \"purple\": [128, 0, 128],\n    \"olive\": [128, 128, 0],\n    \"gray\": [128, 128, 128],\n    \"grey\": [128, 128, 128],\n    \"skyblue\": [135, 206, 235],\n    \"lightskyblue\": [135, 206, 250],\n    \"blueviolet\": [138, 43, 226],\n    \"darkred\": [139, 0, 0],\n    \"darkmagenta\": [139, 0, 139],\n    \"saddlebrown\": [139, 69, 19],\n    \"darkseagreen\": [143, 188, 143],\n    \"lightgreen\": [144, 238, 144],\n    \"mediumpurple\": [147, 112, 216],\n    \"darkviolet\": [148, 0, 211],\n    \"palegreen\": [152, 251, 152],\n    \"darkorchid\": [153, 50, 204],\n    \"yellowgreen\": [154, 205, 50],\n    \"sienna\": [160, 82, 45],\n    \"brown\": [165, 42, 42],\n    \"darkgray\": [169, 169, 169],\n    \"darkgrey\": [169, 169, 169],\n    \"lightblue\": [173, 216, 230],\n    \"greenyellow\": [173, 255, 47],\n    \"paleturquoise\": [175, 238, 238],\n    \"lightsteelblue\": [176, 196, 222],\n    \"powderblue\": [176, 224, 230],\n    \"firebrick\": [178, 34, 34],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"mediumorchid\": [186, 85, 211],\n    \"rosybrown\": [188, 143, 143],\n    \"darkkhaki\": [189, 183, 107],\n    \"silver\": [192, 192, 192],\n    \"mediumvioletred\": [199, 21, 133],\n    \"indianred\": [205, 92, 92],\n    \"peru\": [205, 133, 63],\n    \"chocolate\": [210, 105, 30],\n    \"tan\": [210, 180, 140],\n    \"lightgray\": [211, 211, 211],\n    \"lightgrey\": [211, 211, 211],\n    \"palevioletred\": [216, 112, 147],\n    \"thistle\": [216, 191, 216],\n    \"orchid\": [218, 112, 214],\n    \"goldenrod\": [218, 165, 32],\n    \"crimson\": [220, 20, 60],\n    \"gainsboro\": [220, 220, 220],\n    \"plum\": [221, 160, 221],\n    \"burlywood\": [222, 184, 135],\n    \"lightcyan\": [224, 255, 255],\n    \"lavender\": [230, 230, 250],\n    \"darksalmon\": [233, 150, 122],\n    \"violet\": [238, 130, 238],\n    \"palegoldenrod\": [238, 232, 170],\n    \"lightcoral\": [240, 128, 128],\n    \"khaki\": [240, 230, 140],\n    \"aliceblue\": [240, 248, 255],\n    \"honeydew\": [240, 255, 240],\n    \"azure\": [240, 255, 255],\n    \"sandybrown\": [244, 164, 96],\n    \"wheat\": [245, 222, 179],\n    \"beige\": [245, 245, 220],\n    \"whitesmoke\": [245, 245, 245],\n    \"mintcream\": [245, 255, 250],\n    \"ghostwhite\": [248, 248, 255],\n    \"salmon\": [250, 128, 114],\n    \"antiquewhite\": [250, 235, 215],\n    \"linen\": [250, 240, 230],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"oldlace\": [253, 245, 230],\n    \"red\": [255, 0, 0],\n    \"fuchsia\": [255, 0, 255],\n    \"magenta\": [255, 0, 255],\n    \"deeppink\": [255, 20, 147],\n    \"orangered\": [255, 69, 0],\n    \"tomato\": [255, 99, 71],\n    \"hotpink\": [255, 105, 180],\n    \"coral\": [255, 127, 80],\n    \"darkorange\": [255, 140, 0],\n    \"lightsalmon\": [255, 160, 122],\n    \"orange\": [255, 165, 0],\n    \"lightpink\": [255, 182, 193],\n    \"pink\": [255, 192, 203],\n    \"gold\": [255, 215, 0],\n    \"peachpuff\": [255, 218, 185],\n    \"navajowhite\": [255, 222, 173],\n    \"moccasin\": [255, 228, 181],\n    \"bisque\": [255, 228, 196],\n    \"mistyrose\": [255, 228, 225],\n    \"blanchedalmond\": [255, 235, 205],\n    \"papayawhip\": [255, 239, 213],\n    \"lavenderblush\": [255, 240, 245],\n    \"seashell\": [255, 245, 238],\n    \"cornsilk\": [255, 248, 220],\n    \"lemonchiffon\": [255, 250, 205],\n    \"floralwhite\": [255, 250, 240],\n    \"snow\": [255, 250, 250],\n    \"yellow\": [255, 255, 0],\n    \"lightyellow\": [255, 255, 224],\n    \"ivory\": [255, 255, 240],\n    \"white\": [255, 255, 255]\n};\n","export function indices(to: number): number[] {\n  const indices: number[] = []\n  for (let i = 0; i < to; i++) {\n    indices.push(i)\n  }\n  return indices\n}\n\nexport function dropAt<T>(arr: T[], index: number): void {\n  arr[index] = tail(arr)!\n  arr.pop()\n}\n\nexport function swap<T>(arr: T[], i0: number, i1: number): void {\n  const tmp = arr[i0]\n  arr[i0] = arr[i1]\n  arr[i1] = tmp\n}\n\nexport function tail<T>(arr: T[]): T | undefined {\n  return arr[arr.length - 1]\n}\n","import { BodyPart, CharacterStats, CharacterStatsComponent, createCharacterStatsComponent } from '../components/character-stats'\nimport { TlbWorld } from '../tlb'\nimport { features, FeatureType } from './features'\nimport { FeatureComponent } from '../components/feature'\nimport { FovComponent } from '../components/fov'\nimport { InventoryComponent, EquipedItemsComponent, createEntityWithItemComponent, ItemComponent, Item } from '../components/items'\nimport { ActiveEffectsComponent } from '../components/effects'\nimport { Entity } from '../ecs/entity'\nimport { AiComponent } from '../components/ai'\nimport { addDialog } from './dialogs'\nimport { TriggersComponent } from '../components/trigger'\nimport { SetSpace } from '../spatial/set-space'\nimport { WorldMapResource } from '../resources/world-map'\nimport { CharacterTypeComponent } from '../components/character-type'\nimport { Random } from '../random'\nimport { RegionsType } from '../components/region'\nimport { dropAt } from '../array-utils'\nimport { instantiateItem } from '../component-reducers/instantiate-item'\n\nfunction humanoidBodyParts(): { [key: string]: BodyPart } {\n  return {\n    head: { type: 'head', itemAttachments: ['helmet'] },\n    leftArm: { type: 'arm', itemAttachments: ['glove', 'weapon'] },\n    rightArm: { type: 'arm', itemAttachments: ['glove', 'weapon'] },\n    torso: { type: 'torso', itemAttachments: ['armor'] },\n    leftLeg: { type: 'leg', itemAttachments: ['pants', 'boots'] },\n    rightLeg: { type: 'leg', itemAttachments: ['pants', 'boots'] },\n  }\n}\n\nconst charactersStatsDefinition = {\n  player: {\n    bodyParts: humanoidBodyParts(),\n    health: 20,\n    strength: 5,\n    aim: 8,\n  },\n  guard: {\n    bodyParts: humanoidBodyParts(),\n    health: 5,\n    strength: 5,\n    aim: 6,\n  },\n  civilian: {\n    bodyParts: humanoidBodyParts(),\n    health: 5,\n    strength: 4,\n    aim: 3,\n  },\n  eliteGuard: {\n    bodyParts: humanoidBodyParts(),\n    health: 11,\n    strength: 8,\n    aim: 6,\n  },\n  boss: {\n    bodyParts: humanoidBodyParts(),\n    health: 18,\n    strength: 10,\n    aim: 8,\n  },\n}\nexport type CharacterStatsType = keyof typeof charactersStatsDefinition\nexport const characterStats: { [key in CharacterStatsType]: CharacterStats } = charactersStatsDefinition\n\nexport interface CharacterCreatorOptions {\n  type: PlayerType\n}\nexport interface CharacterCreator {\n  (world: TlbWorld, random: Random, region: RegionsType, options: Partial<CharacterCreatorOptions>): Entity\n}\nconst characterCreatorsDefinition: { [key in CharacterStatsType]: CharacterCreator } = {\n  boss: (world: TlbWorld, random: Random, region: RegionsType) => createBoss(world, random, region),\n  player: (world: TlbWorld, random: Random, region: RegionsType, options: Partial<CharacterCreatorOptions>) =>\n    createPlayer(world, random, options.type || 'yellow_player', region),\n  eliteGuard: (world: TlbWorld, random: Random, region: RegionsType) =>\n    createGuard(world, random, 'some elite guard', 'eliteGuard', 'eliteGuard', region),\n  guard: (world: TlbWorld, random: Random, region: RegionsType) => createGuard(world, random, 'some guard', 'guard', 'guard', region),\n  civilian: (world: TlbWorld, random: Random) => createCivilian(world, random, 'some guy', 'civilian', 'civilian'),\n}\n\nexport function createBoss(world: TlbWorld, random: Random, region: RegionsType): Entity {\n  const boss = createEmptyNpc(world, 'overseer', 'boss', 'eliteGuard')\n  addDialog(world, boss, 'guardRandomRemarks')\n  const rifle = createEntityWithItemComponent(world, 'rifle', random, region)\n  const nailGun = createEntityWithItemComponent(world, 'nailGun', random, region)\n  const leatherJacket = createEntityWithItemComponent(world, 'leatherJacket', random, region)\n  take(world, boss, rifle)\n\n  take(world, boss, nailGun)\n  take(world, boss, leatherJacket)\n  equip(world, boss, nailGun, ['leftArm'])\n  equip(world, boss, leatherJacket, ['torso', 'leftArm', 'rightArm'])\n  return boss\n}\n\nexport function createPlayer(world: TlbWorld, random: Random, type: PlayerType, region: RegionsType): Entity {\n  const player = createCharacter(world, 'player', type)\n  const width = world.getResource<WorldMapResource>('map').width\n\n  world\n    .editEntity(player)\n    .withComponent<{}>('player', {})\n    .withComponent<FovComponent>('fov', { fov: new SetSpace(width) })\n    .withComponent<{}>('viewport-focus', {})\n\n  setType(world, player, type)\n\n  const idCard = createEntityWithItemComponent(world, 'idCard', random, region)\n  const rifle = createEntityWithItemComponent(world, 'rifle', random, region)\n  const sniperRifle = createEntityWithItemComponent(world, 'sniperRifle', random, region)\n  const gun = createEntityWithItemComponent(world, 'gun', random, region)\n  const leatherJacket = createEntityWithItemComponent(world, 'leatherJacket', random, region)\n  const boots = createEntityWithItemComponent(world, 'boots', random, region)\n  take(world, player, idCard)\n  take(world, player, rifle)\n  take(world, player, sniperRifle)\n  take(world, player, gun)\n  take(world, player, leatherJacket)\n  take(world, player, boots)\n  equip(world, player, gun, ['leftArm'])\n  equip(world, player, leatherJacket, ['torso'])\n  equip(world, player, boots, ['leftLeg', 'rightLeg'])\n  return player\n}\n\nexport function setType(world: TlbWorld, entity: Entity, type: CharacterType): void {\n  world.editEntity(entity).withComponent<CharacterTypeComponent>('character-type', { type })\n}\n\nexport function createCivilian(\n  world: TlbWorld,\n  _random: Random,\n  name: string,\n  statsType: CharacterStatsType,\n  featureType: FeatureType\n): Entity {\n  const npc = createEmptyNpc(world, name, statsType, featureType)\n  setType(world, npc, 'civilian')\n  addDialog(world, npc, 'civilianDialog')\n  return npc\n}\n\nexport function createGuard(\n  world: TlbWorld,\n  random: Random,\n  name: string,\n  statsType: CharacterStatsType,\n  featureType: FeatureType,\n  region: RegionsType\n): Entity {\n  const npc = createEmptyNpc(world, name, statsType, featureType)\n  world.editEntity(npc).withComponent<AiComponent>('ai', { type: 'rushing', state: 'idle', interest: undefined, distrust: 0 })\n  const rifle = createEntityWithItemComponent(world, 'rifle', random, region)\n  take(world, npc, rifle)\n  equip(world, npc, rifle, ['leftArm'])\n  setType(world, npc, 'henchman')\n  addDialog(world, npc, 'guardRandomRemarks')\n  return npc\n}\n\nexport function take(world: TlbWorld, character: Entity, entity: Entity): void {\n  world.getComponent<InventoryComponent>(character, 'inventory')!.content.push(entity)\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(character, 'active-effects')!\n  activeEffects.effects = activeEffects.effects.filter(e => e.source !== entity)\n}\n\nexport function replacingEquip(world: TlbWorld, character: Entity, entity: Entity, item: Item): void {\n  const equipped = world.getComponent<EquipedItemsComponent>(character, 'equiped-items')!\n  const stats = world.getComponent<CharacterStatsComponent>(character, 'character-stats')!\n  const possibleBodyParts: string[] = []\n  Object.keys(stats.current.bodyParts).forEach(key => {\n    const bodyPart = stats.current.bodyParts[key]\n    bodyPart.itemAttachments.filter(kind => kind === item.kind).forEach(() => possibleBodyParts.push(key))\n  })\n\n  equipped.equipment.forEach(e => {\n    const equipedItem = world.getComponent<ItemComponent>(e.entity, 'item')!.item\n    if (equipedItem.kind === item.kind) {\n      const blocking = e.bodyParts.some(part => possibleBodyParts.findIndex(p => p === part) >= 0)\n      if (blocking) {\n        unequip(world, character, e.entity)\n      }\n    }\n  })\n\n  const availableBodyParts = new Set(possibleBodyParts)\n  if (availableBodyParts.size >= item.attachments) {\n    const bodyParts: string[] = []\n    availableBodyParts.forEach(part => {\n      if (bodyParts.length < item.attachments) {\n        bodyParts.push(part)\n      }\n    })\n    equip(world, character, entity, bodyParts)\n  }\n}\n\nexport function equip(world: TlbWorld, character: Entity, entity: Entity, bodyParts: string[]): void {\n  const { item } = instantiateItem(world, entity)\n  world.getComponent<EquipedItemsComponent>(character, 'equiped-items')!.equipment.push({ entity, bodyParts })\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(character, 'active-effects')!\n  item.effects.forEach(e => activeEffects.effects.push({ source: entity, effect: e, isCritical: false, isPiercing: false }))\n}\n\nexport function unequip(world: TlbWorld, character: Entity, entity: Entity): void {\n  const equipped = world.getComponent<EquipedItemsComponent>(character, 'equiped-items')!\n  const attachementIndex = equipped.equipment.findIndex(e => e.entity === entity)\n  dropAt(equipped.equipment, attachementIndex)\n}\n\nexport function createEmptyNpc(world: TlbWorld, name: string, statsType: CharacterStatsType, featureType: FeatureType): Entity {\n  const character = createCharacter(world, statsType, featureType)\n  return world\n    .editEntity(character)\n    .withComponent('npc', {})\n    .withComponent<TriggersComponent>('triggers', { entities: [], type: 'dialog', name, inTurnBased: false }).entity\n}\n\nexport function createCharacter(world: TlbWorld, statsType: CharacterStatsType, featureType: FeatureType): Entity {\n  return world\n    .createEntity()\n    .withComponent<InventoryComponent>('inventory', { content: [] })\n    .withComponent<EquipedItemsComponent>('equiped-items', { equipment: [] })\n    .withComponent<FeatureComponent>('feature', { feature: () => features[featureType] })\n    .withComponent<CharacterStatsComponent>('character-stats', createCharacterStatsComponent(statsType))\n    .withComponent<ActiveEffectsComponent>('active-effects', { effects: [] }).entity\n}\n\nexport type CharacterCreatorType = keyof typeof characterCreatorsDefinition\nexport const characterCreators: { [key in CharacterCreatorType]: CharacterCreator } = characterCreatorsDefinition\n\nexport type PlayerType = 'red_player' | 'green_player' | 'blue_player' | 'yellow_player'\nexport type CharacterType = PlayerType | 'civilian' | 'henchman' | 'boss'\n","/**\n * @class Abstract display backend module\n * @private\n */\nexport default class Backend {\n    getContainer() { return null; }\n    setOptions(options) { this._options = options; }\n}\n","import { TlbWorld } from '../tlb'\nimport { Input, InputResource } from '../resources/input'\nimport { Vector } from '../spatial'\nimport { Rectangle } from '../geometry/rectangle'\n\nexport interface Selector<T> {\n  hovered: T | undefined\n  selected: T | undefined\n  length: number\n}\n\nexport interface SelectorState {\n  focused: boolean\n  firstRow: number\n  selected: number | undefined\n  hovered: number\n}\n\nexport class ItemSelector<T> implements Selector<T> {\n  public constructor(\n    private items: T[],\n    private readonly state: SelectorState = { focused: true, firstRow: 0, hovered: 0, selected: undefined }\n  ) {}\n\n  public setItems(items: T[]) {\n    this.items = items\n  }\n\n  public get selected(): T | undefined {\n    if (this.state.selected !== undefined) {\n      const { selected } = this.state\n      return this.itemAtIndex(selected)\n    }\n    return undefined\n  }\n\n  public get hovered(): T | undefined {\n    if (this.state.hovered !== undefined) {\n      const { hovered } = this.state\n      return this.itemAtIndex(hovered)\n    }\n    return undefined\n  }\n\n  public get selectedIndex(): number | undefined {\n    return this.state.selected\n  }\n\n  public get hoveredIndex(): number | undefined {\n    return this.state.hovered\n  }\n\n  public get length(): number {\n    return this.items.length\n  }\n\n  public itemAtIndex(line: number): T | undefined {\n    return this.items[line]\n  }\n\n  public update(world: TlbWorld, content: Rectangle): void {\n    updateSelectorState(world, this.state, content, this.length)\n  }\n\n  public isItemVisible(content: Rectangle, index: number): boolean {\n    return isLineVisible(this.state, content, index)\n  }\n}\n\nexport function updateSelectorState(world: TlbWorld, current: SelectorState, content: Rectangle, availableRows: number): void {\n  const input: Input = world.getResource<InputResource>('input')\n  let position: Vector | undefined\n  if (input.position) {\n    position = new Vector([input.position.x, input.position.y])\n    current.focused = content.containsVector(position)\n  } else {\n    current.focused = false\n  }\n  const up = input.isActive('plus')\n  const down = input.isActive('minus')\n  if (up) {\n    current.hovered--\n  }\n  if (down) {\n    current.hovered++\n  }\n\n  current.hovered += availableRows\n  current.hovered %= availableRows\n\n  if (current.firstRow > current.hovered) {\n    current.firstRow = current.hovered\n  } else if (current.firstRow <= current.hovered - content.height) {\n    current.firstRow = current.hovered - content.height + 1\n  }\n\n  current.selected = undefined\n  if (position && content.containsVector(position)) {\n    const delta = position.minus(content.topLeft)\n    current.hovered = delta.y + current.firstRow\n    if (input.mousePressed) {\n      current.selected = delta.y + current.firstRow\n    }\n  }\n\n  if (input.isActive('accept')) {\n    current.selected = current.hovered\n  }\n\n  const numericPressed = input.numericActive()\n  if (numericPressed !== undefined) {\n    current.selected = numericPressed\n  }\n}\n\nexport function isLineVisible(current: SelectorState, content: Rectangle, index: number): boolean {\n  return index >= current.firstRow && index < current.firstRow + content.height\n}\n","import { TlbWorld } from '../tlb'\nimport { EffectApplication, ActiveEffectsComponent, damage, effect } from '../components/effects'\nimport { Entity } from '../ecs/entity'\nimport { CharacterStatsComponent } from '../components/character-stats'\nimport { kill } from './kill'\nimport { Random } from '../random'\nimport { getCriticalMultiplier, getDefense } from './stats'\nimport { characterStats } from '../assets/characters'\n\nexport interface EffectResult {\n  type: effect\n  killed?: boolean\n  baseDamage?: number\n  defense?: number\n  finalDamage?: number\n}\n\nexport function applyEffect(world: TlbWorld, uniform: Random, target: Entity, application: EffectApplication): EffectResult {\n  const type = application.effect.type\n  let result: Partial<EffectResult>\n  switch (application.effect.type) {\n    case 'damage':\n      result = applyDamage(world, uniform, target, application)\n      break\n    case 'kill':\n      kill(world, uniform, target)\n      result = { killed: true }\n      break\n    case 'negate':\n      result = removeAllNegativeEffects(world, target)\n      break\n    case 'heal':\n      result = applyHeal(world, target, application)\n      break\n    default:\n      result = applyStatusEffect(world, target, application)\n      break\n  }\n  return { type, ...result }\n}\n\nexport function clearExpiredEffects(world: TlbWorld, entity: Entity): void {\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(entity, 'active-effects')!\n  activeEffects.effects = activeEffects.effects.filter(e => e.effect.duration === undefined || e.effect.duration > 0)\n}\n\nexport function updateEffects(world: TlbWorld, entity: Entity, uniform: Random): void {\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(entity, 'active-effects')!\n  activeEffects.effects.forEach(effect => {\n    switch (effect.effect.type) {\n      case 'bleed':\n        applyEffect(world, uniform, entity, { source: entity, effect: damage(1), isCritical: false, isPiercing: true })\n        break\n    }\n    if (effect.effect.duration !== undefined && effect.effect.duration > 0) {\n      effect.effect.duration -= 1\n    }\n  })\n}\n\nexport function applyDamage(world: TlbWorld, uniform: Random, target: Entity, application: EffectApplication): Partial<EffectResult> {\n  const { effect } = application\n  const stats = world.getComponent<CharacterStatsComponent>(target, 'character-stats')\n  if (stats === undefined) {\n    return { killed: false }\n  }\n\n  let killed = false\n  const defense = application.isPiercing ? 0 : getDefense(world, target)\n  const criticalMultiplier = application.isCritical ? getCriticalMultiplier(world, target) : 1.0\n  const defenseMultiplier = 10 / (10 + defense)\n  const finalDamage = Math.floor(Math.max(0, effect.value! * defenseMultiplier * criticalMultiplier))\n  if (finalDamage > 0) {\n    stats.current.health = Math.max(0, stats.current.health - finalDamage)\n    killed = stats.current.health === 0\n  }\n\n  if (killed) {\n    kill(world, uniform, target)\n  }\n\n  return { killed, baseDamage: effect.value, finalDamage, defense }\n}\n\nexport function applyHeal(world: TlbWorld, target: Entity, application: EffectApplication): Partial<EffectResult> {\n  const stats = world.getComponent<CharacterStatsComponent>(target, 'character-stats')\n  if (stats !== undefined) {\n    stats.current.health += application.effect.value || characterStats[stats.type].health\n    stats.current.health = Math.min(characterStats[stats.type].health)\n  }\n  return {}\n}\n\nexport function applyStatusEffect(world: TlbWorld, target: Entity, application: EffectApplication): Partial<EffectResult> {\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(target, 'active-effects')!\n  activeEffects.effects.push(application)\n  return {}\n}\n\nexport function removeAllNegativeEffects(world: TlbWorld, target: Entity): Partial<EffectResult> {\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(target, 'active-effects')!\n  activeEffects.effects = activeEffects.effects.filter(e => !e.effect.negative)\n  return {}\n}\n","import { Color } from '../renderer/color'\nimport { TlbWorld } from '../tlb'\n\nimport { PositionComponent } from './position'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { Vector } from '../spatial'\nimport { Entity } from '../ecs/entity'\nimport { FeatureType, features } from '../assets/features'\n\nexport type FeatureProvider = () => Feature\n\nexport interface FeatureComponent {\n  feature: FeatureProvider\n}\n\nexport type Cover = 'full' | 'partial' | 'none'\nexport interface Feature {\n  character: string\n  diffuse: Color\n\n  cover: Cover\n  blocking: boolean\n  lightBlocking: boolean\n  ground: boolean\n  name: string\n}\n\nexport function getFeature(world: TlbWorld, entity: Entity): Feature | undefined {\n  const feature = world.getComponent<FeatureComponent>(entity, 'feature')\n  if (feature) {\n    return feature.feature()\n  }\n  return undefined\n}\n\nexport function createFeatureFromType(world: TlbWorld, level: number, position: Vector, type: FeatureType): Entity {\n  return createFeature(world, level, position, () => features[type])\n}\n\nexport function createFeature(world: TlbWorld, level: number, position: Vector, feature: FeatureProvider): Entity {\n  const map: WorldMap = world.getResource<WorldMapResource>('map')\n  const e = map.levels[level].getTile(position)\n  if (e !== undefined) {\n    throw new Error(`already a tile at position ${position.key}`)\n  }\n\n  const entity = world\n    .createEntity()\n    .withComponent<PositionComponent>('position', { level, position })\n    .withComponent<FeatureComponent>('feature', { feature }).entity\n  map.levels[level].setTile(position, entity)\n  return entity\n}\n","import { TlbWorld, SystemName } from '../tlb'\n\nexport interface State {\n  name: string\n  start(world: TlbWorld): void\n  update(world: TlbWorld, pushState: (state: State) => void): void\n  stop(world: TlbWorld): void\n  isDone(world: TlbWorld): boolean\n  isFrameLocked(): boolean\n}\n\nexport abstract class AbstractState implements State {\n  public constructor(public readonly name: string, public readonly usedSystems: SystemName[]) {}\n\n  public start(world: TlbWorld) {\n    world.activeSystems.forEach(s => world.disableSystem(s))\n    this.usedSystems.forEach(s => world.enableSystem(s))\n  }\n\n  public stop(_world: TlbWorld) {}\n\n  public isDone(world: TlbWorld) {\n    return this.usedSystems.find(s => !world.emptySystems.has(s)) === undefined\n  }\n\n  public abstract update(world: TlbWorld, pushState: (state: State) => void): void\n  public abstract isFrameLocked(): boolean\n}\n","import { Vector } from '../spatial/vector'\nimport { Rectangle } from './rectangle'\n\nexport interface Shape {\n  bounds(): Rectangle\n  containsVector(p: Vector): boolean\n  contains(s: Shape): boolean\n  intersects(s: Shape): boolean\n  equals(s: Shape): boolean\n  foreach(f: (p: Vector, i: number) => void): void\n  all(f: (p: Vector) => boolean): boolean\n  some(predicate: (p: Vector) => boolean): boolean\n  translate(t: Vector): Shape\n  grow(cells?: number): Shape\n  shrink(cells?: number): Shape\n}\n\nexport abstract class AbstractShape implements Shape {\n  public abstract bounds(): Rectangle\n  public abstract containsVector(p: Vector): boolean\n  public abstract all(f: (p: Vector) => boolean): boolean\n  public abstract translate(t: Vector): Shape\n  public abstract grow(cells?: number): Shape\n  public abstract shrink(cells?: number): Shape\n\n  public contains(s: Shape): boolean {\n    return s.all(p => this.containsVector(p))\n  }\n  public intersects(s: Shape): boolean {\n    return s.some(p => this.containsVector(p))\n  }\n  public equals(s: Shape): boolean {\n    return this.contains(s) && s.contains(this)\n  }\n\n  public foreach(f: (position: Vector, i: number) => void): void {\n    let i = 0\n    this.all(p => {\n      f(p, i)\n      i++\n      return true\n    })\n  }\n\n  public some(f: (position: Vector) => boolean): boolean {\n    return !this.all(p => {\n      return !f(p)\n    })\n  }\n}\n","import { Feature } from '../components/feature'\nimport { gray, primary } from '../renderer/palettes'\nimport { strangeSymbols, gridSymbols, arrows } from '../symbols'\nimport { Color } from '../renderer/color'\n\nfunction character(character: string, name: string, diffuse: Color): Feature {\n  return {\n    cover: 'none',\n    blocking: true,\n    lightBlocking: false,\n    ground: false,\n\n    character,\n    diffuse,\n    name,\n  }\n}\n\nfunction ground(name: string, character: string, diffuse: Color): Feature {\n  return {\n    cover: 'none',\n    blocking: false,\n    lightBlocking: false,\n    ground: true,\n\n    character,\n    diffuse,\n    name,\n  }\n}\n\nfunction highObstacle(name: string, character: string, diffuse: Color): Feature {\n  return {\n    cover: 'full',\n    blocking: true,\n    lightBlocking: true,\n    ground: false,\n\n    character,\n    diffuse,\n    name,\n  }\n}\n\nfunction lowObstacle(name: string, character: string, diffuse: Color): Feature {\n  return {\n    cover: 'partial',\n    blocking: true,\n    lightBlocking: false,\n    ground: false,\n\n    character,\n    diffuse,\n    name,\n  }\n}\n\nfunction decoration(name: string, character: string, diffuse: Color): Feature {\n  return {\n    cover: 'none',\n    blocking: false,\n    lightBlocking: false,\n    ground: false,\n\n    character,\n    diffuse,\n    name,\n  }\n}\n\nconst featuresDefinition = {\n  wall: highObstacle('wall', '#', gray[3]),\n  corridor: ground('corridor', '.', gray[0]),\n  room: ground('floor', '.', primary[1]),\n  hub: ground('floor', '.', primary[0]),\n  locker: highObstacle('locker', strangeSymbols[16], primary[1]),\n  trash: decoration('trash', strangeSymbols[21], gray[2]),\n  urinal: lowObstacle('trash', 'J', gray[2]),\n  door: highObstacle('door', strangeSymbols[27], primary[1]),\n  yellow_player: character('@', 'you', primary[0]),\n  green_player: character('@', 'you', primary[1]),\n  blue_player: character('@', 'you', primary[2]),\n  red_player: character('@', 'you', primary[3]),\n  loot: decoration('some loot', 'l', primary[1]),\n  table: lowObstacle('a table', strangeSymbols[3], primary[1]),\n  civilian: character('c', 'civilian', primary[1]),\n  guard: character('g', 'guard', primary[1]),\n  eliteGuard: character('g', 'elite guard', primary[3]),\n  terminal: lowObstacle('a terminal', strangeSymbols[28], primary[1]),\n  core: lowObstacle('the core', strangeSymbols[34], primary[3]),\n}\nexport type FeatureType = keyof typeof featuresDefinition\nexport const features: { [key in FeatureType]: Feature } = featuresDefinition\n\nconst generatorsDefinition: { [key: string]: (index: number) => Feature | undefined } = {\n  block: (index: number) => highObstacle('a block of concrete', gridSymbols[[7, 5, 15, 17][index]], primary[1]),\n  elevator: (_index: number) => lowObstacle('an elevator', arrows[7], primary[1]),\n}\nexport type FeatureGeneratorsType = keyof typeof generatorsDefinition\nexport const generators: { [key in FeatureGeneratorsType]: (index: number) => Feature | undefined } = generatorsDefinition\n","import { Entity } from '../ecs/entity'\n\nexport type effect =\n  | 'damage'\n  | 'cooldown'\n  | 'cooldown-buff'\n  | 'kill'\n  | 'stun'\n  | 'bleed'\n  | 'confuse'\n  | 'defense'\n  | 'immobilize'\n  | 'negate'\n  | 'heal'\n  | 'aim'\n  | 'crit-chance'\n  | 'crit-multiplier'\n\nexport interface Effect {\n  type: effect\n  negative: boolean\n\n  duration?: number\n  value?: number\n}\n\nexport interface ActiveEffectsComponent {\n  effects: EffectApplication[]\n}\n\nexport interface EffectApplication {\n  source: Entity\n  effect: Effect\n  isCritical: boolean\n  isPiercing: boolean\n}\n\nexport function damage(value: number): Effect {\n  return { type: 'damage', negative: true, value }\n}\n\nexport function cooldown(duration: number): Effect {\n  return { type: 'cooldown', negative: true, duration }\n}\n\nexport function cooldownBuff(value: number, duration: number | undefined): Effect {\n  return { type: 'cooldown-buff', negative: true, value, duration }\n}\n\nexport function confuse(duration: number): Effect {\n  return { type: 'confuse', negative: true, duration }\n}\n\nexport function defend(value: number, duration: number | undefined): Effect {\n  return { type: 'defense', negative: false, duration, value }\n}\n\nexport function penetrate(value: number, duration: number | undefined): Effect {\n  return { type: 'defense', negative: true, duration, value: -value }\n}\n\nexport function stun(duration: number): Effect {\n  return { type: 'stun', negative: true, duration }\n}\n\nexport function immobilize(duration: number): Effect {\n  return { type: 'immobilize', negative: true, duration }\n}\n\nexport function aim(value: number, duration: number | undefined): Effect {\n  return { type: 'aim', negative: false, duration, value }\n}\n\nexport function critChance(value: number, duration: number | undefined): Effect {\n  return { type: 'crit-chance', negative: false, duration, value }\n}\n\nexport function critMultiplier(value: number, duration: number | undefined): Effect {\n  return { type: 'crit-multiplier', negative: false, duration, value }\n}\n\nexport function bleed(): Effect {\n  return { type: 'bleed', negative: true }\n}\n\nexport function kill(): Effect {\n  return { type: 'kill', negative: true }\n}\n\nexport function negateEffects(): Effect {\n  return { type: 'negate', negative: false }\n}\n\nexport function heal(): Effect {\n  return { type: 'heal', negative: false }\n}\n","import { Item, ItemComponent, Mod } from '../components/items'\nimport { copy } from '../object-utils'\nimport { addModification } from '../assets/actions'\nimport { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { ActiveEffectsComponent } from '../components/effects'\n\nexport function instantiateItem(world: TlbWorld, entity: Entity): { item: Item; mods: Mod[] } {\n  const component = world.getComponent<ItemComponent>(entity, 'item')!\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(entity, 'active-effects')!\n  const item = copy(component.item)\n  if (component.mods.length > 0) {\n    let adjective: string | undefined = undefined\n    component.mods.forEach(m => {\n      if (m.kind === 'active' || adjective === undefined) {\n        adjective = m.adjective\n      }\n    })\n    item.name = `${adjective} ${item.name}`\n    if (item.actions.length > 0) {\n      const passiveAction = component.mods\n        .filter(mod => mod.kind === 'passive' && mod.action !== undefined)\n        .reduce((action, mod) => addModification(mod.action!, action), item.actions[0])\n      item.actions = [passiveAction]\n\n      const cooldown = activeEffects.effects.find(e => e.effect.type === 'cooldown')\n      component.mods\n        .filter(mod => mod.kind === 'active' && mod.action !== undefined)\n        .forEach(mod => {\n          const modAction = addModification(mod.action!, passiveAction)\n          if (cooldown) {\n            modAction.cooldown = cooldown.effect.duration\n          }\n          item.actions.push(modAction)\n        })\n    }\n    component.mods.filter(mod => mod.effects !== undefined).forEach(mod => item.effects.push(...mod.effects!))\n  }\n  return { item, mods: component.mods }\n}\n","import { Vector } from '../spatial'\nimport { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { Shape } from '../geometry/shape'\n\nimport { FeatureComponent, createFeature, Feature, FeatureProvider } from './feature'\nimport { GroundComponent } from './ground'\nimport { PositionComponent } from './position'\nimport { Rectangle } from '../geometry/rectangle'\nimport { TriggersComponent } from './trigger'\n\nimport { AssetType, assets } from '../assets/assets'\nimport { FeatureType } from '../assets/features'\nimport { Direction } from '../spatial/direction'\nimport { InventoryComponent } from './items'\nimport { DialogType } from '../assets/dialogs'\nimport { DialogComponent } from './dialog'\nimport { Random } from '../random'\nimport { sampleLoreForDialog, LoreComponent } from './lore'\n\nexport interface AssetComponent {\n  type: AssetType\n}\n\nexport interface Asset {\n  name: string\n  size: Vector\n  hasInventory: boolean\n  dialog: DialogType | undefined\n  feature: (index: number) => Feature | undefined\n}\n\nexport interface PlacedAsset {\n  type: AssetType\n  tiles: { position: Vector; feature: FeatureType }[]\n}\n\nexport function shapeOfAsset(type: AssetType, position: Vector, direction: Direction): Shape {\n  const asset = assets[type]\n  return Rectangle.footprint(position, direction, asset.size)\n}\n\nexport function createAsset(\n  world: TlbWorld,\n  random: Random,\n  level: number,\n  position: Vector,\n  direction: Direction,\n  type: AssetType\n): Entity {\n  const shape = shapeOfAsset(type, position, direction)\n  return createAssetFromShape(world, random, level, shape, type)\n}\n\nexport function createAssetFromShape(world: TlbWorld, random: Random, level: number, shape: Shape, type: AssetType): Entity {\n  const entity = placeAsset(world, random, type)\n  placeAssetParts(world, type, entity, level, shape)\n  return entity\n}\n\nfunction placeAsset(world: TlbWorld, random: Random, type: AssetType): Entity {\n  const asset = assets[type]\n  const triggerInTurnBased = type === 'door'\n  const entity = world\n    .createEntity()\n    .withComponent<AssetComponent>('asset', { type })\n    .withComponent<TriggersComponent>('triggers', { name: asset.name, type: 'asset', entities: [], inTurnBased: triggerInTurnBased }).entity\n  if (asset.hasInventory) {\n    world.editEntity(entity).withComponent<InventoryComponent>('inventory', { content: [] })\n  }\n  if (asset.dialog !== undefined) {\n    world.editEntity(entity).withComponent<DialogComponent>('dialog', { type: asset.dialog })\n    const lore = sampleLoreForDialog(world, random, asset.dialog)\n    if (lore !== undefined) {\n      world.editEntity(entity).withComponent<LoreComponent>('lore', { type: lore })\n    }\n  }\n  return entity\n}\n\nfunction placeAssetParts(world: TlbWorld, type: AssetType, entity: Entity, level: number, shape: Shape): void {\n  const map: WorldMap = world.getResource<WorldMapResource>('map')\n  const asset = assets[type]\n  shape.foreach((p, i) => {\n    const feature = asset.feature(i)\n    if (feature !== undefined) {\n      const tile = putTile(world, map, level, p, () => feature)\n      addTrigger(world, tile, entity)\n    }\n  })\n}\n\nexport function removeAsset(world: TlbWorld, map: WorldMap, entity: Entity): void {\n  const triggers = world.getComponent<TriggersComponent>(entity, 'triggers')!\n  triggers.entities.forEach(tile => removeTile(world, map, tile))\n  world.deleteEntity(entity)\n}\n\nfunction removeTile(world: TlbWorld, map: WorldMap, entity: Entity): void {\n  const ground = world.getComponent<GroundComponent>(entity, 'ground')!\n  const position = world.getComponent<PositionComponent>(entity, 'position')!\n  map.levels[position.level].removeTile(position.position)\n  createFeature(world, position.level, position.position, ground.feature)\n  world.deleteEntity(entity)\n}\n\nfunction putTile(world: TlbWorld, map: WorldMap, level: number, position: Vector, feature: FeatureProvider): Entity {\n  const ground = removeGround(world, map, level, position)\n  const tile = world\n    .createEntity()\n    .withComponent<PositionComponent>('position', { level, position })\n    .withComponent<FeatureComponent>('feature', { feature })\n    .withComponent<GroundComponent>('ground', { feature: ground }).entity\n  map.levels[level].setTile(position, tile)\n  return tile\n}\n\nfunction addTrigger(world: TlbWorld, tile: Entity, entity: Entity): void {\n  world.editEntity(tile).withComponent('triggered-by', { entity })\n  world.getComponent<TriggersComponent>(entity, 'triggers')!.entities.push(tile)\n}\n\nfunction removeGround(world: TlbWorld, map: WorldMap, level: number, position: Vector): FeatureProvider {\n  const entity = map.levels[level].removeTile(position)\n  if (entity === undefined) {\n    throw new Error(`cannot build asset on missing ground at ${position.key}`)\n  }\n  const feature = world.getComponent<FeatureComponent>(entity, 'feature')\n  if (feature === undefined || feature.feature().blocking) {\n    throw new Error('cannot build asset on missing or blocking ground')\n  }\n  world.deleteEntity(entity)\n  return feature.feature\n}\n","import { TlbWorld, SystemName } from '../tlb'\nimport { AbstractState } from './state'\nimport { UIResource, UI } from '../resources/ui'\n\nexport class Modal extends AbstractState {\n  public constructor(systems: SystemName[]) {\n    super(\n      'modal',\n      systems.filter(s => s !== 'free-mode-control' && s !== 'player-control' && s !== 'player-round-control' && s !== 'player-interaction')\n    )\n  }\n\n  public update(_world: TlbWorld): void {}\n\n  public isDone(world: TlbWorld): boolean {\n    const ui: UI = world.getResource<UIResource>('ui')\n    return !ui.isModal\n  }\n\n  public isFrameLocked(): boolean {\n    return true\n  }\n}\n","import { AbstractShape } from './shape'\nimport { Vector } from '../spatial'\nimport { Rectangle } from './rectangle'\n\nexport class FunctionalShape extends AbstractShape {\n  public static lN(position: Vector, size: number = 1, center: boolean = false): FunctionalShape {\n    return FunctionalShape.fromMeasure(position, size, center, d => d.lN() <= size)\n  }\n\n  public static l1(position: Vector, size: number = 1, center: boolean = false): FunctionalShape {\n    return FunctionalShape.fromMeasure(position, size, center, d => d.l1() <= size)\n  }\n\n  public static empty(position: Vector): FunctionalShape {\n    const boundary = Rectangle.centerAt(position.x, position.y, 0)\n    return new FunctionalShape(() => false, boundary)\n  }\n\n  public static l2(position: Vector, size: number = 1, center: boolean = false): FunctionalShape {\n    return FunctionalShape.fromMeasure(position, size, center, d => d.squaredLength() <= size * size)\n  }\n\n  public static fromMeasure(position: Vector, size: number, center: boolean, measure: (d: Vector) => boolean) {\n    const boundary = Rectangle.centerAt(position.x, position.y, size)\n    return new FunctionalShape(p => {\n      const d = p.minus(position).abs()\n      if (d.fX === 0 && d.fY === 0) {\n        return center\n      }\n      return measure(d)\n    }, boundary)\n  }\n\n  public constructor(private readonly f: (p: Vector) => boolean, private readonly boundary: Rectangle) {\n    super()\n  }\n\n  public bounds(): Rectangle {\n    return this.boundary\n  }\n\n  public containsVector(p: Vector): boolean {\n    return this.f(p)\n  }\n\n  public translate(t: Vector): FunctionalShape {\n    return new FunctionalShape(p => this.f(p.add(t)), this.boundary.translate(t))\n  }\n\n  public grow(): FunctionalShape {\n    // Todo\n    return this\n  }\n\n  public shrink(): FunctionalShape {\n    // Todo\n    return this\n  }\n\n  public all(f: (position: Vector) => boolean): boolean {\n    return this.boundary.all(p => !this.f(p) || f(p))\n  }\n}\n","import { TlbWorld, ComponentName } from '../tlb'\nimport { ActiveEffectsComponent } from '../components/effects'\nimport { Entity } from '../ecs/entity'\n\nexport const turnComponents: ComponentName[] = ['wait-turn', 'start-turn', 'take-turn', 'took-turn']\n\nexport function turnBasedEntities(world: TlbWorld): number {\n  return turnComponents.map(c => world.components.get(c)!.size()).reduce((a, b) => a + b)\n}\n\nexport function isTurnBased(world: TlbWorld, entity: Entity): boolean {\n  return turnComponents.some(c => world.components.get(c)!.has(entity))\n}\n\nexport function clearTurnBased(world: TlbWorld) {\n  turnComponents.forEach(c => world.components.get(c)!.clear())\n}\n\nexport function playerIsStruggling(world: TlbWorld): boolean {\n  const player: Entity = world.getStorage('player').first()!\n  const activeEffects = world.getComponent<ActiveEffectsComponent>(player, 'active-effects')!\n  return activeEffects.effects.find(e => e.effect.type === 'bleed') !== undefined\n}\n\nexport function playerIsDead(world: TlbWorld): boolean {\n  const player: Entity = world.getStorage('player').first()!\n  return world.hasComponent(player, 'dead')\n}\n","import { ResourceName, TlbResource, TlbWorld } from '../tlb'\nimport { Vector } from '../spatial'\nimport { Rectangle } from '../geometry/rectangle'\nimport { Renderer } from '../renderer/renderer'\nimport { ViewportResource, Viewport } from './viewport'\nimport { SelectedAction, Movement, Jump } from '../components/action'\nimport { ActionSelector, SelectableAction } from '../ui/tabs/action-selector'\nimport { Overview } from '../ui/tabs/overview'\nimport { Entity } from '../ecs/entity'\nimport { WindowDecoration } from '../ui/window-decoration'\nimport { InventoryTransferModal } from '../ui/inventory-transfer-modal'\nimport { Inventory } from '../ui/tabs/inventory'\nimport { MultipleChoiceModal, MultipleChoiceOption } from '../ui/multiple-choice-modal'\nimport { Tabs } from '../ui/tabs'\nimport { LogTab } from '../ui/tabs/log'\nimport { MovementSelector } from '../ui/tabs/movement-selector'\nimport { Queries } from '../renderer/queries'\nimport { Path } from '../renderer/astar'\nimport { AttackSelector } from '../ui/tabs/attack-selector'\nimport { DialogType, dialogs, Answer } from '../assets/dialogs'\nimport { DialogModal } from '../ui/dialog-modal'\nimport { Random } from '../random'\nimport { State } from '../game-states/state'\nimport { Modal } from '../game-states/modal'\nimport { MultipleChoiceSelector } from '../ui/tabs/multiple-choice-tab'\nimport { Distribution } from '../random/distributions'\n\nexport interface UI {\n  hasElement(position: Vector): boolean\n  render(renderer: Renderer): void\n\n  isModal: boolean\n\n  reset(): void\n\n  showInventoryTransferModal(world: TlbWorld, source: Entity, sourceTitle: string, target: Entity, targetTitle: string): void\n  inventoryTransferModalShowing(): boolean\n  hideInventoryTransferModal(): void\n\n  showMultipleChoiceModal(world: TlbWorld, title: string, options: MultipleChoiceOption[]): void\n  selectedModalOption(): Entity | undefined\n  multipleChoiceModalShowing(): boolean\n  hideMultipleChoiceModal(): void\n\n  showDialogModal(world: TlbWorld, random: Random, dialog: DialogType, player: Entity, npc: Entity): void\n  dialogResult(): Answer | undefined\n  dialogShowing(): boolean\n  hideDialogModal(): void\n\n  hideSelectors(): void\n\n  showActionSelector(groups: SelectableAction[]): void\n  selectedAction(): SelectedAction | undefined\n\n  showMovementSelector(target: Entity, queries: Queries, movement: Movement): void\n  selectedMovement(): Path | undefined\n\n  showAttackSelector(target: Entity, queries: Queries, range: number): void\n  selectedAttack(): Path | undefined\n\n  showMultipleChoiceSelector(options: MultipleChoiceOption[]): void\n  selectedOption(): Entity | undefined\n\n  createTabs(world: TlbWorld, focus: Entity): void\n}\n\nexport function runDialog(\n  ui: UI,\n  world: TlbWorld,\n  random: Random,\n  dialog: DialogType,\n  player: Entity,\n  npc: Entity,\n  pushState: (state: State) => void\n): Answer | undefined {\n  const result = ui.dialogResult()\n  if (!ui.dialogShowing()) {\n    ui.showDialogModal(world, random, dialog, player, npc)\n    pushState(new Modal(world.activeSystemsList()))\n  } else if (result !== undefined) {\n    ui.hideDialogModal()\n  }\n  return result\n}\n\nconst modalOffsetY = 15\n\nexport class UIResource implements TlbResource, UI {\n  private readonly uniform: Random\n  public constructor(public readonly rng: Distribution) {\n    this.uniform = new Random(rng)\n  }\n\n  public readonly kind: ResourceName = 'ui'\n\n  public visibleElements: Rectangle[] = []\n\n  public isModal: boolean = false\n\n  private inventoryTransferModal: InventoryTransferModal | undefined = undefined\n  private multipleChoiceModal: MultipleChoiceModal | undefined = undefined\n  private dialogModal: DialogModal | undefined = undefined\n\n  private tabs: Tabs | undefined = undefined\n\n  private actionSelector: ActionSelector | undefined = undefined\n  private movementSelector: MovementSelector | undefined = undefined\n  private attackSelector: AttackSelector | undefined = undefined\n  private multipleChoiceSelector: MultipleChoiceSelector | undefined = undefined\n\n  public update(world: TlbWorld): void {\n    if (this.isModal) {\n      if (this.inventoryTransferModal !== undefined) {\n        this.inventoryTransferModal.update(world)\n        if (this.inventoryTransferModal.closed) {\n          this.hideInventoryTransferModal()\n        }\n      } else if (this.multipleChoiceModal !== undefined) {\n        this.multipleChoiceModal.update(world)\n        if (this.multipleChoiceModal.closed) {\n          this.isModal = false\n        }\n      } else if (this.dialogModal !== undefined) {\n        this.dialogModal.update(world)\n        if (this.dialogModal.closed) {\n          this.isModal = false\n        }\n      }\n    } else if (this.tabs !== undefined) {\n      this.tabs.update(world)\n    }\n  }\n\n  public render(renderer: Renderer): void {\n    if (this.tabs !== undefined) {\n      this.tabs.render(renderer)\n    }\n\n    if (this.inventoryTransferModal !== undefined) {\n      this.inventoryTransferModal.render(renderer)\n    } else if (this.multipleChoiceModal !== undefined) {\n      this.multipleChoiceModal.render(renderer)\n    } else if (this.dialogModal !== undefined) {\n      this.dialogModal.render(renderer)\n    }\n  }\n\n  reset(): void {\n    this.inventoryTransferModal = undefined\n    if (this.tabs !== undefined) {\n      this.tabs.reset()\n    }\n  }\n\n  public createTabs(world: TlbWorld, focus: Entity): void {\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const full = new Rectangle(0, viewport.boundaries.y - 12, viewport.boundaries.x, 12)\n    const minimized = new Rectangle(viewport.boundaries.x - 20, 0, 20, 9)\n    this.tabs = new Tabs(full, minimized)\n    this.tabs.add(new LogTab())\n    this.tabs.add(new Inventory(focus, this.uniform))\n    this.tabs.add(new Overview(focus))\n  }\n\n  public showInventoryTransferModal(world: TlbWorld, source: Entity, sourceTitle: string, target: Entity, targetTitle: string): void {\n    this.isModal = true\n\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const bounds = new Rectangle(viewport.boundaries.x / 2 - 30, viewport.boundaries.y / 2 - modalOffsetY, 60, 20)\n\n    this.inventoryTransferModal = InventoryTransferModal.build(bounds, source, sourceTitle, target, targetTitle)\n  }\n\n  public inventoryTransferModalShowing(): boolean {\n    return this.inventoryTransferModal !== undefined\n  }\n\n  public hideInventoryTransferModal() {\n    if (this.inventoryTransferModal !== undefined) {\n      this.inventoryTransferModal = undefined\n    }\n  }\n\n  public showMultipleChoiceModal(world: TlbWorld, title: string, options: { entity: Entity; description: string }[]): void {\n    this.isModal = true\n\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const window = new WindowDecoration(\n      new Rectangle(viewport.boundaries.x / 2 - 20, viewport.boundaries.y / 2 - modalOffsetY, 40, 10),\n      title\n    )\n\n    this.multipleChoiceModal = new MultipleChoiceModal(window, options)\n  }\n\n  public selectedModalOption(): Entity | undefined {\n    if (this.multipleChoiceModal !== undefined) {\n      const s = this.multipleChoiceModal.selector.selected\n      if (s !== undefined) {\n        return s.entity\n      }\n    }\n    return undefined\n  }\n\n  public multipleChoiceModalShowing(): boolean {\n    return this.multipleChoiceModal !== undefined\n  }\n\n  public hideMultipleChoiceModal() {\n    if (this.multipleChoiceModal !== undefined) {\n      this.multipleChoiceModal = undefined\n    }\n  }\n\n  public showDialogModal(world: TlbWorld, random: Random, dialog: DialogType, player: Entity, npc: Entity): void {\n    this.isModal = true\n\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const window = new WindowDecoration(\n      new Rectangle(viewport.boundaries.x / 2 - 20, viewport.boundaries.y / 2 - modalOffsetY, 40, 10),\n      'dialog'\n    )\n\n    this.dialogModal = new DialogModal(world, random, window, dialogs[dialog], player, npc)\n  }\n\n  public dialogResult(): Answer | undefined {\n    if (this.dialogModal !== undefined) {\n      return this.dialogModal.result\n    }\n    return undefined\n  }\n\n  public dialogShowing(): boolean {\n    return this.dialogModal !== undefined\n  }\n\n  public hideDialogModal() {\n    if (this.dialogModal !== undefined) {\n      this.dialogModal = undefined\n    }\n  }\n\n  public hideSelectors(): void {\n    this.movementSelector = undefined\n    this.actionSelector = undefined\n    this.attackSelector = undefined\n    this.multipleChoiceSelector = undefined\n    if (this.tabs !== undefined) {\n      this.tabs.reset()\n    }\n  }\n\n  public showActionSelector(groups: SelectableAction[]) {\n    if (this.tabs !== undefined && this.actionSelector === undefined) {\n      this.actionSelector = new ActionSelector(groups)\n      this.tabs.setFocusTab(this.actionSelector!)\n    }\n  }\n\n  public selectedAction(): SelectedAction | undefined {\n    if (this.actionSelector !== undefined) {\n      return this.actionSelector.selected\n    }\n    return undefined\n  }\n\n  public showMovementSelector(target: Entity, queries: Queries, movement: Movement | Jump): void {\n    if (this.tabs !== undefined && this.movementSelector === undefined) {\n      this.hideSelectors()\n      this.movementSelector = new MovementSelector(target, queries, movement)\n      this.tabs.setFocusTab(this.movementSelector!)\n    }\n  }\n\n  public selectedMovement(): Path | undefined {\n    if (this.movementSelector !== undefined) {\n      return this.movementSelector.selected\n    }\n    return undefined\n  }\n\n  public showAttackSelector(target: Entity, queries: Queries, range: number): void {\n    if (this.tabs !== undefined && this.attackSelector === undefined) {\n      this.hideSelectors()\n      this.attackSelector = new AttackSelector(target, queries, range)\n      this.tabs.setFocusTab(this.attackSelector!)\n    }\n  }\n\n  public selectedAttack(): Path | undefined {\n    if (this.attackSelector !== undefined) {\n      return this.attackSelector.selected\n    }\n    return undefined\n  }\n\n  public showMultipleChoiceSelector(options: MultipleChoiceOption[]): void {\n    if (this.tabs !== undefined && this.multipleChoiceSelector === undefined) {\n      this.hideSelectors()\n      this.multipleChoiceSelector = new MultipleChoiceSelector(options)\n      this.tabs.setFocusTab(this.multipleChoiceSelector!)\n    }\n  }\n\n  public selectedOption(): Entity | undefined {\n    if (this.multipleChoiceSelector !== undefined) {\n      return this.multipleChoiceSelector.selected\n    }\n    return undefined\n  }\n\n  public hasElement(position: Vector): boolean {\n    return (\n      (this.isModal &&\n        ((this.inventoryTransferModal !== undefined && this.inventoryTransferModal.contains(position)) ||\n          (this.multipleChoiceModal !== undefined && this.multipleChoiceModal.contains(position)) ||\n          (this.dialogModal !== undefined && this.dialogModal.contains(position)))) ||\n      (this.tabs !== undefined && this.tabs.contains(position))\n    )\n  }\n}\n","import { ItemKind } from './items'\nimport { characterStats, CharacterStatsType } from '../assets/characters'\nimport { copy } from '../object-utils'\n\nexport interface CharacterStatsComponent {\n  type: CharacterStatsType\n  current: CharacterStats\n}\n\nexport function createCharacterStatsComponent(type: CharacterStatsType): CharacterStatsComponent {\n  return { type, current: copy(characterStats[type]) }\n}\n\nexport type bodyPartType = 'head' | 'arm' | 'torso' | 'leg'\n\nexport interface BodyPart {\n  type: bodyPartType\n  itemAttachments: ItemKind[]\n}\n\nexport interface CharacterStats {\n  bodyParts: { [key: string]: BodyPart }\n  health: number\n  strength: number\n  aim: number\n}\n\nexport function speed(_stats: CharacterStatsComponent): number {\n  return 0.4\n}\n","import clone from 'lodash.clonedeep'\n\nexport function copy<T>(o: T): T {\n  return clone(o)\n}\n","import { Action, action, Movement, ChangeEquipment, Trigger, Status, Jump, Attack, SubAction } from '../components/action'\nimport {\n  Effect,\n  damage,\n  stun,\n  kill,\n  heal,\n  negateEffects,\n  defend,\n  immobilize,\n  critMultiplier,\n  aim,\n  critChance,\n  penetrate,\n  cooldown,\n} from '../components/effects'\nimport { copy } from '../object-utils'\nimport { AttackResult } from '../component-reducers/attack-target'\nimport { ModAction } from '../components/items'\n\nfunction movement(range: number): Movement {\n  return { kind: 'movement', range, target: 'self' }\n}\n\nfunction jump(range: number): Jump {\n  return { kind: 'jump', range, target: 'self' }\n}\n\nfunction changeEquipment(): ChangeEquipment {\n  return { kind: 'changeEquipment' }\n}\n\nfunction trigger(): Trigger {\n  return { kind: 'trigger' }\n}\n\nfunction attack(range: number, accuracy: number, effects: Effect[], grants?: (hit: AttackResult) => SubAction[]): Attack {\n  return { kind: 'attack', range, accuracy, effects, target: 'enemy', grants }\n}\n\nfunction status(effects: Effect[], target: 'self' | 'item' = 'self'): Status {\n  return { kind: 'status', effects, target }\n}\n\nfunction modifySubActions(\n  actions: SubAction[],\n  attackModifier: (a: Attack) => void,\n  movementModifier: (m: Movement) => void,\n  effectModifier: (e: Effect, onself: boolean) => void\n): SubAction[] {\n  return actions.map(a => {\n    switch (a.kind) {\n      case 'attack': {\n        const effects = a.effects.map(e => copy(e))\n        effects.forEach(e => effectModifier(e, false))\n        const newAttack = attack(a.range, a.accuracy, effects)\n        attackModifier(newAttack)\n        return newAttack\n      }\n      case 'status': {\n        const effects = a.effects.map(e => copy(e))\n        effects.forEach(e => effectModifier(e, true))\n        return status(effects)\n      }\n      case 'movement': {\n        const movement = copy(a)\n        movementModifier(movement)\n        return movement\n      }\n      case 'trigger':\n      case 'changeEquipment':\n      case 'jump':\n        return copy(a)\n    }\n  })\n}\n\nexport function addModification(type: ModAction, base: Action): Action {\n  switch (type) {\n    case 'overcharge':\n      return action(\n        'overcharge',\n        base.cost,\n        modifySubActions(\n          [...base.subActions, status([cooldown(2)], 'item')],\n          a => {\n            a.accuracy = Math.max(2, a.accuracy - 2)\n            a.range = a.range + 2\n            a.grants = undefined\n          },\n          () => null,\n          e => {\n            e.value = e.value !== undefined ? e.value + 2 : undefined\n          }\n        ),\n        base.characterTypes\n      )\n    case 'acrobatics': {\n      const actions = copy(base.subActions)\n      const firstAttack = actions.find(a => a.kind === 'attack') as Attack\n      firstAttack.grants = result => {\n        if (result.isCritical) {\n          return [jump(6), attack(1, firstAttack.accuracy, firstAttack.effects, firstAttack.grants)]\n        } else {\n          return []\n        }\n      }\n      const chain = action('chain', 'both', [jump(6), ...actions], ['yellow_player', 'boss'])\n      return chain\n    }\n    case 'frenzy': {\n      const first = copy(base.subActions.find(a => a.kind === 'attack') as Attack)\n      const melee = first.range === 1\n      const frenzy = action('frenzy', 'both', [first], ['yellow_player', 'red_player', 'boss'])\n      first.grants = result => {\n        if (result.isHit) {\n          const lastAttack = frenzy.subActions[frenzy.subActions.length - 1] as Attack\n          const accuracy = Math.max(2, lastAttack.accuracy - 2)\n          if (melee) {\n            return [\n              status([critChance(-1, 0), critMultiplier(0.5, 0)]),\n              movement(5),\n              attack(1, accuracy, lastAttack.effects, lastAttack.grants),\n            ]\n          } else {\n            return [status([aim(-1, 0)]), attack(lastAttack.range, accuracy, lastAttack.effects, lastAttack.grants)]\n          }\n        } else {\n          return [status([immobilize(1)])]\n        }\n      }\n      return frenzy\n    }\n    case 'doubleShot':\n      return action('double shot', base.cost, [...base.subActions, ...base.subActions, status([cooldown(2)], 'item')], base.characterTypes)\n    case 'headshot':\n      return action(\n        'headshot',\n        base.cost,\n        modifySubActions(\n          [status([critChance(2, 1), critMultiplier(2, 1)], 'self'), ...base.subActions, status([cooldown(1)], 'item')],\n          () => null,\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'execute':\n      return action(\n        'execute',\n        base.cost,\n        modifySubActions(\n          [status([critChance(2, 1), critMultiplier(2, 1)]), ...base.subActions, status([cooldown(1)], 'item')],\n          a => {\n            a.effects.push(stun(1))\n            a.range = Math.min(1, Math.floor(a.range / 2))\n            a.grants = undefined\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'bloody':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          a => {\n            a.grants = result => (result.effects.some(e => e.killed) ? [status([critChance(2, 2), critMultiplier(1.1, 2)])] : [])\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'fast':\n      return action(base.name, 'either', base.subActions, base.characterTypes)\n    case 'mobile':\n      return action('run and gun', 'action', [...base.subActions, movement(6)], base.characterTypes)\n    case 'penetrating':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          a => {\n            a.effects.push(penetrate(2, 0))\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'stabilizing':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          a => {\n            a.grants = result => (result.isHit ? [status([aim(2, 2)])] : [])\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'stunning':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          a => {\n            a.effects.push(stun(1))\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'ranged':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          a => {\n            a.range += 1\n          },\n          () => null,\n          () => null\n        ),\n        base.characterTypes\n      )\n    case 'enhanced':\n      return action(\n        base.name,\n        base.cost,\n        modifySubActions(\n          base.subActions,\n          () => null,\n          () => null,\n          e => {\n            if (e.type === 'damage') {\n              e.value = Math.floor(e.value! * 1.3)\n            }\n          }\n        ),\n        base.characterTypes\n      )\n  }\n}\n\nexport type ActionType =\n  | 'endTurn'\n  | 'move'\n  | 'heal'\n  | 'kill'\n  | 'trigger'\n  | 'hit'\n  | 'kick'\n  | 'rush'\n  | 'shoot'\n  | 'tighten'\n  | 'bodyShield'\n  | 'noMove'\n  | 'changeEquipment'\nexport function createAction(type: ActionType): Action {\n  switch (type) {\n    case 'kick':\n      return action('kick', 'either', [status([critChance(4, 0)]), attack(1, 8, [damage(4)])])\n    case 'trigger':\n      return action('trigger', 'either', [trigger()])\n    case 'noMove':\n      return action('no move', 'movement', [])\n    case 'changeEquipment':\n      return action('change equipment', 'either', [changeEquipment()])\n    case 'endTurn':\n      return action('end turn', 'both', [])\n    case 'bodyShield':\n      return action('body shield', 'movement', [status([defend(5, 1)])])\n    case 'move':\n      return action('move', 'movement', [movement(4)])\n    case 'heal':\n      return action('heal', 'either', [status([heal(), negateEffects()])])\n    case 'kill':\n      return action('kill', 'action', [status([kill()])])\n    case 'hit':\n      return action('hit', 'action', [attack(1, 8, [damage(3)])])\n    case 'rush':\n      return action('rush', 'all', [movement(6)])\n    case 'shoot':\n      return action('shoot', 'action', [attack(10, 6, [damage(5)])])\n    case 'tighten':\n      return action('tighten', 'action', [status([defend(4, 1)])])\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { TriggeredByComponent, TriggersComponent } from '../components/trigger'\nimport { DialogComponent } from '../components/dialog'\nimport { PositionComponent } from '../components/position'\nimport { WorldMap, WorldMapResource, Level } from '../resources/world-map'\nimport { coveringDirections } from '../component-reducers/cover'\nimport { hasItem } from '../component-reducers/inventory'\nimport { getTriggersOfStructure } from '../component-reducers/structure'\nimport { LoreComponent } from '../components/lore'\nimport { quests } from './quests'\nimport { QuestComponent } from '../components/quest'\nimport { lores } from './lores'\n\nexport type AnswerType = 'close' | 'attack' | 'authorized' | 'move_level_up' | 'move_level_down' | 'trigger' | 'unlock_lore' | 'start_quest'\nexport type Result = Answer | Navigation | NextDialog\nexport interface NextDialog {\n  text: string\n  type: 'next_dialog'\n  dialog: DialogType\n}\nexport interface Answer {\n  text: string\n  type: AnswerType\n  target?: Entity\n}\nexport interface Navigation {\n  text: string\n  type: number\n}\nexport interface Step {\n  text: string[]\n  answers: Result[]\n}\nexport interface Dialog {\n  steps(world: TlbWorld, player: Entity, owner: Entity): Step[]\n}\n\nfunction navigation(text: string, type: number): Navigation {\n  return { text, type }\n}\nfunction nextDialog(text: string, dialog: DialogType): NextDialog {\n  return { text, type: 'next_dialog', dialog }\n}\nfunction answer(text: string, type: AnswerType, target?: Entity): Answer {\n  return { text, type, target }\n}\nfunction attack(): Answer {\n  return answer('[attack]', 'attack')\n}\nfunction moveUp(): Answer {\n  return answer('[move one level up]', 'move_level_up')\n}\nfunction moveDown(): Answer {\n  return answer('[move one level down]', 'move_level_down')\n}\n\nfunction statelessDialog(steps: Step[]): Dialog {\n  return { steps: () => steps }\n}\n\nfunction dialog(steps: (world: TlbWorld, player: Entity, owner: Entity) => Step[]): Dialog {\n  return { steps }\n}\n\nfunction plaintextDialog(text: string, type: AnswerType = 'close'): Dialog {\n  return statelessDialog([\n    {\n      text: [text],\n      answers: [answer('ok', type)],\n    },\n  ])\n}\n\nfunction doorControls(world: TlbWorld, player: Entity): Step {\n  const doorControlsAnswers = []\n\n  // use player position here instead of owner, because owner might not have a position\n  const position = world.getComponent<PositionComponent>(player, 'position')!\n  const map: WorldMap = world.getResource<WorldMapResource>('map')\n  const level: Level = map.levels[position.level]\n  const structure = level.getStructure(position.position)!\n  const doors = getTriggersOfStructure(world, structure, ['door'])\n\n  doors.forEach(door => {\n    const triggers = world.getComponent<TriggersComponent>(door, 'triggers')!\n    const p = world.getComponent<PositionComponent>(triggers.entities[0], 'position')!\n    const directions = coveringDirections(p.position, position.position)\n    doorControlsAnswers.push(answer(`a door to the ${directions.join(',')}`, 'trigger', door))\n  })\n\n  doorControlsAnswers.push(navigation('back', 0))\n  return {\n    text: ['door controls'],\n    answers: doorControlsAnswers,\n  }\n}\n\nconst dialogDefinitions = {\n  startLore1: plaintextDialog('here have some lore...', 'unlock_lore'),\n  startQuest1: plaintextDialog('please fetch me something...', 'start_quest'),\n  terminal: dialog((world, player, owner) => {\n    const mainMenuNavigation: (Navigation | NextDialog)[] = []\n    const steps = []\n    const lore = world.getComponent<LoreComponent>(owner, 'lore')\n    if (lore !== undefined) {\n      const dialog = lores[lore.type]\n      mainMenuNavigation.push(nextDialog(dialog.startText, dialog.start))\n    }\n\n    steps.push(doorControls(world, player))\n    mainMenuNavigation.push(navigation('door controls', steps.length))\n\n    return [\n      {\n        text: ['terminal'],\n        answers: [...mainMenuNavigation, answer('exit', 'close')],\n      },\n      ...steps,\n    ]\n  }),\n  core: statelessDialog([\n    {\n      text: ['ACCESS DENIED'],\n      answers: [answer('ok', 'close'), attack()],\n    },\n  ]),\n  civilianDialog: dialog((world, _player, owner) => {\n    const mainMenuNavigation: (Navigation | NextDialog)[] = []\n    const quest = world.getComponent<QuestComponent>(owner, 'quest')\n    if (quest !== undefined) {\n      const { startText, start } = quests[quest.type]\n      mainMenuNavigation.push(nextDialog(startText, start))\n    }\n\n    return [\n      {\n        text: ['a civilian'],\n        answers: [...mainMenuNavigation, answer('exit', 'close')],\n      },\n      {\n        text: civilianRandomRemarks,\n        answers: [navigation('ok', 0)],\n      },\n    ]\n  }),\n  guardRandomRemarks: statelessDialog([\n    {\n      text: [\n        'Do you want to cry now?',\n        'Love a neurogender bitch, oh, it get my dick hard',\n        \"You ain't gonna let me fuck you and I feel you\",\n        \"I'm icy bitch, don't look at my wrist.\",\n        'Fuck love. All I got for hoes is hard dick and bubblegum.',\n        'I punched this transhumanist in the ripcage and kicked her in the stomach',\n      ],\n      answers: [answer('ok', 'close'), attack()],\n    },\n  ]),\n  restrictedAreaCheck: dialog((world, player) => {\n    const answers: (Answer | Navigation)[] = [attack()]\n    if (hasItem(world, player, 'idCard')) {\n      answers.push(navigation('[show id card]', 1))\n    }\n    return [\n      {\n        text: ['Hey you, stop it right there. This is a restricted area.', 'Identify yourself'],\n        answers,\n      },\n      {\n        text: ['Ok, you can pass'],\n        answers: [answer('ok', 'authorized')],\n      },\n    ]\n  }),\n  elevator: statelessDialog([\n    {\n      text: ['Elevator controls. Please select a level'],\n      answers: [moveUp(), moveDown()],\n    },\n  ]),\n}\nexport type DialogType = keyof typeof dialogDefinitions\nexport const dialogs: { [key in DialogType]: Dialog } = dialogDefinitions\n\nexport function addDialog(world: TlbWorld, entity: Entity, type: DialogType): Entity {\n  const dialog = world\n    .createEntity()\n    .withComponent<TriggeredByComponent>('triggered-by', { entity })\n    .withComponent<DialogComponent>('dialog', { type }).entity\n  world.getComponent<TriggersComponent>(entity, 'triggers')!.entities.push(dialog)\n  return dialog\n}\n\nconst civilianRandomRemarks = [\n  'we suspect that your sister controls the mutant rom chip and the frozen wand.',\n  'I apoligize for this statement',\n  'The CNT-FAI briefly considered joining the Comintern because they fetishized revolutionary upsurges and apparently knew nothing about politics or socialism',\n  'Thinking about building a railgun',\n  'Kinda want to hug, but like irl. for the propriocetive stimmy feels :P',\n  'I am, at my core, a stubborn and frustrating human who only exists to be set in my ways.',\n  \"England are gonna win. And I'm gonna post so many garbage selfies tonight\",\n  'Love that my old man is spending his saturday swearing at remainers appearing on the news',\n  \"you think you do but you don't\",\n  'I reject nation states',\n  'Woah I wish I could read',\n  \"What the hell is 'pajama'\",\n  'Always use protection',\n  'Subsurface warfare is going to get lit',\n  'Gracious wife, gracious life',\n  'im about to nut these loads',\n  'May biqueerplatonic people find success in their lives',\n  'I hope hologender people are getting enough time to rest!',\n  'Washing my chin',\n  'I am still against full luxury automated communism. thats not what i aim for.',\n  '#Javascript was a mistake.',\n  'we had fun looking at all the medieval babies at the art gallery today',\n  \"Oh, me? I'm strictly chillin'\",\n  \"It's a comfortable dusk in the city, and you are a comfortable salmon.\",\n  'adulthood is having your debit card declined, fashionably',\n]\n","import { Vector } from './vector'\nimport { Shape } from '../geometry/shape'\n\nexport class SetSpace {\n  public readonly objects: Uint8Array\n\n  public constructor(public readonly width: number) {\n    this.objects = new Uint8Array(width * width)\n  }\n\n  public has(pos: Vector): boolean {\n    return this.objects[pos.index(this.width)] > 0\n  }\n\n  public set(pos: Vector): void {\n    this.objects[pos.index(this.width)] = 1\n  }\n\n  public byIndex(index: number): number {\n    return this.objects[index]\n  }\n\n  public setAll(shape: Shape): void {\n    shape.foreach(pos => this.set(pos))\n  }\n\n  public remove(pos: Vector): boolean {\n    const index = pos.index(this.width)\n    const oldValue = this.objects[index]\n    this.objects[index] = 0\n    return oldValue > 0\n  }\n\n  public clear(): void {\n    this.objects.fill(0)\n  }\n\n  public add(space: SetSpace) {\n    for (let index = 0; index < this.width * this.width; ++index) {\n      if (space.byIndex(index) > 0) {\n        this.objects[index] = 1\n      }\n    }\n  }\n}\n","import { Rectangle } from '../geometry/rectangle'\nimport { Renderer } from '../renderer/renderer'\nimport { Difference } from '../geometry/difference'\nimport { primary } from '../renderer/palettes'\nimport { Input } from '../resources/input'\nimport { Vector } from '../spatial'\n\nexport class WindowDecoration {\n  public constructor(private rectangle: Rectangle, public title: string, public bottomCollapse: boolean = false) {}\n\n  public get topLeft(): Vector {\n    return this.rectangle.topLeft\n  }\n\n  public get right(): number {\n    return this.rectangle.right\n  }\n\n  public get bottom(): number {\n    return this.rectangle.bottom\n  }\n\n  public get content(): Rectangle {\n    return this.rectangle.shrink()\n  }\n\n  public containsVector(vector: Vector): boolean {\n    return this.rectangle.containsVector(vector)\n  }\n\n  public get width(): number {\n    return this.rectangle.width\n  }\n\n  public render(renderer: Renderer) {\n    Difference.innerBorder(this.rectangle).foreach(p => {\n      if (p.y === this.rectangle.top || p.y === this.rectangle.bottom) {\n        renderer.character('-', p, primary[1])\n      } else {\n        renderer.character('|', p, primary[1])\n      }\n    })\n    const titleText = `/${this.title}/`\n    renderer.text(titleText, { x: this.rectangle.right - titleText.length, y: this.rectangle.top }, primary[1])\n  }\n\n  public update(_input: Input): void {}\n}\n","import { Shape, AbstractShape } from './shape'\nimport { Rectangle } from './rectangle'\nimport { Vector } from '../spatial/vector'\n\nexport class Difference extends AbstractShape {\n  public static innerBorder(shape: Shape): Difference {\n    return new Difference(shape, shape.shrink())\n  }\n\n  public constructor(public readonly baseShape: Shape, public readonly subtractionShape: Shape) {\n    super()\n  }\n\n  public bounds(): Rectangle {\n    return this.baseShape.bounds()\n  }\n\n  public containsVector(p: Vector): boolean {\n    return this.baseShape.containsVector(p) && !this.subtractionShape.containsVector(p)\n  }\n\n  public grow(cells: number = 1): Difference {\n    return new Difference(this.baseShape.grow(cells), this.subtractionShape.grow(cells))\n  }\n\n  public shrink(cells: number = 1): Difference {\n    return new Difference(this.baseShape.shrink(cells), this.subtractionShape.shrink(cells))\n  }\n\n  public translate(t: Vector): Difference {\n    return new Difference(this.baseShape.translate(t), this.subtractionShape.translate(t))\n  }\n\n  public all(f: (p: Vector) => boolean): boolean {\n    return this.bounds().all(p => {\n      if (this.containsVector(p)) {\n        return f(p)\n      }\n      return true\n    })\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { InventoryComponent, Item, EquipedItemsComponent, EquipmentAttachement, Mod } from '../components/items'\nimport { Entity } from '../ecs/entity'\nimport { CharacterStatsComponent } from '../components/character-stats'\nimport { instantiateItem } from './instantiate-item'\n\nexport function maximumInventoryWeight(stats: CharacterStatsComponent): number {\n  return stats.current.strength * 5\n}\n\nexport interface ItemWithEntity {\n  item: Item\n  mods: Mod[]\n  entity: Entity\n}\n\nexport interface InventoryDescription {\n  inventory: InventoryComponent\n  items: ItemWithEntity[]\n  equipment: EquipmentAttachement[]\n  currentWeight: number\n  maximumWeight: number | undefined\n}\n\nexport function createInventoryDescription(world: TlbWorld, entity: Entity): InventoryDescription {\n  const inventory = world.getComponent<InventoryComponent>(entity, 'inventory')!\n  const stats = world.getComponent<CharacterStatsComponent>(entity, 'character-stats')\n  const equiped = world.getComponent<EquipedItemsComponent>(entity, 'equiped-items') || { equipment: [] }\n  let maximumWeight: number | undefined = undefined\n  if (stats !== undefined) {\n    maximumWeight = maximumInventoryWeight(stats)\n  }\n  const inventoryItems = inventory.content.map(e => {\n    const item = instantiateItem(world, e)\n    return { entity: e, item: item.item, mods: item.mods }\n  })\n  const currentWeight = inventoryItems.map(i => i.item.weight).reduce((a, b) => a + b, 0)\n  return { inventory, items: inventoryItems, maximumWeight, currentWeight, equipment: equiped.equipment }\n}\n","import { ActiveEffectsComponent, effect } from '../components/effects'\nimport { Entity } from '../ecs/entity'\nimport { TlbWorld } from '../tlb'\nimport { CharacterStatsComponent } from '../components/character-stats'\nimport { TakeTurnComponent } from '../components/rounds'\n\nexport function getAim(world: TlbWorld, entity: Entity): number {\n  if (hasEffect(world, entity, 'confuse')) {\n    return 0\n  }\n  const stats = world.getComponent<CharacterStatsComponent>(entity, 'character-stats')!\n  return stats.current.aim + reduceActiveEffects(world, entity, 'aim')\n}\n\nexport function getCriticalChance(world: TlbWorld, entity: Entity): number {\n  return 3 + reduceActiveEffects(world, entity, 'crit-chance')\n}\n\nexport function getCooldownBuff(world: TlbWorld, entity: Entity): number {\n  return reduceActiveEffects(world, entity, 'cooldown-buff')\n}\n\nexport function getCriticalMultiplier(world: TlbWorld, entity: Entity): number {\n  return 2 + reduceActiveEffects(world, entity, 'crit-multiplier')\n}\n\nexport function getDefense(world: TlbWorld, entity: Entity): number {\n  return reduceActiveEffects(world, entity, 'defense')\n}\n\nexport function getCanMove(world: TlbWorld, entity: Entity): boolean {\n  if (hasEffect(world, entity, 'immobilize', 'stun')) {\n    return false\n  }\n  return !world.getComponent<TakeTurnComponent>(entity, 'take-turn')!.moved\n}\n\nexport function getCanAct(world: TlbWorld, entity: Entity): boolean {\n  if (hasEffect(world, entity, 'stun')) {\n    return false\n  }\n  return !world.getComponent<TakeTurnComponent>(entity, 'take-turn')!.acted\n}\n\nexport function hasEffect(world: TlbWorld, entity: Entity, ...types: effect[]): boolean {\n  const active = world.getComponent<ActiveEffectsComponent>(entity, 'active-effects')\n  if (active !== undefined) {\n    return active.effects.some(e => types.includes(e.effect.type))\n  }\n  return false\n}\n\nexport function reduceActiveEffects(world: TlbWorld, entity: Entity, type: effect): number {\n  const active = world.getComponent<ActiveEffectsComponent>(entity, 'active-effects')\n  if (active !== undefined) {\n    return active.effects\n      .filter(e => e.effect.type === type)\n      .map(e => e.effect.value || 0)\n      .reduce((a, b) => a + b, 0)\n  }\n  return 0\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { TriggeredByComponent, TriggersComponent } from '../components/trigger'\nimport { Shape } from '../geometry/shape'\nimport { WorldMapResource } from '../resources/world-map'\n\nexport function findTriggers(world: TlbWorld, level: number, shape: Shape): { entity: Entity; component: TriggersComponent }[] {\n  const map = world.getResource<WorldMapResource>('map')\n  const seen: Set<Entity> = new Set()\n  const triggers: { entity: Entity; component: TriggersComponent }[] = []\n  shape.foreach(p => {\n    const tile = map.levels[level].getTile(p)\n    if (tile !== undefined) {\n      registerTrigger(world, seen, tile, triggers)\n    }\n    const character = map.levels[level].getCharacter(p)\n    if (character !== undefined) {\n      registerTrigger(world, seen, character, triggers)\n    }\n  })\n  return triggers\n}\n\nfunction registerTrigger(\n  world: TlbWorld,\n  seen: Set<Entity>,\n  owner: Entity,\n  triggers: { entity: Entity; component: TriggersComponent }[]\n): void {\n  const entity = findTriggerOfEntity(world, owner)\n  if (entity !== undefined && !seen.has(entity)) {\n    seen.add(entity)\n    const component = world.getComponent<TriggersComponent>(entity, 'triggers')!\n    triggers.push({ entity, component })\n  }\n}\n\nexport function findTriggerOfEntity(world: TlbWorld, entity: Entity): Entity | undefined {\n  if (world.getComponent(entity, 'triggers') !== undefined) {\n    return entity\n  }\n  const triggeredBy = world.getComponent<TriggeredByComponent>(entity, 'triggered-by')\n  if (triggeredBy !== undefined) {\n    if (world.getComponent<TriggersComponent>(triggeredBy.entity, 'triggers') !== undefined) {\n      return triggeredBy.entity\n    }\n  }\n  return undefined\n}\n","import Backend from \"./backend.js\";\nimport * as Color from \"../color.js\";\nfunction clearToAnsi(bg) {\n    return `\\x1b[0;48;5;${termcolor(bg)}m\\x1b[2J`;\n}\nfunction colorToAnsi(fg, bg) {\n    return `\\x1b[0;38;5;${termcolor(fg)};48;5;${termcolor(bg)}m`;\n}\nfunction positionToAnsi(x, y) {\n    return `\\x1b[${y + 1};${x + 1}H`;\n}\nfunction termcolor(color) {\n    const SRC_COLORS = 256.0;\n    const DST_COLORS = 6.0;\n    const COLOR_RATIO = DST_COLORS / SRC_COLORS;\n    let rgb = Color.fromString(color);\n    let r = Math.floor(rgb[0] * COLOR_RATIO);\n    let g = Math.floor(rgb[1] * COLOR_RATIO);\n    let b = Math.floor(rgb[2] * COLOR_RATIO);\n    return r * 36 + g * 6 + b * 1 + 16;\n}\nexport default class Term extends Backend {\n    constructor() {\n        super();\n        this._offset = [0, 0];\n        this._cursor = [-1, -1];\n        this._lastColor = \"\";\n    }\n    schedule(cb) { setTimeout(cb, 1000 / 60); }\n    setOptions(options) {\n        super.setOptions(options);\n        let size = [options.width, options.height];\n        let avail = this.computeSize();\n        this._offset = avail.map((val, index) => Math.floor((val - size[index]) / 2));\n    }\n    clear() {\n        process.stdout.write(clearToAnsi(this._options.bg));\n    }\n    draw(data, clearBefore) {\n        // determine where to draw what with what colors\n        let [x, y, ch, fg, bg] = data;\n        // determine if we need to move the terminal cursor\n        let dx = this._offset[0] + x;\n        let dy = this._offset[1] + y;\n        let size = this.computeSize();\n        if (dx < 0 || dx >= size[0]) {\n            return;\n        }\n        if (dy < 0 || dy >= size[1]) {\n            return;\n        }\n        if (dx !== this._cursor[0] || dy !== this._cursor[1]) {\n            process.stdout.write(positionToAnsi(dx, dy));\n            this._cursor[0] = dx;\n            this._cursor[1] = dy;\n        }\n        // terminals automatically clear, but if we're clearing when we're\n        // not otherwise provided with a character, just use a space instead\n        if (clearBefore) {\n            if (!ch) {\n                ch = \" \";\n            }\n        }\n        // if we're not clearing and not provided with a character, do nothing\n        if (!ch) {\n            return;\n        }\n        // determine if we need to change colors\n        let newColor = colorToAnsi(fg, bg);\n        if (newColor !== this._lastColor) {\n            process.stdout.write(newColor);\n            this._lastColor = newColor;\n        }\n        // write the provided symbol to the display\n        let chars = [].concat(ch);\n        process.stdout.write(chars[0]);\n        // update our position, given that we wrote a character\n        this._cursor[0]++;\n        if (this._cursor[0] >= size[0]) {\n            this._cursor[0] = 0;\n            this._cursor[1]++;\n        }\n    }\n    computeFontSize() { throw new Error(\"Terminal backend has no notion of font size\"); }\n    eventToPosition(x, y) { return [x, y]; }\n    computeSize() { return [process.stdout.columns, process.stdout.rows]; }\n}\n","import * as rot from 'rot-js'\n\nexport class Color {\n  public static fromHex(hex: string): Color {\n    return new Color(rot.Color.fromString(hex) as [number, number, number])\n  }\n\n  public constructor(public color: [number, number, number]) {}\n\n  private rgb: string | undefined = undefined\n  public toRgb(): string {\n    if (this.rgb === undefined) {\n      this.rgb = rot.Color.toRGB(this.color)\n    }\n    return this.rgb\n  }\n\n  public brightness(): number {\n    return (this.color[0] + this.color[1] + this.color[2]) / 3\n  }\n\n  public add(other: Color): Color {\n    return new Color(rot.Color.add(this.color, other.color))\n  }\n\n  public multiply(other: Color): Color {\n    return new Color(rot.Color.multiply(this.color, other.color))\n  }\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { Entity } from '../ecs/entity'\nimport { Effect, ActiveEffectsComponent } from './effects'\nimport { ItemBaseType, createItem } from '../assets/items'\nimport { Action } from './action'\nimport { RegionsType } from './region'\nimport { Random } from '../random'\nimport { TlbWorld } from '../tlb'\nimport { getRandomMod } from '../assets/mods'\n\nexport type WearableKind = 'glove' | 'helmet' | 'armor' | 'pants' | 'boots'\nexport type ItemKind = 'scrap' | 'consumable' | 'weapon' | WearableKind\n\nexport type ItemTag = 'rifle' | 'high-tech' | 'melee' | 'gun'\n\nexport type ModAction =\n  | 'overcharge'\n  | 'doubleShot'\n  | 'frenzy'\n  | 'headshot'\n  | 'execute'\n  | 'ranged'\n  | 'stabilizing'\n  | 'bloody'\n  | 'acrobatics'\n  | 'stunning'\n  | 'penetrating'\n  | 'mobile'\n  | 'enhanced'\n  | 'fast'\n\nexport type ModKind = 'passive' | 'active'\n\nexport interface Mod {\n  kind: ModKind\n  adjective: string\n  occurs: RegionsType[]\n\n  action?: ModAction\n  effects?: Effect[]\n\n  matches: {\n    kind: ItemKind\n    tags: ItemTag[]\n  }[]\n}\n\nexport interface Item {\n  base: ItemBaseType\n  tags: ItemTag[]\n\n  name: string\n  shortName: string\n  description: string\n\n  actions: Action[]\n  effects: Effect[]\n\n  kind: ItemKind\n  weight: number\n  attachments: number\n}\n\nexport interface InventoryComponent {\n  content: Entity[]\n}\n\nexport interface ItemComponent {\n  item: Item\n  mods: Mod[]\n}\n\nexport interface EquipmentAttachement {\n  entity: Entity\n\n  bodyParts: string[]\n}\n\nexport interface EquipedItemsComponent {\n  equipment: EquipmentAttachement[]\n}\n\nexport function createEntityWithItemComponent(world: TlbWorld, base: ItemBaseType, random: Random, region: RegionsType): Entity {\n  const item = createItem(base, random, region)\n  const mods = []\n  const passive = getRandomMod(random, 'passive', item, region)\n  if (passive) {\n    mods.push(passive)\n  }\n  const active = getRandomMod(random, 'active', item, region)\n  if (active) {\n    mods.push(active)\n  }\n  return world\n    .createEntity()\n    .withComponent<ItemComponent>('item', { item, mods })\n    .withComponent<ActiveEffectsComponent>('active-effects', { effects: [] }).entity\n}\n","import { TlbWorld } from '../tlb'\nimport { Vector } from '../spatial'\nimport { WorldMapResource } from '../resources/world-map'\nimport { FeatureComponent, Cover } from '../components/feature'\nimport { directions, Direction } from '../spatial/direction'\n\nexport function coveringDirections(from: Vector, to: Vector): Direction[] {\n  let cover: Direction[] = []\n  let closest: number = Number.MAX_VALUE\n  const fromFloor = new Vector([from.fX, from.fY])\n  const toFloor = new Vector([to.fX, to.fY])\n  directions.forEach(direction => {\n    const current = toFloor.add(Vector.fromDirection(direction))\n    const distance = fromFloor.minus(current).squaredLength()\n    if (closest > distance) {\n      closest = distance\n      cover = [direction]\n    } else if (closest === distance) {\n      cover.push(direction)\n    }\n  })\n  return cover\n}\n\nexport function calculateCover(world: TlbWorld, level: number, from: Vector, to: Vector): Cover {\n  const map = world.getResource<WorldMapResource>('map').levels[level]\n  const covers = coveringDirections(from, to)\n  let bestCover: Cover = 'none'\n  const toFloor = new Vector([to.fX, to.fY])\n  covers.forEach(direction => {\n    const p = toFloor.add(Vector.fromDirection(direction))\n    const tile = map.getTile(p)\n    if (tile !== undefined) {\n      const feature = world.getComponent<FeatureComponent>(tile, 'feature')!\n      const currentCover = feature.feature().cover\n      if (bestCover === 'none' || (bestCover === 'partial' && currentCover === 'full')) {\n        bestCover = currentCover\n      }\n    }\n  })\n  return bestCover\n}\n","export type Direction = 'up' | 'right' | 'down' | 'left'\n\nexport const directions: Direction[] = ['up', 'right', 'down', 'left']\n\nexport function leftOf(direction: Direction): Direction {\n  switch (direction) {\n    case 'up':\n      return 'left'\n    case 'right':\n      return 'up'\n    case 'down':\n      return 'right'\n    case 'left':\n      return 'down'\n  }\n}\n\nexport function rightOf(direction: Direction): Direction {\n  switch (direction) {\n    case 'up':\n      return 'right'\n    case 'right':\n      return 'down'\n    case 'down':\n      return 'left'\n    case 'left':\n      return 'up'\n  }\n}\nexport function oppositeOf(direction: Direction): Direction {\n  switch (direction) {\n    case 'up':\n      return 'down'\n    case 'right':\n      return 'left'\n    case 'down':\n      return 'up'\n    case 'left':\n      return 'right'\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { InventoryComponent } from '../components/items'\n\nexport function consumeItem(world: TlbWorld, consumer: Entity, item: Entity): void {\n  const inventory = world.getComponent<InventoryComponent>(consumer, 'inventory')!\n  inventory.content = inventory.content.filter(i => i !== item)\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { AiComponent } from '../components/ai'\nimport { Fighting } from '../game-states/fighting'\nimport { turnBasedEntities } from './turn-based'\nimport { State } from '../game-states/state'\nimport { PositionComponent } from '../components/position'\nimport { unauthorize } from './region'\n\nexport function engage(world: TlbWorld, ai: AiComponent, entity: Entity, interest: Entity, pushState: (state: State) => void) {\n  const othersAlreadyFighting = turnBasedEntities(world) > 0\n  ai.state = 'engaging'\n  world.editEntity(entity).withComponent('wait-turn', {})\n\n  if (!othersAlreadyFighting) {\n    pushState(new Fighting())\n  }\n\n  const position = world.getComponent<PositionComponent>(entity, 'position')!\n  unauthorize(world, position, interest)\n}\n","import { TlbWorld } from '../tlb'\nimport { StructureComponent, RegionComponent } from '../components/region'\nimport { Entity } from '../ecs/entity'\nimport { PositionComponent } from '../components/position'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\n\nexport function isAuthorized(world: TlbWorld, position: PositionComponent, entity: Entity): boolean {\n  return getRegion(world, position).authorized.has(entity)\n}\n\nexport function authorize(world: TlbWorld, position: PositionComponent, entity: Entity): void {\n  getRegion(world, position).authorized.add(entity)\n}\n\nexport function unauthorize(world: TlbWorld, position: PositionComponent, entity: Entity): void {\n  getRegion(world, position).authorized.delete(entity)\n}\n\nexport function getRegion(world: TlbWorld, position: PositionComponent): RegionComponent {\n  const map: WorldMap = world.getResource<WorldMapResource>('map')\n  const structure = map.levels[position.level].getStructure(position.position)!\n  const room: StructureComponent = world.getComponent<StructureComponent>(structure, 'structure')!\n  return world.getComponent<RegionComponent>(room.region, 'region')!\n}\n","import { WorldMapResource } from '../resources/world-map'\nimport { Vector } from '../spatial'\nimport { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { PositionComponent } from '../components/position'\n\nexport function move(world: TlbWorld, entity: Entity, level: number, position: Vector): void {\n  const l = world.getResource<WorldMapResource>('map').levels[level]\n  if (l !== undefined && !l.isBlocking(world, position, entity)) {\n    const oldPosition = world.getComponent<PositionComponent>(entity, 'position')!\n    l.removeCharacter(oldPosition.position)\n    l.setCharacter(position, entity)\n    world.editEntity(entity).withComponent<PositionComponent>('position', { level, position })\n  }\n}\n","import { StructureType, StructureComponent } from '../components/region'\nimport { TlbWorld } from '../tlb'\nimport { Random } from '../random'\n\nimport { Solver, exactlyOne, atMostOne, or, not } from 'logic-solver'\nimport { indices } from '../array-utils'\nimport { Entity } from '../ecs/entity'\nimport { AssetType } from '../assets/assets'\nimport { ItemBaseType } from '../assets/items'\nimport { retry } from './retry'\nimport { CharacterCreator } from '../assets/characters'\n\nconst splitter = '_'\n\nexport interface ComplexTemplate {\n  structures: {\n    description: StructureDescription\n    restriction: Partial<StructureRestriction>\n  }[]\n}\n\nexport interface ComplexDescription {\n  occurrence: Occurrence\n  template: ComplexTemplate\n}\n\nexport interface Occurrence {\n  minimum: number\n  maximum: number\n}\n\nexport type LayoutKind = 'default' | 'regular'\nexport type Placement = 'wall' | 'center' | 'random'\n\nexport interface Layout<T> {\n  kind: LayoutKind\n  types: T[]\n  occurrence: Occurrence\n  placement: Placement\n}\n\nexport interface StructureRestriction {\n  kind: StructureType\n  connects: number[]\n  exact: boolean\n  blocking: boolean\n}\n\nexport interface StructureDescription {\n  decorations: Layout<AssetType>[]\n  containers: Layout<AssetType>[]\n  loots: Layout<ItemBaseType>[]\n  npcs: Layout<CharacterCreator>[]\n  bosses: Layout<CharacterCreator>[]\n}\n\nexport function occur(min: number = 1, max?: number): Occurrence {\n  const maximum = max === undefined ? min : max\n  return { minimum: min, maximum }\n}\nexport function optional(t: number = 1): Occurrence {\n  return { minimum: 0, maximum: t }\n}\n\nexport function layout<T>(kind: LayoutKind, placement: Placement, occurrence: Occurrence, ...types: T[]): Layout<T> {\n  return { kind, types, occurrence, placement }\n}\n\nexport interface ComplexEmbedding {\n  structure: StructureDescription\n  embedding: Entity\n  blocking: boolean\n}\n\ntype Label = 'blocked' | 'blocking' | 'exact' | 'restricted' | StructureType\ninterface Graph<T> {\n  getData(v: number): T\n\n  labels: Set<Label>[]\n\n  V: number[]\n  E: [number, number][]\n}\n\nexport function embedComplexes(\n  world: TlbWorld,\n  random: Random,\n  region: Entity,\n  complexes: ComplexDescription[]\n): ComplexEmbedding[] | undefined {\n  if (complexes.length === 0) {\n    return []\n  }\n\n  const G = buildG(world, region, [])\n\n  const requiredComplexes = complexes\n    .filter(c => c.occurrence.minimum > 0)\n    .map(c => ({ occurrence: occur(c.occurrence.minimum), template: c.template }))\n  const H = buildH(requiredComplexes)\n  const successfulEmbeddings = calculateEmbedding(G, H)\n  if (successfulEmbeddings.length === 0) {\n    return undefined\n  }\n\n  const optionalComplexes: ComplexDescription[] = []\n  complexes.forEach(c => {\n    for (let i = 0; i < c.occurrence.maximum - c.occurrence.minimum; ++i) {\n      optionalComplexes.push({ occurrence: occur(), template: c.template })\n    }\n  })\n\n  retry(random, optionalComplexes, c => {\n    const newG = buildG(world, region, successfulEmbeddings)\n    const embedding = calculateEmbedding(newG, buildH([c]))\n    if (embedding.length === 1) {\n      successfulEmbeddings.push(embedding[0])\n    }\n    return embedding.length === 1\n  })\n  return successfulEmbeddings\n}\n\nfunction buildG(world: TlbWorld, region: Entity, knownEmbeddings: ComplexEmbedding[]): Graph<Entity> {\n  const blocked = new Set(knownEmbeddings.filter(e => e.blocking).map(e => e.embedding))\n\n  const availableStructures: Entity[] = []\n  const availableStructuresLookup: Map<Entity, number> = new Map()\n  world.getStorage<StructureComponent>('structure').foreach((entity, component) => {\n    if (component.region === region) {\n      availableStructuresLookup.set(entity, availableStructures.length)\n      availableStructures.push(entity)\n    }\n  })\n\n  const V = indices(availableStructures.length)\n  const E: [number, number][] = []\n  const labels: Set<Label>[] = []\n  availableStructures.forEach((s, v) => {\n    const structure = world.getComponent<StructureComponent>(s, 'structure')!\n\n    labels[v] = new Set()\n    labels[v].add(structure.kind)\n    if (blocked.has(s)) {\n      labels[v].add('blocked')\n    }\n    structure.connections.forEach(c => {\n      const w = availableStructuresLookup.get(c)!\n      const e = createEdge(v, w)\n      if (e !== undefined) {\n        E.push(e)\n      }\n    })\n  })\n  return { V, E, labels, getData: v => availableStructures[v] }\n}\n\nfunction buildH(complexes: ComplexDescription[]): Graph<StructureDescription> {\n  const E: [number, number][] = []\n  const requiredFlattenedStructures: StructureDescription[] = []\n  const labels: Set<Label>[] = []\n  complexes.forEach(c => {\n    indices(c.occurrence.minimum).forEach(() => {\n      const offset = requiredFlattenedStructures.length\n      c.template.structures.forEach((s, index) => {\n        const v = offset + index\n        labels[v] = new Set()\n        if (s.restriction.blocking === undefined || s.restriction.blocking) {\n          labels[v].add('blocking')\n        }\n        if (s.restriction.exact) {\n          labels[v].add('exact')\n        }\n        if (s.restriction.kind) {\n          labels[v].add('restricted')\n          labels[v].add(s.restriction.kind)\n        }\n        const restrictions = s.restriction.connects || []\n        restrictions.forEach(i => {\n          const w = offset + i\n          const e = createEdge(v, w)\n          if (e !== undefined) {\n            E.push(e)\n          }\n        })\n        requiredFlattenedStructures.push(s.description)\n      })\n    })\n  })\n  const V = indices(requiredFlattenedStructures.length)\n  return { V, E, labels, getData: v => requiredFlattenedStructures[v] }\n}\n\nfunction createEdge(v: number, w: number): [number, number] | undefined {\n  if (v < w) {\n    return [v, w]\n  }\n  return undefined\n}\n\nfunction calculateEmbedding(G: Graph<Entity>, H: Graph<StructureDescription>) {\n  var solver = new Solver()\n\n  // each w in W on exactly one v in V\n  H.V.forEach(w => {\n    const Cvw = G.V.map(v => createLabel(v, w))\n    solver.require(exactlyOne(...Cvw))\n  })\n\n  // each v in V can map to at most one blocking w in W\n  G.V.forEach(v => {\n    const Cvw = H.V.filter(w => H.labels[w].has('blocking')).map(w => createLabel(v, w))\n    solver.require(atMostOne(...Cvw))\n  })\n\n  // all neighbours in H are mapped to neighbours in G\n  // if Cvw then\n  //   each j reachable through w is mapped to some i reachable through v\n  // => &j -Cvw or |i Cij\n  H.V.forEach(w => {\n    G.V.forEach(v => {\n      const Cvw = createLabel(v, w)\n      H.E.forEach(e => {\n        const j = traverseEdge(e, w)\n        if (j !== undefined) {\n          const Cij: string[] = []\n          G.E.forEach(f => {\n            const i = traverseEdge(f, v)\n            if (i !== undefined) {\n              Cij.push(createLabel(i, j))\n            }\n          })\n          solver.require(or(not(Cvw), ...Cij))\n        }\n      })\n    })\n  })\n\n  H.V.forEach(w => {\n    G.V.forEach(v => {\n      const Cvw = createLabel(v, w)\n\n      let kindsAreDifferent = false\n      G.labels[v].forEach(l => {\n        if (!H.labels[w].has(l)) {\n          kindsAreDifferent = true\n        }\n      })\n      const isRestricted = H.labels[w].has('restricted')\n      const isExact = H.labels[w].has('exact')\n      const isBlocked = G.labels[v].has('blocked')\n\n      if (kindsAreDifferent && isRestricted) {\n        // forbid all non matching node pairs\n        solver.require(not(Cvw))\n      } else if (isBlocked) {\n        solver.require(not(Cvw))\n      } else if (isExact) {\n        // for exact nodes\n        // all neighbours in G are mapped to neighbours in H\n        G.E.forEach(f => {\n          const i = traverseEdge(f, v)\n          if (i !== undefined) {\n            const Cij: string[] = []\n            H.E.forEach(e => {\n              const j = traverseEdge(e, w)\n              if (j !== undefined) {\n                Cij.push(createLabel(i, j))\n              }\n            })\n            solver.require(or(not(Cvw), ...Cij))\n          }\n        })\n      }\n    })\n  })\n\n  const solution = solver.solve()\n  const result: ComplexEmbedding[] = []\n  if (solution !== null) {\n    solution.getTrueVars().forEach(label => {\n      const [v, w] = parseLabel(label)\n      result.push({\n        structure: H.getData(w),\n        embedding: G.getData(v),\n        blocking: H.labels[w].has('blocking'),\n      })\n    })\n  }\n  return result\n}\n\nfunction parseLabel(label: string): [number, number] {\n  const splits = label.split(splitter)\n  return [Number.parseInt(splits[0]), Number.parseInt(splits[1])]\n}\n\nfunction createLabel(v: number, w: number): string {\n  return `${v}${splitter}${w}`\n}\n\nexport function traverseEdge(e: [number, number], from: number): number | undefined {\n  if (e[0] === from) {\n    return e[1]\n  } else if (e[1] === from) {\n    return e[0]\n  }\n  return undefined\n}\n","//     Underscore.js 1.9.1\n//     http://underscorejs.org\n//     (c) 2009-2018 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` (`self`) in the browser, `global`\n  // on the server, or `this` in some virtual machines. We use `self`\n  // instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global ||\n            this ||\n            {};\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype;\n  var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push = ArrayProto.push,\n      slice = ArrayProto.slice,\n      toString = ObjProto.toString,\n      hasOwnProperty = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var nativeIsArray = Array.isArray,\n      nativeKeys = Object.keys,\n      nativeCreate = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for their old module API. If we're in\n  // the browser, add `_` as a global object.\n  // (`nodeType` is checked to ensure that `module`\n  // and `exports` are not HTML elements.)\n  if (typeof exports != 'undefined' && !exports.nodeType) {\n    if (typeof module != 'undefined' && !module.nodeType && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.9.1';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      // The 2-argument case is omitted because we’re not using it.\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  var builtinIteratee;\n\n  // An internal function to generate callbacks that can be applied to each\n  // element in a collection, returning the desired result — either `identity`,\n  // an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value) && !_.isArray(value)) return _.matcher(value);\n    return _.property(value);\n  };\n\n  // External wrapper for our callback generator. Users may customize\n  // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n  // This abstraction hides the internal-only argCount argument.\n  _.iteratee = builtinIteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // Some functions take a variable number of arguments, or a few expected\n  // arguments at the beginning and then a variable number of values to operate\n  // on. This helper accumulates all remaining arguments past the function’s\n  // argument length (or an explicit `startIndex`), into an array that becomes\n  // the last argument. Similar to ES6’s \"rest parameter\".\n  var restArguments = function(func, startIndex) {\n    startIndex = startIndex == null ? func.length - 1 : +startIndex;\n    return function() {\n      var length = Math.max(arguments.length - startIndex, 0),\n          rest = Array(length),\n          index = 0;\n      for (; index < length; index++) {\n        rest[index] = arguments[index + startIndex];\n      }\n      switch (startIndex) {\n        case 0: return func.call(this, rest);\n        case 1: return func.call(this, arguments[0], rest);\n        case 2: return func.call(this, arguments[0], arguments[1], rest);\n      }\n      var args = Array(startIndex + 1);\n      for (index = 0; index < startIndex; index++) {\n        args[index] = arguments[index];\n      }\n      args[startIndex] = rest;\n      return func.apply(this, args);\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var shallowProperty = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  var has = function(obj, path) {\n    return obj != null && hasOwnProperty.call(obj, path);\n  }\n\n  var deepGet = function(obj, path) {\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      if (obj == null) return void 0;\n      obj = obj[path[i]];\n    }\n    return length ? obj : void 0;\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object.\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = shallowProperty('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  var createReduce = function(dir) {\n    // Wrap code that reassigns argument variables in a separate function than\n    // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n    var reducer = function(obj, iteratee, memo, initial) {\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      if (!initial) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    };\n\n    return function(obj, iteratee, memo, context) {\n      var initial = arguments.length >= 3;\n      return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n    };\n  };\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;\n    var key = keyFinder(obj, predicate, context);\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = restArguments(function(obj, path, args) {\n    var contextPath, func;\n    if (_.isFunction(path)) {\n      func = path;\n    } else if (_.isArray(path)) {\n      contextPath = path.slice(0, -1);\n      path = path[path.length - 1];\n    }\n    return _.map(obj, function(context) {\n      var method = func;\n      if (!method) {\n        if (contextPath && contextPath.length) {\n          context = deepGet(context, contextPath);\n        }\n        if (context == null) return void 0;\n        method = context[path];\n      }\n      return method == null ? method : method.apply(context, args);\n    });\n  });\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value != null && value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(v, index, list) {\n        computed = iteratee(v, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = v;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection.\n  _.shuffle = function(obj) {\n    return _.sample(obj, Infinity);\n  };\n\n  // Sample **n** random values from a collection using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);\n    var length = getLength(sample);\n    n = Math.max(Math.min(n, length), 0);\n    var last = length - 1;\n    for (var index = 0; index < n; index++) {\n      var rand = _.random(index, last);\n      var temp = sample[index];\n      sample[index] = sample[rand];\n      sample[rand] = temp;\n    }\n    return sample.slice(0, n);\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    var index = 0;\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, key, list) {\n      return {\n        value: value,\n        index: index++,\n        criteria: iteratee(value, key, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior, partition) {\n    return function(obj, iteratee, context) {\n      var result = partition ? [[], []] : {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (_.isString(obj)) {\n      // Keep surrogate pair characters together\n      return obj.match(reStrSymbol);\n    }\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = group(function(result, value, pass) {\n    result[pass ? 0 : 1].push(value);\n  }, true);\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null || array.length < 1) return n == null ? void 0 : [];\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, Boolean);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, output) {\n    output = output || [];\n    var idx = output.length;\n    for (var i = 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        // Flatten current level of array or arguments object.\n        if (shallow) {\n          var j = 0, len = value.length;\n          while (j < len) output[idx++] = value[j++];\n        } else {\n          flatten(value, shallow, strict, output);\n          idx = output.length;\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = restArguments(function(array, otherArrays) {\n    return _.difference(array, otherArrays);\n  });\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // The faster algorithm will not work with an iteratee if the iteratee\n  // is not a one-to-one function, so providing an iteratee will disable\n  // the faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted && !iteratee) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = restArguments(function(arrays) {\n    return _.uniq(flatten(arrays, true, true));\n  });\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      var j;\n      for (j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = restArguments(function(array, rest) {\n    rest = flatten(rest, true, true);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  });\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices.\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = restArguments(_.unzip);\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values. Passing by pairs is the reverse of _.pairs.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions.\n  var createPredicateIndexFinder = function(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  };\n\n  // Returns the first index on an array-like that passes a predicate test.\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions.\n  var createIndexFinder = function(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n          i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n          length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  };\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    if (!step) {\n      step = stop < start ? -1 : 1;\n    }\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Chunk a single array into multiple arrays, each containing `count` or fewer\n  // items.\n  _.chunk = function(array, count) {\n    if (count == null || count < 1) return [];\n    var result = [];\n    var i = 0, length = array.length;\n    while (i < length) {\n      result.push(slice.call(array, i, i += count));\n    }\n    return result;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments.\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = restArguments(function(func, context, args) {\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var bound = restArguments(function(callArgs) {\n      return executeBound(func, bound, context, this, args.concat(callArgs));\n    });\n    return bound;\n  });\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder by default, allowing any combination of arguments to be\n  // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\n  _.partial = restArguments(function(func, boundArgs) {\n    var placeholder = _.partial.placeholder;\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  });\n\n  _.partial.placeholder = _;\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = restArguments(function(obj, keys) {\n    keys = flatten(keys, false, false);\n    var index = keys.length;\n    if (index < 1) throw new Error('bindAll must be passed function names');\n    while (index--) {\n      var key = keys[index];\n      obj[key] = _.bind(obj[key], obj);\n    }\n  });\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = restArguments(function(func, wait, args) {\n    return setTimeout(function() {\n      return func.apply(null, args);\n    }, wait);\n  });\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, result;\n\n    var later = function(context, args) {\n      timeout = null;\n      if (args) result = func.apply(context, args);\n    };\n\n    var debounced = restArguments(function(args) {\n      if (timeout) clearTimeout(timeout);\n      if (immediate) {\n        var callNow = !timeout;\n        timeout = setTimeout(later, wait);\n        if (callNow) result = func.apply(this, args);\n      } else {\n        timeout = _.delay(later, wait, this, args);\n      }\n\n      return result;\n    });\n\n    debounced.cancel = function() {\n      clearTimeout(timeout);\n      timeout = null;\n    };\n\n    return debounced;\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  _.restArguments = restArguments;\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n    'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  var collectNonEnumProps = function(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  };\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`.\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object.\n  // In contrast to _.map it returns an object.\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = _.keys(obj),\n        length = keys.length,\n        results = {};\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys[index];\n      results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  // The opposite of _.object.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`.\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, defaults) {\n    return function(obj) {\n      var length = arguments.length;\n      if (defaults) obj = Object(obj);\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!defaults || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s).\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test.\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Internal pick helper function to determine if `obj` has key `key`.\n  var keyInObj = function(value, key, obj) {\n    return key in obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = restArguments(function(obj, keys) {\n    var result = {}, iteratee = keys[0];\n    if (obj == null) return result;\n    if (_.isFunction(iteratee)) {\n      if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n      keys = _.allKeys(obj);\n    } else {\n      iteratee = keyInObj;\n      keys = flatten(keys, false, false);\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  });\n\n  // Return a copy of the object without the blacklisted properties.\n  _.omit = restArguments(function(obj, keys) {\n    var iteratee = keys[0], context;\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n      if (keys.length > 1) context = keys[1];\n    } else {\n      keys = _.map(flatten(keys, false, false), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  });\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq, deepEq;\n  eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // `null` or `undefined` only equal to itself (strict comparison).\n    if (a == null || b == null) return false;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a) return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n    return deepEq(a, b, aStack, bStack);\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  deepEq = function(a, b, aStack, bStack) {\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN.\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n      case '[object Symbol]':\n        return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\n  var nodelist = root.document && root.document.childNodes;\n  if (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`?\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && isNaN(obj);\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, path) {\n    if (!_.isArray(path)) {\n      return has(obj, path);\n    }\n    var length = path.length;\n    for (var i = 0; i < length; i++) {\n      var key = path[i];\n      if (obj == null || !hasOwnProperty.call(obj, key)) {\n        return false;\n      }\n      obj = obj[key];\n    }\n    return !!length;\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  // Creates a function that, when passed an object, will traverse that object’s\n  // properties down the given `path`, specified as an array of keys or indexes.\n  _.property = function(path) {\n    if (!_.isArray(path)) {\n      return shallowProperty(path);\n    }\n    return function(obj) {\n      return deepGet(obj, path);\n    };\n  };\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    if (obj == null) {\n      return function(){};\n    }\n    return function(path) {\n      return !_.isArray(path) ? obj[path] : deepGet(obj, path);\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n  // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped.\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // Traverses the children of `obj` along `path`. If a child is a function, it\n  // is invoked with its parent as context. Returns the value of the final\n  // child, or `fallback` if any child is undefined.\n  _.result = function(obj, path, fallback) {\n    if (!_.isArray(path)) path = [path];\n    var length = path.length;\n    if (!length) {\n      return _.isFunction(fallback) ? fallback.call(obj) : fallback;\n    }\n    for (var i = 0; i < length; i++) {\n      var prop = obj == null ? void 0 : obj[path[i]];\n      if (prop === void 0) {\n        prop = fallback;\n        i = length; // Ensure we don't continue iterating.\n      }\n      obj = _.isFunction(prop) ? prop.call(obj) : prop;\n    }\n    return obj;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\": \"'\",\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offset.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    var render;\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var chainResult = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return chainResult(this, func.apply(_, args));\n      };\n    });\n    return _;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return chainResult(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return chainResult(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return String(this._wrapped);\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define == 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}());\n","import { dropAt } from '../array-utils'\nimport { Random } from '../random'\n\nexport function retry<T>(random: Random, arr: T[], f: (v: T) => boolean) {\n  let tries = 5\n  while (arr.length > 0 && tries > 0) {\n    const index = random.pickIndex(arr)\n    if (f(arr[index])) {\n      dropAt(arr, index)\n      tries = 5\n    } else {\n      tries--\n    }\n  }\n}\n","export * from './CorridorSplit'\nexport * from './NoSplit'\nexport * from './OutsetCorridorSplit'\nexport * from './RoomSplit'\nexport * from './Knossos'\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { Action } from '../components/action'\nimport { EquipedItemsComponent, InventoryComponent } from '../components/items'\nimport { SelectableAction } from '../ui/tabs/action-selector'\nimport { instantiateItem } from './instantiate-item'\nimport { getCanAct, getCanMove, getCooldownBuff } from './stats'\nimport { ActionType, createAction } from '../assets/actions'\nimport { PositionComponent } from '../components/position'\nimport { FunctionalShape } from '../geometry/functional-shape'\nimport { findTriggers } from './trigger'\n\nexport function calculateAvailableActions(world: TlbWorld, entity: Entity, withConsumables: boolean): SelectableAction[] {\n  const canAct = getCanAct(world, entity)\n  const canMove = getCanMove(world, entity)\n  const cooldownBuff = getCooldownBuff(world, entity)\n  const playerActions = buildPlayerSelectableActions(entity, canMove, canAct)\n  const triggerActions = buildTriggerActions(world, entity)\n  const equipmentSelectableActions = buildEquipmentSelectableActions(world, entity, canMove, canAct, cooldownBuff)\n  let consumableActions: SelectableAction[] = []\n  if (withConsumables) {\n    consumableActions = buildConsumableSelectableActions(world, entity, canMove, canAct)\n  }\n  return playerActions\n    .concat(equipmentSelectableActions)\n    .concat(consumableActions)\n    .concat(triggerActions)\n}\n\nfunction buildTriggerActions(world: TlbWorld, entity: Entity): SelectableAction[] {\n  const position = world.getComponent<PositionComponent>(entity, 'position')!\n  const neighbourhood = FunctionalShape.lN(position.position, 1, true)\n  const triggers = findTriggers(world, position.level, neighbourhood)\n  return triggers\n    .filter(t => t.component.inTurnBased)\n    .map(t => ({\n      owner: t.component.name,\n      action: createAction('trigger'),\n      entity: t.entity,\n    }))\n}\n\nfunction buildPlayerSelectableActions(entity: Entity, canMove: boolean, canAct: boolean): SelectableAction[] {\n  const defaultActions: ActionType[] = ['move', 'hit', 'rush', 'noMove', 'endTurn', 'changeEquipment']\n  return defaultActions\n    .map(a => createAction(a))\n    .filter(action => actionAvailable(action, canMove, canAct))\n    .map(action => ({\n      action,\n      entity,\n    }))\n}\n\nfunction buildEquipmentSelectableActions(\n  world: TlbWorld,\n  entity: Entity,\n  canMove: boolean,\n  canAct: boolean,\n  cooldownBuff: number\n): SelectableAction[] {\n  const equipment = world.getComponent<EquipedItemsComponent>(entity, 'equiped-items')!\n  const actions: SelectableAction[] = []\n  equipment.equipment.forEach(equiped => {\n    const { item } = instantiateItem(world, equiped.entity)\n    item.actions.forEach(action => {\n      if (actionAvailable(action, canMove, canAct)) {\n        if (action.cooldown !== undefined) {\n          action.cooldown -= cooldownBuff\n        }\n        actions.push({ action, owner: item.shortName, entity: equiped.entity })\n      }\n    })\n  })\n  return actions\n}\n\nfunction buildConsumableSelectableActions(world: TlbWorld, entity: Entity, canMove: boolean, canAct: boolean): SelectableAction[] {\n  const inventory = world.getComponent<InventoryComponent>(entity, 'inventory')!\n  return inventory.content\n    .map(inventoryContent => {\n      const { item } = instantiateItem(world, inventoryContent)\n      if (item.kind === 'consumable' && item.actions.length > 0 && actionAvailable(item.actions[0], canMove, canAct)) {\n        return { action: item.actions[0], owner: item.shortName, entity: inventoryContent }\n      }\n      return undefined\n    })\n    .filter(a => a !== undefined) as SelectableAction[]\n}\n\nfunction actionAvailable(action: Action, canMove: boolean, canAct: boolean): boolean {\n  switch (action.cost) {\n    case 'all':\n      return canAct && canMove\n    case 'action':\n      return canAct && !canMove\n    case 'movement':\n      return canMove\n    default:\n      return true\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { Attack } from '../components/action'\nimport { Entity } from '../ecs/entity'\nimport { Random } from '../random'\nimport { Log, LogResource } from '../resources/log'\nimport { calculateHitChance, HitChanceCalculation } from './calculate-hit-chance'\nimport { applyEffect, EffectResult, clearExpiredEffects } from './apply-effect'\n\nexport interface AttackResult {\n  isHit: boolean\n  isCritical: boolean\n  chance: HitChanceCalculation\n  effects: Partial<EffectResult>[]\n}\n\nexport function attackTarget(world: TlbWorld, random: Random, entity: Entity, target: Entity, attack: Attack): AttackResult {\n  const chance = calculateHitChance(world, entity, target, attack)\n\n  const isHit = random.decision(chance.final)\n  const isCritical = isHit && random.decision(chance.criticalHit)\n  let effects: Partial<EffectResult>[] = []\n  if (isHit) {\n    effects = attack.effects.map(effect => applyEffect(world, random, target, { source: entity, effect, isCritical, isPiercing: false }))\n    clearExpiredEffects(world, target)\n  }\n  const result: AttackResult = { isHit, isCritical, chance, effects }\n  const log: Log = world.getResource<LogResource>('log')\n  log.attack(world, entity, target, result)\n  return result\n}\n","import Backend from \"./backend.js\";\nexport default class Canvas extends Backend {\n    constructor() {\n        super();\n        this._ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    }\n    schedule(cb) { requestAnimationFrame(cb); }\n    getContainer() { return this._ctx.canvas; }\n    setOptions(opts) {\n        super.setOptions(opts);\n        const style = (opts.fontStyle ? `${opts.fontStyle} ` : ``);\n        const font = `${style} ${opts.fontSize}px ${opts.fontFamily}`;\n        this._ctx.font = font;\n        this._updateSize();\n        this._ctx.font = font;\n        this._ctx.textAlign = \"center\";\n        this._ctx.textBaseline = \"middle\";\n    }\n    clear() {\n        this._ctx.fillStyle = this._options.bg;\n        this._ctx.fillRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\n    }\n    eventToPosition(x, y) {\n        let canvas = this._ctx.canvas;\n        let rect = canvas.getBoundingClientRect();\n        x -= rect.left;\n        y -= rect.top;\n        x *= canvas.width / rect.width;\n        y *= canvas.height / rect.height;\n        if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {\n            return [-1, -1];\n        }\n        return this._normalizedEventToPosition(x, y);\n    }\n}\n","import Canvas from \"./canvas.js\";\nimport { mod } from \"../util.js\";\n/**\n * @class Hexagonal backend\n * @private\n */\nexport default class Hex extends Canvas {\n    constructor() {\n        super();\n        this._spacingX = 0;\n        this._spacingY = 0;\n        this._hexSize = 0;\n    }\n    draw(data, clearBefore) {\n        let [x, y, ch, fg, bg] = data;\n        let px = [\n            (x + 1) * this._spacingX,\n            y * this._spacingY + this._hexSize\n        ];\n        if (this._options.transpose) {\n            px.reverse();\n        }\n        if (clearBefore) {\n            this._ctx.fillStyle = bg;\n            this._fill(px[0], px[1]);\n        }\n        if (!ch) {\n            return;\n        }\n        this._ctx.fillStyle = fg;\n        let chars = [].concat(ch);\n        for (let i = 0; i < chars.length; i++) {\n            this._ctx.fillText(chars[i], px[0], Math.ceil(px[1]));\n        }\n    }\n    computeSize(availWidth, availHeight) {\n        if (this._options.transpose) {\n            availWidth += availHeight;\n            availHeight = availWidth - availHeight;\n            availWidth -= availHeight;\n        }\n        let width = Math.floor(availWidth / this._spacingX) - 1;\n        let height = Math.floor((availHeight - 2 * this._hexSize) / this._spacingY + 1);\n        return [width, height];\n    }\n    computeFontSize(availWidth, availHeight) {\n        if (this._options.transpose) {\n            availWidth += availHeight;\n            availHeight = availWidth - availHeight;\n            availWidth -= availHeight;\n        }\n        let hexSizeWidth = 2 * availWidth / ((this._options.width + 1) * Math.sqrt(3)) - 1;\n        let hexSizeHeight = availHeight / (2 + 1.5 * (this._options.height - 1));\n        let hexSize = Math.min(hexSizeWidth, hexSizeHeight);\n        // compute char ratio\n        let oldFont = this._ctx.font;\n        this._ctx.font = \"100px \" + this._options.fontFamily;\n        let width = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._ctx.font = oldFont;\n        let ratio = width / 100;\n        hexSize = Math.floor(hexSize) + 1; // closest larger hexSize\n        // FIXME char size computation does not respect transposed hexes\n        let fontSize = 2 * hexSize / (this._options.spacing * (1 + ratio / Math.sqrt(3)));\n        // closest smaller fontSize\n        return Math.ceil(fontSize) - 1;\n    }\n    _normalizedEventToPosition(x, y) {\n        let nodeSize;\n        if (this._options.transpose) {\n            x += y;\n            y = x - y;\n            x -= y;\n            nodeSize = this._ctx.canvas.width;\n        }\n        else {\n            nodeSize = this._ctx.canvas.height;\n        }\n        let size = nodeSize / this._options.height;\n        y = Math.floor(y / size);\n        if (mod(y, 2)) { /* odd row */\n            x -= this._spacingX;\n            x = 1 + 2 * Math.floor(x / (2 * this._spacingX));\n        }\n        else {\n            x = 2 * Math.floor(x / (2 * this._spacingX));\n        }\n        return [x, y];\n    }\n    /**\n     * Arguments are pixel values. If \"transposed\" mode is enabled, then these two are already swapped.\n     */\n    _fill(cx, cy) {\n        let a = this._hexSize;\n        let b = this._options.border;\n        const ctx = this._ctx;\n        ctx.beginPath();\n        if (this._options.transpose) {\n            ctx.moveTo(cx - a + b, cy);\n            ctx.lineTo(cx - a / 2 + b, cy + this._spacingX - b);\n            ctx.lineTo(cx + a / 2 - b, cy + this._spacingX - b);\n            ctx.lineTo(cx + a - b, cy);\n            ctx.lineTo(cx + a / 2 - b, cy - this._spacingX + b);\n            ctx.lineTo(cx - a / 2 + b, cy - this._spacingX + b);\n            ctx.lineTo(cx - a + b, cy);\n        }\n        else {\n            ctx.moveTo(cx, cy - a + b);\n            ctx.lineTo(cx + this._spacingX - b, cy - a / 2 + b);\n            ctx.lineTo(cx + this._spacingX - b, cy + a / 2 - b);\n            ctx.lineTo(cx, cy + a - b);\n            ctx.lineTo(cx - this._spacingX + b, cy + a / 2 - b);\n            ctx.lineTo(cx - this._spacingX + b, cy - a / 2 + b);\n            ctx.lineTo(cx, cy - a + b);\n        }\n        ctx.fill();\n    }\n    _updateSize() {\n        const opts = this._options;\n        const charWidth = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._hexSize = Math.floor(opts.spacing * (opts.fontSize + charWidth / Math.sqrt(3)) / 2);\n        this._spacingX = this._hexSize * Math.sqrt(3) / 2;\n        this._spacingY = this._hexSize * 1.5;\n        let xprop;\n        let yprop;\n        if (opts.transpose) {\n            xprop = \"height\";\n            yprop = \"width\";\n        }\n        else {\n            xprop = \"width\";\n            yprop = \"height\";\n        }\n        this._ctx.canvas[xprop] = Math.ceil((opts.width + 1) * this._spacingX);\n        this._ctx.canvas[yprop] = Math.ceil((opts.height - 1) * this._spacingY + 2 * this._hexSize);\n    }\n}\n","import Canvas from \"./canvas.js\";\n/**\n * @class Rectangular backend\n * @private\n */\nexport default class Rect extends Canvas {\n    constructor() {\n        super();\n        this._spacingX = 0;\n        this._spacingY = 0;\n        this._canvasCache = {};\n    }\n    setOptions(options) {\n        super.setOptions(options);\n        this._canvasCache = {};\n    }\n    draw(data, clearBefore) {\n        if (Rect.cache) {\n            this._drawWithCache(data);\n        }\n        else {\n            this._drawNoCache(data, clearBefore);\n        }\n    }\n    _drawWithCache(data) {\n        let [x, y, ch, fg, bg] = data;\n        let hash = \"\" + ch + fg + bg;\n        let canvas;\n        if (hash in this._canvasCache) {\n            canvas = this._canvasCache[hash];\n        }\n        else {\n            let b = this._options.border;\n            canvas = document.createElement(\"canvas\");\n            let ctx = canvas.getContext(\"2d\");\n            canvas.width = this._spacingX;\n            canvas.height = this._spacingY;\n            ctx.fillStyle = bg;\n            ctx.fillRect(b, b, canvas.width - b, canvas.height - b);\n            if (ch) {\n                ctx.fillStyle = fg;\n                ctx.font = this._ctx.font;\n                ctx.textAlign = \"center\";\n                ctx.textBaseline = \"middle\";\n                let chars = [].concat(ch);\n                for (let i = 0; i < chars.length; i++) {\n                    ctx.fillText(chars[i], this._spacingX / 2, Math.ceil(this._spacingY / 2));\n                }\n            }\n            this._canvasCache[hash] = canvas;\n        }\n        this._ctx.drawImage(canvas, x * this._spacingX, y * this._spacingY);\n    }\n    _drawNoCache(data, clearBefore) {\n        let [x, y, ch, fg, bg] = data;\n        if (clearBefore) {\n            let b = this._options.border;\n            this._ctx.fillStyle = bg;\n            this._ctx.fillRect(x * this._spacingX + b, y * this._spacingY + b, this._spacingX - b, this._spacingY - b);\n        }\n        if (!ch) {\n            return;\n        }\n        this._ctx.fillStyle = fg;\n        let chars = [].concat(ch);\n        for (let i = 0; i < chars.length; i++) {\n            this._ctx.fillText(chars[i], (x + 0.5) * this._spacingX, Math.ceil((y + 0.5) * this._spacingY));\n        }\n    }\n    computeSize(availWidth, availHeight) {\n        let width = Math.floor(availWidth / this._spacingX);\n        let height = Math.floor(availHeight / this._spacingY);\n        return [width, height];\n    }\n    computeFontSize(availWidth, availHeight) {\n        let boxWidth = Math.floor(availWidth / this._options.width);\n        let boxHeight = Math.floor(availHeight / this._options.height);\n        /* compute char ratio */\n        let oldFont = this._ctx.font;\n        this._ctx.font = \"100px \" + this._options.fontFamily;\n        let width = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._ctx.font = oldFont;\n        let ratio = width / 100;\n        let widthFraction = ratio * boxHeight / boxWidth;\n        if (widthFraction > 1) { /* too wide with current aspect ratio */\n            boxHeight = Math.floor(boxHeight / widthFraction);\n        }\n        return Math.floor(boxHeight / this._options.spacing);\n    }\n    _normalizedEventToPosition(x, y) {\n        return [Math.floor(x / this._spacingX), Math.floor(y / this._spacingY)];\n    }\n    _updateSize() {\n        const opts = this._options;\n        const charWidth = Math.ceil(this._ctx.measureText(\"W\").width);\n        this._spacingX = Math.ceil(opts.spacing * charWidth);\n        this._spacingY = Math.ceil(opts.spacing * opts.fontSize);\n        if (opts.forceSquareRatio) {\n            this._spacingX = this._spacingY = Math.max(this._spacingX, this._spacingY);\n        }\n        this._ctx.canvas.width = opts.width * this._spacingX;\n        this._ctx.canvas.height = opts.height * this._spacingY;\n    }\n}\nRect.cache = false;\n","import Canvas from \"./canvas.js\";\n/**\n * @class Tile backend\n * @private\n */\nexport default class Tile extends Canvas {\n    constructor() {\n        super();\n        this._colorCanvas = document.createElement(\"canvas\");\n    }\n    draw(data, clearBefore) {\n        let [x, y, ch, fg, bg] = data;\n        let tileWidth = this._options.tileWidth;\n        let tileHeight = this._options.tileHeight;\n        if (clearBefore) {\n            if (this._options.tileColorize) {\n                this._ctx.clearRect(x * tileWidth, y * tileHeight, tileWidth, tileHeight);\n            }\n            else {\n                this._ctx.fillStyle = bg;\n                this._ctx.fillRect(x * tileWidth, y * tileHeight, tileWidth, tileHeight);\n            }\n        }\n        if (!ch) {\n            return;\n        }\n        let chars = [].concat(ch);\n        let fgs = [].concat(fg);\n        let bgs = [].concat(bg);\n        for (let i = 0; i < chars.length; i++) {\n            let tile = this._options.tileMap[chars[i]];\n            if (!tile) {\n                throw new Error(`Char \"${chars[i]}\" not found in tileMap`);\n            }\n            if (this._options.tileColorize) { // apply colorization\n                let canvas = this._colorCanvas;\n                let context = canvas.getContext(\"2d\");\n                context.globalCompositeOperation = \"source-over\";\n                context.clearRect(0, 0, tileWidth, tileHeight);\n                let fg = fgs[i];\n                let bg = bgs[i];\n                context.drawImage(this._options.tileSet, tile[0], tile[1], tileWidth, tileHeight, 0, 0, tileWidth, tileHeight);\n                if (fg != \"transparent\") {\n                    context.fillStyle = fg;\n                    context.globalCompositeOperation = \"source-atop\";\n                    context.fillRect(0, 0, tileWidth, tileHeight);\n                }\n                if (bg != \"transparent\") {\n                    context.fillStyle = bg;\n                    context.globalCompositeOperation = \"destination-over\";\n                    context.fillRect(0, 0, tileWidth, tileHeight);\n                }\n                this._ctx.drawImage(canvas, x * tileWidth, y * tileHeight, tileWidth, tileHeight);\n            }\n            else { // no colorizing, easy\n                this._ctx.drawImage(this._options.tileSet, tile[0], tile[1], tileWidth, tileHeight, x * tileWidth, y * tileHeight, tileWidth, tileHeight);\n            }\n        }\n    }\n    computeSize(availWidth, availHeight) {\n        let width = Math.floor(availWidth / this._options.tileWidth);\n        let height = Math.floor(availHeight / this._options.tileHeight);\n        return [width, height];\n    }\n    computeFontSize() {\n        throw new Error(\"Tile backend does not understand font size\");\n    }\n    _normalizedEventToPosition(x, y) {\n        return [Math.floor(x / this._options.tileWidth), Math.floor(y / this._options.tileHeight)];\n    }\n    _updateSize() {\n        const opts = this._options;\n        this._ctx.canvas.width = opts.width * opts.tileWidth;\n        this._ctx.canvas.height = opts.height * opts.tileHeight;\n        this._colorCanvas.width = opts.tileWidth;\n        this._colorCanvas.height = opts.tileHeight;\n    }\n}\n","import Backend from \"./backend.js\";\nimport * as Color from \"../color.js\";\n/**\n * @class Tile backend\n * @private\n */\nexport default class TileGL extends Backend {\n    static isSupported() {\n        return !!document.createElement(\"canvas\").getContext(\"webgl2\", { preserveDrawingBuffer: true });\n    }\n    constructor() {\n        super();\n        this._uniforms = {};\n        try {\n            this._gl = this._initWebGL();\n        }\n        catch (e) {\n            alert(e.message);\n        }\n    }\n    schedule(cb) { requestAnimationFrame(cb); }\n    getContainer() { return this._gl.canvas; }\n    setOptions(opts) {\n        super.setOptions(opts);\n        this._updateSize();\n        let tileSet = this._options.tileSet;\n        if (tileSet && \"complete\" in tileSet && !tileSet.complete) {\n            tileSet.addEventListener(\"load\", () => this._updateTexture(tileSet));\n        }\n        else {\n            this._updateTexture(tileSet);\n        }\n    }\n    draw(data, clearBefore) {\n        const gl = this._gl;\n        const opts = this._options;\n        let [x, y, ch, fg, bg] = data;\n        let scissorY = gl.canvas.height - (y + 1) * opts.tileHeight;\n        gl.scissor(x * opts.tileWidth, scissorY, opts.tileWidth, opts.tileHeight);\n        if (clearBefore) {\n            if (opts.tileColorize) {\n                gl.clearColor(0, 0, 0, 0);\n            }\n            else {\n                gl.clearColor(...parseColor(bg));\n            }\n            gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n        if (!ch) {\n            return;\n        }\n        let chars = [].concat(ch);\n        let bgs = [].concat(bg);\n        let fgs = [].concat(fg);\n        gl.uniform2fv(this._uniforms[\"targetPosRel\"], [x, y]);\n        for (let i = 0; i < chars.length; i++) {\n            let tile = this._options.tileMap[chars[i]];\n            if (!tile) {\n                throw new Error(`Char \"${chars[i]}\" not found in tileMap`);\n            }\n            gl.uniform1f(this._uniforms[\"colorize\"], opts.tileColorize ? 1 : 0);\n            gl.uniform2fv(this._uniforms[\"tilesetPosAbs\"], tile);\n            if (opts.tileColorize) {\n                gl.uniform4fv(this._uniforms[\"tint\"], parseColor(fgs[i]));\n                gl.uniform4fv(this._uniforms[\"bg\"], parseColor(bgs[i]));\n            }\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        }\n        /*\n        \n        \n                for (let i=0;i<chars.length;i++) {\n                    \n                    if (this._options.tileColorize) { // apply colorization\n                        let canvas = this._colorCanvas;\n                        let context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n                        context.globalCompositeOperation = \"source-over\";\n                        context.clearRect(0, 0, tileWidth, tileHeight);\n        \n                        let fg = fgs[i];\n                        let bg = bgs[i];\n        \n                        context.drawImage(\n                            this._options.tileSet!,\n                            tile[0], tile[1], tileWidth, tileHeight,\n                            0, 0, tileWidth, tileHeight\n                        );\n        \n                        if (fg != \"transparent\") {\n                            context.fillStyle = fg;\n                            context.globalCompositeOperation = \"source-atop\";\n                            context.fillRect(0, 0, tileWidth, tileHeight);\n                        }\n        \n                        if (bg != \"transparent\") {\n                            context.fillStyle = bg;\n                            context.globalCompositeOperation = \"destination-over\";\n                            context.fillRect(0, 0, tileWidth, tileHeight);\n                        }\n        \n                        this._ctx.drawImage(canvas, x*tileWidth, y*tileHeight, tileWidth, tileHeight);\n                    } else { // no colorizing, easy\n                        this._ctx.drawImage(\n                            this._options.tileSet!,\n                            tile[0], tile[1], tileWidth, tileHeight,\n                            x*tileWidth, y*tileHeight, tileWidth, tileHeight\n                        );\n                    }\n                }\n        \n        */\n    }\n    clear() {\n        const gl = this._gl;\n        gl.clearColor(...parseColor(this._options.bg));\n        gl.scissor(0, 0, gl.canvas.width, gl.canvas.height);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    computeSize(availWidth, availHeight) {\n        let width = Math.floor(availWidth / this._options.tileWidth);\n        let height = Math.floor(availHeight / this._options.tileHeight);\n        return [width, height];\n    }\n    computeFontSize() {\n        throw new Error(\"Tile backend does not understand font size\");\n    }\n    eventToPosition(x, y) {\n        let canvas = this._gl.canvas;\n        let rect = canvas.getBoundingClientRect();\n        x -= rect.left;\n        y -= rect.top;\n        x *= canvas.width / rect.width;\n        y *= canvas.height / rect.height;\n        if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {\n            return [-1, -1];\n        }\n        return this._normalizedEventToPosition(x, y);\n    }\n    _initWebGL() {\n        let gl = document.createElement(\"canvas\").getContext(\"webgl2\", { preserveDrawingBuffer: true });\n        window.gl = gl;\n        let program = createProgram(gl, VS, FS);\n        gl.useProgram(program);\n        createQuad(gl);\n        UNIFORMS.forEach(name => this._uniforms[name] = gl.getUniformLocation(program, name));\n        this._program = program;\n        gl.enable(gl.BLEND);\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.SCISSOR_TEST);\n        return gl;\n    }\n    _normalizedEventToPosition(x, y) {\n        return [Math.floor(x / this._options.tileWidth), Math.floor(y / this._options.tileHeight)];\n    }\n    _updateSize() {\n        const gl = this._gl;\n        const opts = this._options;\n        const canvasSize = [opts.width * opts.tileWidth, opts.height * opts.tileHeight];\n        gl.canvas.width = canvasSize[0];\n        gl.canvas.height = canvasSize[1];\n        gl.viewport(0, 0, canvasSize[0], canvasSize[1]);\n        gl.uniform2fv(this._uniforms[\"tileSize\"], [opts.tileWidth, opts.tileHeight]);\n        gl.uniform2fv(this._uniforms[\"targetSize\"], canvasSize);\n    }\n    _updateTexture(tileSet) {\n        createTexture(this._gl, tileSet);\n    }\n}\nconst UNIFORMS = [\"targetPosRel\", \"tilesetPosAbs\", \"tileSize\", \"targetSize\", \"colorize\", \"bg\", \"tint\"];\nconst VS = `\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}`.trim();\nconst FS = `\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}`.trim();\nfunction createProgram(gl, vss, fss) {\n    const vs = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vs, vss);\n    gl.compileShader(vs);\n    if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)) {\n        throw new Error(gl.getShaderInfoLog(vs) || \"\");\n    }\n    const fs = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fs, fss);\n    gl.compileShader(fs);\n    if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)) {\n        throw new Error(gl.getShaderInfoLog(fs) || \"\");\n    }\n    const p = gl.createProgram();\n    gl.attachShader(p, vs);\n    gl.attachShader(p, fs);\n    gl.linkProgram(p);\n    if (!gl.getProgramParameter(p, gl.LINK_STATUS)) {\n        throw new Error(gl.getProgramInfoLog(p) || \"\");\n    }\n    return p;\n}\nfunction createQuad(gl) {\n    const pos = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n    const buf = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buf);\n    gl.bufferData(gl.ARRAY_BUFFER, pos, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n}\nfunction createTexture(gl, data) {\n    let t = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, t);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return t;\n}\nlet colorCache = {};\nfunction parseColor(color) {\n    if (!(color in colorCache)) {\n        let parsed;\n        if (color == \"transparent\") {\n            parsed = [0, 0, 0, 0];\n        }\n        else if (color.indexOf(\"rgba\") > -1) {\n            parsed = (color.match(/[\\d.]+/g) || []).map(Number);\n            for (let i = 0; i < 3; i++) {\n                parsed[i] = parsed[i] / 255;\n            }\n        }\n        else {\n            parsed = Color.fromString(color).map($ => $ / 255);\n            parsed.push(1);\n        }\n        colorCache[color] = parsed;\n    }\n    return colorCache[color];\n}\n","/**\n * @namespace\n * Contains text tokenization and breaking routines\n */\nconst RE_COLORS = /%([bc]){([^}]*)}/g;\n// token types\nexport const TYPE_TEXT = 0;\nexport const TYPE_NEWLINE = 1;\nexport const TYPE_FG = 2;\nexport const TYPE_BG = 3;\n/**\n * Measure size of a resulting text block\n */\nexport function measure(str, maxWidth) {\n    let result = { width: 0, height: 1 };\n    let tokens = tokenize(str, maxWidth);\n    let lineWidth = 0;\n    for (let i = 0; i < tokens.length; i++) {\n        let token = tokens[i];\n        switch (token.type) {\n            case TYPE_TEXT:\n                lineWidth += token.value.length;\n                break;\n            case TYPE_NEWLINE:\n                result.height++;\n                result.width = Math.max(result.width, lineWidth);\n                lineWidth = 0;\n                break;\n        }\n    }\n    result.width = Math.max(result.width, lineWidth);\n    return result;\n}\n/**\n * Convert string to a series of a formatting commands\n */\nexport function tokenize(str, maxWidth) {\n    let result = [];\n    /* first tokenization pass - split texts and color formatting commands */\n    let offset = 0;\n    str.replace(RE_COLORS, function (match, type, name, index) {\n        /* string before */\n        let part = str.substring(offset, index);\n        if (part.length) {\n            result.push({\n                type: TYPE_TEXT,\n                value: part\n            });\n        }\n        /* color command */\n        result.push({\n            type: (type == \"c\" ? TYPE_FG : TYPE_BG),\n            value: name.trim()\n        });\n        offset = index + match.length;\n        return \"\";\n    });\n    /* last remaining part */\n    let part = str.substring(offset);\n    if (part.length) {\n        result.push({\n            type: TYPE_TEXT,\n            value: part\n        });\n    }\n    return breakLines(result, maxWidth);\n}\n/* insert line breaks into first-pass tokenized data */\nfunction breakLines(tokens, maxWidth) {\n    if (!maxWidth) {\n        maxWidth = Infinity;\n    }\n    let i = 0;\n    let lineLength = 0;\n    let lastTokenWithSpace = -1;\n    while (i < tokens.length) { /* take all text tokens, remove space, apply linebreaks */\n        let token = tokens[i];\n        if (token.type == TYPE_NEWLINE) { /* reset */\n            lineLength = 0;\n            lastTokenWithSpace = -1;\n        }\n        if (token.type != TYPE_TEXT) { /* skip non-text tokens */\n            i++;\n            continue;\n        }\n        /* remove spaces at the beginning of line */\n        while (lineLength == 0 && token.value.charAt(0) == \" \") {\n            token.value = token.value.substring(1);\n        }\n        /* forced newline? insert two new tokens after this one */\n        let index = token.value.indexOf(\"\\n\");\n        if (index != -1) {\n            token.value = breakInsideToken(tokens, i, index, true);\n            /* if there are spaces at the end, we must remove them (we do not want the line too long) */\n            let arr = token.value.split(\"\");\n            while (arr.length && arr[arr.length - 1] == \" \") {\n                arr.pop();\n            }\n            token.value = arr.join(\"\");\n        }\n        /* token degenerated? */\n        if (!token.value.length) {\n            tokens.splice(i, 1);\n            continue;\n        }\n        if (lineLength + token.value.length > maxWidth) { /* line too long, find a suitable breaking spot */\n            /* is it possible to break within this token? */\n            let index = -1;\n            while (1) {\n                let nextIndex = token.value.indexOf(\" \", index + 1);\n                if (nextIndex == -1) {\n                    break;\n                }\n                if (lineLength + nextIndex > maxWidth) {\n                    break;\n                }\n                index = nextIndex;\n            }\n            if (index != -1) { /* break at space within this one */\n                token.value = breakInsideToken(tokens, i, index, true);\n            }\n            else if (lastTokenWithSpace != -1) { /* is there a previous token where a break can occur? */\n                let token = tokens[lastTokenWithSpace];\n                let breakIndex = token.value.lastIndexOf(\" \");\n                token.value = breakInsideToken(tokens, lastTokenWithSpace, breakIndex, true);\n                i = lastTokenWithSpace;\n            }\n            else { /* force break in this token */\n                token.value = breakInsideToken(tokens, i, maxWidth - lineLength, false);\n            }\n        }\n        else { /* line not long, continue */\n            lineLength += token.value.length;\n            if (token.value.indexOf(\" \") != -1) {\n                lastTokenWithSpace = i;\n            }\n        }\n        i++; /* advance to next token */\n    }\n    tokens.push({ type: TYPE_NEWLINE }); /* insert fake newline to fix the last text line */\n    /* remove trailing space from text tokens before newlines */\n    let lastTextToken = null;\n    for (let i = 0; i < tokens.length; i++) {\n        let token = tokens[i];\n        switch (token.type) {\n            case TYPE_TEXT:\n                lastTextToken = token;\n                break;\n            case TYPE_NEWLINE:\n                if (lastTextToken) { /* remove trailing space */\n                    let arr = lastTextToken.value.split(\"\");\n                    while (arr.length && arr[arr.length - 1] == \" \") {\n                        arr.pop();\n                    }\n                    lastTextToken.value = arr.join(\"\");\n                }\n                lastTextToken = null;\n                break;\n        }\n    }\n    tokens.pop(); /* remove fake token */\n    return tokens;\n}\n/**\n * Create new tokens and insert them into the stream\n * @param {object[]} tokens\n * @param {int} tokenIndex Token being processed\n * @param {int} breakIndex Index within current token's value\n * @param {bool} removeBreakChar Do we want to remove the breaking character?\n * @returns {string} remaining unbroken token value\n */\nfunction breakInsideToken(tokens, tokenIndex, breakIndex, removeBreakChar) {\n    let newBreakToken = {\n        type: TYPE_NEWLINE\n    };\n    let newTextToken = {\n        type: TYPE_TEXT,\n        value: tokens[tokenIndex].value.substring(breakIndex + (removeBreakChar ? 1 : 0))\n    };\n    tokens.splice(tokenIndex + 1, 0, newBreakToken, newTextToken);\n    return tokens[tokenIndex].value.substring(0, breakIndex);\n}\n","/** Default with for display and map generators */\nexport let DEFAULT_WIDTH = 80;\n/** Default height for display and map generators */\nexport let DEFAULT_HEIGHT = 25;\nexport const DIRS = {\n    4: [[0, -1], [1, 0], [0, 1], [-1, 0]],\n    8: [[0, -1], [1, -1], [1, 0], [1, 1], [0, 1], [-1, 1], [-1, 0], [-1, -1]],\n    6: [[-1, -1], [1, -1], [2, 0], [1, 1], [-1, 1], [-2, 0]]\n};\nexport const KEYS = {\n    /** Cancel key. */\n    VK_CANCEL: 3,\n    /** Help key. */\n    VK_HELP: 6,\n    /** Backspace key. */\n    VK_BACK_SPACE: 8,\n    /** Tab key. */\n    VK_TAB: 9,\n    /** 5 key on Numpad when NumLock is unlocked. Or on Mac, clear key which is positioned at NumLock key. */\n    VK_CLEAR: 12,\n    /** Return/enter key on the main keyboard. */\n    VK_RETURN: 13,\n    /** Reserved, but not used. */\n    VK_ENTER: 14,\n    /** Shift key. */\n    VK_SHIFT: 16,\n    /** Control key. */\n    VK_CONTROL: 17,\n    /** Alt (Option on Mac) key. */\n    VK_ALT: 18,\n    /** Pause key. */\n    VK_PAUSE: 19,\n    /** Caps lock. */\n    VK_CAPS_LOCK: 20,\n    /** Escape key. */\n    VK_ESCAPE: 27,\n    /** Space bar. */\n    VK_SPACE: 32,\n    /** Page Up key. */\n    VK_PAGE_UP: 33,\n    /** Page Down key. */\n    VK_PAGE_DOWN: 34,\n    /** End key. */\n    VK_END: 35,\n    /** Home key. */\n    VK_HOME: 36,\n    /** Left arrow. */\n    VK_LEFT: 37,\n    /** Up arrow. */\n    VK_UP: 38,\n    /** Right arrow. */\n    VK_RIGHT: 39,\n    /** Down arrow. */\n    VK_DOWN: 40,\n    /** Print Screen key. */\n    VK_PRINTSCREEN: 44,\n    /** Ins(ert) key. */\n    VK_INSERT: 45,\n    /** Del(ete) key. */\n    VK_DELETE: 46,\n    /***/\n    VK_0: 48,\n    /***/\n    VK_1: 49,\n    /***/\n    VK_2: 50,\n    /***/\n    VK_3: 51,\n    /***/\n    VK_4: 52,\n    /***/\n    VK_5: 53,\n    /***/\n    VK_6: 54,\n    /***/\n    VK_7: 55,\n    /***/\n    VK_8: 56,\n    /***/\n    VK_9: 57,\n    /** Colon (:) key. Requires Gecko 15.0 */\n    VK_COLON: 58,\n    /** Semicolon (;) key. */\n    VK_SEMICOLON: 59,\n    /** Less-than (<) key. Requires Gecko 15.0 */\n    VK_LESS_THAN: 60,\n    /** Equals (=) key. */\n    VK_EQUALS: 61,\n    /** Greater-than (>) key. Requires Gecko 15.0 */\n    VK_GREATER_THAN: 62,\n    /** Question mark (?) key. Requires Gecko 15.0 */\n    VK_QUESTION_MARK: 63,\n    /** Atmark (@) key. Requires Gecko 15.0 */\n    VK_AT: 64,\n    /***/\n    VK_A: 65,\n    /***/\n    VK_B: 66,\n    /***/\n    VK_C: 67,\n    /***/\n    VK_D: 68,\n    /***/\n    VK_E: 69,\n    /***/\n    VK_F: 70,\n    /***/\n    VK_G: 71,\n    /***/\n    VK_H: 72,\n    /***/\n    VK_I: 73,\n    /***/\n    VK_J: 74,\n    /***/\n    VK_K: 75,\n    /***/\n    VK_L: 76,\n    /***/\n    VK_M: 77,\n    /***/\n    VK_N: 78,\n    /***/\n    VK_O: 79,\n    /***/\n    VK_P: 80,\n    /***/\n    VK_Q: 81,\n    /***/\n    VK_R: 82,\n    /***/\n    VK_S: 83,\n    /***/\n    VK_T: 84,\n    /***/\n    VK_U: 85,\n    /***/\n    VK_V: 86,\n    /***/\n    VK_W: 87,\n    /***/\n    VK_X: 88,\n    /***/\n    VK_Y: 89,\n    /***/\n    VK_Z: 90,\n    /***/\n    VK_CONTEXT_MENU: 93,\n    /** 0 on the numeric keypad. */\n    VK_NUMPAD0: 96,\n    /** 1 on the numeric keypad. */\n    VK_NUMPAD1: 97,\n    /** 2 on the numeric keypad. */\n    VK_NUMPAD2: 98,\n    /** 3 on the numeric keypad. */\n    VK_NUMPAD3: 99,\n    /** 4 on the numeric keypad. */\n    VK_NUMPAD4: 100,\n    /** 5 on the numeric keypad. */\n    VK_NUMPAD5: 101,\n    /** 6 on the numeric keypad. */\n    VK_NUMPAD6: 102,\n    /** 7 on the numeric keypad. */\n    VK_NUMPAD7: 103,\n    /** 8 on the numeric keypad. */\n    VK_NUMPAD8: 104,\n    /** 9 on the numeric keypad. */\n    VK_NUMPAD9: 105,\n    /** * on the numeric keypad. */\n    VK_MULTIPLY: 106,\n    /** + on the numeric keypad. */\n    VK_ADD: 107,\n    /***/\n    VK_SEPARATOR: 108,\n    /** - on the numeric keypad. */\n    VK_SUBTRACT: 109,\n    /** Decimal point on the numeric keypad. */\n    VK_DECIMAL: 110,\n    /** / on the numeric keypad. */\n    VK_DIVIDE: 111,\n    /** F1 key. */\n    VK_F1: 112,\n    /** F2 key. */\n    VK_F2: 113,\n    /** F3 key. */\n    VK_F3: 114,\n    /** F4 key. */\n    VK_F4: 115,\n    /** F5 key. */\n    VK_F5: 116,\n    /** F6 key. */\n    VK_F6: 117,\n    /** F7 key. */\n    VK_F7: 118,\n    /** F8 key. */\n    VK_F8: 119,\n    /** F9 key. */\n    VK_F9: 120,\n    /** F10 key. */\n    VK_F10: 121,\n    /** F11 key. */\n    VK_F11: 122,\n    /** F12 key. */\n    VK_F12: 123,\n    /** F13 key. */\n    VK_F13: 124,\n    /** F14 key. */\n    VK_F14: 125,\n    /** F15 key. */\n    VK_F15: 126,\n    /** F16 key. */\n    VK_F16: 127,\n    /** F17 key. */\n    VK_F17: 128,\n    /** F18 key. */\n    VK_F18: 129,\n    /** F19 key. */\n    VK_F19: 130,\n    /** F20 key. */\n    VK_F20: 131,\n    /** F21 key. */\n    VK_F21: 132,\n    /** F22 key. */\n    VK_F22: 133,\n    /** F23 key. */\n    VK_F23: 134,\n    /** F24 key. */\n    VK_F24: 135,\n    /** Num Lock key. */\n    VK_NUM_LOCK: 144,\n    /** Scroll Lock key. */\n    VK_SCROLL_LOCK: 145,\n    /** Circumflex (^) key. Requires Gecko 15.0 */\n    VK_CIRCUMFLEX: 160,\n    /** Exclamation (!) key. Requires Gecko 15.0 */\n    VK_EXCLAMATION: 161,\n    /** Double quote () key. Requires Gecko 15.0 */\n    VK_DOUBLE_QUOTE: 162,\n    /** Hash (#) key. Requires Gecko 15.0 */\n    VK_HASH: 163,\n    /** Dollar sign ($) key. Requires Gecko 15.0 */\n    VK_DOLLAR: 164,\n    /** Percent (%) key. Requires Gecko 15.0 */\n    VK_PERCENT: 165,\n    /** Ampersand (&) key. Requires Gecko 15.0 */\n    VK_AMPERSAND: 166,\n    /** Underscore (_) key. Requires Gecko 15.0 */\n    VK_UNDERSCORE: 167,\n    /** Open parenthesis (() key. Requires Gecko 15.0 */\n    VK_OPEN_PAREN: 168,\n    /** Close parenthesis ()) key. Requires Gecko 15.0 */\n    VK_CLOSE_PAREN: 169,\n    /* Asterisk (*) key. Requires Gecko 15.0 */\n    VK_ASTERISK: 170,\n    /** Plus (+) key. Requires Gecko 15.0 */\n    VK_PLUS: 171,\n    /** Pipe (|) key. Requires Gecko 15.0 */\n    VK_PIPE: 172,\n    /** Hyphen-US/docs/Minus (-) key. Requires Gecko 15.0 */\n    VK_HYPHEN_MINUS: 173,\n    /** Open curly bracket ({) key. Requires Gecko 15.0 */\n    VK_OPEN_CURLY_BRACKET: 174,\n    /** Close curly bracket (}) key. Requires Gecko 15.0 */\n    VK_CLOSE_CURLY_BRACKET: 175,\n    /** Tilde (~) key. Requires Gecko 15.0 */\n    VK_TILDE: 176,\n    /** Comma (,) key. */\n    VK_COMMA: 188,\n    /** Period (.) key. */\n    VK_PERIOD: 190,\n    /** Slash (/) key. */\n    VK_SLASH: 191,\n    /** Back tick (`) key. */\n    VK_BACK_QUOTE: 192,\n    /** Open square bracket ([) key. */\n    VK_OPEN_BRACKET: 219,\n    /** Back slash (\\) key. */\n    VK_BACK_SLASH: 220,\n    /** Close square bracket (]) key. */\n    VK_CLOSE_BRACKET: 221,\n    /** Quote (''') key. */\n    VK_QUOTE: 222,\n    /** Meta key on Linux, Command key on Mac. */\n    VK_META: 224,\n    /** AltGr key on Linux. Requires Gecko 15.0 */\n    VK_ALTGR: 225,\n    /** Windows logo key on Windows. Or Super or Hyper key on Linux. Requires Gecko 15.0 */\n    VK_WIN: 91,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_KANA: 21,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_HANGUL: 21,\n    /** 英数 key on Japanese Mac keyboard. Requires Gecko 15.0 */\n    VK_EISU: 22,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_JUNJA: 23,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_FINAL: 24,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_HANJA: 25,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_KANJI: 25,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_CONVERT: 28,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_NONCONVERT: 29,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_ACCEPT: 30,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_MODECHANGE: 31,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_SELECT: 41,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_PRINT: 42,\n    /** Linux support for this keycode was added in Gecko 4.0. */\n    VK_EXECUTE: 43,\n    /** Linux support for this keycode was added in Gecko 4.0.\t */\n    VK_SLEEP: 95\n};\n","import Hex from \"./hex.js\";\nimport Rect from \"./rect.js\";\nimport Tile from \"./tile.js\";\nimport TileGL from \"./tile-gl.js\";\nimport Term from \"./term.js\";\nimport * as Text from \"../text.js\";\nimport { DEFAULT_WIDTH, DEFAULT_HEIGHT } from \"../constants.js\";\nconst BACKENDS = {\n    \"hex\": Hex,\n    \"rect\": Rect,\n    \"tile\": Tile,\n    \"tile-gl\": TileGL,\n    \"term\": Term\n};\nconst DEFAULT_OPTIONS = {\n    width: DEFAULT_WIDTH,\n    height: DEFAULT_HEIGHT,\n    transpose: false,\n    layout: \"rect\",\n    fontSize: 15,\n    spacing: 1,\n    border: 0,\n    forceSquareRatio: false,\n    fontFamily: \"monospace\",\n    fontStyle: \"\",\n    fg: \"#ccc\",\n    bg: \"#000\",\n    tileWidth: 32,\n    tileHeight: 32,\n    tileMap: {},\n    tileSet: null,\n    tileColorize: false\n};\n/**\n * @class Visual map display\n */\nexport default class Display {\n    constructor(options = {}) {\n        this._data = {};\n        this._dirty = false; // false = nothing, true = all, object = dirty cells\n        this._options = {};\n        options = Object.assign({}, DEFAULT_OPTIONS, options);\n        this.setOptions(options);\n        this.DEBUG = this.DEBUG.bind(this);\n        this._tick = this._tick.bind(this);\n        this._backend.schedule(this._tick);\n    }\n    /**\n     * Debug helper, ideal as a map generator callback. Always bound to this.\n     * @param {int} x\n     * @param {int} y\n     * @param {int} what\n     */\n    DEBUG(x, y, what) {\n        let colors = [this._options.bg, this._options.fg];\n        this.draw(x, y, null, null, colors[what % colors.length]);\n    }\n    /**\n     * Clear the whole display (cover it with background color)\n     */\n    clear() {\n        this._data = {};\n        this._dirty = true;\n    }\n    /**\n     * @see ROT.Display\n     */\n    setOptions(options) {\n        Object.assign(this._options, options);\n        if (options.width || options.height || options.fontSize || options.fontFamily || options.spacing || options.layout) {\n            if (options.layout) {\n                let ctor = BACKENDS[options.layout];\n                this._backend = new ctor();\n            }\n            this._backend.setOptions(this._options);\n            this._dirty = true;\n        }\n        return this;\n    }\n    /**\n     * Returns currently set options\n     */\n    getOptions() { return this._options; }\n    /**\n     * Returns the DOM node of this display\n     */\n    getContainer() { return this._backend.getContainer(); }\n    /**\n     * Compute the maximum width/height to fit into a set of given constraints\n     * @param {int} availWidth Maximum allowed pixel width\n     * @param {int} availHeight Maximum allowed pixel height\n     * @returns {int[2]} cellWidth,cellHeight\n     */\n    computeSize(availWidth, availHeight) {\n        return this._backend.computeSize(availWidth, availHeight);\n    }\n    /**\n     * Compute the maximum font size to fit into a set of given constraints\n     * @param {int} availWidth Maximum allowed pixel width\n     * @param {int} availHeight Maximum allowed pixel height\n     * @returns {int} fontSize\n     */\n    computeFontSize(availWidth, availHeight) {\n        return this._backend.computeFontSize(availWidth, availHeight);\n    }\n    computeTileSize(availWidth, availHeight) {\n        let width = Math.floor(availWidth / this._options.width);\n        let height = Math.floor(availHeight / this._options.height);\n        return [width, height];\n    }\n    /**\n     * Convert a DOM event (mouse or touch) to map coordinates. Uses first touch for multi-touch.\n     * @param {Event} e event\n     * @returns {int[2]} -1 for values outside of the canvas\n     */\n    eventToPosition(e) {\n        let x, y;\n        if (\"touches\" in e) {\n            x = e.touches[0].clientX;\n            y = e.touches[0].clientY;\n        }\n        else {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        return this._backend.eventToPosition(x, y);\n    }\n    /**\n     * @param {int} x\n     * @param {int} y\n     * @param {string || string[]} ch One or more chars (will be overlapping themselves)\n     * @param {string} [fg] foreground color\n     * @param {string} [bg] background color\n     */\n    draw(x, y, ch, fg, bg) {\n        if (!fg) {\n            fg = this._options.fg;\n        }\n        if (!bg) {\n            bg = this._options.bg;\n        }\n        let key = `${x},${y}`;\n        this._data[key] = [x, y, ch, fg, bg];\n        if (this._dirty === true) {\n            return;\n        } // will already redraw everything \n        if (!this._dirty) {\n            this._dirty = {};\n        } // first!\n        this._dirty[key] = true;\n    }\n    /**\n     * Draws a text at given position. Optionally wraps at a maximum length. Currently does not work with hex layout.\n     * @param {int} x\n     * @param {int} y\n     * @param {string} text May contain color/background format specifiers, %c{name}/%b{name}, both optional. %c{}/%b{} resets to default.\n     * @param {int} [maxWidth] wrap at what width?\n     * @returns {int} lines drawn\n     */\n    drawText(x, y, text, maxWidth) {\n        let fg = null;\n        let bg = null;\n        let cx = x;\n        let cy = y;\n        let lines = 1;\n        if (!maxWidth) {\n            maxWidth = this._options.width - x;\n        }\n        let tokens = Text.tokenize(text, maxWidth);\n        while (tokens.length) { // interpret tokenized opcode stream\n            let token = tokens.shift();\n            switch (token.type) {\n                case Text.TYPE_TEXT:\n                    let isSpace = false, isPrevSpace = false, isFullWidth = false, isPrevFullWidth = false;\n                    for (let i = 0; i < token.value.length; i++) {\n                        let cc = token.value.charCodeAt(i);\n                        let c = token.value.charAt(i);\n                        // Assign to `true` when the current char is full-width.\n                        isFullWidth = (cc > 0xff00 && cc < 0xff61) || (cc > 0xffdc && cc < 0xffe8) || cc > 0xffee;\n                        // Current char is space, whatever full-width or half-width both are OK.\n                        isSpace = (c.charCodeAt(0) == 0x20 || c.charCodeAt(0) == 0x3000);\n                        // The previous char is full-width and\n                        // current char is nether half-width nor a space.\n                        if (isPrevFullWidth && !isFullWidth && !isSpace) {\n                            cx++;\n                        } // add an extra position\n                        // The current char is full-width and\n                        // the previous char is not a space.\n                        if (isFullWidth && !isPrevSpace) {\n                            cx++;\n                        } // add an extra position\n                        this.draw(cx++, cy, c, fg, bg);\n                        isPrevSpace = isSpace;\n                        isPrevFullWidth = isFullWidth;\n                    }\n                    break;\n                case Text.TYPE_FG:\n                    fg = token.value || null;\n                    break;\n                case Text.TYPE_BG:\n                    bg = token.value || null;\n                    break;\n                case Text.TYPE_NEWLINE:\n                    cx = x;\n                    cy++;\n                    lines++;\n                    break;\n            }\n        }\n        return lines;\n    }\n    /**\n     * Timer tick: update dirty parts\n     */\n    _tick() {\n        this._backend.schedule(this._tick);\n        if (!this._dirty) {\n            return;\n        }\n        if (this._dirty === true) { // draw all\n            this._backend.clear();\n            for (let id in this._data) {\n                this._draw(id, false);\n            } // redraw cached data \n        }\n        else { // draw only dirty \n            for (let key in this._dirty) {\n                this._draw(key, true);\n            }\n        }\n        this._dirty = false;\n    }\n    /**\n     * @param {string} key What to draw\n     * @param {bool} clearBefore Is it necessary to clean before?\n     */\n    _draw(key, clearBefore) {\n        let data = this._data[key];\n        if (data[4] != this._options.bg) {\n            clearBefore = true;\n        }\n        this._backend.draw(data, clearBefore);\n    }\n}\nDisplay.Rect = Rect;\nDisplay.Hex = Hex;\nDisplay.Tile = Tile;\nDisplay.TileGL = TileGL;\nDisplay.Term = Term;\n","import RNG from \"./rng.js\";\n/**\n * @class (Markov process)-based string generator.\n * Copied from a <a href=\"http://www.roguebasin.roguelikedevelopment.org/index.php?title=Names_from_a_high_order_Markov_Process_and_a_simplified_Katz_back-off_scheme\">RogueBasin article</a>.\n * Offers configurable order and prior.\n */\nexport default class StringGenerator {\n    constructor(options) {\n        this._options = {\n            words: false,\n            order: 3,\n            prior: 0.001\n        };\n        Object.assign(this._options, options);\n        this._boundary = String.fromCharCode(0);\n        this._suffix = this._boundary;\n        this._prefix = [];\n        for (let i = 0; i < this._options.order; i++) {\n            this._prefix.push(this._boundary);\n        }\n        this._priorValues = {};\n        this._priorValues[this._boundary] = this._options.prior;\n        this._data = {};\n    }\n    /**\n     * Remove all learning data\n     */\n    clear() {\n        this._data = {};\n        this._priorValues = {};\n    }\n    /**\n     * @returns {string} Generated string\n     */\n    generate() {\n        let result = [this._sample(this._prefix)];\n        while (result[result.length - 1] != this._boundary) {\n            result.push(this._sample(result));\n        }\n        return this._join(result.slice(0, -1));\n    }\n    /**\n     * Observe (learn) a string from a training set\n     */\n    observe(string) {\n        let tokens = this._split(string);\n        for (let i = 0; i < tokens.length; i++) {\n            this._priorValues[tokens[i]] = this._options.prior;\n        }\n        tokens = this._prefix.concat(tokens).concat(this._suffix); /* add boundary symbols */\n        for (let i = this._options.order; i < tokens.length; i++) {\n            let context = tokens.slice(i - this._options.order, i);\n            let event = tokens[i];\n            for (let j = 0; j < context.length; j++) {\n                let subcontext = context.slice(j);\n                this._observeEvent(subcontext, event);\n            }\n        }\n    }\n    getStats() {\n        let parts = [];\n        let priorCount = Object.keys(this._priorValues).length;\n        priorCount--; // boundary\n        parts.push(\"distinct samples: \" + priorCount);\n        let dataCount = Object.keys(this._data).length;\n        let eventCount = 0;\n        for (let p in this._data) {\n            eventCount += Object.keys(this._data[p]).length;\n        }\n        parts.push(\"dictionary size (contexts): \" + dataCount);\n        parts.push(\"dictionary size (events): \" + eventCount);\n        return parts.join(\", \");\n    }\n    /**\n     * @param {string}\n     * @returns {string[]}\n     */\n    _split(str) {\n        return str.split(this._options.words ? /\\s+/ : \"\");\n    }\n    /**\n     * @param {string[]}\n     * @returns {string}\n     */\n    _join(arr) {\n        return arr.join(this._options.words ? \" \" : \"\");\n    }\n    /**\n     * @param {string[]} context\n     * @param {string} event\n     */\n    _observeEvent(context, event) {\n        let key = this._join(context);\n        if (!(key in this._data)) {\n            this._data[key] = {};\n        }\n        let data = this._data[key];\n        if (!(event in data)) {\n            data[event] = 0;\n        }\n        data[event]++;\n    }\n    /**\n     * @param {string[]}\n     * @returns {string}\n     */\n    _sample(context) {\n        context = this._backoff(context);\n        let key = this._join(context);\n        let data = this._data[key];\n        let available = {};\n        if (this._options.prior) {\n            for (let event in this._priorValues) {\n                available[event] = this._priorValues[event];\n            }\n            for (let event in data) {\n                available[event] += data[event];\n            }\n        }\n        else {\n            available = data;\n        }\n        return RNG.getWeightedValue(available);\n    }\n    /**\n     * @param {string[]}\n     * @returns {string[]}\n     */\n    _backoff(context) {\n        if (context.length > this._options.order) {\n            context = context.slice(-this._options.order);\n        }\n        else if (context.length < this._options.order) {\n            context = this._prefix.slice(0, this._options.order - context.length).concat(context);\n        }\n        while (!(this._join(context) in this._data) && context.length > 0) {\n            context = context.slice(1);\n        }\n        return context;\n    }\n}\n","export default class EventQueue {\n    /**\n     * @class Generic event queue: stores events and retrieves them based on their time\n     */\n    constructor() {\n        this._time = 0;\n        this._events = [];\n        this._eventTimes = [];\n    }\n    /**\n     * @returns {number} Elapsed time\n     */\n    getTime() { return this._time; }\n    /**\n     * Clear all scheduled events\n     */\n    clear() {\n        this._events = [];\n        this._eventTimes = [];\n        return this;\n    }\n    /**\n     * @param {?} event\n     * @param {number} time\n     */\n    add(event, time) {\n        let index = this._events.length;\n        for (let i = 0; i < this._eventTimes.length; i++) {\n            if (this._eventTimes[i] > time) {\n                index = i;\n                break;\n            }\n        }\n        this._events.splice(index, 0, event);\n        this._eventTimes.splice(index, 0, time);\n    }\n    /**\n     * Locates the nearest event, advances time if necessary. Returns that event and removes it from the queue.\n     * @returns {? || null} The event previously added by addEvent, null if no event available\n     */\n    get() {\n        if (!this._events.length) {\n            return null;\n        }\n        let time = this._eventTimes.splice(0, 1)[0];\n        if (time > 0) { /* advance */\n            this._time += time;\n            for (let i = 0; i < this._eventTimes.length; i++) {\n                this._eventTimes[i] -= time;\n            }\n        }\n        return this._events.splice(0, 1)[0];\n    }\n    /**\n     * Get the time associated with the given event\n     * @param {?} event\n     * @returns {number} time\n     */\n    getEventTime(event) {\n        let index = this._events.indexOf(event);\n        if (index == -1) {\n            return undefined;\n        }\n        return this._eventTimes[index];\n    }\n    /**\n     * Remove an event from the queue\n     * @param {?} event\n     * @returns {bool} success?\n     */\n    remove(event) {\n        let index = this._events.indexOf(event);\n        if (index == -1) {\n            return false;\n        }\n        this._remove(index);\n        return true;\n    }\n    ;\n    /**\n     * Remove an event from the queue\n     * @param {int} index\n     */\n    _remove(index) {\n        this._events.splice(index, 1);\n        this._eventTimes.splice(index, 1);\n    }\n    ;\n}\n","import EventQueue from \"../eventqueue.js\";\nexport default class Scheduler {\n    /**\n     * @class Abstract scheduler\n     */\n    constructor() {\n        this._queue = new EventQueue();\n        this._repeat = [];\n        this._current = null;\n    }\n    /**\n     * @see ROT.EventQueue#getTime\n     */\n    getTime() { return this._queue.getTime(); }\n    /**\n     * @param {?} item\n     * @param {bool} repeat\n     */\n    add(item, repeat) {\n        if (repeat) {\n            this._repeat.push(item);\n        }\n        return this;\n    }\n    /**\n     * Get the time the given item is scheduled for\n     * @param {?} item\n     * @returns {number} time\n     */\n    getTimeOf(item) {\n        return this._queue.getEventTime(item);\n    }\n    /**\n     * Clear all items\n     */\n    clear() {\n        this._queue.clear();\n        this._repeat = [];\n        this._current = null;\n        return this;\n    }\n    /**\n     * Remove a previously added item\n     * @param {?} item\n     * @returns {bool} successful?\n     */\n    remove(item) {\n        let result = this._queue.remove(item);\n        let index = this._repeat.indexOf(item);\n        if (index != -1) {\n            this._repeat.splice(index, 1);\n        }\n        if (this._current == item) {\n            this._current = null;\n        }\n        return result;\n    }\n    /**\n     * Schedule next item\n     * @returns {?}\n     */\n    next() {\n        this._current = this._queue.get();\n        return this._current;\n    }\n}\n","import Scheduler from \"./scheduler.js\";\n/**\n * @class Simple fair scheduler (round-robin style)\n */\nexport default class Simple extends Scheduler {\n    add(item, repeat) {\n        this._queue.add(item, 0);\n        return super.add(item, repeat);\n    }\n    next() {\n        if (this._current !== null && this._repeat.indexOf(this._current) != -1) {\n            this._queue.add(this._current, 0);\n        }\n        return super.next();\n    }\n}\n","import Scheduler from \"./scheduler.js\";\n/**\n * @class Speed-based scheduler\n */\nexport default class Speed extends Scheduler {\n    /**\n     * @param {object} item anything with \"getSpeed\" method\n     * @param {bool} repeat\n     * @param {number} [time=1/item.getSpeed()]\n     * @see ROT.Scheduler#add\n     */\n    add(item, repeat, time) {\n        this._queue.add(item, time !== undefined ? time : 1 / item.getSpeed());\n        return super.add(item, repeat);\n    }\n    /**\n     * @see ROT.Scheduler#next\n     */\n    next() {\n        if (this._current && this._repeat.indexOf(this._current) != -1) {\n            this._queue.add(this._current, 1 / this._current.getSpeed());\n        }\n        return super.next();\n    }\n}\n","import Scheduler from \"./scheduler.js\";\n/**\n * @class Action-based scheduler\n * @augments ROT.Scheduler\n */\nexport default class Action extends Scheduler {\n    constructor() {\n        super();\n        this._defaultDuration = 1; /* for newly added */\n        this._duration = this._defaultDuration; /* for this._current */\n    }\n    /**\n     * @param {object} item\n     * @param {bool} repeat\n     * @param {number} [time=1]\n     * @see ROT.Scheduler#add\n     */\n    add(item, repeat, time) {\n        this._queue.add(item, time || this._defaultDuration);\n        return super.add(item, repeat);\n    }\n    clear() {\n        this._duration = this._defaultDuration;\n        return super.clear();\n    }\n    remove(item) {\n        if (item == this._current) {\n            this._duration = this._defaultDuration;\n        }\n        return super.remove(item);\n    }\n    /**\n     * @see ROT.Scheduler#next\n     */\n    next() {\n        if (this._current !== null && this._repeat.indexOf(this._current) != -1) {\n            this._queue.add(this._current, this._duration || this._defaultDuration);\n            this._duration = this._defaultDuration;\n        }\n        return super.next();\n    }\n    /**\n     * Set duration for the active item\n     */\n    setDuration(time) {\n        if (this._current) {\n            this._duration = time;\n        }\n        return this;\n    }\n}\n","import Simple from \"./simple.js\";\nimport Speed from \"./speed.js\";\nimport Action from \"./action.js\";\nexport default { Simple, Speed, Action };\n","import { DIRS } from \"../constants.js\";\n;\n;\nexport default class FOV {\n    /**\n     * @class Abstract FOV algorithm\n     * @param {function} lightPassesCallback Does the light pass through x,y?\n     * @param {object} [options]\n     * @param {int} [options.topology=8] 4/6/8\n     */\n    constructor(lightPassesCallback, options = {}) {\n        this._lightPasses = lightPassesCallback;\n        this._options = Object.assign({ topology: 8 }, options);\n    }\n    /**\n     * Return all neighbors in a concentric ring\n     * @param {int} cx center-x\n     * @param {int} cy center-y\n     * @param {int} r range\n     */\n    _getCircle(cx, cy, r) {\n        let result = [];\n        let dirs, countFactor, startOffset;\n        switch (this._options.topology) {\n            case 4:\n                countFactor = 1;\n                startOffset = [0, 1];\n                dirs = [\n                    DIRS[8][7],\n                    DIRS[8][1],\n                    DIRS[8][3],\n                    DIRS[8][5]\n                ];\n                break;\n            case 6:\n                dirs = DIRS[6];\n                countFactor = 1;\n                startOffset = [-1, 1];\n                break;\n            case 8:\n                dirs = DIRS[4];\n                countFactor = 2;\n                startOffset = [-1, 1];\n                break;\n            default:\n                throw new Error(\"Incorrect topology for FOV computation\");\n                break;\n        }\n        /* starting neighbor */\n        let x = cx + startOffset[0] * r;\n        let y = cy + startOffset[1] * r;\n        /* circle */\n        for (let i = 0; i < dirs.length; i++) {\n            for (let j = 0; j < r * countFactor; j++) {\n                result.push([x, y]);\n                x += dirs[i][0];\n                y += dirs[i][1];\n            }\n        }\n        return result;\n    }\n}\n","import FOV from \"./fov.js\";\n/**\n * @class Discrete shadowcasting algorithm. Obsoleted by Precise shadowcasting.\n * @augments ROT.FOV\n */\nexport default class DiscreteShadowcasting extends FOV {\n    compute(x, y, R, callback) {\n        /* this place is always visible */\n        callback(x, y, 0, 1);\n        /* standing in a dark place. FIXME is this a good idea?  */\n        if (!this._lightPasses(x, y)) {\n            return;\n        }\n        /* start and end angles */\n        let DATA = [];\n        let A, B, cx, cy, blocks;\n        /* analyze surrounding cells in concentric rings, starting from the center */\n        for (let r = 1; r <= R; r++) {\n            let neighbors = this._getCircle(x, y, r);\n            let angle = 360 / neighbors.length;\n            for (let i = 0; i < neighbors.length; i++) {\n                cx = neighbors[i][0];\n                cy = neighbors[i][1];\n                A = angle * (i - 0.5);\n                B = A + angle;\n                blocks = !this._lightPasses(cx, cy);\n                if (this._visibleCoords(Math.floor(A), Math.ceil(B), blocks, DATA)) {\n                    callback(cx, cy, r, 1);\n                }\n                if (DATA.length == 2 && DATA[0] == 0 && DATA[1] == 360) {\n                    return;\n                } /* cutoff? */\n            } /* for all cells in this ring */\n        } /* for all rings */\n    }\n    /**\n     * @param {int} A start angle\n     * @param {int} B end angle\n     * @param {bool} blocks Does current cell block visibility?\n     * @param {int[][]} DATA shadowed angle pairs\n     */\n    _visibleCoords(A, B, blocks, DATA) {\n        if (A < 0) {\n            let v1 = this._visibleCoords(0, B, blocks, DATA);\n            let v2 = this._visibleCoords(360 + A, 360, blocks, DATA);\n            return v1 || v2;\n        }\n        let index = 0;\n        while (index < DATA.length && DATA[index] < A) {\n            index++;\n        }\n        if (index == DATA.length) { /* completely new shadow */\n            if (blocks) {\n                DATA.push(A, B);\n            }\n            return true;\n        }\n        let count = 0;\n        if (index % 2) { /* this shadow starts in an existing shadow, or within its ending boundary */\n            while (index < DATA.length && DATA[index] < B) {\n                index++;\n                count++;\n            }\n            if (count == 0) {\n                return false;\n            }\n            if (blocks) {\n                if (count % 2) {\n                    DATA.splice(index - count, count, B);\n                }\n                else {\n                    DATA.splice(index - count, count);\n                }\n            }\n            return true;\n        }\n        else { /* this shadow starts outside an existing shadow, or within a starting boundary */\n            while (index < DATA.length && DATA[index] < B) {\n                index++;\n                count++;\n            }\n            /* visible when outside an existing shadow, or when overlapping */\n            if (A == DATA[index - count] && count == 1) {\n                return false;\n            }\n            if (blocks) {\n                if (count % 2) {\n                    DATA.splice(index - count, count, A);\n                }\n                else {\n                    DATA.splice(index - count, count, A, B);\n                }\n            }\n            return true;\n        }\n    }\n}\n","import FOV from \"./fov.js\";\n/**\n * @class Precise shadowcasting algorithm\n * @augments ROT.FOV\n */\nexport default class PreciseShadowcasting extends FOV {\n    compute(x, y, R, callback) {\n        /* this place is always visible */\n        callback(x, y, 0, 1);\n        /* standing in a dark place. FIXME is this a good idea?  */\n        if (!this._lightPasses(x, y)) {\n            return;\n        }\n        /* list of all shadows */\n        let SHADOWS = [];\n        let cx, cy, blocks, A1, A2, visibility;\n        /* analyze surrounding cells in concentric rings, starting from the center */\n        for (let r = 1; r <= R; r++) {\n            let neighbors = this._getCircle(x, y, r);\n            let neighborCount = neighbors.length;\n            for (let i = 0; i < neighborCount; i++) {\n                cx = neighbors[i][0];\n                cy = neighbors[i][1];\n                /* shift half-an-angle backwards to maintain consistency of 0-th cells */\n                A1 = [i ? 2 * i - 1 : 2 * neighborCount - 1, 2 * neighborCount];\n                A2 = [2 * i + 1, 2 * neighborCount];\n                blocks = !this._lightPasses(cx, cy);\n                visibility = this._checkVisibility(A1, A2, blocks, SHADOWS);\n                if (visibility) {\n                    callback(cx, cy, r, visibility);\n                }\n                if (SHADOWS.length == 2 && SHADOWS[0][0] == 0 && SHADOWS[1][0] == SHADOWS[1][1]) {\n                    return;\n                } /* cutoff? */\n            } /* for all cells in this ring */\n        } /* for all rings */\n    }\n    /**\n     * @param {int[2]} A1 arc start\n     * @param {int[2]} A2 arc end\n     * @param {bool} blocks Does current arc block visibility?\n     * @param {int[][]} SHADOWS list of active shadows\n     */\n    _checkVisibility(A1, A2, blocks, SHADOWS) {\n        if (A1[0] > A2[0]) { /* split into two sub-arcs */\n            let v1 = this._checkVisibility(A1, [A1[1], A1[1]], blocks, SHADOWS);\n            let v2 = this._checkVisibility([0, 1], A2, blocks, SHADOWS);\n            return (v1 + v2) / 2;\n        }\n        /* index1: first shadow >= A1 */\n        let index1 = 0, edge1 = false;\n        while (index1 < SHADOWS.length) {\n            let old = SHADOWS[index1];\n            let diff = old[0] * A1[1] - A1[0] * old[1];\n            if (diff >= 0) { /* old >= A1 */\n                if (diff == 0 && !(index1 % 2)) {\n                    edge1 = true;\n                }\n                break;\n            }\n            index1++;\n        }\n        /* index2: last shadow <= A2 */\n        let index2 = SHADOWS.length, edge2 = false;\n        while (index2--) {\n            let old = SHADOWS[index2];\n            let diff = A2[0] * old[1] - old[0] * A2[1];\n            if (diff >= 0) { /* old <= A2 */\n                if (diff == 0 && (index2 % 2)) {\n                    edge2 = true;\n                }\n                break;\n            }\n        }\n        let visible = true;\n        if (index1 == index2 && (edge1 || edge2)) { /* subset of existing shadow, one of the edges match */\n            visible = false;\n        }\n        else if (edge1 && edge2 && index1 + 1 == index2 && (index2 % 2)) { /* completely equivalent with existing shadow */\n            visible = false;\n        }\n        else if (index1 > index2 && (index1 % 2)) { /* subset of existing shadow, not touching */\n            visible = false;\n        }\n        if (!visible) {\n            return 0;\n        } /* fast case: not visible */\n        let visibleLength;\n        /* compute the length of visible arc, adjust list of shadows (if blocking) */\n        let remove = index2 - index1 + 1;\n        if (remove % 2) {\n            if (index1 % 2) { /* first edge within existing shadow, second outside */\n                let P = SHADOWS[index1];\n                visibleLength = (A2[0] * P[1] - P[0] * A2[1]) / (P[1] * A2[1]);\n                if (blocks) {\n                    SHADOWS.splice(index1, remove, A2);\n                }\n            }\n            else { /* second edge within existing shadow, first outside */\n                let P = SHADOWS[index2];\n                visibleLength = (P[0] * A1[1] - A1[0] * P[1]) / (A1[1] * P[1]);\n                if (blocks) {\n                    SHADOWS.splice(index1, remove, A1);\n                }\n            }\n        }\n        else {\n            if (index1 % 2) { /* both edges within existing shadows */\n                let P1 = SHADOWS[index1];\n                let P2 = SHADOWS[index2];\n                visibleLength = (P2[0] * P1[1] - P1[0] * P2[1]) / (P1[1] * P2[1]);\n                if (blocks) {\n                    SHADOWS.splice(index1, remove);\n                }\n            }\n            else { /* both edges outside existing shadows */\n                if (blocks) {\n                    SHADOWS.splice(index1, remove, A1, A2);\n                }\n                return 1; /* whole arc visible! */\n            }\n        }\n        let arcLength = (A2[0] * A1[1] - A1[0] * A2[1]) / (A1[1] * A2[1]);\n        return visibleLength / arcLength;\n    }\n}\n","import FOV from \"./fov.js\";\n/** Octants used for translating recursive shadowcasting offsets */\nconst OCTANTS = [\n    [-1, 0, 0, 1],\n    [0, -1, 1, 0],\n    [0, -1, -1, 0],\n    [-1, 0, 0, -1],\n    [1, 0, 0, -1],\n    [0, 1, -1, 0],\n    [0, 1, 1, 0],\n    [1, 0, 0, 1]\n];\n/**\n * @class Recursive shadowcasting algorithm\n * Currently only supports 4/8 topologies, not hexagonal.\n * Based on Peter Harkins' implementation of Björn Bergström's algorithm described here: http://www.roguebasin.com/index.php?title=FOV_using_recursive_shadowcasting\n * @augments ROT.FOV\n */\nexport default class RecursiveShadowcasting extends FOV {\n    /**\n     * Compute visibility for a 360-degree circle\n     * @param {int} x\n     * @param {int} y\n     * @param {int} R Maximum visibility radius\n     * @param {function} callback\n     */\n    compute(x, y, R, callback) {\n        //You can always see your own tile\n        callback(x, y, 0, 1);\n        for (let i = 0; i < OCTANTS.length; i++) {\n            this._renderOctant(x, y, OCTANTS[i], R, callback);\n        }\n    }\n    /**\n     * Compute visibility for a 180-degree arc\n     * @param {int} x\n     * @param {int} y\n     * @param {int} R Maximum visibility radius\n     * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);\n     * @param {function} callback\n     */\n    compute180(x, y, R, dir, callback) {\n        //You can always see your own tile\n        callback(x, y, 0, 1);\n        let previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 180 degrees\n        let nextPreviousOctant = (dir - 2 + 8) % 8; //Need to retrieve the previous two octants to render a full 180 degrees\n        let nextOctant = (dir + 1 + 8) % 8; //Need to grab to next octant to render a full 180 degrees\n        this._renderOctant(x, y, OCTANTS[nextPreviousOctant], R, callback);\n        this._renderOctant(x, y, OCTANTS[previousOctant], R, callback);\n        this._renderOctant(x, y, OCTANTS[dir], R, callback);\n        this._renderOctant(x, y, OCTANTS[nextOctant], R, callback);\n    }\n    ;\n    /**\n     * Compute visibility for a 90-degree arc\n     * @param {int} x\n     * @param {int} y\n     * @param {int} R Maximum visibility radius\n     * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);\n     * @param {function} callback\n     */\n    compute90(x, y, R, dir, callback) {\n        //You can always see your own tile\n        callback(x, y, 0, 1);\n        let previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 90 degrees\n        this._renderOctant(x, y, OCTANTS[dir], R, callback);\n        this._renderOctant(x, y, OCTANTS[previousOctant], R, callback);\n    }\n    /**\n     * Render one octant (45-degree arc) of the viewshed\n     * @param {int} x\n     * @param {int} y\n     * @param {int} octant Octant to be rendered\n     * @param {int} R Maximum visibility radius\n     * @param {function} callback\n     */\n    _renderOctant(x, y, octant, R, callback) {\n        //Radius incremented by 1 to provide same coverage area as other shadowcasting radiuses\n        this._castVisibility(x, y, 1, 1.0, 0.0, R + 1, octant[0], octant[1], octant[2], octant[3], callback);\n    }\n    /**\n     * Actually calculates the visibility\n     * @param {int} startX The starting X coordinate\n     * @param {int} startY The starting Y coordinate\n     * @param {int} row The row to render\n     * @param {float} visSlopeStart The slope to start at\n     * @param {float} visSlopeEnd The slope to end at\n     * @param {int} radius The radius to reach out to\n     * @param {int} xx\n     * @param {int} xy\n     * @param {int} yx\n     * @param {int} yy\n     * @param {function} callback The callback to use when we hit a block that is visible\n     */\n    _castVisibility(startX, startY, row, visSlopeStart, visSlopeEnd, radius, xx, xy, yx, yy, callback) {\n        if (visSlopeStart < visSlopeEnd) {\n            return;\n        }\n        for (let i = row; i <= radius; i++) {\n            let dx = -i - 1;\n            let dy = -i;\n            let blocked = false;\n            let newStart = 0;\n            //'Row' could be column, names here assume octant 0 and would be flipped for half the octants\n            while (dx <= 0) {\n                dx += 1;\n                //Translate from relative coordinates to map coordinates\n                let mapX = startX + dx * xx + dy * xy;\n                let mapY = startY + dx * yx + dy * yy;\n                //Range of the row\n                let slopeStart = (dx - 0.5) / (dy + 0.5);\n                let slopeEnd = (dx + 0.5) / (dy - 0.5);\n                //Ignore if not yet at left edge of Octant\n                if (slopeEnd > visSlopeStart) {\n                    continue;\n                }\n                //Done if past right edge\n                if (slopeStart < visSlopeEnd) {\n                    break;\n                }\n                //If it's in range, it's visible\n                if ((dx * dx + dy * dy) < (radius * radius)) {\n                    callback(mapX, mapY, i, 1);\n                }\n                if (!blocked) {\n                    //If tile is a blocking tile, cast around it\n                    if (!this._lightPasses(mapX, mapY) && i < radius) {\n                        blocked = true;\n                        this._castVisibility(startX, startY, i + 1, visSlopeStart, slopeStart, radius, xx, xy, yx, yy, callback);\n                        newStart = slopeEnd;\n                    }\n                }\n                else {\n                    //Keep narrowing if scanning across a block\n                    if (!this._lightPasses(mapX, mapY)) {\n                        newStart = slopeEnd;\n                        continue;\n                    }\n                    //Block has ended\n                    blocked = false;\n                    visSlopeStart = newStart;\n                }\n            }\n            if (blocked) {\n                break;\n            }\n        }\n    }\n}\n","import DiscreteShadowcasting from \"./discrete-shadowcasting.js\";\nimport PreciseShadowcasting from \"./precise-shadowcasting.js\";\nimport RecursiveShadowcasting from \"./recursive-shadowcasting.js\";\nexport default { DiscreteShadowcasting, PreciseShadowcasting, RecursiveShadowcasting };\n","import { DEFAULT_WIDTH, DEFAULT_HEIGHT } from \"../constants.js\";\n;\nexport default class Map {\n    /**\n     * @class Base map generator\n     * @param {int} [width=ROT.DEFAULT_WIDTH]\n     * @param {int} [height=ROT.DEFAULT_HEIGHT]\n     */\n    constructor(width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT) {\n        this._width = width;\n        this._height = height;\n    }\n    ;\n    _fillMap(value) {\n        let map = [];\n        for (let i = 0; i < this._width; i++) {\n            map.push([]);\n            for (let j = 0; j < this._height; j++) {\n                map[i].push(value);\n            }\n        }\n        return map;\n    }\n}\n","import Map from \"./map.js\";\n/**\n * @class Simple empty rectangular room\n * @augments ROT.Map\n */\nexport default class Arena extends Map {\n    create(callback) {\n        let w = this._width - 1;\n        let h = this._height - 1;\n        for (let i = 0; i <= w; i++) {\n            for (let j = 0; j <= h; j++) {\n                let empty = (i && j && i < w && j < h);\n                callback(i, j, empty ? 0 : 1);\n            }\n        }\n        return this;\n    }\n}\n","import Map from \"./map.js\";\n/**\n * @class Dungeon map: has rooms and corridors\n * @augments ROT.Map\n */\nexport default class Dungeon extends Map {\n    constructor(width, height) {\n        super(width, height);\n        this._rooms = [];\n        this._corridors = [];\n    }\n    /**\n     * Get all generated rooms\n     * @returns {ROT.Map.Feature.Room[]}\n     */\n    getRooms() { return this._rooms; }\n    /**\n     * Get all generated corridors\n     * @returns {ROT.Map.Feature.Corridor[]}\n     */\n    getCorridors() { return this._corridors; }\n}\n","import RNG from \"../rng.js\";\n;\n/**\n * @class Dungeon feature; has own .create() method\n */\nclass Feature {\n}\n/**\n * @class Room\n * @augments ROT.Map.Feature\n * @param {int} x1\n * @param {int} y1\n * @param {int} x2\n * @param {int} y2\n * @param {int} [doorX]\n * @param {int} [doorY]\n */\nexport class Room extends Feature {\n    constructor(x1, y1, x2, y2, doorX, doorY) {\n        super();\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n        this._doors = {};\n        if (doorX !== undefined && doorY !== undefined) {\n            this.addDoor(doorX, doorY);\n        }\n    }\n    ;\n    /**\n     * Room of random size, with a given doors and direction\n     */\n    static createRandomAt(x, y, dx, dy, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        if (dx == 1) { /* to the right */\n            let y2 = y - Math.floor(RNG.getUniform() * height);\n            return new this(x + 1, y2, x + width, y2 + height - 1, x, y);\n        }\n        if (dx == -1) { /* to the left */\n            let y2 = y - Math.floor(RNG.getUniform() * height);\n            return new this(x - width, y2, x - 1, y2 + height - 1, x, y);\n        }\n        if (dy == 1) { /* to the bottom */\n            let x2 = x - Math.floor(RNG.getUniform() * width);\n            return new this(x2, y + 1, x2 + width - 1, y + height, x, y);\n        }\n        if (dy == -1) { /* to the top */\n            let x2 = x - Math.floor(RNG.getUniform() * width);\n            return new this(x2, y - height, x2 + width - 1, y - 1, x, y);\n        }\n        throw new Error(\"dx or dy must be 1 or -1\");\n    }\n    /**\n     * Room of random size, positioned around center coords\n     */\n    static createRandomCenter(cx, cy, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        let x1 = cx - Math.floor(RNG.getUniform() * width);\n        let y1 = cy - Math.floor(RNG.getUniform() * height);\n        let x2 = x1 + width - 1;\n        let y2 = y1 + height - 1;\n        return new this(x1, y1, x2, y2);\n    }\n    /**\n     * Room of random size within a given dimensions\n     */\n    static createRandom(availWidth, availHeight, options) {\n        let min = options.roomWidth[0];\n        let max = options.roomWidth[1];\n        let width = RNG.getUniformInt(min, max);\n        min = options.roomHeight[0];\n        max = options.roomHeight[1];\n        let height = RNG.getUniformInt(min, max);\n        let left = availWidth - width - 1;\n        let top = availHeight - height - 1;\n        let x1 = 1 + Math.floor(RNG.getUniform() * left);\n        let y1 = 1 + Math.floor(RNG.getUniform() * top);\n        let x2 = x1 + width - 1;\n        let y2 = y1 + height - 1;\n        return new this(x1, y1, x2, y2);\n    }\n    addDoor(x, y) {\n        this._doors[x + \",\" + y] = 1;\n        return this;\n    }\n    /**\n     * @param {function}\n     */\n    getDoors(cb) {\n        for (let key in this._doors) {\n            let parts = key.split(\",\");\n            cb(parseInt(parts[0]), parseInt(parts[1]));\n        }\n        return this;\n    }\n    clearDoors() {\n        this._doors = {};\n        return this;\n    }\n    addDoors(isWallCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x != left && x != right && y != top && y != bottom) {\n                    continue;\n                }\n                if (isWallCallback(x, y)) {\n                    continue;\n                }\n                this.addDoor(x, y);\n            }\n        }\n        return this;\n    }\n    debug() {\n        console.log(\"room\", this._x1, this._y1, this._x2, this._y2);\n    }\n    isValid(isWallCallback, canBeDugCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x == left || x == right || y == top || y == bottom) {\n                    if (!isWallCallback(x, y)) {\n                        return false;\n                    }\n                }\n                else {\n                    if (!canBeDugCallback(x, y)) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    /**\n     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty, 1 = wall, 2 = door. Multiple doors are allowed.\n     */\n    create(digCallback) {\n        let left = this._x1 - 1;\n        let right = this._x2 + 1;\n        let top = this._y1 - 1;\n        let bottom = this._y2 + 1;\n        let value = 0;\n        for (let x = left; x <= right; x++) {\n            for (let y = top; y <= bottom; y++) {\n                if (x + \",\" + y in this._doors) {\n                    value = 2;\n                }\n                else if (x == left || x == right || y == top || y == bottom) {\n                    value = 1;\n                }\n                else {\n                    value = 0;\n                }\n                digCallback(x, y, value);\n            }\n        }\n    }\n    getCenter() {\n        return [Math.round((this._x1 + this._x2) / 2), Math.round((this._y1 + this._y2) / 2)];\n    }\n    getLeft() { return this._x1; }\n    getRight() { return this._x2; }\n    getTop() { return this._y1; }\n    getBottom() { return this._y2; }\n}\n/**\n * @class Corridor\n * @augments ROT.Map.Feature\n * @param {int} startX\n * @param {int} startY\n * @param {int} endX\n * @param {int} endY\n */\nexport class Corridor extends Feature {\n    constructor(startX, startY, endX, endY) {\n        super();\n        this._startX = startX;\n        this._startY = startY;\n        this._endX = endX;\n        this._endY = endY;\n        this._endsWithAWall = true;\n    }\n    static createRandomAt(x, y, dx, dy, options) {\n        let min = options.corridorLength[0];\n        let max = options.corridorLength[1];\n        let length = RNG.getUniformInt(min, max);\n        return new this(x, y, x + dx * length, y + dy * length);\n    }\n    debug() {\n        console.log(\"corridor\", this._startX, this._startY, this._endX, this._endY);\n    }\n    isValid(isWallCallback, canBeDugCallback) {\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        let length = 1 + Math.max(Math.abs(dx), Math.abs(dy));\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        let nx = dy;\n        let ny = -dx;\n        let ok = true;\n        for (let i = 0; i < length; i++) {\n            let x = sx + i * dx;\n            let y = sy + i * dy;\n            if (!canBeDugCallback(x, y)) {\n                ok = false;\n            }\n            if (!isWallCallback(x + nx, y + ny)) {\n                ok = false;\n            }\n            if (!isWallCallback(x - nx, y - ny)) {\n                ok = false;\n            }\n            if (!ok) {\n                length = i;\n                this._endX = x - dx;\n                this._endY = y - dy;\n                break;\n            }\n        }\n        /**\n         * If the length degenerated, this corridor might be invalid\n         */\n        /* not supported */\n        if (length == 0) {\n            return false;\n        }\n        /* length 1 allowed only if the next space is empty */\n        if (length == 1 && isWallCallback(this._endX + dx, this._endY + dy)) {\n            return false;\n        }\n        /**\n         * We do not want the corridor to crash into a corner of a room;\n         * if any of the ending corners is empty, the N+1th cell of this corridor must be empty too.\n         *\n         * Situation:\n         * #######1\n         * .......?\n         * #######2\n         *\n         * The corridor was dug from left to right.\n         * 1, 2 - problematic corners, ? = N+1th cell (not dug)\n         */\n        let firstCornerBad = !isWallCallback(this._endX + dx + nx, this._endY + dy + ny);\n        let secondCornerBad = !isWallCallback(this._endX + dx - nx, this._endY + dy - ny);\n        this._endsWithAWall = isWallCallback(this._endX + dx, this._endY + dy);\n        if ((firstCornerBad || secondCornerBad) && this._endsWithAWall) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty.\n     */\n    create(digCallback) {\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        let length = 1 + Math.max(Math.abs(dx), Math.abs(dy));\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        for (let i = 0; i < length; i++) {\n            let x = sx + i * dx;\n            let y = sy + i * dy;\n            digCallback(x, y, 0);\n        }\n        return true;\n    }\n    createPriorityWalls(priorityWallCallback) {\n        if (!this._endsWithAWall) {\n            return;\n        }\n        let sx = this._startX;\n        let sy = this._startY;\n        let dx = this._endX - sx;\n        let dy = this._endY - sy;\n        if (dx) {\n            dx = dx / Math.abs(dx);\n        }\n        if (dy) {\n            dy = dy / Math.abs(dy);\n        }\n        let nx = dy;\n        let ny = -dx;\n        priorityWallCallback(this._endX + dx, this._endY + dy);\n        priorityWallCallback(this._endX + nx, this._endY + ny);\n        priorityWallCallback(this._endX - nx, this._endY - ny);\n    }\n}\n","import Dungeon from \"./dungeon.js\";\nimport { Room, Corridor } from \"./features.js\";\nimport RNG from \"../rng.js\";\n;\n/**\n * @class Dungeon generator which tries to fill the space evenly. Generates independent rooms and tries to connect them.\n * @augments ROT.Map.Dungeon\n */\nexport default class Uniform extends Dungeon {\n    constructor(width, height, options) {\n        super(width, height);\n        this._options = {\n            roomWidth: [3, 9],\n            roomHeight: [3, 5],\n            roomDugPercentage: 0.1,\n            timeLimit: 1000 /* we stop after this much time has passed (msec) */\n        };\n        Object.assign(this._options, options);\n        this._map = [];\n        this._dug = 0;\n        this._roomAttempts = 20; /* new room is created N-times until is considered as impossible to generate */\n        this._corridorAttempts = 20; /* corridors are tried N-times until the level is considered as impossible to connect */\n        this._connected = []; /* list of already connected rooms */\n        this._unconnected = []; /* list of remaining unconnected rooms */\n        this._digCallback = this._digCallback.bind(this);\n        this._canBeDugCallback = this._canBeDugCallback.bind(this);\n        this._isWallCallback = this._isWallCallback.bind(this);\n    }\n    /**\n     * Create a map. If the time limit has been hit, returns null.\n     * @see ROT.Map#create\n     */\n    create(callback) {\n        let t1 = Date.now();\n        while (1) {\n            let t2 = Date.now();\n            if (t2 - t1 > this._options.timeLimit) {\n                return null;\n            } /* time limit! */\n            this._map = this._fillMap(1);\n            this._dug = 0;\n            this._rooms = [];\n            this._unconnected = [];\n            this._generateRooms();\n            if (this._rooms.length < 2) {\n                continue;\n            }\n            if (this._generateCorridors()) {\n                break;\n            }\n        }\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this._map[i][j]);\n                }\n            }\n        }\n        return this;\n    }\n    /**\n     * Generates a suitable amount of rooms\n     */\n    _generateRooms() {\n        let w = this._width - 2;\n        let h = this._height - 2;\n        let room;\n        do {\n            room = this._generateRoom();\n            if (this._dug / (w * h) > this._options.roomDugPercentage) {\n                break;\n            } /* achieved requested amount of free space */\n        } while (room);\n        /* either enough rooms, or not able to generate more of them :) */\n    }\n    /**\n     * Try to generate one room\n     */\n    _generateRoom() {\n        let count = 0;\n        while (count < this._roomAttempts) {\n            count++;\n            let room = Room.createRandom(this._width, this._height, this._options);\n            if (!room.isValid(this._isWallCallback, this._canBeDugCallback)) {\n                continue;\n            }\n            room.create(this._digCallback);\n            this._rooms.push(room);\n            return room;\n        }\n        /* no room was generated in a given number of attempts */\n        return null;\n    }\n    /**\n     * Generates connectors beween rooms\n     * @returns {bool} success Was this attempt successfull?\n     */\n    _generateCorridors() {\n        let cnt = 0;\n        while (cnt < this._corridorAttempts) {\n            cnt++;\n            this._corridors = [];\n            /* dig rooms into a clear map */\n            this._map = this._fillMap(1);\n            for (let i = 0; i < this._rooms.length; i++) {\n                let room = this._rooms[i];\n                room.clearDoors();\n                room.create(this._digCallback);\n            }\n            this._unconnected = RNG.shuffle(this._rooms.slice());\n            this._connected = [];\n            if (this._unconnected.length) {\n                this._connected.push(this._unconnected.pop());\n            } /* first one is always connected */\n            while (1) {\n                /* 1. pick random connected room */\n                let connected = RNG.getItem(this._connected);\n                if (!connected) {\n                    break;\n                }\n                /* 2. find closest unconnected */\n                let room1 = this._closestRoom(this._unconnected, connected);\n                if (!room1) {\n                    break;\n                }\n                /* 3. connect it to closest connected */\n                let room2 = this._closestRoom(this._connected, room1);\n                if (!room2) {\n                    break;\n                }\n                let ok = this._connectRooms(room1, room2);\n                if (!ok) {\n                    break;\n                } /* stop connecting, re-shuffle */\n                if (!this._unconnected.length) {\n                    return true;\n                } /* done; no rooms remain */\n            }\n        }\n        return false;\n    }\n    ;\n    /**\n     * For a given room, find the closest one from the list\n     */\n    _closestRoom(rooms, room) {\n        let dist = Infinity;\n        let center = room.getCenter();\n        let result = null;\n        for (let i = 0; i < rooms.length; i++) {\n            let r = rooms[i];\n            let c = r.getCenter();\n            let dx = c[0] - center[0];\n            let dy = c[1] - center[1];\n            let d = dx * dx + dy * dy;\n            if (d < dist) {\n                dist = d;\n                result = r;\n            }\n        }\n        return result;\n    }\n    _connectRooms(room1, room2) {\n        /*\n            room1.debug();\n            room2.debug();\n        */\n        let center1 = room1.getCenter();\n        let center2 = room2.getCenter();\n        let diffX = center2[0] - center1[0];\n        let diffY = center2[1] - center1[1];\n        let start;\n        let end;\n        let dirIndex1, dirIndex2, min, max, index;\n        if (Math.abs(diffX) < Math.abs(diffY)) { /* first try connecting north-south walls */\n            dirIndex1 = (diffY > 0 ? 2 : 0);\n            dirIndex2 = (dirIndex1 + 2) % 4;\n            min = room2.getLeft();\n            max = room2.getRight();\n            index = 0;\n        }\n        else { /* first try connecting east-west walls */\n            dirIndex1 = (diffX > 0 ? 1 : 3);\n            dirIndex2 = (dirIndex1 + 2) % 4;\n            min = room2.getTop();\n            max = room2.getBottom();\n            index = 1;\n        }\n        start = this._placeInWall(room1, dirIndex1); /* corridor will start here */\n        if (!start) {\n            return false;\n        }\n        if (start[index] >= min && start[index] <= max) { /* possible to connect with straight line (I-like) */\n            end = start.slice();\n            let value = 0;\n            switch (dirIndex2) {\n                case 0:\n                    value = room2.getTop() - 1;\n                    break;\n                case 1:\n                    value = room2.getRight() + 1;\n                    break;\n                case 2:\n                    value = room2.getBottom() + 1;\n                    break;\n                case 3:\n                    value = room2.getLeft() - 1;\n                    break;\n            }\n            end[(index + 1) % 2] = value;\n            this._digLine([start, end]);\n        }\n        else if (start[index] < min - 1 || start[index] > max + 1) { /* need to switch target wall (L-like) */\n            let diff = start[index] - center2[index];\n            let rotation = 0;\n            switch (dirIndex2) {\n                case 0:\n                case 1:\n                    rotation = (diff < 0 ? 3 : 1);\n                    break;\n                case 2:\n                case 3:\n                    rotation = (diff < 0 ? 1 : 3);\n                    break;\n            }\n            dirIndex2 = (dirIndex2 + rotation) % 4;\n            end = this._placeInWall(room2, dirIndex2);\n            if (!end) {\n                return false;\n            }\n            let mid = [0, 0];\n            mid[index] = start[index];\n            let index2 = (index + 1) % 2;\n            mid[index2] = end[index2];\n            this._digLine([start, mid, end]);\n        }\n        else { /* use current wall pair, but adjust the line in the middle (S-like) */\n            let index2 = (index + 1) % 2;\n            end = this._placeInWall(room2, dirIndex2);\n            if (!end) {\n                return false;\n            }\n            let mid = Math.round((end[index2] + start[index2]) / 2);\n            let mid1 = [0, 0];\n            let mid2 = [0, 0];\n            mid1[index] = start[index];\n            mid1[index2] = mid;\n            mid2[index] = end[index];\n            mid2[index2] = mid;\n            this._digLine([start, mid1, mid2, end]);\n        }\n        room1.addDoor(start[0], start[1]);\n        room2.addDoor(end[0], end[1]);\n        index = this._unconnected.indexOf(room1);\n        if (index != -1) {\n            this._unconnected.splice(index, 1);\n            this._connected.push(room1);\n        }\n        index = this._unconnected.indexOf(room2);\n        if (index != -1) {\n            this._unconnected.splice(index, 1);\n            this._connected.push(room2);\n        }\n        return true;\n    }\n    _placeInWall(room, dirIndex) {\n        let start = [0, 0];\n        let dir = [0, 0];\n        let length = 0;\n        switch (dirIndex) {\n            case 0:\n                dir = [1, 0];\n                start = [room.getLeft(), room.getTop() - 1];\n                length = room.getRight() - room.getLeft() + 1;\n                break;\n            case 1:\n                dir = [0, 1];\n                start = [room.getRight() + 1, room.getTop()];\n                length = room.getBottom() - room.getTop() + 1;\n                break;\n            case 2:\n                dir = [1, 0];\n                start = [room.getLeft(), room.getBottom() + 1];\n                length = room.getRight() - room.getLeft() + 1;\n                break;\n            case 3:\n                dir = [0, 1];\n                start = [room.getLeft() - 1, room.getTop()];\n                length = room.getBottom() - room.getTop() + 1;\n                break;\n        }\n        let avail = [];\n        let lastBadIndex = -2;\n        for (let i = 0; i < length; i++) {\n            let x = start[0] + i * dir[0];\n            let y = start[1] + i * dir[1];\n            avail.push(null);\n            let isWall = (this._map[x][y] == 1);\n            if (isWall) {\n                if (lastBadIndex != i - 1) {\n                    avail[i] = [x, y];\n                }\n            }\n            else {\n                lastBadIndex = i;\n                if (i) {\n                    avail[i - 1] = null;\n                }\n            }\n        }\n        for (let i = avail.length - 1; i >= 0; i--) {\n            if (!avail[i]) {\n                avail.splice(i, 1);\n            }\n        }\n        return (avail.length ? RNG.getItem(avail) : null);\n    }\n    /**\n     * Dig a polyline.\n     */\n    _digLine(points) {\n        for (let i = 1; i < points.length; i++) {\n            let start = points[i - 1];\n            let end = points[i];\n            let corridor = new Corridor(start[0], start[1], end[0], end[1]);\n            corridor.create(this._digCallback);\n            this._corridors.push(corridor);\n        }\n    }\n    _digCallback(x, y, value) {\n        this._map[x][y] = value;\n        if (value == 0) {\n            this._dug++;\n        }\n    }\n    _isWallCallback(x, y) {\n        if (x < 0 || y < 0 || x >= this._width || y >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _canBeDugCallback(x, y) {\n        if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n}\n","import Map from \"./map.js\";\nimport { DIRS } from \"../constants.js\";\nimport RNG from \"../rng.js\";\n;\n/**\n * @class Cellular automaton map generator\n * @augments ROT.Map\n * @param {int} [width=ROT.DEFAULT_WIDTH]\n * @param {int} [height=ROT.DEFAULT_HEIGHT]\n * @param {object} [options] Options\n * @param {int[]} [options.born] List of neighbor counts for a new cell to be born in empty space\n * @param {int[]} [options.survive] List of neighbor counts for an existing  cell to survive\n * @param {int} [options.topology] Topology 4 or 6 or 8\n */\nexport default class Cellular extends Map {\n    constructor(width, height, options = {}) {\n        super(width, height);\n        this._options = {\n            born: [5, 6, 7, 8],\n            survive: [4, 5, 6, 7, 8],\n            topology: 8\n        };\n        this.setOptions(options);\n        this._dirs = DIRS[this._options.topology];\n        this._map = this._fillMap(0);\n    }\n    /**\n     * Fill the map with random values\n     * @param {float} probability Probability for a cell to become alive; 0 = all empty, 1 = all full\n     */\n    randomize(probability) {\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                this._map[i][j] = (RNG.getUniform() < probability ? 1 : 0);\n            }\n        }\n        return this;\n    }\n    /**\n     * Change options.\n     * @see ROT.Map.Cellular\n     */\n    setOptions(options) { Object.assign(this._options, options); }\n    set(x, y, value) { this._map[x][y] = value; }\n    create(callback) {\n        let newMap = this._fillMap(0);\n        let born = this._options.born;\n        let survive = this._options.survive;\n        for (let j = 0; j < this._height; j++) {\n            let widthStep = 1;\n            let widthStart = 0;\n            if (this._options.topology == 6) {\n                widthStep = 2;\n                widthStart = j % 2;\n            }\n            for (let i = widthStart; i < this._width; i += widthStep) {\n                let cur = this._map[i][j];\n                let ncount = this._getNeighbors(i, j);\n                if (cur && survive.indexOf(ncount) != -1) { /* survive */\n                    newMap[i][j] = 1;\n                }\n                else if (!cur && born.indexOf(ncount) != -1) { /* born */\n                    newMap[i][j] = 1;\n                }\n            }\n        }\n        this._map = newMap;\n        callback && this._serviceCallback(callback);\n    }\n    _serviceCallback(callback) {\n        for (let j = 0; j < this._height; j++) {\n            let widthStep = 1;\n            let widthStart = 0;\n            if (this._options.topology == 6) {\n                widthStep = 2;\n                widthStart = j % 2;\n            }\n            for (let i = widthStart; i < this._width; i += widthStep) {\n                callback(i, j, this._map[i][j]);\n            }\n        }\n    }\n    /**\n     * Get neighbor count at [i,j] in this._map\n     */\n    _getNeighbors(cx, cy) {\n        let result = 0;\n        for (let i = 0; i < this._dirs.length; i++) {\n            let dir = this._dirs[i];\n            let x = cx + dir[0];\n            let y = cy + dir[1];\n            if (x < 0 || x >= this._width || y < 0 || y >= this._height) {\n                continue;\n            }\n            result += (this._map[x][y] == 1 ? 1 : 0);\n        }\n        return result;\n    }\n    /**\n     * Make sure every non-wall space is accessible.\n     * @param {function} callback to call to display map when do\n     * @param {int} value to consider empty space - defaults to 0\n     * @param {function} callback to call when a new connection is made\n     */\n    connect(callback, value, connectionCallback) {\n        if (!value)\n            value = 0;\n        let allFreeSpace = [];\n        let notConnected = {};\n        // find all free space\n        let widthStep = 1;\n        let widthStarts = [0, 0];\n        if (this._options.topology == 6) {\n            widthStep = 2;\n            widthStarts = [0, 1];\n        }\n        for (let y = 0; y < this._height; y++) {\n            for (let x = widthStarts[y % 2]; x < this._width; x += widthStep) {\n                if (this._freeSpace(x, y, value)) {\n                    let p = [x, y];\n                    notConnected[this._pointKey(p)] = p;\n                    allFreeSpace.push([x, y]);\n                }\n            }\n        }\n        let start = allFreeSpace[RNG.getUniformInt(0, allFreeSpace.length - 1)];\n        let key = this._pointKey(start);\n        let connected = {};\n        connected[key] = start;\n        delete notConnected[key];\n        // find what's connected to the starting point\n        this._findConnected(connected, notConnected, [start], false, value);\n        while (Object.keys(notConnected).length > 0) {\n            // find two points from notConnected to connected\n            let p = this._getFromTo(connected, notConnected);\n            let from = p[0]; // notConnected\n            let to = p[1]; // connected\n            // find everything connected to the starting point\n            let local = {};\n            local[this._pointKey(from)] = from;\n            this._findConnected(local, notConnected, [from], true, value);\n            // connect to a connected cell\n            let tunnelFn = (this._options.topology == 6 ? this._tunnelToConnected6 : this._tunnelToConnected);\n            tunnelFn.call(this, to, from, connected, notConnected, value, connectionCallback);\n            // now all of local is connected\n            for (let k in local) {\n                let pp = local[k];\n                this._map[pp[0]][pp[1]] = value;\n                connected[k] = pp;\n                delete notConnected[k];\n            }\n        }\n        callback && this._serviceCallback(callback);\n    }\n    /**\n     * Find random points to connect. Search for the closest point in the larger space.\n     * This is to minimize the length of the passage while maintaining good performance.\n     */\n    _getFromTo(connected, notConnected) {\n        let from = [0, 0], to = [0, 0], d;\n        let connectedKeys = Object.keys(connected);\n        let notConnectedKeys = Object.keys(notConnected);\n        for (let i = 0; i < 5; i++) {\n            if (connectedKeys.length < notConnectedKeys.length) {\n                let keys = connectedKeys;\n                to = connected[keys[RNG.getUniformInt(0, keys.length - 1)]];\n                from = this._getClosest(to, notConnected);\n            }\n            else {\n                let keys = notConnectedKeys;\n                from = notConnected[keys[RNG.getUniformInt(0, keys.length - 1)]];\n                to = this._getClosest(from, connected);\n            }\n            d = (from[0] - to[0]) * (from[0] - to[0]) + (from[1] - to[1]) * (from[1] - to[1]);\n            if (d < 64) {\n                break;\n            }\n        }\n        // console.log(\">>> connected=\" + to + \" notConnected=\" + from + \" dist=\" + d);\n        return [from, to];\n    }\n    _getClosest(point, space) {\n        let minPoint = null;\n        let minDist = null;\n        for (let k in space) {\n            let p = space[k];\n            let d = (p[0] - point[0]) * (p[0] - point[0]) + (p[1] - point[1]) * (p[1] - point[1]);\n            if (minDist == null || d < minDist) {\n                minDist = d;\n                minPoint = p;\n            }\n        }\n        return minPoint;\n    }\n    _findConnected(connected, notConnected, stack, keepNotConnected, value) {\n        while (stack.length > 0) {\n            let p = stack.splice(0, 1)[0];\n            let tests;\n            if (this._options.topology == 6) {\n                tests = [\n                    [p[0] + 2, p[1]],\n                    [p[0] + 1, p[1] - 1],\n                    [p[0] - 1, p[1] - 1],\n                    [p[0] - 2, p[1]],\n                    [p[0] - 1, p[1] + 1],\n                    [p[0] + 1, p[1] + 1],\n                ];\n            }\n            else {\n                tests = [\n                    [p[0] + 1, p[1]],\n                    [p[0] - 1, p[1]],\n                    [p[0], p[1] + 1],\n                    [p[0], p[1] - 1]\n                ];\n            }\n            for (let i = 0; i < tests.length; i++) {\n                let key = this._pointKey(tests[i]);\n                if (connected[key] == null && this._freeSpace(tests[i][0], tests[i][1], value)) {\n                    connected[key] = tests[i];\n                    if (!keepNotConnected) {\n                        delete notConnected[key];\n                    }\n                    stack.push(tests[i]);\n                }\n            }\n        }\n    }\n    _tunnelToConnected(to, from, connected, notConnected, value, connectionCallback) {\n        let a, b;\n        if (from[0] < to[0]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        for (let xx = a[0]; xx <= b[0]; xx++) {\n            this._map[xx][a[1]] = value;\n            let p = [xx, a[1]];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback && a[0] < b[0]) {\n            connectionCallback(a, [b[0], a[1]]);\n        }\n        // x is now fixed\n        let x = b[0];\n        if (from[1] < to[1]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        for (let yy = a[1]; yy < b[1]; yy++) {\n            this._map[x][yy] = value;\n            let p = [x, yy];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback && a[1] < b[1]) {\n            connectionCallback([b[0], a[1]], [b[0], b[1]]);\n        }\n    }\n    _tunnelToConnected6(to, from, connected, notConnected, value, connectionCallback) {\n        let a, b;\n        if (from[0] < to[0]) {\n            a = from;\n            b = to;\n        }\n        else {\n            a = to;\n            b = from;\n        }\n        // tunnel diagonally until horizontally level\n        let xx = a[0];\n        let yy = a[1];\n        while (!(xx == b[0] && yy == b[1])) {\n            let stepWidth = 2;\n            if (yy < b[1]) {\n                yy++;\n                stepWidth = 1;\n            }\n            else if (yy > b[1]) {\n                yy--;\n                stepWidth = 1;\n            }\n            if (xx < b[0]) {\n                xx += stepWidth;\n            }\n            else if (xx > b[0]) {\n                xx -= stepWidth;\n            }\n            else if (b[1] % 2) {\n                // Won't step outside map if destination on is map's right edge\n                xx -= stepWidth;\n            }\n            else {\n                // ditto for left edge\n                xx += stepWidth;\n            }\n            this._map[xx][yy] = value;\n            let p = [xx, yy];\n            let pkey = this._pointKey(p);\n            connected[pkey] = p;\n            delete notConnected[pkey];\n        }\n        if (connectionCallback) {\n            connectionCallback(from, to);\n        }\n    }\n    _freeSpace(x, y, value) {\n        return x >= 0 && x < this._width && y >= 0 && y < this._height && this._map[x][y] == value;\n    }\n    _pointKey(p) { return p[0] + \".\" + p[1]; }\n}\n","import Dungeon from \"./dungeon.js\";\nimport { Room, Corridor } from \"./features.js\";\nimport RNG from \"../rng.js\";\nimport { DIRS } from \"../constants.js\";\nconst FEATURES = {\n    \"room\": Room,\n    \"corridor\": Corridor\n};\n/**\n * Random dungeon generator using human-like digging patterns.\n * Heavily based on Mike Anderson's ideas from the \"Tyrant\" algo, mentioned at\n * http://www.roguebasin.roguelikedevelopment.org/index.php?title=Dungeon-Building_Algorithm.\n */\nexport default class Digger extends Dungeon {\n    constructor(width, height, options = {}) {\n        super(width, height);\n        this._options = Object.assign({\n            roomWidth: [3, 9],\n            roomHeight: [3, 5],\n            corridorLength: [3, 10],\n            dugPercentage: 0.2,\n            timeLimit: 1000 /* we stop after this much time has passed (msec) */\n        }, options);\n        this._features = {\n            \"room\": 4,\n            \"corridor\": 4\n        };\n        this._map = [];\n        this._featureAttempts = 20; /* how many times do we try to create a feature on a suitable wall */\n        this._walls = {}; /* these are available for digging */\n        this._dug = 0;\n        this._digCallback = this._digCallback.bind(this);\n        this._canBeDugCallback = this._canBeDugCallback.bind(this);\n        this._isWallCallback = this._isWallCallback.bind(this);\n        this._priorityWallCallback = this._priorityWallCallback.bind(this);\n    }\n    create(callback) {\n        this._rooms = [];\n        this._corridors = [];\n        this._map = this._fillMap(1);\n        this._walls = {};\n        this._dug = 0;\n        let area = (this._width - 2) * (this._height - 2);\n        this._firstRoom();\n        let t1 = Date.now();\n        let priorityWalls;\n        do {\n            priorityWalls = 0;\n            let t2 = Date.now();\n            if (t2 - t1 > this._options.timeLimit) {\n                break;\n            }\n            /* find a good wall */\n            let wall = this._findWall();\n            if (!wall) {\n                break;\n            } /* no more walls */\n            let parts = wall.split(\",\");\n            let x = parseInt(parts[0]);\n            let y = parseInt(parts[1]);\n            let dir = this._getDiggingDirection(x, y);\n            if (!dir) {\n                continue;\n            } /* this wall is not suitable */\n            //\t\tconsole.log(\"wall\", x, y);\n            /* try adding a feature */\n            let featureAttempts = 0;\n            do {\n                featureAttempts++;\n                if (this._tryFeature(x, y, dir[0], dir[1])) { /* feature added */\n                    //if (this._rooms.length + this._corridors.length == 2) { this._rooms[0].addDoor(x, y); } /* first room oficially has doors */\n                    this._removeSurroundingWalls(x, y);\n                    this._removeSurroundingWalls(x - dir[0], y - dir[1]);\n                    break;\n                }\n            } while (featureAttempts < this._featureAttempts);\n            for (let id in this._walls) {\n                if (this._walls[id] > 1) {\n                    priorityWalls++;\n                }\n            }\n        } while (this._dug / area < this._options.dugPercentage || priorityWalls); /* fixme number of priority walls */\n        this._addDoors();\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this._map[i][j]);\n                }\n            }\n        }\n        this._walls = {};\n        this._map = [];\n        return this;\n    }\n    _digCallback(x, y, value) {\n        if (value == 0 || value == 2) { /* empty */\n            this._map[x][y] = 0;\n            this._dug++;\n        }\n        else { /* wall */\n            this._walls[x + \",\" + y] = 1;\n        }\n    }\n    _isWallCallback(x, y) {\n        if (x < 0 || y < 0 || x >= this._width || y >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _canBeDugCallback(x, y) {\n        if (x < 1 || y < 1 || x + 1 >= this._width || y + 1 >= this._height) {\n            return false;\n        }\n        return (this._map[x][y] == 1);\n    }\n    _priorityWallCallback(x, y) { this._walls[x + \",\" + y] = 2; }\n    ;\n    _firstRoom() {\n        let cx = Math.floor(this._width / 2);\n        let cy = Math.floor(this._height / 2);\n        let room = Room.createRandomCenter(cx, cy, this._options);\n        this._rooms.push(room);\n        room.create(this._digCallback);\n    }\n    /**\n     * Get a suitable wall\n     */\n    _findWall() {\n        let prio1 = [];\n        let prio2 = [];\n        for (let id in this._walls) {\n            let prio = this._walls[id];\n            if (prio == 2) {\n                prio2.push(id);\n            }\n            else {\n                prio1.push(id);\n            }\n        }\n        let arr = (prio2.length ? prio2 : prio1);\n        if (!arr.length) {\n            return null;\n        } /* no walls :/ */\n        let id = RNG.getItem(arr.sort()); // sort to make the order deterministic\n        delete this._walls[id];\n        return id;\n    }\n    /**\n     * Tries adding a feature\n     * @returns {bool} was this a successful try?\n     */\n    _tryFeature(x, y, dx, dy) {\n        let featureName = RNG.getWeightedValue(this._features);\n        let ctor = FEATURES[featureName];\n        let feature = ctor.createRandomAt(x, y, dx, dy, this._options);\n        if (!feature.isValid(this._isWallCallback, this._canBeDugCallback)) {\n            //\t\tconsole.log(\"not valid\");\n            //\t\tfeature.debug();\n            return false;\n        }\n        feature.create(this._digCallback);\n        //\tfeature.debug();\n        if (feature instanceof Room) {\n            this._rooms.push(feature);\n        }\n        if (feature instanceof Corridor) {\n            feature.createPriorityWalls(this._priorityWallCallback);\n            this._corridors.push(feature);\n        }\n        return true;\n    }\n    _removeSurroundingWalls(cx, cy) {\n        let deltas = DIRS[4];\n        for (let i = 0; i < deltas.length; i++) {\n            let delta = deltas[i];\n            let x = cx + delta[0];\n            let y = cy + delta[1];\n            delete this._walls[x + \",\" + y];\n            x = cx + 2 * delta[0];\n            y = cy + 2 * delta[1];\n            delete this._walls[x + \",\" + y];\n        }\n    }\n    /**\n     * Returns vector in \"digging\" direction, or false, if this does not exist (or is not unique)\n     */\n    _getDiggingDirection(cx, cy) {\n        if (cx <= 0 || cy <= 0 || cx >= this._width - 1 || cy >= this._height - 1) {\n            return null;\n        }\n        let result = null;\n        let deltas = DIRS[4];\n        for (let i = 0; i < deltas.length; i++) {\n            let delta = deltas[i];\n            let x = cx + delta[0];\n            let y = cy + delta[1];\n            if (!this._map[x][y]) { /* there already is another empty neighbor! */\n                if (result) {\n                    return null;\n                }\n                result = delta;\n            }\n        }\n        /* no empty neighbor */\n        if (!result) {\n            return null;\n        }\n        return [-result[0], -result[1]];\n    }\n    /**\n     * Find empty spaces surrounding rooms, and apply doors.\n     */\n    _addDoors() {\n        let data = this._map;\n        function isWallCallback(x, y) {\n            return (data[x][y] == 1);\n        }\n        ;\n        for (let i = 0; i < this._rooms.length; i++) {\n            let room = this._rooms[i];\n            room.clearDoors();\n            room.addDoors(isWallCallback);\n        }\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * Join lists with \"i\" and \"i+1\"\n */\nfunction addToList(i, L, R) {\n    R[L[i + 1]] = R[i];\n    L[R[i]] = L[i + 1];\n    R[i] = i + 1;\n    L[i + 1] = i;\n}\n/**\n * Remove \"i\" from its list\n */\nfunction removeFromList(i, L, R) {\n    R[L[i]] = R[i];\n    L[R[i]] = L[i];\n    R[i] = i;\n    L[i] = i;\n}\n/**\n * Maze generator - Eller's algorithm\n * See http://homepages.cwi.nl/~tromp/maze.html for explanation\n */\nexport default class EllerMaze extends Map {\n    create(callback) {\n        let map = this._fillMap(1);\n        let w = Math.ceil((this._width - 2) / 2);\n        let rand = 9 / 24;\n        let L = [];\n        let R = [];\n        for (let i = 0; i < w; i++) {\n            L.push(i);\n            R.push(i);\n        }\n        L.push(w - 1); /* fake stop-block at the right side */\n        let j;\n        for (j = 1; j + 3 < this._height; j += 2) {\n            /* one row */\n            for (let i = 0; i < w; i++) {\n                /* cell coords (will be always empty) */\n                let x = 2 * i + 1;\n                let y = j;\n                map[x][y] = 0;\n                /* right connection */\n                if (i != L[i + 1] && RNG.getUniform() > rand) {\n                    addToList(i, L, R);\n                    map[x + 1][y] = 0;\n                }\n                /* bottom connection */\n                if (i != L[i] && RNG.getUniform() > rand) {\n                    /* remove connection */\n                    removeFromList(i, L, R);\n                }\n                else {\n                    /* create connection */\n                    map[x][y + 1] = 0;\n                }\n            }\n        }\n        /* last row */\n        for (let i = 0; i < w; i++) {\n            /* cell coords (will be always empty) */\n            let x = 2 * i + 1;\n            let y = j;\n            map[x][y] = 0;\n            /* right connection */\n            if (i != L[i + 1] && (i == L[i] || RNG.getUniform() > rand)) {\n                /* dig right also if the cell is separated, so it gets connected to the rest of maze */\n                addToList(i, L, R);\n                map[x + 1][y] = 0;\n            }\n            removeFromList(i, L, R);\n        }\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                callback(i, j, map[i][j]);\n            }\n        }\n        return this;\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * @class Recursively divided maze, http://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_division_method\n * @augments ROT.Map\n */\nexport default class DividedMaze extends Map {\n    constructor() {\n        super(...arguments);\n        this._stack = [];\n        this._map = [];\n    }\n    create(callback) {\n        let w = this._width;\n        let h = this._height;\n        this._map = [];\n        for (let i = 0; i < w; i++) {\n            this._map.push([]);\n            for (let j = 0; j < h; j++) {\n                let border = (i == 0 || j == 0 || i + 1 == w || j + 1 == h);\n                this._map[i].push(border ? 1 : 0);\n            }\n        }\n        this._stack = [\n            [1, 1, w - 2, h - 2]\n        ];\n        this._process();\n        for (let i = 0; i < w; i++) {\n            for (let j = 0; j < h; j++) {\n                callback(i, j, this._map[i][j]);\n            }\n        }\n        this._map = [];\n        return this;\n    }\n    _process() {\n        while (this._stack.length) {\n            let room = this._stack.shift(); /* [left, top, right, bottom] */\n            this._partitionRoom(room);\n        }\n    }\n    _partitionRoom(room) {\n        let availX = [];\n        let availY = [];\n        for (let i = room[0] + 1; i < room[2]; i++) {\n            let top = this._map[i][room[1] - 1];\n            let bottom = this._map[i][room[3] + 1];\n            if (top && bottom && !(i % 2)) {\n                availX.push(i);\n            }\n        }\n        for (let j = room[1] + 1; j < room[3]; j++) {\n            let left = this._map[room[0] - 1][j];\n            let right = this._map[room[2] + 1][j];\n            if (left && right && !(j % 2)) {\n                availY.push(j);\n            }\n        }\n        if (!availX.length || !availY.length) {\n            return;\n        }\n        let x = RNG.getItem(availX);\n        let y = RNG.getItem(availY);\n        this._map[x][y] = 1;\n        let walls = [];\n        let w = [];\n        walls.push(w); /* left part */\n        for (let i = room[0]; i < x; i++) {\n            this._map[i][y] = 1;\n            w.push([i, y]);\n        }\n        w = [];\n        walls.push(w); /* right part */\n        for (let i = x + 1; i <= room[2]; i++) {\n            this._map[i][y] = 1;\n            w.push([i, y]);\n        }\n        w = [];\n        walls.push(w); /* top part */\n        for (let j = room[1]; j < y; j++) {\n            this._map[x][j] = 1;\n            w.push([x, j]);\n        }\n        w = [];\n        walls.push(w); /* bottom part */\n        for (let j = y + 1; j <= room[3]; j++) {\n            this._map[x][j] = 1;\n            w.push([x, j]);\n        }\n        let solid = RNG.getItem(walls);\n        for (let i = 0; i < walls.length; i++) {\n            let w = walls[i];\n            if (w == solid) {\n                continue;\n            }\n            let hole = RNG.getItem(w);\n            this._map[hole[0]][hole[1]] = 0;\n        }\n        this._stack.push([room[0], room[1], x - 1, y - 1]); /* left top */\n        this._stack.push([x + 1, room[1], room[2], y - 1]); /* right top */\n        this._stack.push([room[0], y + 1, x - 1, room[3]]); /* left bottom */\n        this._stack.push([x + 1, y + 1, room[2], room[3]]); /* right bottom */\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\n/**\n * Icey's Maze generator\n * See http://www.roguebasin.roguelikedevelopment.org/index.php?title=Simple_maze for explanation\n */\nexport default class IceyMaze extends Map {\n    constructor(width, height, regularity = 0) {\n        super(width, height);\n        this._regularity = regularity;\n        this._map = [];\n    }\n    create(callback) {\n        let width = this._width;\n        let height = this._height;\n        let map = this._fillMap(1);\n        width -= (width % 2 ? 1 : 2);\n        height -= (height % 2 ? 1 : 2);\n        let cx = 0;\n        let cy = 0;\n        let nx = 0;\n        let ny = 0;\n        let done = 0;\n        let blocked = false;\n        let dirs = [\n            [0, 0],\n            [0, 0],\n            [0, 0],\n            [0, 0]\n        ];\n        do {\n            cx = 1 + 2 * Math.floor(RNG.getUniform() * (width - 1) / 2);\n            cy = 1 + 2 * Math.floor(RNG.getUniform() * (height - 1) / 2);\n            if (!done) {\n                map[cx][cy] = 0;\n            }\n            if (!map[cx][cy]) {\n                this._randomize(dirs);\n                do {\n                    if (Math.floor(RNG.getUniform() * (this._regularity + 1)) == 0) {\n                        this._randomize(dirs);\n                    }\n                    blocked = true;\n                    for (let i = 0; i < 4; i++) {\n                        nx = cx + dirs[i][0] * 2;\n                        ny = cy + dirs[i][1] * 2;\n                        if (this._isFree(map, nx, ny, width, height)) {\n                            map[nx][ny] = 0;\n                            map[cx + dirs[i][0]][cy + dirs[i][1]] = 0;\n                            cx = nx;\n                            cy = ny;\n                            blocked = false;\n                            done++;\n                            break;\n                        }\n                    }\n                } while (!blocked);\n            }\n        } while (done + 1 < width * height / 4);\n        for (let i = 0; i < this._width; i++) {\n            for (let j = 0; j < this._height; j++) {\n                callback(i, j, map[i][j]);\n            }\n        }\n        this._map = [];\n        return this;\n    }\n    _randomize(dirs) {\n        for (let i = 0; i < 4; i++) {\n            dirs[i][0] = 0;\n            dirs[i][1] = 0;\n        }\n        switch (Math.floor(RNG.getUniform() * 4)) {\n            case 0:\n                dirs[0][0] = -1;\n                dirs[1][0] = 1;\n                dirs[2][1] = -1;\n                dirs[3][1] = 1;\n                break;\n            case 1:\n                dirs[3][0] = -1;\n                dirs[2][0] = 1;\n                dirs[1][1] = -1;\n                dirs[0][1] = 1;\n                break;\n            case 2:\n                dirs[2][0] = -1;\n                dirs[3][0] = 1;\n                dirs[0][1] = -1;\n                dirs[1][1] = 1;\n                break;\n            case 3:\n                dirs[1][0] = -1;\n                dirs[0][0] = 1;\n                dirs[3][1] = -1;\n                dirs[2][1] = 1;\n                break;\n        }\n    }\n    _isFree(map, x, y, width, height) {\n        if (x < 1 || y < 1 || x >= width || y >= height) {\n            return false;\n        }\n        return map[x][y];\n    }\n}\n","import Map from \"./map.js\";\nimport RNG from \"../rng.js\";\nimport { DIRS } from \"../constants.js\";\n/**\n * Dungeon generator which uses the \"orginal\" Rogue dungeon generation algorithm. See http://kuoi.com/~kamikaze/GameDesign/art07_rogue_dungeon.php\n * @author hyakugei\n */\nexport default class Rogue extends Map {\n    constructor(width, height, options) {\n        super(width, height);\n        this.map = [];\n        this.rooms = [];\n        this.connectedCells = [];\n        options = Object.assign({\n            cellWidth: 3,\n            cellHeight: 3 //     ie. as an array with min-max values for each direction....\n        }, options);\n        /*\n        Set the room sizes according to the over-all width of the map,\n        and the cell sizes.\n        */\n        if (!options.hasOwnProperty(\"roomWidth\")) {\n            options[\"roomWidth\"] = this._calculateRoomSize(this._width, options[\"cellWidth\"]);\n        }\n        if (!options.hasOwnProperty(\"roomHeight\")) {\n            options[\"roomHeight\"] = this._calculateRoomSize(this._height, options[\"cellHeight\"]);\n        }\n        this._options = options;\n    }\n    create(callback) {\n        this.map = this._fillMap(1);\n        this.rooms = [];\n        this.connectedCells = [];\n        this._initRooms();\n        this._connectRooms();\n        this._connectUnconnectedRooms();\n        this._createRandomRoomConnections();\n        this._createRooms();\n        this._createCorridors();\n        if (callback) {\n            for (let i = 0; i < this._width; i++) {\n                for (let j = 0; j < this._height; j++) {\n                    callback(i, j, this.map[i][j]);\n                }\n            }\n        }\n        return this;\n    }\n    _calculateRoomSize(size, cell) {\n        let max = Math.floor((size / cell) * 0.8);\n        let min = Math.floor((size / cell) * 0.25);\n        if (min < 2) {\n            min = 2;\n        }\n        if (max < 2) {\n            max = 2;\n        }\n        return [min, max];\n    }\n    _initRooms() {\n        // create rooms array. This is the \"grid\" list from the algo.\n        for (let i = 0; i < this._options.cellWidth; i++) {\n            this.rooms.push([]);\n            for (let j = 0; j < this._options.cellHeight; j++) {\n                this.rooms[i].push({ \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0, \"connections\": [], \"cellx\": i, \"celly\": j });\n            }\n        }\n    }\n    _connectRooms() {\n        //pick random starting grid\n        let cgx = RNG.getUniformInt(0, this._options.cellWidth - 1);\n        let cgy = RNG.getUniformInt(0, this._options.cellHeight - 1);\n        let idx;\n        let ncgx;\n        let ncgy;\n        let found = false;\n        let room;\n        let otherRoom;\n        let dirToCheck;\n        // find  unconnected neighbour cells\n        do {\n            //dirToCheck = [0, 1, 2, 3, 4, 5, 6, 7];\n            dirToCheck = [0, 2, 4, 6];\n            dirToCheck = RNG.shuffle(dirToCheck);\n            do {\n                found = false;\n                idx = dirToCheck.pop();\n                ncgx = cgx + DIRS[8][idx][0];\n                ncgy = cgy + DIRS[8][idx][1];\n                if (ncgx < 0 || ncgx >= this._options.cellWidth) {\n                    continue;\n                }\n                if (ncgy < 0 || ncgy >= this._options.cellHeight) {\n                    continue;\n                }\n                room = this.rooms[cgx][cgy];\n                if (room[\"connections\"].length > 0) {\n                    // as long as this room doesn't already coonect to me, we are ok with it.\n                    if (room[\"connections\"][0][0] == ncgx && room[\"connections\"][0][1] == ncgy) {\n                        break;\n                    }\n                }\n                otherRoom = this.rooms[ncgx][ncgy];\n                if (otherRoom[\"connections\"].length == 0) {\n                    otherRoom[\"connections\"].push([cgx, cgy]);\n                    this.connectedCells.push([ncgx, ncgy]);\n                    cgx = ncgx;\n                    cgy = ncgy;\n                    found = true;\n                }\n            } while (dirToCheck.length > 0 && found == false);\n        } while (dirToCheck.length > 0);\n    }\n    _connectUnconnectedRooms() {\n        //While there are unconnected rooms, try to connect them to a random connected neighbor\n        //(if a room has no connected neighbors yet, just keep cycling, you'll fill out to it eventually).\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        this.connectedCells = RNG.shuffle(this.connectedCells);\n        let room;\n        let otherRoom;\n        let validRoom;\n        for (let i = 0; i < this._options.cellWidth; i++) {\n            for (let j = 0; j < this._options.cellHeight; j++) {\n                room = this.rooms[i][j];\n                if (room[\"connections\"].length == 0) {\n                    let directions = [0, 2, 4, 6];\n                    directions = RNG.shuffle(directions);\n                    validRoom = false;\n                    do {\n                        let dirIdx = directions.pop();\n                        let newI = i + DIRS[8][dirIdx][0];\n                        let newJ = j + DIRS[8][dirIdx][1];\n                        if (newI < 0 || newI >= cw || newJ < 0 || newJ >= ch) {\n                            continue;\n                        }\n                        otherRoom = this.rooms[newI][newJ];\n                        validRoom = true;\n                        if (otherRoom[\"connections\"].length == 0) {\n                            break;\n                        }\n                        for (let k = 0; k < otherRoom[\"connections\"].length; k++) {\n                            if (otherRoom[\"connections\"][k][0] == i && otherRoom[\"connections\"][k][1] == j) {\n                                validRoom = false;\n                                break;\n                            }\n                        }\n                        if (validRoom) {\n                            break;\n                        }\n                    } while (directions.length);\n                    if (validRoom) {\n                        room[\"connections\"].push([otherRoom[\"cellx\"], otherRoom[\"celly\"]]);\n                    }\n                    else {\n                        console.log(\"-- Unable to connect room.\");\n                    }\n                }\n            }\n        }\n    }\n    _createRandomRoomConnections() {\n        // Empty for now.\n    }\n    _createRooms() {\n        let w = this._width;\n        let h = this._height;\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        let cwp = Math.floor(this._width / cw);\n        let chp = Math.floor(this._height / ch);\n        let roomw;\n        let roomh;\n        let roomWidth = this._options[\"roomWidth\"];\n        let roomHeight = this._options[\"roomHeight\"];\n        let sx;\n        let sy;\n        let otherRoom;\n        for (let i = 0; i < cw; i++) {\n            for (let j = 0; j < ch; j++) {\n                sx = cwp * i;\n                sy = chp * j;\n                if (sx == 0) {\n                    sx = 1;\n                }\n                if (sy == 0) {\n                    sy = 1;\n                }\n                roomw = RNG.getUniformInt(roomWidth[0], roomWidth[1]);\n                roomh = RNG.getUniformInt(roomHeight[0], roomHeight[1]);\n                if (j > 0) {\n                    otherRoom = this.rooms[i][j - 1];\n                    while (sy - (otherRoom[\"y\"] + otherRoom[\"height\"]) < 3) {\n                        sy++;\n                    }\n                }\n                if (i > 0) {\n                    otherRoom = this.rooms[i - 1][j];\n                    while (sx - (otherRoom[\"x\"] + otherRoom[\"width\"]) < 3) {\n                        sx++;\n                    }\n                }\n                let sxOffset = Math.round(RNG.getUniformInt(0, cwp - roomw) / 2);\n                let syOffset = Math.round(RNG.getUniformInt(0, chp - roomh) / 2);\n                while (sx + sxOffset + roomw >= w) {\n                    if (sxOffset) {\n                        sxOffset--;\n                    }\n                    else {\n                        roomw--;\n                    }\n                }\n                while (sy + syOffset + roomh >= h) {\n                    if (syOffset) {\n                        syOffset--;\n                    }\n                    else {\n                        roomh--;\n                    }\n                }\n                sx = sx + sxOffset;\n                sy = sy + syOffset;\n                this.rooms[i][j][\"x\"] = sx;\n                this.rooms[i][j][\"y\"] = sy;\n                this.rooms[i][j][\"width\"] = roomw;\n                this.rooms[i][j][\"height\"] = roomh;\n                for (let ii = sx; ii < sx + roomw; ii++) {\n                    for (let jj = sy; jj < sy + roomh; jj++) {\n                        this.map[ii][jj] = 0;\n                    }\n                }\n            }\n        }\n    }\n    _getWallPosition(aRoom, aDirection) {\n        let rx;\n        let ry;\n        let door;\n        if (aDirection == 1 || aDirection == 3) {\n            rx = RNG.getUniformInt(aRoom[\"x\"] + 1, aRoom[\"x\"] + aRoom[\"width\"] - 2);\n            if (aDirection == 1) {\n                ry = aRoom[\"y\"] - 2;\n                door = ry + 1;\n            }\n            else {\n                ry = aRoom[\"y\"] + aRoom[\"height\"] + 1;\n                door = ry - 1;\n            }\n            this.map[rx][door] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\n        }\n        else {\n            ry = RNG.getUniformInt(aRoom[\"y\"] + 1, aRoom[\"y\"] + aRoom[\"height\"] - 2);\n            if (aDirection == 2) {\n                rx = aRoom[\"x\"] + aRoom[\"width\"] + 1;\n                door = rx - 1;\n            }\n            else {\n                rx = aRoom[\"x\"] - 2;\n                door = rx + 1;\n            }\n            this.map[door][ry] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\n        }\n        return [rx, ry];\n    }\n    _drawCorridor(startPosition, endPosition) {\n        let xOffset = endPosition[0] - startPosition[0];\n        let yOffset = endPosition[1] - startPosition[1];\n        let xpos = startPosition[0];\n        let ypos = startPosition[1];\n        let tempDist;\n        let xDir;\n        let yDir;\n        let move; // 2 element array, element 0 is the direction, element 1 is the total value to move.\n        let moves = []; // a list of 2 element arrays\n        let xAbs = Math.abs(xOffset);\n        let yAbs = Math.abs(yOffset);\n        let percent = RNG.getUniform(); // used to split the move at different places along the long axis\n        let firstHalf = percent;\n        let secondHalf = 1 - percent;\n        xDir = xOffset > 0 ? 2 : 6;\n        yDir = yOffset > 0 ? 4 : 0;\n        if (xAbs < yAbs) {\n            // move firstHalf of the y offset\n            tempDist = Math.ceil(yAbs * firstHalf);\n            moves.push([yDir, tempDist]);\n            // move all the x offset\n            moves.push([xDir, xAbs]);\n            // move sendHalf of the  y offset\n            tempDist = Math.floor(yAbs * secondHalf);\n            moves.push([yDir, tempDist]);\n        }\n        else {\n            //  move firstHalf of the x offset\n            tempDist = Math.ceil(xAbs * firstHalf);\n            moves.push([xDir, tempDist]);\n            // move all the y offset\n            moves.push([yDir, yAbs]);\n            // move secondHalf of the x offset.\n            tempDist = Math.floor(xAbs * secondHalf);\n            moves.push([xDir, tempDist]);\n        }\n        this.map[xpos][ypos] = 0;\n        while (moves.length > 0) {\n            move = moves.pop();\n            while (move[1] > 0) {\n                xpos += DIRS[8][move[0]][0];\n                ypos += DIRS[8][move[0]][1];\n                this.map[xpos][ypos] = 0;\n                move[1] = move[1] - 1;\n            }\n        }\n    }\n    _createCorridors() {\n        // Draw Corridors between connected rooms\n        let cw = this._options.cellWidth;\n        let ch = this._options.cellHeight;\n        let room;\n        let connection;\n        let otherRoom;\n        let wall;\n        let otherWall;\n        for (let i = 0; i < cw; i++) {\n            for (let j = 0; j < ch; j++) {\n                room = this.rooms[i][j];\n                for (let k = 0; k < room[\"connections\"].length; k++) {\n                    connection = room[\"connections\"][k];\n                    otherRoom = this.rooms[connection[0]][connection[1]];\n                    // figure out what wall our corridor will start one.\n                    // figure out what wall our corridor will end on.\n                    if (otherRoom[\"cellx\"] > room[\"cellx\"]) {\n                        wall = 2;\n                        otherWall = 4;\n                    }\n                    else if (otherRoom[\"cellx\"] < room[\"cellx\"]) {\n                        wall = 4;\n                        otherWall = 2;\n                    }\n                    else if (otherRoom[\"celly\"] > room[\"celly\"]) {\n                        wall = 3;\n                        otherWall = 1;\n                    }\n                    else {\n                        wall = 1;\n                        otherWall = 3;\n                    }\n                    this._drawCorridor(this._getWallPosition(room, wall), this._getWallPosition(otherRoom, otherWall));\n                }\n            }\n        }\n    }\n}\n","import Arena from \"./arena.js\";\nimport Uniform from \"./uniform.js\";\nimport Cellular from \"./cellular.js\";\nimport Digger from \"./digger.js\";\nimport EllerMaze from \"./ellermaze.js\";\nimport DividedMaze from \"./dividedmaze.js\";\nimport IceyMaze from \"./iceymaze.js\";\nimport Rogue from \"./rogue.js\";\nexport default { Arena, Uniform, Cellular, Digger, EllerMaze, DividedMaze, IceyMaze, Rogue };\n","/**\n * Base noise generator\n */\nexport default class Noise {\n}\n","import Noise from \"./noise.js\";\nimport RNG from \"../rng.js\";\nimport { mod } from \"../util.js\";\nconst F2 = 0.5 * (Math.sqrt(3) - 1);\nconst G2 = (3 - Math.sqrt(3)) / 6;\n/**\n * A simple 2d implementation of simplex noise by Ondrej Zara\n *\n * Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\n * Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n */\nexport default class Simplex extends Noise {\n    /**\n     * @param gradients Random gradients\n     */\n    constructor(gradients = 256) {\n        super();\n        this._gradients = [\n            [0, -1],\n            [1, -1],\n            [1, 0],\n            [1, 1],\n            [0, 1],\n            [-1, 1],\n            [-1, 0],\n            [-1, -1]\n        ];\n        let permutations = [];\n        for (let i = 0; i < gradients; i++) {\n            permutations.push(i);\n        }\n        permutations = RNG.shuffle(permutations);\n        this._perms = [];\n        this._indexes = [];\n        for (let i = 0; i < 2 * gradients; i++) {\n            this._perms.push(permutations[i % gradients]);\n            this._indexes.push(this._perms[i] % this._gradients.length);\n        }\n    }\n    get(xin, yin) {\n        let perms = this._perms;\n        let indexes = this._indexes;\n        let count = perms.length / 2;\n        let n0 = 0, n1 = 0, n2 = 0, gi; // Noise contributions from the three corners\n        // Skew the input space to determine which simplex cell we're in\n        let s = (xin + yin) * F2; // Hairy factor for 2D\n        let i = Math.floor(xin + s);\n        let j = Math.floor(yin + s);\n        let t = (i + j) * G2;\n        let X0 = i - t; // Unskew the cell origin back to (x,y) space\n        let Y0 = j - t;\n        let x0 = xin - X0; // The x,y distances from the cell origin\n        let y0 = yin - Y0;\n        // For the 2D case, the simplex shape is an equilateral triangle.\n        // Determine which simplex we are in.\n        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n        if (x0 > y0) {\n            i1 = 1;\n            j1 = 0;\n        }\n        else { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n            i1 = 0;\n            j1 = 1;\n        } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n        // c = (3-sqrt(3))/6\n        let x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n        let y1 = y0 - j1 + G2;\n        let x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n        let y2 = y0 - 1 + 2 * G2;\n        // Work out the hashed gradient indices of the three simplex corners\n        let ii = mod(i, count);\n        let jj = mod(j, count);\n        // Calculate the contribution from the three corners\n        let t0 = 0.5 - x0 * x0 - y0 * y0;\n        if (t0 >= 0) {\n            t0 *= t0;\n            gi = indexes[ii + perms[jj]];\n            let grad = this._gradients[gi];\n            n0 = t0 * t0 * (grad[0] * x0 + grad[1] * y0);\n        }\n        let t1 = 0.5 - x1 * x1 - y1 * y1;\n        if (t1 >= 0) {\n            t1 *= t1;\n            gi = indexes[ii + i1 + perms[jj + j1]];\n            let grad = this._gradients[gi];\n            n1 = t1 * t1 * (grad[0] * x1 + grad[1] * y1);\n        }\n        let t2 = 0.5 - x2 * x2 - y2 * y2;\n        if (t2 >= 0) {\n            t2 *= t2;\n            gi = indexes[ii + 1 + perms[jj + 1]];\n            let grad = this._gradients[gi];\n            n2 = t2 * t2 * (grad[0] * x2 + grad[1] * y2);\n        }\n        // Add contributions from each corner to get the final noise value.\n        // The result is scaled to return values in the interval [-1,1].\n        return 70 * (n0 + n1 + n2);\n    }\n}\n","import Simplex from \"./simplex.js\";\nexport default { Simplex };\n","import { DIRS } from \"../constants.js\";\n/**\n * @class Abstract pathfinder\n * @param {int} toX Target X coord\n * @param {int} toY Target Y coord\n * @param {function} passableCallback Callback to determine map passability\n * @param {object} [options]\n * @param {int} [options.topology=8]\n */\nexport default class Path {\n    constructor(toX, toY, passableCallback, options = {}) {\n        this._toX = toX;\n        this._toY = toY;\n        this._passableCallback = passableCallback;\n        this._options = Object.assign({\n            topology: 8\n        }, options);\n        this._dirs = DIRS[this._options.topology];\n        if (this._options.topology == 8) { /* reorder dirs for more aesthetic result (vertical/horizontal first) */\n            this._dirs = [\n                this._dirs[0],\n                this._dirs[2],\n                this._dirs[4],\n                this._dirs[6],\n                this._dirs[1],\n                this._dirs[3],\n                this._dirs[5],\n                this._dirs[7]\n            ];\n        }\n    }\n    _getNeighbors(cx, cy) {\n        let result = [];\n        for (let i = 0; i < this._dirs.length; i++) {\n            let dir = this._dirs[i];\n            let x = cx + dir[0];\n            let y = cy + dir[1];\n            if (!this._passableCallback(x, y)) {\n                continue;\n            }\n            result.push([x, y]);\n        }\n        return result;\n    }\n}\n","import Path from \"./path.js\";\n/**\n * @class Simplified Dijkstra's algorithm: all edges have a value of 1\n * @augments ROT.Path\n * @see ROT.Path\n */\nexport default class Dijkstra extends Path {\n    constructor(toX, toY, passableCallback, options) {\n        super(toX, toY, passableCallback, options);\n        this._computed = {};\n        this._todo = [];\n        this._add(toX, toY, null);\n    }\n    /**\n     * Compute a path from a given point\n     * @see ROT.Path#compute\n     */\n    compute(fromX, fromY, callback) {\n        let key = fromX + \",\" + fromY;\n        if (!(key in this._computed)) {\n            this._compute(fromX, fromY);\n        }\n        if (!(key in this._computed)) {\n            return;\n        }\n        let item = this._computed[key];\n        while (item) {\n            callback(item.x, item.y);\n            item = item.prev;\n        }\n    }\n    /**\n     * Compute a non-cached value\n     */\n    _compute(fromX, fromY) {\n        while (this._todo.length) {\n            let item = this._todo.shift();\n            if (item.x == fromX && item.y == fromY) {\n                return;\n            }\n            let neighbors = this._getNeighbors(item.x, item.y);\n            for (let i = 0; i < neighbors.length; i++) {\n                let neighbor = neighbors[i];\n                let x = neighbor[0];\n                let y = neighbor[1];\n                let id = x + \",\" + y;\n                if (id in this._computed) {\n                    continue;\n                } /* already done */\n                this._add(x, y, item);\n            }\n        }\n    }\n    _add(x, y, prev) {\n        let obj = {\n            x: x,\n            y: y,\n            prev: prev\n        };\n        this._computed[x + \",\" + y] = obj;\n        this._todo.push(obj);\n    }\n}\n","import Path from \"./path.js\";\n/**\n * @class Simplified A* algorithm: all edges have a value of 1\n * @augments ROT.Path\n * @see ROT.Path\n */\nexport default class AStar extends Path {\n    constructor(toX, toY, passableCallback, options = {}) {\n        super(toX, toY, passableCallback, options);\n        this._todo = [];\n        this._done = {};\n    }\n    /**\n     * Compute a path from a given point\n     * @see ROT.Path#compute\n     */\n    compute(fromX, fromY, callback) {\n        this._todo = [];\n        this._done = {};\n        this._fromX = fromX;\n        this._fromY = fromY;\n        this._add(this._toX, this._toY, null);\n        while (this._todo.length) {\n            let item = this._todo.shift();\n            let id = item.x + \",\" + item.y;\n            if (id in this._done) {\n                continue;\n            }\n            this._done[id] = item;\n            if (item.x == fromX && item.y == fromY) {\n                break;\n            }\n            let neighbors = this._getNeighbors(item.x, item.y);\n            for (let i = 0; i < neighbors.length; i++) {\n                let neighbor = neighbors[i];\n                let x = neighbor[0];\n                let y = neighbor[1];\n                let id = x + \",\" + y;\n                if (id in this._done) {\n                    continue;\n                }\n                this._add(x, y, item);\n            }\n        }\n        let item = this._done[fromX + \",\" + fromY];\n        if (!item) {\n            return;\n        }\n        while (item) {\n            callback(item.x, item.y);\n            item = item.prev;\n        }\n    }\n    _add(x, y, prev) {\n        let h = this._distance(x, y);\n        let obj = {\n            x: x,\n            y: y,\n            prev: prev,\n            g: (prev ? prev.g + 1 : 0),\n            h: h\n        };\n        /* insert into priority queue */\n        let f = obj.g + obj.h;\n        for (let i = 0; i < this._todo.length; i++) {\n            let item = this._todo[i];\n            let itemF = item.g + item.h;\n            if (f < itemF || (f == itemF && h < item.h)) {\n                this._todo.splice(i, 0, obj);\n                return;\n            }\n        }\n        this._todo.push(obj);\n    }\n    _distance(x, y) {\n        switch (this._options.topology) {\n            case 4:\n                return (Math.abs(x - this._fromX) + Math.abs(y - this._fromY));\n                break;\n            case 6:\n                let dx = Math.abs(x - this._fromX);\n                let dy = Math.abs(y - this._fromY);\n                return dy + Math.max(0, (dx - dy) / 2);\n                break;\n            case 8:\n                return Math.max(Math.abs(x - this._fromX), Math.abs(y - this._fromY));\n                break;\n        }\n    }\n}\n","import Dijkstra from \"./dijkstra.js\";\nimport AStar from \"./astar.js\";\nexport default { Dijkstra, AStar };\n","/**\n * @class Asynchronous main loop\n * @param {ROT.Scheduler} scheduler\n */\nexport default class Engine {\n    constructor(scheduler) {\n        this._scheduler = scheduler;\n        this._lock = 1;\n    }\n    /**\n     * Start the main loop. When this call returns, the loop is locked.\n     */\n    start() { return this.unlock(); }\n    /**\n     * Interrupt the engine by an asynchronous action\n     */\n    lock() {\n        this._lock++;\n        return this;\n    }\n    /**\n     * Resume execution (paused by a previous lock)\n     */\n    unlock() {\n        if (!this._lock) {\n            throw new Error(\"Cannot unlock unlocked engine\");\n        }\n        this._lock--;\n        while (!this._lock) {\n            let actor = this._scheduler.next();\n            if (!actor) {\n                return this.lock();\n            } /* no actors */\n            let result = actor.act();\n            if (result && result.then) { /* actor returned a \"thenable\", looks like a Promise */\n                this.lock();\n                result.then(this.unlock.bind(this));\n            }\n        }\n        return this;\n    }\n}\n","import * as Color from \"./color.js\";\n;\n;\n;\n;\n/**\n * Lighting computation, based on a traditional FOV for multiple light sources and multiple passes.\n */\nexport default class Lighting {\n    constructor(reflectivityCallback, options = {}) {\n        this._reflectivityCallback = reflectivityCallback;\n        this._options = {};\n        options = Object.assign({\n            passes: 1,\n            emissionThreshold: 100,\n            range: 10\n        }, options);\n        this._lights = {};\n        this._reflectivityCache = {};\n        this._fovCache = {};\n        this.setOptions(options);\n    }\n    /**\n     * Adjust options at runtime\n     */\n    setOptions(options) {\n        Object.assign(this._options, options);\n        if (options && options.range) {\n            this.reset();\n        }\n        return this;\n    }\n    /**\n     * Set the used Field-Of-View algo\n     */\n    setFOV(fov) {\n        this._fov = fov;\n        this._fovCache = {};\n        return this;\n    }\n    /**\n     * Set (or remove) a light source\n     */\n    setLight(x, y, color) {\n        let key = x + \",\" + y;\n        if (color) {\n            this._lights[key] = (typeof (color) == \"string\" ? Color.fromString(color) : color);\n        }\n        else {\n            delete this._lights[key];\n        }\n        return this;\n    }\n    /**\n     * Remove all light sources\n     */\n    clearLights() { this._lights = {}; }\n    /**\n     * Reset the pre-computed topology values. Call whenever the underlying map changes its light-passability.\n     */\n    reset() {\n        this._reflectivityCache = {};\n        this._fovCache = {};\n        return this;\n    }\n    /**\n     * Compute the lighting\n     */\n    compute(lightingCallback) {\n        let doneCells = {};\n        let emittingCells = {};\n        let litCells = {};\n        for (let key in this._lights) { /* prepare emitters for first pass */\n            let light = this._lights[key];\n            emittingCells[key] = [0, 0, 0];\n            Color.add_(emittingCells[key], light);\n        }\n        for (let i = 0; i < this._options.passes; i++) { /* main loop */\n            this._emitLight(emittingCells, litCells, doneCells);\n            if (i + 1 == this._options.passes) {\n                continue;\n            } /* not for the last pass */\n            emittingCells = this._computeEmitters(litCells, doneCells);\n        }\n        for (let litKey in litCells) { /* let the user know what and how is lit */\n            let parts = litKey.split(\",\");\n            let x = parseInt(parts[0]);\n            let y = parseInt(parts[1]);\n            lightingCallback(x, y, litCells[litKey]);\n        }\n        return this;\n    }\n    /**\n     * Compute one iteration from all emitting cells\n     * @param emittingCells These emit light\n     * @param litCells Add projected light to these\n     * @param doneCells These already emitted, forbid them from further calculations\n     */\n    _emitLight(emittingCells, litCells, doneCells) {\n        for (let key in emittingCells) {\n            let parts = key.split(\",\");\n            let x = parseInt(parts[0]);\n            let y = parseInt(parts[1]);\n            this._emitLightFromCell(x, y, emittingCells[key], litCells);\n            doneCells[key] = 1;\n        }\n        return this;\n    }\n    /**\n     * Prepare a list of emitters for next pass\n     */\n    _computeEmitters(litCells, doneCells) {\n        let result = {};\n        for (let key in litCells) {\n            if (key in doneCells) {\n                continue;\n            } /* already emitted */\n            let color = litCells[key];\n            let reflectivity;\n            if (key in this._reflectivityCache) {\n                reflectivity = this._reflectivityCache[key];\n            }\n            else {\n                let parts = key.split(\",\");\n                let x = parseInt(parts[0]);\n                let y = parseInt(parts[1]);\n                reflectivity = this._reflectivityCallback(x, y);\n                this._reflectivityCache[key] = reflectivity;\n            }\n            if (reflectivity == 0) {\n                continue;\n            } /* will not reflect at all */\n            /* compute emission color */\n            let emission = [0, 0, 0];\n            let intensity = 0;\n            for (let i = 0; i < 3; i++) {\n                let part = Math.round(color[i] * reflectivity);\n                emission[i] = part;\n                intensity += part;\n            }\n            if (intensity > this._options.emissionThreshold) {\n                result[key] = emission;\n            }\n        }\n        return result;\n    }\n    /**\n     * Compute one iteration from one cell\n     */\n    _emitLightFromCell(x, y, color, litCells) {\n        let key = x + \",\" + y;\n        let fov;\n        if (key in this._fovCache) {\n            fov = this._fovCache[key];\n        }\n        else {\n            fov = this._updateFOV(x, y);\n        }\n        for (let fovKey in fov) {\n            let formFactor = fov[fovKey];\n            let result;\n            if (fovKey in litCells) { /* already lit */\n                result = litCells[fovKey];\n            }\n            else { /* newly lit */\n                result = [0, 0, 0];\n                litCells[fovKey] = result;\n            }\n            for (let i = 0; i < 3; i++) {\n                result[i] += Math.round(color[i] * formFactor);\n            } /* add light color */\n        }\n        return this;\n    }\n    /**\n     * Compute FOV (\"form factor\") for a potential light source at [x,y]\n     */\n    _updateFOV(x, y) {\n        let key1 = x + \",\" + y;\n        let cache = {};\n        this._fovCache[key1] = cache;\n        let range = this._options.range;\n        function cb(x, y, r, vis) {\n            let key2 = x + \",\" + y;\n            let formFactor = vis * (1 - r / range);\n            if (formFactor == 0) {\n                return;\n            }\n            cache[key2] = formFactor;\n        }\n        ;\n        this._fov.compute(x, y, range, cb.bind(this));\n        return cache;\n    }\n}\n","export { default as RNG } from \"./rng.js\";\nexport { default as Display } from \"./display/display.js\";\nexport { default as StringGenerator } from \"./stringgenerator.js\";\nexport { default as EventQueue } from \"./eventqueue.js\";\nexport { default as Scheduler } from \"./scheduler/index.js\";\nexport { default as FOV } from \"./fov/index.js\";\nexport { default as Map } from \"./map/index.js\";\nexport { default as Noise } from \"./noise/index.js\";\nexport { default as Path } from \"./path/index.js\";\nexport { default as Engine } from \"./engine.js\";\nexport { default as Lighting } from \"./lighting.js\";\nexport { DEFAULT_WIDTH, DEFAULT_HEIGHT, DIRS, KEYS } from \"./constants.js\";\nimport * as util from \"./util.js\";\nexport const Util = util;\nimport * as color from \"./color.js\";\nexport const Color = color;\nimport * as text from \"./text.js\";\nexport const Text = text;\n","import { Game } from './game'\nimport { World } from './ecs/world'\nimport { TlbWorld } from './tlb'\nimport { RotRenderer } from './renderer/renderer'\n\nconst world: TlbWorld = new World()\nconst renderer = RotRenderer.createAndMount(document.getElementById('tlb')!)\nconst game = new Game(world, renderer, 60)\ngame.init()\ngame.execute()\n","import { TlbWorld, registerComponents, registerSystems, registerResources } from './tlb'\nimport { State } from './game-states/state'\nimport { Running } from './game-states/running'\nimport { MapCreation } from './game-states/map-creation'\n\nimport { Renderer } from './renderer/renderer'\nimport { Queries } from './renderer/queries'\nimport { Uniform } from './random/distributions'\n\nexport class Game {\n  public computeTime: number = 0\n  public frames: number = 0\n  public renderTime: number = 0\n  public started: number = 0\n  public currentState: number = -1\n  public states: State[] = []\n\n  public rayCaster = new Queries()\n  public uniform = new Uniform('some seed')\n\n  public constructor(private readonly world: TlbWorld, public readonly renderer: Renderer, private readonly targetFps: number) {}\n\n  public init(): void {\n    registerComponents(this.world)\n    registerResources(this.world, this.uniform, this.renderer)\n    registerSystems(this.world, this.uniform, this.rayCaster, s => this.pushState(s))\n    const running = new Running(this.uniform)\n    const mapCreation = new MapCreation()\n    this.states = [running, mapCreation]\n  }\n\n  public execute(): void {\n    this.enterState()\n    this.started = Date.now()\n    this.tick()\n  }\n\n  private tick(): void {\n    if (this.currentState != this.states.length - 1) {\n      this.enterState()\n    }\n    const state = this.states[this.currentState]\n    let msLeft = 1000 / this.targetFps\n\n    // update all resources (io, clipping, etc...) and render afterwards\n    const startRender = Date.now()\n    this.world.updateResources()\n    this.renderer.render(this.world)\n    const renderDelta = Date.now() - startRender\n    msLeft -= renderDelta\n    this.renderTime += renderDelta\n\n    state.update(this.world, s => this.pushState(s))\n    while (true) {\n      const start = Date.now()\n      this.world.updateSystems()\n      const delta = Date.now() - start\n      msLeft -= delta\n      this.computeTime += delta\n\n      if (state.isFrameLocked() || state.isDone(this.world) || msLeft < delta) {\n        break\n      }\n    }\n\n    if (this.currentState < this.states.length - 1) {\n      state.stop(this.world)\n    } else if (state.isDone(this.world)) {\n      state.stop(this.world)\n      this.states.pop()\n      if (this.states.length === 0) {\n        return\n      }\n    }\n\n    this.frames++\n    if (this.frames % 100 === 0) {\n      console.log(`${this.mspf.toFixed(2)} ms per frame @${this.fps.toFixed(1)} FPS`)\n      console.log(`(computation, rendering) = (${this.mscpf.toFixed(2)}, ${this.msrpf.toFixed(2)}) ms`)\n      console.log(`Entities: ${this.world.entityCount}`)\n      this.frames = 0\n      this.computeTime = 0\n      this.renderTime = 0\n      this.started = Date.now()\n    }\n\n    requestAnimationFrame(() => this.tick())\n  }\n\n  public get fps(): number {\n    return this.frames / ((Date.now() - this.started) / 1000)\n  }\n\n  public get mspf(): number {\n    return (this.computeTime + this.renderTime) / this.frames\n  }\n\n  public get msrpf(): number {\n    return this.renderTime / this.frames\n  }\n\n  public get mscpf(): number {\n    return this.computeTime / this.frames\n  }\n\n  private pushState(state: State): void {\n    this.states.push(state)\n  }\n\n  private enterState(): void {\n    this.currentState = this.states.length - 1\n    this.states[this.currentState].start(this.world)\n  }\n}\n","import { World } from './ecs/world'\nimport { VectorStorage, MapStorage, SetStorage, SingletonStorage } from './ecs/storage'\nimport { System } from './ecs/system'\nimport { Resource } from './ecs/resource'\n\nimport { AgeComponent } from './components/age'\nimport { AssetComponent } from './components/asset'\nimport { CharacterStatsComponent } from './components/character-stats'\nimport { CharacterTypeComponent } from './components/character-type'\nimport { FeatureComponent } from './components/feature'\nimport { FovComponent } from './components/fov'\nimport { GroundComponent } from './components/ground'\nimport { PositionComponent } from './components/position'\nimport { RegionComponent, StructureComponent } from './components/region'\n\nimport { Fov } from './systems/fov'\nimport { FreeModeControl } from './systems/free-mode-control'\nimport { Npc } from './systems/npc'\nimport { PlayerControl } from './systems/player-control'\nimport { PlayerInteraction } from './systems/player-interaction'\nimport { RegionBuilder } from './systems/region-builder'\nimport { PlayerRoundControl } from './systems/player-round-control'\nimport { Trigger } from './systems/trigger'\nimport { Script } from './systems/script'\n\nimport { WorldMapResource } from './resources/world-map'\nimport { ViewportResource } from './resources/viewport'\nimport { InputResource } from './resources/input'\nimport { UIResource } from './resources/ui'\nimport { LogResource } from './resources/log'\n\nimport { Uniform } from './random/distributions'\n\nimport { Renderer } from './renderer/renderer'\nimport { Queries } from './renderer/queries'\nimport { State } from './game-states/state'\nimport { OverlayComponent } from './components/overlay'\nimport { TakeTurnComponent } from './components/rounds'\nimport { ScriptComponent } from './components/script'\nimport { AiComponent } from './components/ai'\nimport { AiRoundControl } from './systems/ai-round-control'\nimport { TriggersComponent, TriggeredByComponent } from './components/trigger'\nimport { ActiveEffectsComponent } from './components/effects'\nimport { InventoryComponent, ItemComponent, EquipedItemsComponent } from './components/items'\nimport { StartRound } from './systems/start-round'\nimport { DialogComponent } from './components/dialog'\nimport { LoreComponent } from './components/lore'\nimport { ProgressResource } from './resources/progress'\nimport { QuestComponent } from './components/quest'\nexport type ComponentName =\n  | 'active'\n  | 'age'\n  | 'ai'\n  | 'asset'\n  | 'character-stats'\n  | 'character-type'\n  | 'dead'\n  | 'dialog'\n  | 'effect'\n  | 'equiped-items'\n  | 'feature'\n  | 'fov'\n  | 'free-mode-anchor'\n  | 'ground'\n  | 'inventory'\n  | 'item'\n  | 'lore'\n  | 'npc'\n  | 'overlay'\n  | 'player'\n  | 'position'\n  | 'region'\n  | 'quest'\n  | 'structure'\n  | 'script'\n  | 'active-effects'\n  | 'spawn'\n  | 'start-turn'\n  | 'take-turn'\n  | 'took-turn'\n  | 'triggered-by'\n  | 'triggers'\n  | 'viewport-focus'\n  | 'wait-turn'\nexport type SystemName =\n  | 'ai-round-control'\n  | 'start-round'\n  | 'fov'\n  | 'free-mode-control'\n  | 'info-popup'\n  | 'npc'\n  | 'player-control'\n  | 'player-interaction'\n  | 'player-round-control'\n  | 'region-builder'\n  | 'script'\n  | 'trigger'\nexport type ResourceName = 'input' | 'map' | 'viewport' | 'ui' | 'log' | 'progress'\n\nexport type TlbWorld = World<ComponentName, SystemName, ResourceName>\nexport type TlbResource = Resource<ComponentName, SystemName, ResourceName>\nexport type TlbSystem = System<ComponentName, SystemName, ResourceName>\nexport type PushState = (s: State) => void\n\nexport function registerComponents<S, R>(world: World<ComponentName, S, R>): void {\n  world.registerComponentStorage('active', new SetStorage())\n  world.registerComponentStorage('age', new MapStorage<AgeComponent>())\n  world.registerComponentStorage('ai', new MapStorage<AiComponent>())\n  world.registerComponentStorage('asset', new MapStorage<AssetComponent>())\n  world.registerComponentStorage('character-stats', new MapStorage<CharacterStatsComponent>())\n  world.registerComponentStorage('character-type', new MapStorage<CharacterTypeComponent>())\n  world.registerComponentStorage('dead', new SetStorage())\n  world.registerComponentStorage('dialog', new MapStorage<DialogComponent>())\n  world.registerComponentStorage('feature', new VectorStorage<FeatureComponent>())\n  world.registerComponentStorage('fov', new MapStorage<FovComponent>())\n  world.registerComponentStorage('free-mode-anchor', new SingletonStorage<{}>())\n  world.registerComponentStorage('ground', new MapStorage<GroundComponent>())\n  world.registerComponentStorage('inventory', new MapStorage<InventoryComponent>())\n  world.registerComponentStorage('structure', new MapStorage<StructureComponent>())\n  world.registerComponentStorage('lore', new MapStorage<LoreComponent>())\n  world.registerComponentStorage('equiped-items', new MapStorage<EquipedItemsComponent>())\n  world.registerComponentStorage('item', new MapStorage<ItemComponent>())\n  world.registerComponentStorage('npc', new SetStorage())\n  world.registerComponentStorage('overlay', new MapStorage<OverlayComponent>())\n  world.registerComponentStorage('quest', new MapStorage<QuestComponent>())\n  world.registerComponentStorage('player', new SingletonStorage<{}>())\n  world.registerComponentStorage('position', new VectorStorage<PositionComponent>())\n  world.registerComponentStorage('region', new MapStorage<RegionComponent>())\n  world.registerComponentStorage('script', new MapStorage<ScriptComponent>())\n  world.registerComponentStorage('active-effects', new MapStorage<ActiveEffectsComponent>())\n  world.registerComponentStorage('spawn', new SingletonStorage<{}>())\n  world.registerComponentStorage('take-turn', new MapStorage<TakeTurnComponent>())\n  world.registerComponentStorage('took-turn', new SetStorage())\n  world.registerComponentStorage('start-turn', new SetStorage())\n  world.registerComponentStorage('triggered-by', new MapStorage<TriggeredByComponent>())\n  world.registerComponentStorage('triggers', new MapStorage<TriggersComponent>())\n  world.registerComponentStorage('viewport-focus', new SingletonStorage<{}>())\n  world.registerComponentStorage('wait-turn', new SetStorage())\n}\n\nexport function registerResources(\n  world: World<ComponentName, SystemName, ResourceName>,\n  uniform: Uniform,\n  renderer: Renderer,\n  worldWidth: number = 256\n): void {\n  world.registerResource(new WorldMapResource(worldWidth))\n  world.registerResource(new ViewportResource(renderer.boundaries))\n  world.registerResource(new InputResource(e => renderer.eventToPosition(e)))\n  world.registerResource(new UIResource(uniform))\n  world.registerResource(new LogResource())\n  world.registerResource(new ProgressResource())\n}\n\nexport function registerSystems(\n  world: World<ComponentName, SystemName, ResourceName>,\n  uniform: Uniform,\n  queries: Queries,\n  pushState: PushState\n): void {\n  world.registerSystem('ai-round-control', new AiRoundControl(queries, uniform))\n  world.registerSystem('fov', new Fov(queries))\n  world.registerSystem('free-mode-control', new FreeModeControl())\n  world.registerSystem('npc', new Npc(queries, uniform, pushState))\n  world.registerSystem('player-control', new PlayerControl())\n  world.registerSystem('player-interaction', new PlayerInteraction(pushState))\n  world.registerSystem('player-round-control', new PlayerRoundControl(queries, pushState, uniform))\n  world.registerSystem('region-builder', new RegionBuilder(uniform))\n  world.registerSystem('script', new Script())\n  world.registerSystem('trigger', new Trigger(uniform, pushState))\n  world.registerSystem('start-round', new StartRound(uniform))\n}\n","import { Entity } from './entity'\n\nexport interface Storage<T> {\n  insert(entity: Entity, value: T): void\n  get(entity: Entity): T | undefined\n  remove(entity: Entity): T | undefined\n  has(entity: Entity): boolean\n\n  foreach(f: (entity: Entity, value: T) => void): void\n  first(): Entity | undefined\n  clear(): void\n  size(): number\n}\n\nexport class SetStorage implements Storage<{}> {\n  private data: Set<number> = new Set()\n\n  public size(): number {\n    return this.data.size\n  }\n\n  public insert(entity: Entity, _: {}): void {\n    this.data.add(entity)\n  }\n\n  public clear(): void {\n    this.data.clear()\n  }\n\n  public get(entity: Entity): {} | undefined {\n    return this.data.has(entity) ? {} : undefined\n  }\n\n  public remove(entity: Entity): {} | undefined {\n    return this.data.delete(entity) ? {} : undefined\n  }\n\n  public has(entity: Entity): boolean {\n    return this.data.has(entity)\n  }\n\n  public foreach(f: (entity: Entity, value: {}) => void): void {\n    this.data.forEach(v => f(v, {}))\n  }\n\n  public first(): Entity | undefined {\n    return this.data.keys().next().value\n  }\n}\n\nexport class SingletonStorage<T> implements Storage<T> {\n  private datum: Entity | undefined = undefined\n  private value: T | undefined = undefined\n\n  public size(): number {\n    return this.datum !== undefined ? 1 : 0\n  }\n\n  public insert(entity: Entity, value: T): void {\n    this.datum = entity\n    this.value = value\n  }\n\n  public clear(): void {\n    this.datum = undefined\n  }\n\n  public get(entity: Entity): T | undefined {\n    return this.datum === entity ? this.value : undefined\n  }\n\n  public remove(entity: Entity): T | undefined {\n    if (this.datum === entity) {\n      this.datum = undefined\n      return this.value\n    }\n    return undefined\n  }\n\n  public has(entity: Entity): boolean {\n    return this.datum === entity\n  }\n\n  public foreach(f: (entity: Entity, value: T) => void): void {\n    if (this.datum !== undefined) {\n      f(this.datum, this.value!)\n    }\n  }\n\n  public first(): Entity | undefined {\n    return this.datum\n  }\n}\n\nexport class MapStorage<T> implements Storage<T> {\n  private data: Map<number, T> = new Map()\n\n  public size(): number {\n    return this.data.size\n  }\n\n  public insert(entity: Entity, value: T): void {\n    this.data.set(entity, value)\n  }\n\n  public clear(): void {\n    this.data.clear()\n  }\n\n  public get(entity: Entity): T | undefined {\n    return this.data.get(entity)\n  }\n\n  public remove(entity: Entity): T | undefined {\n    const value = this.get(entity)\n    this.data.delete(entity)\n    return value\n  }\n\n  public has(entity: Entity): boolean {\n    return this.data.has(entity)\n  }\n\n  public foreach(f: (entity: Entity, value: T) => void): void {\n    this.data.forEach((value, entity) => f(entity, value))\n  }\n\n  public first(): Entity | undefined {\n    return this.data.keys().next().value\n  }\n}\n\nexport class VectorStorage<T> implements Storage<T> {\n  private data: (T | undefined)[] = []\n  private count: number = 0\n\n  public size(): number {\n    return this.count\n  }\n\n  public insert(entity: Entity, value: T): void {\n    if (this.data[entity] === undefined) {\n      this.count++\n    }\n    this.data[entity] = value\n  }\n\n  public clear(): void {\n    this.data = []\n  }\n\n  public get(entity: Entity): T | undefined {\n    return this.data[entity]\n  }\n\n  public remove(entity: Entity): T | undefined {\n    if (this.data[entity] !== undefined) {\n      this.count--\n    }\n    const value = this.get(entity)\n    delete this.data[entity]\n    return value\n  }\n\n  public has(entity: Entity): boolean {\n    return this.data[entity] !== undefined\n  }\n\n  public foreach(f: (entity: Entity, value: T) => void): void {\n    for (let entity = 0; entity < this.data.length; entity++) {\n      const value = this.data[entity]\n      if (value !== undefined) {\n        f(entity, value)\n      }\n    }\n  }\n\n  public first(): Entity | undefined {\n    for (let entity = 0; entity < this.data.length; entity++) {\n      const value = this.data[entity]\n      if (value !== undefined) {\n        return entity\n      }\n    }\n    return undefined\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { FovComponent } from '../components/fov'\nimport { Queries } from '../renderer/queries'\nimport { Entity } from '../ecs/entity'\n\nexport class Fov implements TlbSystem {\n  public readonly components: ComponentName[] = ['fov', 'position']\n\n  public constructor(public readonly queries: Queries) {}\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const fov = world.getComponent<FovComponent>(entity, 'fov')!\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    fov.fov.clear()\n    this.queries.fov(world, position.level, position.position, p => fov.fov.set(p))\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { Input, InputResource } from '../resources/input'\nimport { Entity } from '../ecs/entity'\n\nexport class FreeModeControl implements TlbSystem {\n  public readonly components: ComponentName[] = ['free-mode-anchor', 'position']\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const input: Input = world.getResource<InputResource>('input')\n    const delta = input.createMovementDelta()\n    if (delta.squaredLength() > 0) {\n      const newPosition = position.position.add(delta)\n      world.editEntity(entity).withComponent<PositionComponent>('position', { level: position.level, position: newPosition })\n    }\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { State } from '../game-states/state'\nimport { Entity } from '../ecs/entity'\nimport { AiComponent } from '../components/ai'\nimport { turnBasedEntities } from '../component-reducers/turn-based'\nimport { UIResource, runDialog, UI } from '../resources/ui'\nimport { Random } from '../random'\nimport { engage } from '../component-reducers/ai'\nimport { Queries } from '../renderer/queries'\nimport { isAuthorized, authorize } from '../component-reducers/region'\nimport { Distribution } from '../random/distributions'\n\nexport class Npc implements TlbSystem {\n  public readonly components: ComponentName[] = ['npc', 'ai', 'position']\n  private readonly random: Random\n\n  public constructor(\n    public readonly queries: Queries,\n    public readonly distribution: Distribution,\n    public readonly pushState: (state: State) => void\n  ) {\n    this.random = new Random(distribution)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const ai = world.getComponent<AiComponent>(entity, 'ai')!\n\n    const ui: UI = world.getResource<UIResource>('ui')\n\n    if (ai.state === 'idle' && !ui.isModal) {\n      if (ai.interest === undefined) {\n        this.findInterest(world, ai, position)\n      } else {\n        this.tryToAuthorizeInterest(world, ai, position)\n      }\n      this.confrontInterest(world, entity, ai, position)\n    }\n  }\n\n  private findInterest(world: TlbWorld, ai: AiComponent, position: PositionComponent): void {\n    world.getStorage('player').foreach(player => {\n      if (!isAuthorized(world, position, player)) {\n        const playerPosition = world.getComponent<PositionComponent>(player, 'position')\n        if (\n          playerPosition !== undefined &&\n          playerPosition.level === position.level &&\n          playerPosition.position.minus(position.position).l1() < 10\n        ) {\n          const path = this.queries.los(world, position.level, position.position, playerPosition.position, {})\n          if (path !== undefined) {\n            ai.interest = player\n          }\n        }\n      }\n    })\n  }\n\n  private tryToAuthorizeInterest(world: TlbWorld, ai: AiComponent, position: PositionComponent): void {\n    if (isAuthorized(world, position, ai.interest!)) {\n      ai.interest = undefined\n      ai.distrust = 0\n    }\n  }\n\n  private confrontInterest(world: TlbWorld, entity: Entity, ai: AiComponent, position: PositionComponent): void {\n    if (ai.interest !== undefined) {\n      const othersAlreadyFighting = turnBasedEntities(world) > 0\n      if (othersAlreadyFighting) {\n        engage(world, ai, entity, ai.interest, this.pushState)\n      } else {\n        if (ai.distrust > 9) {\n          const result = runDialog(\n            world.getResource<UIResource>('ui'),\n            world,\n            this.random,\n            'restrictedAreaCheck',\n            ai.interest,\n            entity,\n            this.pushState\n          )\n          if (result !== undefined) {\n            if (result.type === 'authorized') {\n              authorize(world, position, ai.interest!)\n              ai.interest = undefined\n              ai.distrust = 0\n            } else {\n              engage(world, ai, entity, ai.interest, this.pushState)\n            }\n          }\n        } else {\n          ai.distrust += 1\n        }\n      }\n    }\n  }\n}\n","import { Vector } from './vector'\nimport { Shape } from '../geometry/shape'\nimport { tail } from '../array-utils'\n\nexport interface Space<A> {\n  get(pos: Vector): A | undefined\n  set(pos: Vector, object: A): void\n  setAll(shape: Shape, object: A): void\n  remove(pos: Vector): A | undefined\n}\n\nexport class DiscreteSpace<A> implements Space<A> {\n  private readonly objects: A[]\n\n  public constructor(public readonly width: number) {\n    this.objects = new Array(width * width)\n  }\n\n  public get(pos: Vector): A | undefined {\n    return this.objects[pos.index(this.width)]\n  }\n\n  public set(pos: Vector, object: A): void {\n    this.objects[pos.index(this.width)] = object\n  }\n\n  public setAll(shape: Shape, object: A): void {\n    shape.foreach(pos => this.set(pos, object))\n  }\n\n  public remove(pos: Vector): A | undefined {\n    const index = pos.index(this.width)\n    const oldValue = this.objects[index]\n    delete this.objects[index]\n    return oldValue\n  }\n}\n\nexport class DiscreteStackSpace<A> implements Space<A> {\n  private readonly objects: A[][]\n\n  public constructor(public readonly width: number) {\n    this.objects = new Array(width * width)\n  }\n\n  public get(pos: Vector): A | undefined {\n    const array = this.objects[pos.index(this.width)]\n    if (array !== undefined) {\n      return tail(array)\n    }\n    return undefined\n  }\n\n  public set(pos: Vector, object: A): void {\n    let array = this.objects[pos.index(this.width)]\n    if (array !== undefined) {\n      array.push(object)\n    } else {\n      array = [object]\n    }\n    this.objects[pos.index(this.width)] = array\n  }\n\n  public setAll(shape: Shape, object: A): void {\n    shape.foreach(pos => this.set(pos, object))\n  }\n\n  public remove(pos: Vector): A | undefined {\n    const array = this.objects[pos.index(this.width)]\n    if (array !== undefined) {\n      return array.pop()\n    }\n    return undefined\n  }\n}\n","import { Direction } from './direction'\n\nexport class Vector {\n  public static fromDirection(direction: Direction): Vector {\n    switch (direction) {\n      case 'up':\n        return new Vector([0, -1])\n      case 'right':\n        return new Vector([1, 0])\n      case 'down':\n        return new Vector([0, 1])\n      case 'left':\n        return new Vector([-1, 0])\n    }\n  }\n\n  public static interpolate(a: Vector, b: Vector, alpha: number): Vector {\n    return a.add(b.minus(a).mult(alpha))\n  }\n  public readonly coordinates: [number, number]\n\n  public constructor(coords: [number, number]) {\n    this.coordinates = coords\n  }\n\n  public get key(): string {\n    return this.coordinates.join(',')\n  }\n\n  public index(width: number): number {\n    return (Math.floor(this.x) % width) + Math.floor(this.y) * width\n  }\n\n  public get center(): Vector {\n    return this.add(new Vector([0.5, 0.25]))\n  }\n\n  public get x(): number {\n    return this.coordinates[0]\n  }\n\n  public get fX(): number {\n    return Math.floor(this.coordinates[0])\n  }\n\n  public get y(): number {\n    return this.coordinates[1]\n  }\n\n  public get fY(): number {\n    return Math.floor(this.coordinates[1])\n  }\n\n  public equals(other: Vector): boolean {\n    return this.x === other.x && this.y === other.y\n  }\n\n  public add(other: Vector): Vector {\n    return new Vector([this.x + other.x, this.y + other.y])\n  }\n\n  public minus(other: Vector): Vector {\n    return new Vector([this.x - other.x, this.y - other.y])\n  }\n\n  public mult(scale: number): Vector {\n    return new Vector([this.x * scale, this.y * scale])\n  }\n\n  public abs(): Vector {\n    return new Vector([Math.abs(this.x), Math.abs(this.y)])\n  }\n\n  public bounds(other: Vector): boolean {\n    return Math.abs(other.x) < Math.abs(this.x) && Math.abs(other.y) < Math.abs(this.y)\n  }\n\n  public perpendicular(): Vector {\n    return new Vector([-this.y, this.x])\n  }\n\n  public squaredLength(): number {\n    return this.x * this.x + this.y * this.y\n  }\n\n  public length(): number {\n    return Math.sqrt(this.squaredLength())\n  }\n\n  public l1(): number {\n    return Math.abs(this.x) + Math.abs(this.y)\n  }\n\n  public lN(): number {\n    return Math.max(Math.abs(this.x), Math.abs(this.y))\n  }\n\n  public normalize(): Vector {\n    return this.mult(1.0 / this.length())\n  }\n\n  public isNan(): boolean {\n    return Number.isNaN(this.x) || Number.isNaN(this.y)\n  }\n}\n","import { Action, SelectedAction } from '../../components/action'\nimport { Vector } from '../../spatial'\nimport { Renderer } from '../../renderer/renderer'\nimport { primary, gray } from '../../renderer/palettes'\nimport { subactionStringify } from '../../component-reducers/subaction-stringify'\n\nimport { TlbWorld } from '../../tlb'\n\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Selector, ItemSelector } from '../selector'\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { KeyboardCommand } from '../../resources/input'\n\nexport interface SelectableAction {\n  owner?: string\n  entity: number\n  action: Action\n}\n\nfunction renderActions(renderer: Renderer, content: Rectangle, actions: SelectableAction[], hovered: number | undefined): void {\n  let row = 0\n  actions.forEach((a, index) => {\n    let text: string\n    const cooldown = a.action.cooldown ? ` (${a.action.cooldown})` : ''\n    if (a.owner) {\n      text = `${row + 1} ${a.owner} ${a.action.name}${cooldown}`\n    } else {\n      text = `${row + 1} ${a.action.name}${cooldown}`\n    }\n    renderer.text(\n      text,\n      content.topLeft.add(new Vector([0, row])),\n      a.action.cooldown ? gray[2] : primary[1],\n      hovered === index ? gray[1] : undefined\n    )\n    row++\n  })\n}\nexport class ActionSelectorFullView implements TabView, Selector<SelectedAction> {\n  private readonly actions: Rectangle\n  private readonly descriptions: Rectangle\n\n  public readonly selector: ItemSelector<SelectableAction>\n\n  public constructor(public readonly content: Rectangle, public readonly selectableActions: SelectableAction[]) {\n    const width = Math.floor(content.width / 2)\n    this.actions = new Rectangle(content.left, content.top, width, content.height)\n    this.descriptions = new Rectangle(this.actions.right, content.top, content.width - width, content.height)\n    this.selector = new ItemSelector(this.selectableActions)\n  }\n\n  public render(renderer: Renderer) {\n    this.renderActions(renderer)\n    this.renderDescription(renderer)\n  }\n\n  public get selected(): SelectedAction | undefined {\n    const selected = this.selector.selected\n    if (selected && !selected.action.cooldown) {\n      return selected\n    }\n    return undefined\n  }\n\n  public get hovered(): SelectedAction | undefined {\n    return this.selector.hovered\n  }\n\n  public get length(): number {\n    return this.selector.length\n  }\n\n  public update(world: TlbWorld) {\n    this.selector.update(world, this.actions)\n  }\n\n  private renderActions(renderer: Renderer) {\n    renderActions(renderer, this.content, this.selectableActions, this.selector.hoveredIndex)\n  }\n\n  private renderDescription(renderer: Renderer) {\n    const hoveredAction = this.selector.hovered\n    if (hoveredAction !== undefined) {\n      const { name, cost, subActions } = hoveredAction.action\n      renderer.text(name, this.descriptions.topLeft, primary[1])\n      switch (cost) {\n        case 'action':\n          renderer.text('costs action', this.descriptions.topLeft.add(new Vector([0, 1])), primary[1])\n          break\n        case 'movement':\n          renderer.text('costs movement', this.descriptions.topLeft.add(new Vector([0, 1])), primary[1])\n          break\n        case 'all':\n          renderer.text('costs action and movement', this.descriptions.topLeft.add(new Vector([0, 1])), primary[1])\n          break\n        case 'both':\n          renderer.text('ends turn', this.descriptions.topLeft.add(new Vector([0, 1])), primary[1])\n          break\n      }\n\n      let y = 3\n      subActions.forEach(subAction => {\n        renderer.text(subactionStringify(subAction), this.descriptions.topLeft.add(new Vector([1, y])), primary[1])\n        y++\n      })\n    } else {\n      renderer.text('choose an action to perform', this.descriptions.topLeft.add(new Vector([1, 1])), primary[1])\n    }\n  }\n}\n\nexport class ActionSelectorMinimizedView implements TabView {\n  public constructor(public readonly content: Rectangle, public readonly actions: SelectableAction[]) {}\n\n  public update(_world: TlbWorld) {}\n\n  public render(renderer: Renderer) {\n    renderActions(renderer, this.content, this.actions, undefined)\n  }\n}\n\nexport class ActionSelector implements Tab, Selector<SelectedAction> {\n  public readonly key: TabsKey = 'actionSelector'\n  public readonly name: string = 'select your move'\n  public readonly shortName: string = 'q'\n  public readonly command: KeyboardCommand = 'focus'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: ActionSelectorFullView | undefined\n  public minimized: ActionSelectorMinimizedView | undefined\n\n  public constructor(public readonly actions: SelectableAction[]) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new ActionSelectorFullView(content, this.actions)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new ActionSelectorMinimizedView(content, this.actions)\n  }\n\n  public get selected(): SelectedAction | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.selected\n  }\n\n  public get hovered(): SelectedAction | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.hovered\n  }\n\n  public get length(): number {\n    if (this.full === undefined) {\n      return 0\n    }\n    return this.full.length\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import { SubAction } from '../components/action'\n\nexport function subactionStringify(subAction: SubAction): string {\n  switch (subAction.kind) {\n    case 'movement':\n    case 'jump':\n      return `${subAction.kind} ${subAction.range}`\n    case 'attack':\n      const damage = subAction.effects.filter(e => e.type === 'damage')[0].value!\n      const other = subAction.effects.filter(e => e.type !== 'damage').map(e => e.type[0])\n      return `${subAction.kind} ${damage} ${other}`\n    case 'status':\n      return subAction.effects.map(e => e.type[0]).join(' ')\n    case 'changeEquipment':\n      return 'change equipment'\n    case 'trigger':\n      return 'trigger'\n  }\n}\n","import { Renderer } from '../../renderer/renderer'\nimport { Vector } from '../../spatial'\nimport { Entity } from '../../ecs/entity'\nimport { TlbWorld } from '../../tlb'\nimport { CharacterStatsComponent } from '../../components/character-stats'\nimport { TakeTurnComponent } from '../../components/rounds'\nimport { primary } from '../../renderer/palettes'\nimport { KeyboardCommand } from '../../resources/input'\nimport { Rectangle } from '../../geometry/rectangle'\nimport { FeatureComponent, FeatureProvider } from '../../components/feature'\nimport { ActiveEffectsComponent } from '../../components/effects'\nimport { renderHealth } from '../render-helpers'\nimport { Tab, TabView, TabsKey } from '../tabs'\n\nexport interface State {\n  focus: Entity\n\n  stats?: CharacterStatsComponent\n  activeEffects?: ActiveEffectsComponent\n  takeTurn?: TakeTurnComponent\n  enemies: {\n    feature?: FeatureProvider\n  }[]\n}\n\nexport class OverviewView implements TabView {\n  private readonly state: State\n\n  public constructor(public readonly content: Rectangle, focus: Entity) {\n    this.state = {\n      focus,\n      enemies: [],\n    }\n  }\n\n  public render(renderer: Renderer): void {\n    let delta = new Vector([0, 0])\n    const down = new Vector([0, 1])\n    const right = new Vector([15, 0])\n\n    if (this.state.stats !== undefined) {\n      const stats = this.state.stats\n      renderHealth(renderer, this.content.topLeft.add(delta), stats)\n      delta = delta.add(down)\n      const effects = this.state.activeEffects!.effects.map(e => e.effect.type[0]).join()\n      renderer.text('effects', this.content.topLeft.add(delta), primary[1])\n      renderer.text(`${effects}`, this.content.topLeft.add(delta).add(right), primary[2])\n\n      delta = delta.add(right.mult(2))\n    }\n\n    delta = new Vector([delta.x, 0])\n\n    if (this.state.stats !== undefined && this.state.takeTurn !== undefined) {\n      renderer.text(\n        `${this.state.takeTurn.acted ? 'action taken' : 'can act'} ${this.state.takeTurn.acted ? 'already moved' : 'can move'}`,\n        this.content.topLeft.add(delta),\n        primary[1]\n      )\n      delta = delta.add(down)\n      this.state.enemies.forEach(enemy => {\n        if (enemy.feature !== undefined) {\n          const d = this.content.topLeft.add(delta)\n          renderer.character(enemy.feature().character, d, enemy.feature().diffuse)\n          renderer.text(enemy.feature().name, d.add(new Vector([3, 0])), primary[1])\n          delta = delta.add(down)\n        }\n      })\n    }\n  }\n\n  public update(world: TlbWorld): void {\n    this.state.takeTurn = world.getComponent<TakeTurnComponent>(this.state.focus, 'take-turn')\n    this.state.enemies = []\n    world.getStorage('took-turn').foreach(entity => {\n      const feature = world.getComponent<FeatureComponent>(entity, 'feature') || { feature: undefined }\n      this.state.enemies.push({ feature: feature.feature })\n    })\n    world.getStorage('wait-turn').foreach(entity => {\n      const feature = world.getComponent<FeatureComponent>(entity, 'feature') || { feature: undefined }\n      this.state.enemies.push({ feature: feature.feature })\n    })\n    this.state.activeEffects = world.getComponent<ActiveEffectsComponent>(this.state.focus, 'active-effects')\n    this.state.stats = world.getComponent<CharacterStatsComponent>(this.state.focus, 'character-stats')\n  }\n}\n\nexport class Overview implements Tab {\n  public readonly key: TabsKey = 'overview'\n  public readonly name: string = 'overview'\n  public readonly shortName: string = 'u'\n  public readonly command: KeyboardCommand = 'overview'\n\n  public readonly minimizedHint: TabsKey = 'log'\n\n  public full: OverviewView | undefined\n  public minimized: OverviewView | undefined\n\n  public constructor(public readonly focus: Entity) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new OverviewView(content, this.focus)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new OverviewView(content, this.focus)\n  }\n}\n","import { CharacterStatsComponent } from '../components/character-stats'\nimport { Renderer } from '../renderer/renderer'\nimport { primary } from '../renderer/palettes'\nimport { Vector } from '../spatial'\nimport { characterStats } from '../assets/characters'\n\nexport function renderHealth(renderer: Renderer, position: Vector, stats: CharacterStatsComponent): void {\n  const currentValue = stats.current.health || 0\n  const maximumValue = characterStats[stats.type].health || 0\n  const bars = Math.ceil((5 * currentValue) / maximumValue)\n  const bodyPartBar = `health ${'|'.repeat(bars)}`\n  const color = bars <= 2 ? primary[3] : primary[1]\n  renderer.text(bodyPartBar, position, color)\n}\n\nexport function renderPercentage(renderer: Renderer, position: Vector, key: string, value: number): void {\n  const percentage = Math.round(Math.min(100, value * 100))\n  renderer.text(`${key} ${percentage}%`, position, percentage > 80 ? primary[1] : primary[0])\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","export const blockSymbols: string[] = ['▀', '▐', '▄', '▌', '█']\n// prettier-ignore\nexport const gridSymbols: string[] = [\n// 0    1    2    3    4    5    6    7    8    9\n  '─', '═', '┐', '╖', '╕', '╗', '┌', '╔', '╒', '╓', // 0\n  '│', '║', '└', '╙', '╘', '╚', '┘', '╝', '╛', '╜', // 1\n  '┬', '╥', '╤', '╦', '┤', '╡', '╢', '╣', '┼', '╫', // 2\n  '┴', '╨', '╧', '╩', '├', '╞', '╟', '╠', '╪', '╬', // 3\n]\n// prettier-ignore\nexport const strangeSymbols: string[] = [\n// 0    1    2    3    4    5    6    7    8    9\n  'ƒ', 'å', 'ß', 'π', '†', '¡', '∞', '•', '∂', '∆', // 0\n  '¬', '…', '≈', 'ç', 'µ', 'Á', '∏', 'Í', 'Î', 'Ó', // 1\n  'Ô', '', 'Ò', 'Ú', '»', '«', 'Ç', '◊', 'Â', '¿', // 2\n  '‼', '░', '▒', '▓', '☉'                           // 3\n]\n// prettier-ignore\nexport const arrows: string[] = [\n// 0    1    2    3    4    5    6    7    8    9\n  '↑', '▲', '→', '►', '↓', '▼', '←', '↕', '↔'\n]\n","import { createAction } from './actions'\nimport { Item, WearableKind, ItemTag } from '../components/items'\nimport { Effect, defend, cooldownBuff } from '../components/effects'\nimport { Random } from '../random'\nimport { Action } from '../components/action'\nimport { RegionsType } from '../components/region'\n\nexport type ItemBaseType =\n  | 'deathPill'\n  | 'bandages'\n  | 'nailGun'\n  | 'gun'\n  | 'powerGauntlet'\n  | 'rifle'\n  | 'sniperRifle'\n  | 'leatherJacket'\n  | 'idCard'\n  | 'boots'\n\nfunction weapon(\n  base: ItemBaseType,\n  name: string,\n  tags: ItemTag[],\n  description: string,\n  weight: number,\n  action: Action,\n  attachments: number,\n  effects: Effect[] = []\n): Item {\n  return { base, tags, kind: 'weapon', name, shortName: name, description, actions: [action], weight, attachments, effects }\n}\n\nfunction consumable(base: ItemBaseType, name: string, tags: ItemTag[], description: string, weight: number, action: Action): Item {\n  return { base, tags, kind: 'consumable', attachments: 0, actions: [action], name, shortName: name, description, weight, effects: [] }\n}\n\nfunction scrap(base: ItemBaseType, name: string, tags: ItemTag[], description: string): Item {\n  return { base, tags, kind: 'scrap', attachments: 0, name, shortName: name, description, weight: 0, effects: [], actions: [] }\n}\n\nfunction equipment(\n  base: ItemBaseType,\n  kind: WearableKind,\n  name: string,\n  tags: ItemTag[],\n  description: string,\n  weight: number,\n  action: Action,\n  effects: Effect[],\n  attachments: number\n): Item {\n  return { base, kind, tags, name, shortName: name, description, actions: [action], effects, weight, attachments }\n}\n\nexport function createItem(base: ItemBaseType, _random: Random, _region: RegionsType): Item {\n  switch (base) {\n    case 'deathPill':\n      return consumable(base, 'death pill', [], 'a pill that kills you', 1, createAction('kill'))\n    case 'bandages':\n      return consumable(base, 'bandages', [], 'a bandage to stop bleeding', 1, createAction('heal'))\n    case 'gun': {\n      return weapon(base, 'gun', ['gun'], 'a gun.', 3, createAction('shoot'), 1)\n    }\n    case 'nailGun': {\n      return weapon(\n        base,\n        'nail gun',\n        ['high-tech'],\n        'a tool to drive nails into wood, control panels or bodies.',\n        5,\n        createAction('shoot'),\n        1\n      )\n    }\n    case 'rifle':\n      return weapon(base, 'rifle', ['rifle'], 'a regular rifle.', 5, createAction('shoot'), 2)\n    case 'sniperRifle': {\n      return weapon(base, 'sniper rifle', ['rifle'], '', 6, createAction('shoot'), 2)\n    }\n    case 'powerGauntlet': {\n      return weapon(base, 'power gauntlet', ['melee'], 'a powerful gauntlet, worn at one hand.', 5, createAction('hit'), 1, [\n        cooldownBuff(1, undefined),\n      ])\n    }\n    case 'boots': {\n      return equipment(base, 'boots', 'boots', [], 'some boots', 2, createAction('kick'), [cooldownBuff(1, undefined)], 2)\n    }\n    case 'leatherJacket':\n      return equipment(base, 'armor', 'leather jacket', [], 'a nice leather jacket', 3, createAction('tighten'), [defend(5, undefined)], 1)\n    case 'idCard':\n      return scrap(base, 'id card', [], 'id card')\n  }\n}\n","import { Effect } from './effects'\nimport { CharacterType } from '../assets/characters'\nimport { AttackResult } from '../component-reducers/attack-target'\n\nexport type Cost = 'action' | 'movement' | 'all' | 'both' | 'either'\n\nexport interface Movement {\n  kind: 'movement'\n  target: 'self'\n  range: number\n}\n\nexport interface Jump {\n  kind: 'jump'\n  target: 'self'\n  range: number\n}\n\nexport interface ChangeEquipment {\n  kind: 'changeEquipment'\n}\n\nexport interface Trigger {\n  kind: 'trigger'\n}\n\nexport interface Attack {\n  kind: 'attack'\n  target: 'enemy'\n  effects: Effect[]\n  range: number\n  accuracy: number\n  grants?: (result: AttackResult) => SubAction[]\n}\n\nexport interface Status {\n  kind: 'status'\n  target: 'self' | 'item'\n  effects: Effect[]\n}\n\nexport type SubAction = Movement | Attack | Status | ChangeEquipment | Trigger | Jump\n\nexport interface Action {\n  name: string\n  cost: Cost\n  subActions: SubAction[]\n  characterTypes?: CharacterType[]\n  cooldown?: number\n}\nexport function action(name: string, cost: Cost, subActions: SubAction[], characterTypes?: CharacterType[]): Action {\n  return { name, cost, subActions, characterTypes }\n}\n\nexport interface SelectedAction {\n  entity: number\n  action: Action\n}\n","import { Mod, Item, ModKind } from '../components/items'\nimport { defend, critChance, critMultiplier, cooldownBuff } from '../components/effects'\nimport { Random } from '../random'\nimport { RegionsType } from '../components/region'\n\nexport const mods: Mod[] = [\n  {\n    kind: 'active',\n    adjective: 'rapid',\n    action: 'doubleShot',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['gun', 'rifle', 'high-tech'],\n      },\n    ],\n  },\n  {\n    kind: 'active',\n    adjective: 'overcharged',\n    action: 'overcharge',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['melee', 'high-tech'],\n      },\n    ],\n  },\n  {\n    kind: 'active',\n    adjective: 'acrobatic',\n    action: 'acrobatics',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'boots',\n        tags: [],\n      },\n    ],\n  },\n  {\n    kind: 'passive',\n    adjective: 'critical',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    effects: [critChance(2, undefined), critMultiplier(1.1, undefined)],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['melee', 'high-tech'],\n      },\n      {\n        kind: 'armor',\n        tags: [],\n      },\n      {\n        kind: 'boots',\n        tags: [],\n      },\n      {\n        kind: 'glove',\n        tags: [],\n      },\n      {\n        kind: 'helmet',\n        tags: [],\n      },\n      {\n        kind: 'pants',\n        tags: [],\n      },\n    ],\n  },\n  {\n    kind: 'passive',\n    adjective: 'cooling',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    effects: [cooldownBuff(1, undefined)],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['melee', 'high-tech'],\n      },\n      {\n        kind: 'armor',\n        tags: [],\n      },\n      {\n        kind: 'boots',\n        tags: [],\n      },\n      {\n        kind: 'glove',\n        tags: [],\n      },\n      {\n        kind: 'helmet',\n        tags: [],\n      },\n      {\n        kind: 'pants',\n        tags: [],\n      },\n    ],\n  },\n  {\n    kind: 'passive',\n    adjective: 'protective',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    effects: [defend(3, undefined)],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['melee', 'high-tech'],\n      },\n      {\n        kind: 'armor',\n        tags: [],\n      },\n      {\n        kind: 'boots',\n        tags: [],\n      },\n      {\n        kind: 'glove',\n        tags: [],\n      },\n      {\n        kind: 'helmet',\n        tags: [],\n      },\n      {\n        kind: 'pants',\n        tags: [],\n      },\n    ],\n  },\n  {\n    kind: 'active',\n    adjective: 'surgical',\n    action: 'execute',\n    occurs: ['blue-base', 'blue-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['gun', 'rifle', 'high-tech'],\n      },\n    ],\n  },\n  {\n    kind: 'passive',\n    adjective: 'enhanced',\n    action: 'enhanced',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: [],\n      },\n    ],\n  },\n  {\n    kind: 'passive',\n    adjective: 'fast',\n    action: 'fast',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['gun'],\n      },\n    ],\n  },\n  {\n    kind: 'active',\n    adjective: 'truthful',\n    action: 'headshot',\n    occurs: ['entrance', 'yellow-base', 'yellow-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['gun'],\n      },\n    ],\n  },\n  {\n    kind: 'active',\n    adjective: 'precise',\n    action: 'headshot',\n    occurs: ['entrance', 'blue-base', 'blue-plus'],\n    matches: [\n      {\n        kind: 'weapon',\n        tags: ['rifle'],\n      },\n    ],\n  },\n]\n\nexport function getRandomMod(random: Random, kind: ModKind, item: Item, region: RegionsType): Mod | undefined {\n  const availableMods = mods.filter(mod => {\n    const hasKind = mod.kind === kind\n    const regionMatches = mod.occurs.some(o => region === o)\n    const itemMatches = mod.matches.some(\n      m => m.kind === item.kind && (m.tags.length === 0 || m.tags.some(t => item.tags.some(tag => t === tag)))\n    )\n    return hasKind && regionMatches && itemMatches\n  })\n  return random.pick(availableMods)\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { InventoryComponent, ItemComponent } from '../components/items'\nimport { ItemBaseType } from '../assets/items'\n\nexport function hasItem(world: TlbWorld, entity: Entity, type: ItemBaseType): boolean {\n  const inventory = world.getComponent<InventoryComponent>(entity, 'inventory')!.content\n  return inventory.some(i => world.getComponent<ItemComponent>(i, 'item')!.item.base === type)\n}\n","import { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { AssetType } from '../assets/assets'\nimport { StructureComponent, RegionComponent } from '../components/region'\nimport { WorldMapResource, WorldMap, Level } from '../resources/world-map'\nimport { TriggeredByComponent } from '../components/trigger'\nimport { AssetComponent } from '../components/asset'\n\nexport function getTriggersOfStructure(world: TlbWorld, entity: Entity, filter: AssetType[]): Entity[] {\n  const structure = world.getComponent<StructureComponent>(entity, 'structure')!\n  const region: RegionComponent = world.getComponent<RegionComponent>(structure.region, 'region')!\n\n  const map: WorldMap = world.getResource<WorldMapResource>('map')\n  const level: Level = map.levels[region.level]\n\n  const triggers: Set<Entity> = new Set()\n  structure.shape.foreach(p => {\n    const tile = level.getTile(p)!\n    const triggeredBy = world.getComponent<TriggeredByComponent>(tile, 'triggered-by')\n    if (triggeredBy !== undefined) {\n      triggers.add(triggeredBy.entity)\n    }\n  })\n\n  const result: Entity[] = []\n  triggers.forEach(e => {\n    const asset = world.getComponent<AssetComponent>(e, 'asset')!\n    if (filter.some(t => t === asset.type)) {\n      result.push(e)\n    }\n  })\n  return result\n}\n","import { DialogType } from './dialogs'\n\nexport interface Quest {\n  name: string\n  startText: string\n  start: DialogType\n}\n\nfunction quest(name: string, start: DialogType, startText: string): Quest {\n  return { name, start, startText }\n}\n\nconst questDefintions = {\n  quest1: quest('quest1', 'startQuest1', 'something you want?'),\n}\nexport type QuestType = keyof typeof questDefintions\nexport const quests: { [key in QuestType]: Quest } = questDefintions\n","import { DialogType } from './dialogs'\n\nexport interface Lore {\n  name: string\n  start: DialogType\n  startText: string\n}\n\nfunction lore(name: string, start: DialogType, startText: string): Lore {\n  return { name, start, startText }\n}\n\nconst loreDefinitions = {\n  lore1: lore('lore1', 'startLore1', 'lore.txt'),\n}\nexport type LoreType = keyof typeof loreDefinitions\nexport const lores: { [key in LoreType]: Lore } = loreDefinitions\n","import { Entity } from '../ecs/entity'\nimport { Vector } from '../spatial'\nimport { Renderer } from '../renderer/renderer'\nimport { primary, gray } from '../renderer/palettes'\n\nimport { UIElement } from './ui-element'\nimport { TlbWorld } from '../tlb'\n\nimport { WindowDecoration } from './window-decoration'\nimport { InputResource, Input } from '../resources/input'\nimport { dropAt } from '../array-utils'\nimport { InventoryDescription, createInventoryDescription } from '../component-reducers/inventory-description'\nimport { Rectangle } from '../geometry/rectangle'\n\nexport interface State {\n  leftWindow: WindowDecoration\n  rightWindow: WindowDecoration\n\n  left: Entity\n  right: Entity\n\n  leftInventory?: InventoryDescription\n  rightInventory?: InventoryDescription\n\n  leftActive: boolean\n  hovered: number\n}\n\nexport class InventoryTransferModal implements UIElement {\n  public closed: boolean = false\n\n  public constructor(private readonly state: State) {}\n\n  public render(renderer: Renderer) {\n    const { leftWindow, rightWindow, leftInventory, rightInventory, leftActive, hovered } = this.state\n    this.renderInventory(renderer, leftWindow, leftInventory!, leftActive, leftActive ? hovered : undefined)\n    this.renderInventory(renderer, rightWindow, rightInventory!, !leftActive, leftActive ? undefined : hovered)\n  }\n\n  public static build(bounds: Rectangle, source: Entity, sourceTitle: string, target: Entity, targetTitle: string): InventoryTransferModal {\n    const width = Math.floor(bounds.width / 2)\n    const leftWindow = new WindowDecoration(new Rectangle(bounds.left, bounds.top, width, bounds.height), sourceTitle)\n    const rightWindow = new WindowDecoration(new Rectangle(leftWindow.right, bounds.top, bounds.width - width, bounds.height), targetTitle)\n\n    return new InventoryTransferModal({\n      left: source,\n      right: target,\n      leftWindow,\n      rightWindow,\n      leftActive: true,\n      hovered: 0,\n    })\n  }\n\n  public renderInventory(\n    renderer: Renderer,\n    window: WindowDecoration,\n    inventory: InventoryDescription,\n    active: boolean,\n    hovered: number | undefined\n  ) {\n    window.render(renderer)\n\n    const inventoryItems = inventory.items || []\n\n    let y = 0\n    inventoryItems.forEach(item => {\n      const numeric = active ? `${y + 1} ` : ''\n      renderer.text(\n        `${numeric}${item.item.name} (${item.item.weight})`,\n        window.content.topLeft.add(new Vector([0, y])),\n        primary[1],\n        hovered === y ? gray[1] : undefined\n      )\n      y++\n    })\n\n    if (inventory.maximumWeight !== undefined) {\n      const text = `${inventory.currentWeight}/${inventory.maximumWeight}`\n      renderer.text(text, window.content.bottomRight.add(new Vector([-text.length, 1])), primary[1])\n    }\n  }\n\n  public update(world: TlbWorld) {\n    this.state.leftInventory = createInventoryDescription(world, this.state.left)\n    this.state.rightInventory = createInventoryDescription(world, this.state.right)\n\n    const input: Input = world.getResource<InputResource>('input')\n    let position: Vector | undefined\n    if (input.position) {\n      position = new Vector([input.position.x, input.position.y])\n    }\n\n    if (input.isActive('cancel')) {\n      this.closed = true\n    }\n\n    const up = input.isActive('plus')\n    const down = input.isActive('minus')\n    const right = input.isActive('right')\n    const left = input.isActive('left')\n    if (up) {\n      this.state.hovered--\n    }\n    if (down) {\n      this.state.hovered++\n    }\n    if (right || left) {\n      this.state.leftActive = !this.state.leftActive\n    }\n    const source = this.state.leftActive ? this.state.leftInventory : this.state.rightInventory\n    const target = this.state.leftActive ? this.state.rightInventory : this.state.leftInventory\n    if (source.inventory.content.length > 0) {\n      this.state.hovered += source.inventory.content.length\n      this.state.hovered %= source.inventory.content.length\n    } else {\n      this.state.leftActive = !this.state.leftActive\n      this.state.hovered = 0\n    }\n\n    let selected: Entity | undefined = undefined\n    if (input.isActive('accept')) {\n      selected = this.state.hovered\n    }\n    if (position) {\n      const mouseInLeft = this.state.leftWindow.content.containsVector(position)\n      const mouseInRight = this.state.rightWindow.content.containsVector(position)\n      if (mouseInLeft || mouseInRight) {\n        this.state.leftActive = mouseInLeft\n        let delta\n        if (mouseInLeft) {\n          delta = position.minus(this.state.leftWindow.content.topLeft)\n        } else {\n          delta = position.minus(this.state.rightWindow.content.topLeft)\n        }\n        if (input.mousePressed) {\n          selected = delta.y\n        }\n        this.state.hovered = delta.y\n      }\n    }\n\n    const numeric = input.numericActive()\n    if (numeric !== undefined) {\n      selected = numeric\n    }\n\n    if (selected !== undefined) {\n      this.transfer(source!, target!, selected)\n    }\n  }\n\n  public transfer(source: InventoryDescription, target: InventoryDescription, index: number) {\n    const item = source.items[index]\n    if (item !== undefined) {\n      const passesWeightRestriction = target.maximumWeight === undefined || target.currentWeight + item.item.weight <= target.maximumWeight\n      const isEquiped = source.equipment.some(e => e.entity === item.entity)\n      if (passesWeightRestriction && !isEquiped) {\n        target.inventory.content.push(source.inventory.content[index])\n        dropAt(source.inventory.content, index)\n      }\n    }\n  }\n\n  public contains(position: Vector): boolean {\n    return this.state.leftWindow.containsVector(position) || this.state.rightWindow.containsVector(position)\n  }\n}\n","import { Renderer } from '../../renderer/renderer'\nimport { Vector } from '../../spatial'\nimport { Entity } from '../../ecs/entity'\nimport { TlbWorld } from '../../tlb'\nimport { primary, gray } from '../../renderer/palettes'\nimport { KeyboardCommand } from '../../resources/input'\nimport { Rectangle } from '../../geometry/rectangle'\nimport { createInventoryDescription, InventoryDescription, ItemWithEntity } from '../../component-reducers/inventory-description'\nimport { ItemSelector } from '../selector'\nimport { consumeItem } from '../../component-reducers/consume-item'\n\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { unequip, replacingEquip } from '../../assets/characters'\nimport { applyEffect } from '../../component-reducers/apply-effect'\nimport { Random } from '../../random'\nimport { TakeTurnComponent } from '../../components/rounds'\n\nexport interface State {\n  focus: Entity\n  inventory?: InventoryDescription\n  takeTurn?: TakeTurnComponent\n}\n\nexport class FullInventoryView implements TabView {\n  private readonly state: State\n\n  private readonly items: Rectangle\n  private readonly descriptions: Rectangle\n\n  public readonly itemSelector: ItemSelector<ItemWithEntity>\n\n  public constructor(public readonly content: Rectangle, public readonly uniform: Random, focus: Entity) {\n    this.state = { focus }\n\n    const width = Math.floor(content.width / 2)\n    this.items = new Rectangle(content.left, content.top, width, content.height)\n    this.descriptions = new Rectangle(this.items.right, content.top, content.width - width, content.height)\n\n    this.itemSelector = new ItemSelector([])\n  }\n\n  public render(renderer: Renderer): void {\n    if (this.state.inventory !== undefined) {\n      const inventory = this.state.inventory\n\n      this.renderInventory(renderer, inventory, this.itemSelector.hoveredIndex)\n      if (this.itemSelector.hoveredIndex) {\n        this.renderDescription(renderer, inventory, this.itemSelector.hoveredIndex)\n      }\n    }\n  }\n\n  public renderInventory(renderer: Renderer, inventory: InventoryDescription, hovered: number | undefined) {\n    const inventoryItems = inventory.items || []\n    let y = 0\n\n    inventoryItems.forEach(item => {\n      const attachement = inventory.equipment.find(e => e.entity === item.entity)\n      let attached = ''\n      if (attachement) {\n        attached = '*'\n      }\n\n      renderer.text(\n        `${y + 1} ${item.item.name}${attached}`,\n        this.items.topLeft.add(new Vector([0, y])),\n        primary[1],\n        hovered === y ? gray[1] : undefined\n      )\n      y++\n    })\n\n    if (inventory.maximumWeight !== undefined) {\n      renderer.text(`weight: ${inventory.currentWeight}/${inventory.maximumWeight}`, this.content.bottomLeft, primary[1])\n    }\n  }\n\n  public renderDescription(renderer: Renderer, inventory: InventoryDescription, index: number) {\n    const inventoryItems = inventory.items || []\n    const inventoryItem = inventoryItems[index]\n    let y = 0\n    if (inventoryItem !== undefined) {\n      const item = inventoryItem.item\n      if (item.actions.length > 0) {\n        y += renderer.flowText(\n          `${item.description}`,\n          this.descriptions.topLeft.add(new Vector([0, y])),\n          this.descriptions.width,\n          primary[1]\n        )\n        y += renderer.flowText(\n          'actions: ' + item.actions.map(a => a.name).join(),\n          this.descriptions.topLeft.add(new Vector([0, y])),\n          this.descriptions.width,\n          primary[1]\n        )\n      }\n\n      y += renderer.flowText(\n        'mods: ' + inventoryItem.mods.map(a => a.adjective).join(),\n        this.descriptions.topLeft.add(new Vector([0, y])),\n        this.descriptions.width,\n        primary[1]\n      )\n\n      if (this.state.takeTurn === undefined) {\n        let action: string | undefined = undefined\n        if (item.kind === 'consumable') {\n          action = 'consume'\n        } else if (item.attachments > 0) {\n          const equipped = inventory.equipment.some(i => i.entity === inventoryItem.entity)\n          action = equipped ? 'unequip' : 'equip'\n        }\n        if (action) {\n          renderer.text(action, this.descriptions.topLeft.add(new Vector([0, y])), primary[1])\n          y++\n        }\n      }\n    }\n  }\n\n  public update(world: TlbWorld): void {\n    this.state.inventory = createInventoryDescription(world, this.state.focus)\n    this.state.takeTurn = world.getComponent(this.state.focus, 'take-turn')\n    this.itemSelector.setItems(this.state.inventory.items)\n    this.itemSelector.update(world, this.content)\n\n    if (this.itemSelector.selectedIndex !== undefined && this.state.takeTurn === undefined) {\n      this.use(world, this.itemSelector.selectedIndex)\n    }\n  }\n\n  private use(world: TlbWorld, index: number) {\n    const inventory = this.state.inventory!\n    const item = inventory.inventory.content[index]\n    const inventoryItems = inventory.items || []\n    const selectedItem = inventoryItems[index].item\n    if (selectedItem.kind === 'consumable' && selectedItem.actions.length > 0) {\n      selectedItem.actions[0].subActions.forEach(action => {\n        if (action.kind === 'status') {\n          action.effects.forEach(effect => {\n            applyEffect(world, this.uniform, this.state.focus, {\n              source: item,\n              effect,\n              isCritical: false,\n              isPiercing: false,\n            })\n          })\n        }\n      })\n      consumeItem(world, this.state.focus, item)\n    } else if (selectedItem.attachments > 0) {\n      const attachementIndex = inventory.equipment.findIndex(e => e.entity === item)\n\n      if (attachementIndex >= 0) {\n        unequip(world, this.state.focus, item)\n      } else {\n        replacingEquip(world, this.state.focus, item, selectedItem)\n      }\n    }\n  }\n}\n\nexport class MinimizedInventoryView implements TabView {\n  private readonly state: State\n  private readonly inventoryContent: Rectangle\n\n  public constructor(public readonly content: Rectangle, focus: Entity) {\n    const width = Math.floor(content.width / 2)\n    this.inventoryContent = new Rectangle(content.left, content.top, width, content.height)\n    this.state = { focus }\n  }\n\n  public render(renderer: Renderer): void {\n    if (this.state.inventory !== undefined) {\n      const inventory = this.state.inventory\n      this.renderInventory(renderer, this.inventoryContent, inventory)\n    }\n  }\n\n  public renderInventory(renderer: Renderer, content: Rectangle, inventory: InventoryDescription) {\n    const inventoryItems = inventory.items || []\n\n    let y = 0\n    inventoryItems.forEach(item => {\n      const attachement = inventory.equipment.find(e => e.entity === item.entity)\n      let attached = ''\n      if (attachement) {\n        attached = '*'\n      }\n      renderer.text(`${item.item.name}${attached}`, content.topLeft.add(new Vector([0, y])), primary[1])\n      y++\n    })\n\n    if (inventory.maximumWeight !== undefined) {\n      renderer.text(\n        `inventory (${inventory.currentWeight}/${inventory.maximumWeight})`,\n        content.topLeft.add(new Vector([0, y])),\n        primary[1]\n      )\n    }\n  }\n\n  public update(world: TlbWorld): void {\n    this.state.inventory = createInventoryDescription(world, this.state.focus)\n  }\n}\n\nexport class Inventory implements Tab {\n  public readonly key: TabsKey = 'inventory'\n  public name: string = 'inventory'\n  public readonly shortName: string = 'i'\n  public readonly command: KeyboardCommand = 'inventory'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: FullInventoryView | undefined\n  public minimized: MinimizedInventoryView | undefined\n\n  public constructor(public readonly focus: Entity, public readonly uniform: Random) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new FullInventoryView(content, this.uniform, this.focus)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new MinimizedInventoryView(content, this.focus)\n  }\n}\n","import { Entity } from '../ecs/entity'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { Log, LogResource } from '../resources/log'\nimport { PositionComponent } from '../components/position'\nimport { TlbWorld } from '../tlb'\nimport { InventoryComponent } from '../components/items'\nimport { createAsset } from '../components/asset'\nimport { Vector } from '../spatial'\nimport { Random } from '../random'\n\nexport function kill(world: TlbWorld, random: Random, entity: Entity) {\n  if (world.hasComponent(entity, 'position')) {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const inventory = world.getComponent<InventoryComponent>(entity, 'inventory')!\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    map.levels[position.level].removeCharacter(position.position)\n\n    const positionFloor = new Vector([position.position.fX, position.position.fY])\n    const loot = createAsset(world, random, position.level, positionFloor, 'up', 'loot')\n    world.editEntity(loot).withComponent<InventoryComponent>('inventory', { ...inventory })\n\n    const log: Log = world.getResource<LogResource>('log')\n    log.died(world, entity)\n  }\n\n  world\n    .editEntity(entity)\n    .withComponent('dead', {})\n    .removeComponent('position')\n    .removeComponent('take-turn')\n    .removeComponent('start-turn')\n    .removeComponent('took-turn')\n    .removeComponent('wait-turn')\n}\n","import { Asset } from '../components/asset'\nimport { Vector } from '../spatial'\nimport { features, generators } from './features'\nimport { Feature } from '../components/feature'\nimport { DialogType } from './dialogs'\n\nconst s1x1 = new Vector([1, 1])\nconst s1x2 = new Vector([1, 2])\nconst s3x1 = new Vector([3, 1])\nconst s2x2 = new Vector([2, 2])\nfunction asset(name: string, size: Vector, dialog: DialogType | undefined, feature: (index: number) => Feature | undefined): Asset {\n  return { name, size, hasInventory: true, dialog, feature }\n}\n\nconst assetsDefinition = {\n  door: asset('metal door', s3x1, undefined, () => features.door),\n  locker: asset('a locker', s1x1, undefined, () => features.locker),\n  trash: asset('some trash', s1x1, undefined, () => features.trash),\n  loot: asset('a dead body', s1x1, undefined, () => features.loot),\n  table: asset('a table', s1x2, undefined, () => features.table),\n  generator: asset('a generator', s2x2, undefined, generators.block),\n  elevator: asset('an elevator', s1x1, 'elevator', generators.elevator),\n  terminal: asset('a terminal', s1x1, 'terminal', () => features.terminal),\n  urinal: asset('a urinal', s1x1, undefined, () => features.urinal),\n  core: asset('the core', s1x1, 'core', () => features.core),\n}\n\nexport type AssetType = keyof typeof assetsDefinition\nexport const assets: { [key in AssetType]: Asset } = assetsDefinition\n","import { LoreType } from '../assets/lores'\nimport { TlbWorld } from '../tlb'\nimport { Random } from '../random'\nimport { DialogType } from '../assets/dialogs'\n\nexport interface LoreComponent {\n  type: LoreType\n}\n\nexport function sampleLoreForDialog(_world: TlbWorld, _random: Random, dialog: DialogType): LoreType | undefined {\n  if (dialog === 'terminal') {\n    return 'lore1'\n  }\n  return undefined\n}\n","import { Entity } from '../ecs/entity'\nimport { Vector } from '../spatial'\nimport { Renderer } from '../renderer/renderer'\nimport { primary, gray } from '../renderer/palettes'\n\nimport { UIElement } from './ui-element'\nimport { TlbWorld } from '../tlb'\n\nimport { WindowDecoration } from './window-decoration'\nimport { ItemSelector } from './selector'\n\nexport interface MultipleChoiceOption {\n  entity: Entity | number\n  description: string\n}\n\nexport class MultipleChoiceModal implements UIElement {\n  public closed: boolean = false\n\n  public readonly selector: ItemSelector<{ entity: Entity; description: string }>\n\n  public constructor(private readonly window: WindowDecoration, private readonly options: MultipleChoiceOption[]) {\n    this.selector = new ItemSelector(this.options)\n  }\n\n  public render(renderer: Renderer) {\n    this.window.render(renderer)\n\n    const options = this.options || []\n\n    let y = 0\n    options.forEach((option, i) => {\n      renderer.text(\n        `${i + 1} ${option.description}`,\n        this.window.content.topLeft.add(new Vector([0, y])),\n        primary[1],\n        this.selector.hoveredIndex === i ? gray[1] : undefined\n      )\n      y++\n    })\n  }\n\n  public update(world: TlbWorld) {\n    this.selector.update(world, this.window.content)\n    if (this.selector.selected !== undefined) {\n      this.closed = true\n    }\n  }\n\n  public contains(position: Vector): boolean {\n    return this.window.containsVector(position)\n  }\n}\n","import { UIElement } from './ui-element'\nimport { Renderer } from '../renderer/renderer'\nimport { Vector } from '../spatial'\nimport { TlbWorld } from '../tlb'\nimport { Rectangle } from '../geometry/rectangle'\nimport { Input, InputResource, KeyboardCommand } from '../resources/input'\nimport { WindowDecoration } from './window-decoration'\n\nexport interface TabView {\n  render(renderer: Renderer): void\n  update(world: TlbWorld): void\n}\n\nexport type TabsKey = 'actionSelector' | 'movementSelector' | 'attackSelector' | 'inventory' | 'log' | 'overview'\n\nexport interface Tab {\n  key: TabsKey\n  name: string\n\n  shortName: string\n  command: KeyboardCommand\n\n  minimized?: TabView\n  full?: TabView\n\n  minimizedHint?: TabsKey\n\n  setFull(content: Rectangle): void\n  setMinimized(content: Rectangle): void\n}\n\nexport class Tabs implements UIElement {\n  private mainTab: Tab | undefined = undefined\n  private minimizedTab: Tab | undefined = undefined\n\n  private readonly mainTabWindow: WindowDecoration\n  private readonly minimizedTabWindow: WindowDecoration\n\n  private readonly tabs: Tab[] = []\n\n  private focusTab: Tab | undefined = undefined\n\n  public constructor(mainWindow: Rectangle, minimizedWindow: Rectangle) {\n    this.mainTabWindow = new WindowDecoration(mainWindow, 'tabs')\n    this.minimizedTabWindow = new WindowDecoration(minimizedWindow, 'tabs')\n  }\n\n  public add(tab: Tab) {\n    this.tabs.push(tab)\n    if (this.mainTab === undefined) {\n      this.setTab(tab)\n    }\n    tab.setFull(this.mainTabWindow.content)\n    tab.setMinimized(this.minimizedTabWindow.content)\n  }\n\n  public setFocusTab(tab: Tab) {\n    this.focusTab = tab\n    this.setTab(tab)\n    tab.setFull(this.mainTabWindow.content)\n    tab.setMinimized(this.minimizedTabWindow.content)\n  }\n\n  public reset() {\n    this.focusTab = undefined\n    this.setTab(this.tabs[0])\n  }\n\n  public render(renderer: Renderer): void {\n    this.mainTabWindow.render(renderer)\n    this.minimizedTabWindow.render(renderer)\n    if (this.mainTab !== undefined) {\n      this.mainTab.full!.render(renderer)\n    }\n    if (this.minimizedTab !== undefined) {\n      this.minimizedTab.minimized!.render(renderer)\n    }\n  }\n\n  public update(world: TlbWorld): void {\n    const input: Input = world.getResource<InputResource>('input')\n    this.mainTabWindow.update(input)\n    const tabs = this.focusTab !== undefined ? [this.focusTab, ...this.tabs] : this.tabs\n    tabs.forEach(tab => {\n      if (input.isActive(tab.command)) {\n        this.setTab(tab)\n      }\n    })\n\n    if (this.mainTab !== undefined) {\n      this.mainTab.full!.update(world)\n    }\n\n    if (this.minimizedTab !== undefined) {\n      this.minimizedTab.minimized!.update(world)\n    }\n  }\n\n  public contains(position: Vector): boolean {\n    return this.mainTabWindow.containsVector(position) || this.minimizedTabWindow.containsVector(position)\n  }\n\n  private setTab(tab: Tab) {\n    this.mainTab = tab\n    const tabs = this.focusTab !== undefined ? [this.focusTab, ...this.tabs] : this.tabs\n    this.minimizedTab = tabs.find(t => t.key === tab.minimizedHint) || tab\n    this.mainTabWindow.title = tabs\n      .map(tab => {\n        if (this.mainTab === tab) {\n          return tab.name\n        }\n        return tab.shortName\n      })\n      .join('/')\n    this.minimizedTabWindow.title = this.minimizedTab.name\n  }\n}\n","import { Renderer } from '../../renderer/renderer'\nimport { Vector } from '../../spatial'\nimport { TlbWorld } from '../../tlb'\nimport { WindowDecoration } from '../window-decoration'\nimport { Rectangle } from '../../geometry/rectangle'\nimport { LogResource, Log } from '../../resources/log'\nimport { primary } from '../../renderer/palettes'\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { KeyboardCommand } from '../../resources/input'\n\nexport interface State {\n  window: WindowDecoration\n  entries: string[]\n}\n\nexport class LogView implements TabView {\n  private entries: string[] = []\n\n  constructor(public readonly content: Rectangle) {}\n\n  public render(renderer: Renderer): void {\n    const topLeft = this.content.topLeft\n    this.entries.forEach((entry, index) => {\n      renderer.text(entry, topLeft.add(new Vector([0, index])), primary[1])\n    })\n  }\n\n  public update(world: TlbWorld): void {\n    const log: Log = world.getResource<LogResource>('log')\n    this.entries = log.getEntries(0, this.content.height)\n  }\n}\n\nexport class LogTab implements Tab {\n  public readonly key: TabsKey = 'log'\n  public readonly name: string = 'log'\n  public readonly shortName: string = 'o'\n  public readonly command: KeyboardCommand = 'log'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: LogView | undefined\n  public minimized: LogView | undefined\n\n  public setFull(content: Rectangle): void {\n    this.full = new LogView(content)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new LogView(content)\n  }\n}\n","import { Movement, Jump } from '../../components/action'\nimport { Renderer } from '../../renderer/renderer'\nimport { primary } from '../../renderer/palettes'\n\nimport { TlbWorld } from '../../tlb'\n\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Selector } from '../selector'\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { InputResource, Input, KeyboardCommand } from '../../resources/input'\nimport { Path } from '../../renderer/astar'\nimport { ViewportResource, Viewport } from '../../resources/viewport'\nimport { WorldMapResource, WorldMap } from '../../resources/world-map'\nimport { Queries } from '../../renderer/queries'\nimport { Entity } from '../../ecs/entity'\nimport { PositionComponent } from '../../components/position'\nimport { OverlayComponent } from '../../components/overlay'\nimport { FeatureComponent } from '../../components/feature'\n\nexport class MovementSelectorFullView implements TabView, Selector<Path> {\n  private isSelected: boolean = false\n  private path: Path | undefined\n\n  private targetFeature: FeatureComponent | undefined\n\n  public constructor(\n    public readonly content: Rectangle,\n    private target: Entity,\n    private readonly queries: Queries,\n    private readonly movement: Movement | Jump\n  ) {}\n\n  public render(renderer: Renderer) {\n    if (this.targetFeature !== undefined) {\n      renderer.text(this.targetFeature.feature().name, this.content.topLeft, primary[0])\n    }\n  }\n\n  public get selected(): Path | undefined {\n    if (this.isSelected) {\n      return this.path\n    }\n    return undefined\n  }\n\n  public get hovered(): Path | undefined {\n    return this.path\n  }\n\n  public get length(): number {\n    return this.path === undefined ? 0 : this.path.cost\n  }\n\n  public update(world: TlbWorld) {\n    const input: Input = world.getResource<InputResource>('input')\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    if (input.position !== undefined) {\n      const cursor = viewport.fromDisplay(input.position)\n      const position = world.getComponent<PositionComponent>(this.target, 'position')!\n      const region = map.levels[position.level]\n      const path = this.queries.shortestPath(world, position.level, position.position, cursor, {\n        self: this.target,\n        maximumCost: this.movement.range,\n        onlyDiscovered: true,\n        endInDoor: true,\n        jump: this.movement.kind === 'jump',\n      })\n      if (path !== undefined) {\n        path.path.forEach(position => {\n          const tile = region.getTile(position)!\n          world.editEntity(tile).withComponent<OverlayComponent>('overlay', { background: primary[2] })\n        })\n      }\n      const targetTile = map.levels[position.level].getTile(cursor)\n      if (targetTile !== undefined) {\n        this.targetFeature = world.getComponent<FeatureComponent>(targetTile, 'feature')\n      }\n      this.path = path\n      if (input.mousePressed) {\n        this.isSelected = input.mousePressed\n      }\n    }\n  }\n}\n\nexport class MovementSelector implements Tab, Selector<Path> {\n  public readonly key: TabsKey = 'movementSelector'\n  public readonly name: string = 'select a location to move to'\n  public readonly shortName: string = 'q'\n  public readonly command: KeyboardCommand = 'focus'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: MovementSelectorFullView | undefined\n  public minimized: MovementSelectorFullView | undefined\n\n  public constructor(private target: Entity, private readonly queries: Queries, private readonly movement: Movement | Jump) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new MovementSelectorFullView(content, this.target, this.queries, this.movement)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new MovementSelectorFullView(content, this.target, this.queries, this.movement)\n  }\n\n  public get selected(): Path | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.selected\n  }\n\n  public get hovered(): Path | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.hovered\n  }\n\n  public get length(): number {\n    return 1\n  }\n}\n","import { Renderer } from '../../renderer/renderer'\nimport { primary } from '../../renderer/palettes'\n\nimport { TlbWorld } from '../../tlb'\n\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Selector } from '../selector'\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { InputResource, Input, KeyboardCommand } from '../../resources/input'\nimport { Path } from '../../renderer/astar'\nimport { ViewportResource, Viewport } from '../../resources/viewport'\nimport { WorldMapResource, WorldMap } from '../../resources/world-map'\nimport { Queries } from '../../renderer/queries'\nimport { Entity } from '../../ecs/entity'\nimport { PositionComponent } from '../../components/position'\nimport { OverlayComponent } from '../../components/overlay'\n\nexport class AttackSelectorFullView implements TabView, Selector<Path> {\n  private isSelected: boolean = false\n  private path: Path | undefined\n\n  public constructor(\n    public readonly content: Rectangle,\n    private target: Entity,\n    private readonly queries: Queries,\n    private readonly range: number\n  ) {}\n\n  public render(_renderer: Renderer) {}\n\n  public get selected(): Path | undefined {\n    if (this.isSelected) {\n      return this.path\n    }\n    return undefined\n  }\n\n  public get hovered(): Path | undefined {\n    return this.path\n  }\n\n  public get length(): number {\n    return this.path === undefined ? 0 : this.path.cost\n  }\n\n  public update(world: TlbWorld) {\n    const input: Input = world.getResource<InputResource>('input')\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const position = world.getComponent<PositionComponent>(this.target, 'position')!\n    const level = map.levels[position.level]\n    if (input.position !== undefined) {\n      const cursor = viewport.fromDisplay(input.position)\n      const path = this.queries.los(world, position.level, position.position, cursor, { maximumCost: this.range })\n      if (path !== undefined) {\n        path.path.forEach(p => {\n          const target = level.getCharacter(p)\n          const hasEnemy = target !== undefined && target !== this.target\n          if (hasEnemy) {\n            world.editEntity(target!).withComponent<OverlayComponent>('overlay', { background: primary[3] })\n          } else {\n            const tile = level.getTile(p)!\n            world.editEntity(tile).withComponent<OverlayComponent>('overlay', { background: primary[1] })\n          }\n        })\n\n        this.path = path\n        if (input.mousePressed) {\n          this.isSelected = input.mousePressed\n        }\n      }\n    }\n  }\n}\n\nexport class AttackSelector implements Tab, Selector<Path> {\n  public readonly key: TabsKey = 'attackSelector'\n  public readonly name: string = 'select an enemy target'\n  public readonly shortName: string = 'q'\n  public readonly command: KeyboardCommand = 'focus'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: AttackSelectorFullView | undefined\n  public minimized: AttackSelectorFullView | undefined\n\n  public constructor(private target: Entity, private readonly queries: Queries, private readonly range: number) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new AttackSelectorFullView(content, this.target, this.queries, this.range)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new AttackSelectorFullView(content, this.target, this.queries, this.range)\n  }\n\n  public get selected(): Path | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.selected\n  }\n\n  public get hovered(): Path | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.hovered\n  }\n\n  public get length(): number {\n    return 1\n  }\n}\n","import { Entity } from '../ecs/entity'\nimport { Vector } from '../spatial'\nimport { Renderer } from '../renderer/renderer'\nimport { primary, gray } from '../renderer/palettes'\n\nimport { UIElement } from './ui-element'\nimport { TlbWorld } from '../tlb'\n\nimport { WindowDecoration } from './window-decoration'\nimport { ItemSelector } from './selector'\nimport { Dialog, Result, Answer, Step, dialogs } from '../assets/dialogs'\nimport { Random } from '../random'\nimport { Rectangle } from '../geometry/rectangle'\n\ninterface DialogState {\n  steps: Step[]\n  current: number\n}\n\nexport class DialogModal implements UIElement {\n  public closed: boolean = false\n  public result: Answer | undefined = undefined\n\n  private dialogState: DialogState = { steps: [], current: 0 }\n  private currentText: string | undefined\n  private selectY: number = 0\n\n  public selector: ItemSelector<Result> | undefined\n\n  public constructor(\n    world: TlbWorld,\n    private readonly random: Random,\n    private readonly window: WindowDecoration,\n    dialog: Dialog,\n    private readonly player: Entity,\n    private readonly owner: Entity\n  ) {\n    this.startDialog(world, dialog)\n  }\n\n  public render(renderer: Renderer) {\n    this.window.render(renderer)\n\n    const step = this.dialogState.steps[this.dialogState.current]\n    if (this.currentText === undefined) {\n      this.currentText = this.random.pick(step.text)\n    }\n\n    let y = renderer.flowText(this.currentText, this.window.content.topLeft, this.window.width, primary[1]) + 1\n    if (this.selector !== undefined) {\n      this.selectY = y\n      step.answers.forEach((answer, i) => {\n        renderer.text(\n          `${i + 1} ${answer.text}`,\n          this.window.content.topLeft.add(new Vector([0, y])),\n          primary[1],\n          this.selector!.hoveredIndex === i ? gray[1] : undefined\n        )\n        y++\n      })\n    }\n  }\n\n  public update(world: TlbWorld) {\n    const step = this.dialogState.steps[this.dialogState.current]\n    if (this.selector === undefined) {\n      this.selector = new ItemSelector(step.answers)\n    }\n    this.selector.update(\n      world,\n      new Rectangle(this.window.content.x, this.window.content.y + this.selectY, this.window.content.width, step.answers.length)\n    )\n    const result = this.selector.selected\n    if (result !== undefined) {\n      const navigation = result.type\n      if (typeof navigation === 'number') {\n        this.navigate(navigation)\n      } else if (result.type === 'next_dialog') {\n        this.startDialog(world, dialogs[result.dialog])\n      } else {\n        this.closed = true\n        this.result = result as Answer\n      }\n    }\n  }\n\n  private navigate(index: number) {\n    this.dialogState.current = index\n    this.reset()\n  }\n\n  private startDialog(world: TlbWorld, dialog: Dialog) {\n    this.dialogState = {\n      steps: dialog.steps(world, this.player, this.owner),\n      current: 0,\n    }\n    this.reset()\n  }\n\n  private reset() {\n    this.currentText = undefined\n    this.selector = undefined\n  }\n\n  public contains(position: Vector): boolean {\n    return this.window.containsVector(position)\n  }\n}\n","import { Vector } from '../../spatial'\nimport { Renderer } from '../../renderer/renderer'\nimport { primary, gray } from '../../renderer/palettes'\n\nimport { TlbWorld } from '../../tlb'\n\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Selector, ItemSelector } from '../selector'\nimport { Tab, TabView, TabsKey } from '../tabs'\nimport { KeyboardCommand } from '../../resources/input'\nimport { Entity } from '../../ecs/entity'\nimport { MultipleChoiceOption } from '../multiple-choice-modal'\n\nexport class MultipleChoiceFullView implements TabView, Selector<Entity> {\n  public closed: boolean = false\n\n  public readonly selector: ItemSelector<Entity>\n\n  public constructor(private readonly content: Rectangle, private readonly options: MultipleChoiceOption[]) {\n    this.selector = new ItemSelector(this.options.map(o => o.entity))\n  }\n\n  public get selected(): Entity | undefined {\n    return this.selector.selected\n  }\n\n  public get hovered(): Entity | undefined {\n    return this.selector.hovered\n  }\n\n  public get length(): number {\n    return this.options.length\n  }\n\n  public render(renderer: Renderer) {\n    const options = this.options || []\n\n    let y = 0\n    options.forEach((option, i) => {\n      renderer.text(\n        `${i + 1} ${option.description}`,\n        this.content.topLeft.add(new Vector([0, y])),\n        primary[1],\n        this.selector.hoveredIndex === i ? gray[1] : undefined\n      )\n      y++\n    })\n  }\n\n  public update(world: TlbWorld) {\n    this.selector.update(world, this.content)\n  }\n}\n\nexport class MultipleChoiceSelector implements Tab, Selector<Entity> {\n  public readonly key: TabsKey = 'actionSelector'\n  public readonly name: string = 'select your move'\n  public readonly shortName: string = 'q'\n  public readonly command: KeyboardCommand = 'focus'\n\n  public readonly minimizedHint: TabsKey = 'overview'\n\n  public full: MultipleChoiceFullView | undefined\n  public minimized: MultipleChoiceFullView | undefined\n\n  public constructor(private readonly options: MultipleChoiceOption[]) {}\n\n  public setFull(content: Rectangle): void {\n    this.full = new MultipleChoiceFullView(content, this.options)\n  }\n\n  public setMinimized(content: Rectangle): void {\n    this.minimized = new MultipleChoiceFullView(content, this.options)\n  }\n\n  public get selected(): Entity | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.selected\n  }\n\n  public get hovered(): Entity | undefined {\n    if (this.full === undefined) {\n      return undefined\n    }\n    return this.full.hovered\n  }\n\n  public get length(): number {\n    if (this.full === undefined) {\n      return 0\n    }\n    return this.full.length\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { AbstractState } from './state'\nimport { Entity } from '../ecs/entity'\nimport { playerIsDead, playerIsStruggling, turnBasedEntities, clearTurnBased, isTurnBased } from '../component-reducers/turn-based'\n\nexport class Fighting extends AbstractState {\n  public constructor() {\n    super('fighting', ['start-round', 'player-round-control', 'ai-round-control', 'fov', 'npc', 'script', 'trigger'])\n  }\n\n  public start(world: TlbWorld): void {\n    super.start(world)\n\n    let player: Entity = world.getStorage('player').first()!\n    if (!isTurnBased(world, player)) {\n      this.setNextEntity(world, player)\n    }\n  }\n\n  public stop(world: TlbWorld): void {\n    super.stop(world)\n    if (this.isDone(world)) {\n      clearTurnBased(world)\n    }\n  }\n\n  public update(world: TlbWorld): void {\n    const noActivePlayer = world.getStorage('start-turn').size() === 0 && world.getStorage('take-turn').size() === 0\n    if (noActivePlayer) {\n      let next = world.getStorage('wait-turn').first()\n      if (next === undefined) {\n        this.newRound(world)\n        next = world.getStorage('wait-turn').first()!\n      }\n      this.setNextEntity(world, next)\n    }\n  }\n\n  public isDone(world: TlbWorld): boolean {\n    const isDead = playerIsDead(world)\n    const isStruggling = playerIsStruggling(world)\n    const onlyPlayerPlays = turnBasedEntities(world) <= world.components.get('player')!.size()\n    return isDead || (onlyPlayerPlays && !isStruggling)\n  }\n\n  public newRound(world: TlbWorld) {\n    world.getStorage('took-turn').foreach(entity => this.addToTurn(world, entity))\n    world.getStorage('took-turn').clear()\n  }\n\n  public addToTurn(world: TlbWorld, entity: Entity) {\n    world.editEntity(entity).withComponent('wait-turn', {})\n  }\n\n  public setNextEntity(world: TlbWorld, next: Entity): void {\n    world\n      .editEntity(next!)\n      .withComponent('start-turn', {})\n      .removeComponent('wait-turn')\n  }\n\n  public isFrameLocked(): boolean {\n    return true\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { Input, InputResource } from '../resources/input'\nimport { Entity } from '../ecs/entity'\nimport { CharacterStatsComponent, speed } from '../components/character-stats'\nimport { Vector } from '../spatial'\nimport { move } from '../component-reducers/position'\n\nexport class PlayerControl implements TlbSystem {\n  public readonly components: ComponentName[] = ['player', 'position', 'character-stats']\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const stats = world.getComponent<CharacterStatsComponent>(entity, 'character-stats')!\n    const input: Input = world.getResource<InputResource>('input')\n    const delta = input.createMovementDelta()\n\n    let newPosition: Vector | undefined = undefined\n    let newLevel: number | undefined = undefined\n    if (delta.squaredLength() > 0) {\n      newPosition = position.position.add(delta.mult(speed(stats)))\n      newLevel = position.level\n    }\n    if (newPosition !== undefined && newLevel !== undefined) {\n      move(world, entity, newLevel, newPosition)\n    }\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { Input, InputResource } from '../resources/input'\nimport { FunctionalShape } from '../geometry/functional-shape'\nimport { Entity } from '../ecs/entity'\nimport { TriggeredByComponent } from '../components/trigger'\nimport { UI, UIResource } from '../resources/ui'\nimport { State } from '../game-states/state'\nimport { Modal } from '../game-states/modal'\nimport { findTriggers } from '../component-reducers/trigger'\n\nexport class PlayerInteraction implements TlbSystem {\n  public readonly components: ComponentName[] = ['player', 'position']\n\n  public constructor(public readonly pushState: (state: State) => void) {}\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const ui: UI = world.getResource<UIResource>('ui')\n    const input: Input = world.getResource<InputResource>('input')\n    let trigger: Entity | undefined\n    if (input.isActive('use')) {\n      const position = world.getComponent<PositionComponent>(entity, 'position')!\n      const neighbourhood = FunctionalShape.lN(position.position, 1, true)\n\n      const triggers = findTriggers(world, position.level, neighbourhood)\n      if (triggers.length === 1) {\n        trigger = triggers[0].entity\n      } else if (triggers.length > 1) {\n        ui.showMultipleChoiceModal(\n          world,\n          'interact with',\n          triggers.map(t => ({ entity: t.entity, description: t.component.name }))\n        )\n        this.pushState(new Modal(world.activeSystemsList()))\n      }\n    } else if (ui.multipleChoiceModalShowing()) {\n      trigger = ui.selectedModalOption()\n      ui.hideMultipleChoiceModal()\n    }\n\n    if (trigger !== undefined) {\n      world\n        .editEntity(trigger)\n        .withComponent('active', {})\n        .withComponent<TriggeredByComponent>('triggered-by', { entity })\n    }\n  }\n}\n","import { createFeatureFromType } from '../components/feature'\nimport { RegionComponent, StructureComponent } from '../components/region'\nimport { Entity } from '../ecs/entity'\nimport { Distribution } from '../random/distributions'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { shapeOfAsset, createAssetFromShape } from '../components/asset'\nimport { regionParams } from '../assets/complexes'\nimport { embedComplexes, ComplexEmbedding } from '../generative/complex-embedder'\nimport { fill } from '../generative/complex-filler'\nimport { SpacePartitioner } from '../generative/space-partitioner'\nimport { FeatureType } from '../assets/features'\nimport { Shape } from '../geometry/shape'\nimport { Vector } from '../spatial'\nimport { Partition } from '../generative/partitioners/Partitioner'\nimport * as partitioners from '../generative/partitioners'\nimport { Random } from '../random'\n\nexport class RegionBuilder implements TlbSystem {\n  public readonly components: ComponentName[] = ['active', 'region']\n\n  private readonly uniform: Random\n  public constructor(private readonly rng: Distribution, public readonly dry: boolean = false) {\n    this.uniform = new Random(rng)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const region = world.getComponent<RegionComponent>(entity, 'region')!\n    let success = true\n    switch (region.type) {\n      case 'entrance':\n        success = this.buildEntrance(world, entity, region)\n        break\n      case 'ground-floor':\n        success = this.buildOfficeSpace(world, entity, region)\n        break\n      case 'elevator':\n        success = this.buildElevator(world, entity, region)\n        break\n      case 'red-base':\n      case 'red-plus':\n      case 'green-base':\n      case 'green-plus':\n      case 'yellow-base':\n      case 'yellow-plus':\n      case 'blue-base':\n      case 'blue-plus':\n        success = this.buildOfficeSpace(world, entity, region)\n        break\n      case 'core':\n        success = this.buildCore(world, entity, region)\n        break\n    }\n    if (success) {\n      world.editEntity(entity).removeComponent('active')\n    } else {\n      console.error('region failed', region)\n    }\n  }\n\n  private buildElevator(world: TlbWorld, entity: Entity, region: RegionComponent): boolean {\n    const partition: Partition = {\n      type: 'final',\n      kind: 'hub',\n      shape: region.shape.shrink(),\n      exits: region.exits,\n    }\n    return this.tryToBuildPartition(world, entity, region, partition)\n  }\n\n  private buildOfficeSpace(world: TlbWorld, entity: Entity, region: RegionComponent): boolean {\n    const partitioner = new SpacePartitioner(this.rng)\n    partitioner.registerPartitioner(new partitioners.CorridorSplit(3, 10))\n    partitioner.registerPartitioner(new partitioners.RoomSplit(8))\n    partitioner.registerPartitioner(new partitioners.OutsetCorridorSplit(3, 8))\n    const partition = partitioner.partition(region.shape, region.exits)\n    return this.tryToBuildPartition(world, entity, region, partition)\n  }\n\n  private buildEntrance(world: TlbWorld, entity: Entity, region: RegionComponent): boolean {\n    const partitioner = new SpacePartitioner(this.rng)\n    partitioner.registerPartitioner(new partitioners.OutsetCorridorSplit(3, 8))\n    const partition = partitioner.partition(region.shape, region.exits)\n    return this.tryToBuildPartition(world, entity, region, partition)\n  }\n\n  private buildCore(world: TlbWorld, entity: Entity, region: RegionComponent): boolean {\n    const partitioner = new SpacePartitioner(this.rng)\n    partitioner.registerPartitioner(new partitioners.KnossosMaze())\n    const partition = partitioner.partition(region.shape, region.exits)\n    return this.tryToBuildPartition(world, entity, region, partition)\n  }\n\n  private printPartition(partition: Partition, tab: string = ''): string {\n    switch (partition.type) {\n      case 'final': {\n        const bounds = partition.shape.bounds()\n        return `${tab}+${partition.kind} - ${bounds.x}, ${bounds.y}, ${bounds.width}, ${bounds.height}`\n      }\n      case 'node': {\n        const bounds = partition.shape.bounds()\n        return `${tab}+${partition.type} - ${bounds.x}, ${bounds.y}, ${bounds.width}, ${bounds.height}\\n${partition.partitions\n          .map(p => this.printPartition(p, tab + '| '))\n          .join('\\n')}`\n      }\n    }\n  }\n  private tryToBuildPartition(world: TlbWorld, entity: Entity, region: RegionComponent, partition: Partition): boolean {\n    const root = this.fillPartitionWithStructure(world, entity, partition)\n    const embeddings = this.findEmbedding(world, entity, root)\n\n    if (embeddings !== undefined) {\n      if (!this.dry) {\n        const map = world.getResource<WorldMapResource>('map')\n        this.renderPartition(world, map, region.level, partition)\n        embeddings.forEach(e => fill(world, map, region.level, e.embedding, this.uniform, e.structure))\n      }\n      return true\n    } else {\n      this.removeStructures(world, entity)\n      return false\n    }\n  }\n\n  public fillPartitionWithStructure(world: TlbWorld, region: Entity, partition: Partition): Entity {\n    switch (partition.type) {\n      case 'node': {\n        const structures = partition.partitions.map(p => this.fillPartitionWithStructure(world, region, p))\n        partition.connections.forEach(e => {\n          const from = structures[e.from]\n          const to = structures[e.to]\n          world.getComponent<StructureComponent>(from, 'structure')!.connections.push(to)\n          world.getComponent<StructureComponent>(to, 'structure')!.connections.push(from)\n        })\n        return structures[partition.exit]\n      }\n      case 'final': {\n        const entity = world\n          .createEntity()\n          .withComponent<StructureComponent>('structure', { kind: partition.kind, shape: partition.shape, connections: [], region }).entity\n        partition.entity = entity\n        return entity\n      }\n    }\n  }\n\n  public removeStructures(world: TlbWorld, region: Entity): void {\n    const structures: Entity[] = []\n    world.getStorage<StructureComponent>('structure').foreach((e, s) => {\n      if (s.region === region) {\n        structures.push(e)\n      }\n    })\n    structures.forEach(e => world.deleteEntity(e))\n  }\n\n  public findEmbedding(world: TlbWorld, entity: Entity, structure: Entity): ComplexEmbedding[] | undefined {\n    const s = world.getComponent<StructureComponent>(structure, 'structure')!\n    if (s.region === entity) {\n      const region = world.getComponent<RegionComponent>(entity, 'region')!\n      const params = regionParams[region.type]\n      return embedComplexes(world, this.uniform, entity, params)\n    }\n    return []\n  }\n\n  private renderPartition(world: TlbWorld, map: WorldMap, level: number, partition: Partition): void {\n    switch (partition.type) {\n      case 'node': {\n        partition.partitions.map(partition => this.renderPartition(world, map, level, partition))\n        break\n      }\n      case 'final': {\n        const entity = partition.entity!\n        if (partition.kind === 'room') {\n          this.renderRoom(world, map, level, entity, partition.shape, partition.kind)\n          this.renderExits(world, map, level, entity, partition.shape, partition.exits)\n          this.renderDoors(world, map, level, partition.shape, partition.exits)\n        } else if (partition.kind === 'corridor') {\n          this.renderRoom(world, map, level, entity, partition.shape, partition.kind)\n          this.renderExits(world, map, level, entity, partition.shape, partition.exits)\n        } else if (partition.kind === 'hub') {\n          this.renderRoom(world, map, level, entity, partition.shape, partition.kind)\n          this.renderExits(world, map, level, entity, partition.shape, partition.exits)\n          this.renderDoors(world, map, level, partition.shape, partition.exits)\n        }\n      }\n    }\n  }\n\n  public renderExits(world: TlbWorld, map: WorldMap, level: number, entity: Entity, shape: Shape, positions: Vector[]): void {\n    const bounds = shape.bounds()\n    positions.forEach(exit => {\n      if (map.levels[level].getStructure(exit) === undefined) {\n        const direction = bounds.grow().getWall(exit)\n        if (direction !== undefined) {\n          const shape = shapeOfAsset('door', exit, direction!)\n          shape.foreach(position => {\n            this.setTile(world, map, level, position, entity, 'corridor')\n          })\n        }\n      }\n    })\n  }\n\n  public renderDoors(world: TlbWorld, map: WorldMap, level: number, shape: Shape, positions: Vector[]): void {\n    const bounds = shape.bounds()\n    positions.forEach(exit => {\n      if (map.levels[level].tileMatches(world, exit, f => f !== undefined && f.feature().ground)) {\n        const direction = bounds.grow().getWall(exit)\n        if (direction !== undefined) {\n          const shape = shapeOfAsset('door', exit, direction!)\n          createAssetFromShape(world, this.uniform, level, shape, 'door')\n        }\n      }\n    })\n  }\n\n  private renderRoom(world: TlbWorld, map: WorldMap, level: number, entity: Entity, shape: Shape, floor: FeatureType): void {\n    shape.foreach(position => {\n      this.setTile(world, map, level, position, entity, floor)\n    })\n  }\n\n  private setTile(world: TlbWorld, map: WorldMap, level: number, position: Vector, entity: Entity, floor: FeatureType): void {\n    createFeatureFromType(world, level, position, floor)\n    map.levels[level].setStructure(position, entity)\n  }\n}\n","import { ComplexTemplate, ComplexDescription, occur, StructureRestriction, optional, layout } from '../generative/complex-embedder'\nimport { characterCreators, CharacterCreator } from './characters'\nimport { AssetType } from './assets'\nimport { ItemBaseType } from './items'\nimport { RegionsType } from '../components/region'\nimport { QuestComponent } from '../components/quest'\n\nfunction restriction(restriction: Partial<StructureRestriction>): Partial<StructureRestriction> {\n  return restriction\n}\nconst complexesDefinition: { [key: string]: ComplexTemplate } = {\n  entrance: {\n    structures: [\n      {\n        description: {\n          decorations: [],\n          containers: [layout<AssetType>('regular', 'wall', occur(8), 'urinal')],\n          loots: [],\n          npcs: [],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'room' }),\n      },\n    ],\n  },\n  theCore: {\n    structures: [\n      {\n        description: {\n          decorations: [],\n          containers: [\n            layout<AssetType>('default', 'wall', occur(8), 'generator'),\n            layout<AssetType>('default', 'center', occur(1), 'core'),\n          ],\n          loots: [],\n          npcs: [],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'room' }),\n      },\n    ],\n  },\n  anEncounter: {\n    structures: [\n      {\n        description: {\n          decorations: [layout<AssetType>('default', 'random', occur(1), 'trash')],\n          containers: [layout<AssetType>('default', 'wall', occur(1), 'locker')],\n          loots: [\n            layout<ItemBaseType>('default', 'random', occur(1), 'nailGun', 'leatherJacket'),\n            layout<ItemBaseType>('default', 'random', occur(1), 'powerGauntlet'),\n          ],\n          npcs: [layout<CharacterCreator>('default', 'random', occur(1), characterCreators.eliteGuard, characterCreators.guard)],\n          bosses: [layout<CharacterCreator>('default', 'random', occur(1), characterCreators.boss)],\n        },\n        restriction: restriction({ kind: 'room' }),\n      },\n    ],\n  },\n  toilettes: {\n    structures: [\n      {\n        description: {\n          decorations: [layout<AssetType>('default', 'random', occur(5), 'trash')],\n          containers: [layout<AssetType>('default', 'wall', occur(1), 'urinal')],\n          loots: [],\n          npcs: [layout<CharacterCreator>('default', 'random', occur(1, 3), characterCreators.civilian)],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'room', exact: true, connects: [1] }),\n      },\n      {\n        description: {\n          decorations: [],\n          containers: [],\n          loots: [],\n          npcs: [],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'corridor', connects: [0] }),\n      },\n    ],\n  },\n  guardsStation: {\n    structures: [\n      {\n        description: {\n          decorations: [],\n          containers: [],\n          loots: [],\n          npcs: [\n            layout<CharacterCreator>('default', 'random', occur(1), (world, random, region, options) => {\n              const civilian = characterCreators.civilian(world, random, region, options)\n              world.editEntity(civilian).withComponent<QuestComponent>('quest', { type: 'quest1' })\n              return civilian\n            }),\n          ],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'corridor', connects: [1] }),\n      },\n      {\n        description: {\n          decorations: [],\n          containers: [layout<AssetType>('default', 'random', occur(4), 'table')],\n          loots: [layout<ItemBaseType>('default', 'random', occur(1), 'bandages', 'deathPill')],\n          npcs: [\n            layout<CharacterCreator>('default', 'random', occur(2), characterCreators.eliteGuard),\n            layout<CharacterCreator>('default', 'random', occur(3), characterCreators.guard),\n          ],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'room', connects: [2, 0] }),\n      },\n      {\n        description: {\n          decorations: [layout<AssetType>('default', 'random', occur(1), 'terminal')],\n          containers: [layout<AssetType>('default', 'wall', occur(5), 'locker')],\n          loots: [\n            layout<ItemBaseType>('default', 'random', occur(5), 'sniperRifle'),\n            layout<ItemBaseType>('default', 'random', occur(3), 'bandages'),\n            layout<ItemBaseType>('default', 'random', occur(5), 'leatherJacket'),\n          ],\n          npcs: [layout<CharacterCreator>('default', 'random', occur(1), characterCreators.eliteGuard, characterCreators.guard)],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'room', connects: [1], exact: true }),\n      },\n    ],\n  },\n  generators: {\n    structures: [\n      {\n        description: {\n          decorations: [layout<AssetType>('default', 'random', occur(3), 'generator')],\n          containers: [layout<AssetType>('default', 'random', optional(1), 'locker')],\n          loots: [layout<ItemBaseType>('default', 'random', occur(2), 'bandages')],\n          npcs: [],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'corridor' }),\n      },\n    ],\n  },\n  elevator: {\n    structures: [\n      {\n        description: {\n          decorations: [layout<AssetType>('default', 'center', occur(1), 'elevator')],\n          containers: [],\n          loots: [],\n          npcs: [],\n          bosses: [],\n        },\n        restriction: restriction({ kind: 'hub' }),\n      },\n    ],\n  },\n}\nexport type ComplexesType = keyof typeof complexesDefinition\nexport const complexes: { [key in ComplexesType]: ComplexTemplate } = complexesDefinition\n\nexport const regionParams: { [key in RegionsType]: ComplexDescription[] } = {\n  'red-base': [],\n  'red-plus': [],\n  'green-base': [],\n  'green-plus': [],\n  'yellow-base': [],\n  'yellow-plus': [],\n  'blue-base': [],\n  'blue-plus': [],\n  'ground-floor': [\n    {\n      occurrence: occur(1, 2),\n      template: complexes.anEncounter,\n    },\n    {\n      occurrence: occur(1),\n      template: complexes.guardsStation,\n    },\n    {\n      occurrence: occur(1, 2),\n      template: complexes.toilettes,\n    },\n    {\n      occurrence: occur(1, 2),\n      template: complexes.generators,\n    },\n  ],\n  entrance: [{ occurrence: occur(1), template: complexes.entrance }],\n  elevator: [{ occurrence: occur(1), template: complexes.elevator }],\n  core: [\n    {\n      occurrence: occur(1),\n      template: complexes.theCore,\n    },\n  ],\n}\n","var MiniSat = require(\"./minisat_wrapper.js\");\nvar _ = require(\"underscore\");\nvar Logic;\nLogic = {};\n\n////////// TYPE TESTERS\n\n\n// Set the `description` property of a tester function and return the function.\nvar withDescription = function (description, tester) {\n  tester.description = description;\n  return tester;\n};\n\n// Create a function (x) => (x instanceof constructor), but possibly before\n// constructor is available.  For example, if Logic.Formula hasn't been\n// assigned yet, passing Logic for `obj` and \"Formula\" for `constructorName`\n// will still work.\nvar lazyInstanceofTester = function (description, obj, constructorName) {\n  return withDescription(description, function (x) {\n    return x instanceof obj[constructorName];\n  });\n};\n\n\n///// PUBLIC TYPE TESTERS\n\n// All variables have a name and a number.  The number is mainly used\n// internally, and it's what's given to MiniSat.  Names and numbers\n// are interchangeable, which is convenient for doing manipulation\n// of terms in a way that works before or after variable names are\n// converted to numbers.\n\n// Term: a variable name or variable number, optionally\n// negated (meaning \"boolean not\").  For example,\n// `1`, `-1`, `\"foo\"`, or `\"-foo\"`.  All variables have\n// internal numbers that start at 1, so \"foo\" might be\n// variable number 1, for example.  Any number of leading\n// \"-\" will be parsed in the string form, but we try to\n// keep it to either one or zero of them.\n\nLogic.isNumTerm = withDescription('a NumTerm (non-zero integer)',\n                                  function (x) {\n                                    // 32-bit integer, but not 0\n                                    return (x === (x | 0)) && x !== 0;\n                                  });\n\n// NameTerm must not be empty, or just `-` characters, or look like a\n// number.  Specifically, it can't be zero or more `-` followed by\n// zero or more digits.\nLogic.isNameTerm = withDescription('a NameTerm (string)',\n                                   function (x) {\n                                     return (typeof x === 'string') &&\n                                       ! /^-*[0-9]*$/.test(x);\n                                   });\n\nLogic.isTerm = withDescription('a Term (appropriate string or number)',\n                               function (x) {\n                                 return Logic.isNumTerm(x) ||\n                                   Logic.isNameTerm(x);\n                               });\n\n// WholeNumber: a non-negative integer (0 is allowed)\nLogic.isWholeNumber = withDescription('a whole number (integer >= 0)',\n                                      function (x) {\n                                        return (x === (x | 0)) && x >= 0;\n                                      });\n\nLogic.isFormula = lazyInstanceofTester('a Formula', Logic, 'Formula');\nLogic.isClause = lazyInstanceofTester('a Clause', Logic, 'Clause');\nLogic.isBits = lazyInstanceofTester('a Bits', Logic, 'Bits');\n\n///// UNDOCUMENTED TYPE TESTERS\n\nLogic._isInteger = withDescription(\n  'an integer', function (x) { return x === (x | 0); });\n\nLogic._isFunction = withDescription(\n  'a Function', function (x) { return typeof x === 'function'; });\n\nLogic._isString = withDescription(\n  'a String', function (x) { return typeof x === 'string'; });\n\nLogic._isArrayWhere = function (tester) {\n  var description = 'an array';\n  if (tester.description) {\n    description += ' of ' + tester.description;\n  }\n  return withDescription(description, function (x) {\n    if (! _.isArray(x)) {\n      return false;\n    } else {\n      for (var i = 0; i < x.length; i++) {\n        if (! tester(x[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  });\n};\n\nLogic._isFormulaOrTerm = withDescription('a Formula or Term',\n                                         function (x) {\n                                           return Logic.isFormula(x) ||\n                                             Logic.isTerm(x);\n                                         });\n\n\nLogic._isFormulaOrTermOrBits = withDescription('a Formula, Term, or Bits',\n                                               function (x) {\n                                                 return Logic.isFormula(x) ||\n                                                   Logic.isBits(x) ||\n                                                   Logic.isTerm(x);\n                                               });\nLogic._MiniSat = MiniSat; // Expose for testing and poking around\n\n// import the private testers from types.js\nvar isInteger = Logic._isInteger;\nvar isFunction = Logic._isFunction;\nvar isString = Logic._isString;\nvar isArrayWhere = Logic._isArrayWhere;\nvar isFormulaOrTerm = Logic._isFormulaOrTerm;\nvar isFormulaOrTermOrBits = Logic._isFormulaOrTermOrBits;\n\nLogic._assert = function (value, tester, description) {\n  if (! tester(value)) {\n    var displayValue = (typeof value === 'string' ? JSON.stringify(value) :\n                        value);\n    throw new Error(displayValue + \" is not \" +\n                    (tester.description || description));\n  }\n};\n\n// Call this as `if (assert) assertNumArgs(...)`\nvar assertNumArgs = function (actual, expected, funcName) {\n  if (actual !== expected) {\n    throw new Error(\"Expected \" + expected + \" args in \" + funcName +\n                    \", got \" + actual);\n  }\n};\n\n// Call `assert` as: `if (assert) assert(...)`.\n// This local variable temporarily set to `null` inside\n// `Logic.disablingAssertions`.\nvar assert = Logic._assert;\n\n// Like `if (assert) assert(...)` but usable from other files in the package.\nLogic._assertIfEnabled = function (value, tester, description) {\n  if (assert) assert(value, tester, description);\n};\n\n// Disabling runtime assertions speeds up clause generation.  Assertions\n// are disabled when the local variable `assert` is null instead of\n// `Logic._assert`.\nLogic.disablingAssertions = function (f) {\n  var oldAssert = assert;\n  try {\n    assert = null;\n    return f();\n  } finally {\n    assert = oldAssert;\n  }\n};\n\n// Back-compat.\nLogic._disablingTypeChecks = Logic.disablingAssertions;\n\n////////////////////\n\n// Takes a Formula or Term, returns a Formula or Term.\n// Unlike other operators, if you give it a Term,\n// you will get a Term back (of the same type, NameTerm\n// or NumTerm).\nLogic.not = function (operand) {\n  if (assert) assert(operand, isFormulaOrTerm);\n\n  if (operand instanceof Logic.Formula) {\n    return new Logic.NotFormula(operand);\n  } else {\n    // Term\n    if (typeof operand === 'number') {\n      return -operand;\n    } else if (operand.charAt(0) === '-') {\n      return operand.slice(1);\n    } else {\n      return '-' + operand;\n    }\n  }\n};\n\nLogic.NAME_FALSE = \"$F\";\nLogic.NAME_TRUE = \"$T\";\nLogic.NUM_FALSE = 1;\nLogic.NUM_TRUE = 2;\n\nLogic.TRUE = Logic.NAME_TRUE;\nLogic.FALSE = Logic.NAME_FALSE;\n\n// Abstract base class.  Subclasses are created using _defineFormula.\nLogic.Formula = function () {};\n\nLogic._defineFormula = function (constructor, typeName, methods) {\n  if (assert) assert(constructor, isFunction);\n  if (assert) assert(typeName, isString);\n\n  constructor.prototype = new Logic.Formula();\n  constructor.prototype.type = typeName;\n  if (methods) {\n    _.extend(constructor.prototype, methods);\n  }\n};\n\n// Returns a list of Clauses that together require the Formula to be\n// true, or false (depending on isTrue; both cases must be\n// implemented).  A single Clause may also be returned.  The\n// implementation should call the termifier to convert terms and\n// formulas to NumTerms specific to a solver instance, and use them to\n// construct a Logic.Clause.\nLogic.Formula.prototype.generateClauses = function (isTrue, termifier) {\n  throw new Error(\"Cannot generate this Formula; it must be expanded\");\n};\n// All Formulas have a globally-unique id so that Solvers can track them.\n// It is assigned lazily.\nLogic.Formula._nextGuid = 1;\nLogic.Formula.prototype._guid = null;\nLogic.Formula.prototype.guid = function () {\n  if (this._guid === null) {\n    this._guid = Logic.Formula._nextGuid++;\n  }\n  return this._guid;\n};\n\n// A \"clause\" is a disjunction of terms, e.g. \"A or B or (not C)\",\n// which we write \"A v B v -C\".  Logic.Clause is mainly an internal\n// Solver data structure, which is the final result of formula\n// generation and mapping variable names to numbers, before passing\n// the clauses to MiniSat.\nLogic.Clause = function (/*formulaOrArray, ...*/) {\n  var terms = _.flatten(arguments);\n  if (assert) assert(terms, isArrayWhere(Logic.isNumTerm));\n\n  this.terms = terms; // immutable [NumTerm]\n};\n\n// Returns a new Clause with the extra term or terms appended\nLogic.Clause.prototype.append = function (/*formulaOrArray, ...*/) {\n  return new Logic.Clause(this.terms.concat(_.flatten(arguments)));\n};\n\nvar FormulaInfo = function () {\n  // We generate a variable when a Formula is used.\n  this.varName = null; // string name of variable\n  this.varNum = null; // number of variable (always positive)\n\n  // A formula variable that is used only in the positive or only\n  // in the negative doesn't need the full set of clauses that\n  // establish a bidirectional implication between the formula and the\n  // variable.  For example, in the formula `Logic.or(\"A\", \"B\")`, with the\n  // formula variable `$or1`, the full set of clauses is `A v B v\n  // -$or1; -A v $or1; -B v $or1`.  If both `$or1` and `-$or1` appear\n  // elsewhere in the set of clauses, then all three of these clauses\n  // are required.  However, somewhat surprisingly, if only `$or1` appears,\n  // then only the first is necessary.  If only `-$or1` appears, then only\n  // the second and third are necessary.\n  //\n  // Suppose the formula A v B is represented by the variable $or1,\n  // and $or1 is only used positively. It's important that A v B being\n  // false forces $or1 to be false, so that when $or1 is used it has\n  // the appropriate effect. For example, if we have the clause $or1 v\n  // C, then A v B being false should force $or1 to be false, which\n  // forces C to be true. So we generate the clause A v B v\n  // -$or1. (The implications of this clause are: If A v B is false,\n  // $or1 must be false. If $or1 is true, A v B must be true.)\n  //\n  // However, in the case where A v B is true, we don't actually\n  // need to insist that the solver set $or1 to true, as long as we\n  // are ok with relaxing the relationship between A v B and $or1\n  // and getting a \"wrong\" value for $or1 in the solution. Suppose\n  // the solver goes to work and at some point determines A v B to\n  // be true. It could set $or1 to true, satisfying all the clauses\n  // where it appears, or it could set $or1 to false, which only\n  // constrains the solution space and doesn't open up any new\n  // solutions for other variables. If the solver happens to find a\n  // solution where A v B is true and $or1 is false, we know there\n  // is a similar solution that makes all the same assignments\n  // except it assigns $or1 to true.\n  //\n  // If a formula is used only negatively, a similar argument applies\n  // but with signs flipped, and if it is used both positively and\n  // negatively, both kinds of clauses must be generated.\n  //\n  // See the mention of \"polarity\" in the MiniSat+ paper\n  // (http://minisat.se/downloads/MiniSat+.pdf).\n  //\n  // These flags are set when generation has been done for the positive\n  // case or the negative case, so that we only generate each one once.\n  this.occursPositively = false;\n  this.occursNegatively = false;\n\n  // If a Formula has been directly required or forbidden, we can\n  // replace it by TRUE or FALSE in subsequent clauses.  Track the\n  // information here.\n  this.isRequired = false;\n  this.isForbidden = false;\n};\n\n\n// The \"termifier\" interface is provided to a Formula's\n// generateClauses method, which must use it to generate Clause\n// objects.\n//\n// The reason for this approach is that it gives the Formula control\n// over the clauses returned, but it gives the Solver control over\n// Formula generation.\nLogic.Termifier = function (solver) {\n  this.solver = solver;\n};\n\n// The main entry point, the `clause` method takes a list of\n// FormulaOrTerms and converts it to a Clause containing NumTerms, *by\n// replacing Formulas with their variables*, creating the variable if\n// necessary.  For example, if an OrFormula is represented by the\n// variable `$or1`, it will be replaced by the numeric version of\n// `$or1` to make the Clause.  When the Clause is actually used, it\n// will trigger generation of the clauses that relate `$or1` to the\n// operands of the OrFormula.\nLogic.Termifier.prototype.clause = function (/*args*/) {\n  var self = this;\n  var formulas = _.flatten(arguments);\n  if (assert) assert(formulas, isArrayWhere(isFormulaOrTerm));\n\n  return new Logic.Clause(_.map(formulas, function (f) {\n    return self.term(f);\n  }));\n};\n\n// The `term` method performs the mapping from FormulaOrTerm to\n// NumTerm.  It's called by `clause` and could be called directly\n// from a Formula's generateClauses if it was useful for some\n// reason.\nLogic.Termifier.prototype.term = function (formula) {\n  return this.solver._formulaToTerm(formula);\n};\n\n// The `generate` method generates clauses for a Formula (or\n// Term).  It should be used carefully, because it works quite\n// differently from passing a Formula into `clause`, which is the\n// normal way for one Formula to refer to another.  When you use a\n// Formula in `clause`, it is replaced by the Formula's variable,\n// and the Solver handles generating the Formula's clauses once.\n// When you use `generate`, this system is bypassed, and the\n// Formula's generateClauses method is called pretty much directly,\n// returning the array of Clauses.\nLogic.Termifier.prototype.generate = function (isTrue, formula) {\n  return this.solver._generateFormula(isTrue, formula, this);\n};\n\n\nLogic.Solver = function () {\n  var self = this;\n\n  self.clauses = []; // mutable [Clause]\n  self._num2name = [null]; // no 0th var\n  self._name2num = {}; // (' '+vname) -> vnum\n\n  // true and false\n  var F = self.getVarNum(Logic.NAME_FALSE, false, true); // 1\n  var T = self.getVarNum(Logic.NAME_TRUE, false, true); // 2\n  if (F !== Logic.NUM_FALSE || T !== Logic.NUM_TRUE) {\n    throw new Error(\"Assertion failure: $T and $F have wrong numeric value\");\n  }\n  self._F_used = false;\n  self._T_used = false;\n  // It's important that these clauses are elements 0 and 1\n  // of the clauses array, so that they can optionally be stripped\n  // off.  For example, _clauseData takes advantage of this fact.\n  self.clauses.push(new Logic.Clause(-Logic.NUM_FALSE));\n  self.clauses.push(new Logic.Clause(Logic.NUM_TRUE));\n\n  self._formulaInfo = {}; // Formula guid -> FormulaInfo\n  // For generating formula variables like \"$or1\", \"$or2\", \"$and1\", \"$and2\"\n  self._nextFormulaNumByType = {}; // Formula type -> next var id\n  // Map of Formulas whose info has `false` for either\n  // `occursPositively` or `occursNegatively`\n  self._ungeneratedFormulas = {}; // varNum -> Formula\n\n  self._numClausesAddedToMiniSat = 0;\n  self._unsat = false; // once true, no solution henceforth\n  self._minisat = new MiniSat(); // this takes some time\n\n  self._termifier = new Logic.Termifier(self);\n};\n\n// Get a var number for vname, assigning it a number if it is new.\n// Setting \"noCreate\" to true causes the function to return 0 instead of\n// creating a new variable.\n// Setting \"_createInternals\" to true grants the ability to create $ variables.\nLogic.Solver.prototype.getVarNum = function (vname, noCreate, _createInternals) {\n  var key = ' '+vname;\n  if (_.has(this._name2num, key)) {\n    return this._name2num[key];\n  } else if (noCreate) {\n    return 0;\n  } else {\n    if (vname.charAt(0) === \"$\" && ! _createInternals) {\n      throw new Error(\"Only generated variable names can start with $\");\n    }\n    var vnum = this._num2name.length;\n    this._name2num[key] = vnum;\n    this._num2name.push(vname);\n    return vnum;\n  }\n};\n\nLogic.Solver.prototype.getVarName = function (vnum) {\n  if (assert) assert(vnum, isInteger);\n\n  var num2name = this._num2name;\n  if (vnum < 1 || vnum >= num2name.length) {\n    throw new Error(\"Bad variable num: \" + vnum);\n  } else {\n    return num2name[vnum];\n  }\n};\n\n// Converts a Term to a NumTerm (if it isn't already).  This is done\n// when a Formula creates Clauses for a Solver, since Clauses require\n// NumTerms.  NumTerms stay the same, while a NameTerm like \"-foo\"\n// might become (say) the number -3.  If a NameTerm names a variable\n// that doesn't exist, it is automatically created, unless noCreate\n// is passed, in which case 0 is returned instead.\nLogic.Solver.prototype.toNumTerm = function (t, noCreate) {\n  var self = this;\n\n  if (assert) assert(t, Logic.isTerm);\n\n  if (typeof t === 'number') {\n    return t;\n  } else { // string\n    var not = false;\n    while (t.charAt(0) === '-') {\n      t = t.slice(1);\n      not = ! not;\n    }\n    var n = self.getVarNum(t, noCreate);\n    if (! n) {\n      return 0; // must be the noCreate case\n    } else {\n      return (not ? -n : n);\n    }\n  }\n};\n\n// Converts a Term to a NameTerm (if it isn't already).\nLogic.Solver.prototype.toNameTerm = function (t) {\n  var self = this;\n\n  if (assert) assert(t, Logic.isTerm);\n\n  if (typeof t === 'string') {\n    // canonicalize, removing leading \"--\"\n    while (t.slice(0, 2) === '--') {\n      t = t.slice(2);\n    }\n    return t;\n  } else { // number\n    var not = false;\n    if (t < 0) {\n      not = true;\n      t = -t;\n    }\n    t = self.getVarName(t);\n    if (not) {\n      t = '-' + t;\n    }\n    return t;\n  }\n};\n\nLogic.Solver.prototype._addClause = function (cls, _extraTerms,\n                                              _useTermOverride) {\n  var self = this;\n\n  if (assert) assert(cls, Logic.isClause);\n\n  var extraTerms = null;\n  if (_extraTerms) {\n    extraTerms = _extraTerms;\n    if (assert) assert(extraTerms, isArrayWhere(Logic.isNumTerm));\n  }\n\n  var usedF = false;\n  var usedT = false;\n\n  var numRealTerms = cls.terms.length;\n  if (extraTerms) {\n    // extraTerms are added to the clause as is.  Formula variables in\n    // extraTerms do not cause Formula clause generation, which is\n    // necessary to implement Formula clause generation.\n    cls = cls.append(extraTerms);\n  }\n\n  for (var i = 0; i < cls.terms.length; i++) {\n    var t = cls.terms[i];\n    var v = (t < 0) ? -t : t;\n    if (v === Logic.NUM_FALSE) {\n      usedF = true;\n    } else if (v === Logic.NUM_TRUE) {\n      usedT = true;\n    } else if (v < 1 || v >= self._num2name.length) {\n      throw new Error(\"Bad variable number: \" + v);\n    } else if (i < numRealTerms) {\n      if (_useTermOverride) {\n        _useTermOverride(t);\n      } else {\n        self._useFormulaTerm(t);\n      }\n    }\n  }\n\n  this._F_used = (this._F_used || usedF);\n  this._T_used = (this._T_used || usedT);\n\n  this.clauses.push(cls);\n};\n\n// When we actually use a Formula variable, generate clauses for it,\n// based on whether the usage is positive or negative.  For example,\n// if the Formula `Logic.or(\"X\", \"Y\")` is represented by `$or1`, which\n// is variable number 5, then when you actually use 5 or -5 in a clause,\n// the clauses \"X v Y v -5\" (when you use 5) or \"-X v 5; -Y v 5\"\n// (when you use -5) will be generated.  The clause \"X v Y v -5\"\n// is equivalent to \"5 => X v Y\" (or -(X v Y) => -5), while the clauses\n// \"-X v 5; -Y v 5\" are equivalent to \"-5 => -X; -5 => -Y\" (or\n// \"X => 5; Y => 5\").\n\nLogic.Solver.prototype._useFormulaTerm = function (t, _addClausesOverride) {\n  var self = this;\n  if (assert) assert(t, Logic.isNumTerm);\n  var v = (t < 0) ? -t : t;\n\n  if (! _.has(self._ungeneratedFormulas, v)) {\n    return;\n  }\n\n  // using a Formula's var; maybe have to generate clauses\n  // for the Formula\n  var formula = self._ungeneratedFormulas[v];\n  var info = self._getFormulaInfo(formula);\n  var positive = t > 0;\n\n  // To avoid overflowing the JS stack, defer calls to addClause.\n  // The way we get overflows is when Formulas are deeply nested\n  // (which happens naturally when you call Logic.sum or\n  // Logic.weightedSum on a long list of terms), which causes\n  // addClause to call useFormulaTerm to call addClause, and so\n  // on.  Approach:  The outermost useFormulaTerm keeps a list\n  // of clauses to add, and then adds them in a loop using a\n  // special argument to addClause that passes a special argument\n  // to useFormulaTerm that causes those clauses to go into the\n  // list too.  Code outside of `_useFormulaTerm` and `_addClause(s)`\n  // does not have to pass these special arguments to call them.\n  var deferredAddClauses = null;\n  var addClauses;\n  if (! _addClausesOverride) {\n    deferredAddClauses = [];\n    addClauses = function (clauses, extraTerms) {\n      deferredAddClauses.push({clauses: clauses,\n                               extraTerms: extraTerms});\n    };\n  } else {\n    addClauses = _addClausesOverride;\n  }\n\n  if (positive && ! info.occursPositively) {\n    // generate clauses for the formula.\n    // Eg, if we use variable `X` which represents the formula\n    // `A v B`, add the clause `A v B v -X`.\n    // By using the extraTerms argument to addClauses, we avoid\n    // treating this as a negative occurrence of X.\n    info.occursPositively = true;\n    var clauses = self._generateFormula(true, formula);\n    addClauses(clauses, [-v]);\n  } else if ((! positive) && ! info.occursNegatively) {\n    // Eg, if we have the term `-X` where `X` represents the\n    // formula `A v B`, add the clauses `-A v X` and `-B v X`.\n    // By using the extraTerms argument to addClauses, we avoid\n    // treating this as a positive occurrence of X.\n    info.occursNegatively = true;\n    var clauses = self._generateFormula(false, formula);\n    addClauses(clauses, [v]);\n  }\n  if (info.occursPositively && info.occursNegatively) {\n    delete self._ungeneratedFormulas[v];\n  }\n\n  if (! (deferredAddClauses && deferredAddClauses.length)) {\n    return;\n  }\n\n  var useTerm = function (t) {\n    self._useFormulaTerm(t, addClauses);\n  };\n  // This is the loop that turns recursion into iteration.\n  // When addClauses calls useTerm, which calls useFormulaTerm,\n  // the nested useFormulaTerm will add any clauses to our\n  // own deferredAddClauses list.\n  while (deferredAddClauses.length) {\n    var next = deferredAddClauses.pop();\n    self._addClauses(next.clauses, next.extraTerms, useTerm);\n  }\n};\n\nLogic.Solver.prototype._addClauses = function (array, _extraTerms,\n                                               _useTermOverride) {\n  if (assert) assert(array, isArrayWhere(Logic.isClause));\n  var self = this;\n  _.each(array, function (cls) {\n    self._addClause(cls, _extraTerms, _useTermOverride);\n  });\n};\n\nLogic.Solver.prototype.require = function (/*formulaOrArray, ...*/) {\n  this._requireForbidImpl(true, _.flatten(arguments));\n};\n\nLogic.Solver.prototype.forbid = function (/*formulaOrArray, ...*/) {\n  this._requireForbidImpl(false, _.flatten(arguments));\n};\n\nLogic.Solver.prototype._requireForbidImpl = function (isRequire, formulas) {\n  var self = this;\n  if (assert) assert(formulas, isArrayWhere(isFormulaOrTerm));\n\n  _.each(formulas, function (f) {\n    if (f instanceof Logic.NotFormula) {\n      self._requireForbidImpl(!isRequire, [f.operand]);\n    } else if (f instanceof Logic.Formula) {\n      var info = self._getFormulaInfo(f);\n      if (info.varNum !== null) {\n        var sign = isRequire ? 1 : -1;\n        self._addClause(new Logic.Clause(sign*info.varNum));\n      } else {\n        self._addClauses(self._generateFormula(isRequire, f));\n      }\n      if (isRequire) {\n        info.isRequired = true;\n      } else {\n        info.isForbidden = true;\n      }\n    } else {\n      self._addClauses(self._generateFormula(isRequire, f));\n    }\n  });\n};\n\nLogic.Solver.prototype._generateFormula = function (isTrue, formula, _termifier) {\n  var self = this;\n  if (assert) assert(formula, isFormulaOrTerm);\n\n  if (formula instanceof Logic.NotFormula) {\n    return self._generateFormula(!isTrue, formula.operand);\n  } else if (formula instanceof Logic.Formula) {\n    var info = self._getFormulaInfo(formula);\n    if ((isTrue && info.isRequired) ||\n        (!isTrue && info.isForbidden)) {\n      return [];\n      } else if ((isTrue && info.isForbidden) ||\n                 (!isTrue && info.isRequired)) {\n        return [new Logic.Clause()]; // never satisfied clause\n      } else {\n        var ret = formula.generateClauses(isTrue,\n                                          _termifier || self._termifier);\n        return _.isArray(ret) ? ret : [ret];\n      }\n  } else { // Term\n    var t = self.toNumTerm(formula);\n    var sign = isTrue ? 1 : -1;\n    if (t === sign*Logic.NUM_TRUE || t === -sign*Logic.NUM_FALSE) {\n      return [];\n    } else if (t === sign*Logic.NUM_FALSE || t === -sign*Logic.NUM_TRUE) {\n      return [new Logic.Clause()]; // never satisfied clause\n    } else {\n      return [new Logic.Clause(sign*t)];\n    }\n  }\n};\n\n// Get clause data as an array of arrays of integers,\n// for testing and debugging purposes.\nLogic.Solver.prototype._clauseData = function () {\n  var clauses = _.pluck(this.clauses, 'terms');\n  if (! this._T_used) {\n    clauses.splice(1, 1);\n  }\n  if (! this._F_used) {\n    clauses.splice(0, 1);\n  }\n  return clauses;\n};\n\n// Get clause data as an array of human-readable strings,\n// for testing and debugging purposes.\n// A clause might look like \"A v -B\" (where \"v\" represents\n// and OR operator).\nLogic.Solver.prototype._clauseStrings = function () {\n  var self = this;\n  var clauseData = self._clauseData();\n  return _.map(clauseData, function (clause) {\n    return _.map(clause, function (nterm) {\n      var str = self.toNameTerm(nterm);\n      if (/\\s/.test(str)) {\n        // write name in quotes for readability.  we don't bother\n        // making this string machine-parsable in the general case.\n        var sign = '';\n        if (str.charAt(0) === '-') {\n          // temporarily remove '-'\n          sign = '-';\n          str = str.slice(1);\n        }\n        str = sign + '\"' + str + '\"';\n      }\n      return str;\n    }).join(' v ');\n  });\n};\n\nLogic.Solver.prototype._getFormulaInfo = function (formula, _noCreate) {\n  var self = this;\n  var guid = formula.guid();\n  if (! self._formulaInfo[guid]) {\n    if (_noCreate) {\n      return null;\n    }\n    self._formulaInfo[guid] = new FormulaInfo();\n  }\n  return self._formulaInfo[guid];\n};\n\n// Takes a Formula or an array of Formulas, returns a NumTerm or\n// array of NumTerms.\nLogic.Solver.prototype._formulaToTerm = function (formula) {\n  var self = this;\n\n  if (_.isArray(formula)) {\n    if (assert) assert(formula, isArrayWhere(isFormulaOrTerm));\n    return _.map(formula, _.bind(self._formulaToTerm, self));\n  } else {\n    if (assert) assert(formula, isFormulaOrTerm);\n  }\n\n  if (formula instanceof Logic.NotFormula) {\n    // shortcut that avoids creating a variable called\n    // something like \"$not1\" when you use Logic.not(formula).\n    return Logic.not(self._formulaToTerm(formula.operand));\n  } else if (formula instanceof Logic.Formula) {\n    var info = this._getFormulaInfo(formula);\n    if (info.isRequired) {\n      return Logic.NUM_TRUE;\n    } else if (info.isForbidden) {\n      return Logic.NUM_FALSE;\n    } else if (info.varNum === null) {\n      // generate a Solver-local formula variable like \"$or1\"\n      var type = formula.type;\n      if (! this._nextFormulaNumByType[type]) {\n        this._nextFormulaNumByType[type] = 1;\n      }\n      var numForVarName = this._nextFormulaNumByType[type]++;\n      info.varName = \"$\" + formula.type + numForVarName;\n      info.varNum = this.getVarNum(info.varName, false, true);\n      this._ungeneratedFormulas[info.varNum] = formula;\n    }\n    return info.varNum;\n  } else {\n    // formula is a Term\n    return self.toNumTerm(formula);\n  }\n};\n\nLogic.or = function (/*formulaOrArray, ...*/) {\n  var args = _.flatten(arguments);\n  if (args.length === 0) {\n    return Logic.FALSE;\n  } else if (args.length === 1) {\n    if (assert) assert(args[0], isFormulaOrTerm);\n    return args[0];\n  } else {\n    return new Logic.OrFormula(args);\n  }\n};\n\nLogic.OrFormula = function (operands) {\n  if (assert) assert(operands, isArrayWhere(isFormulaOrTerm));\n  this.operands = operands;\n};\n\nLogic._defineFormula(Logic.OrFormula, 'or', {\n  generateClauses: function (isTrue, t) {\n    if (isTrue) {\n      // eg A v B v C\n      return t.clause(this.operands);\n    } else {\n      // eg -A; -B; -C\n      var result = [];\n      _.each(this.operands, function (o) {\n        result.push.apply(result, t.generate(false, o));\n      });\n      return result;\n    }\n  }\n});\n\nLogic.NotFormula = function (operand) {\n  if (assert) assert(operand, isFormulaOrTerm);\n  this.operand = operand;\n};\n\n// No generation or simplification for 'not'; it is\n// simplified away by the solver itself.\nLogic._defineFormula(Logic.NotFormula, 'not');\n\nLogic.and = function (/*formulaOrArray, ...*/) {\n  var args = _.flatten(arguments);\n  if (args.length === 0) {\n    return Logic.TRUE;\n  } else if (args.length === 1) {\n    if (assert) assert(args[0], isFormulaOrTerm);\n    return args[0];\n  } else {\n    return new Logic.AndFormula(args);\n  }\n};\n\nLogic.AndFormula = function (operands) {\n  if (assert) assert(operands, isArrayWhere(isFormulaOrTerm));\n  this.operands = operands;\n};\n\nLogic._defineFormula(Logic.AndFormula, 'and', {\n  generateClauses: function (isTrue, t) {\n    if (isTrue) {\n      // eg A; B; C\n      var result = [];\n      _.each(this.operands, function (o) {\n        result.push.apply(result, t.generate(true, o));\n      });\n      return result;\n    } else {\n      // eg -A v -B v -C\n      return t.clause(_.map(this.operands, Logic.not));\n    }\n  }\n});\n\n// Group `array` into groups of N, where the last group\n// may be shorter than N.  group([a,b,c,d,e], 3) => [[a,b,c],[d,e]]\nvar group = function (array, N) {\n  var ret = [];\n  for (var i = 0; i < array.length; i += N) {\n    ret.push(array.slice(i, i+N));\n  }\n  return ret;\n};\n\nLogic.xor = function (/*formulaOrArray, ...*/) {\n  var args = _.flatten(arguments);\n  if (args.length === 0) {\n    return Logic.FALSE;\n  } else if (args.length === 1) {\n    if (assert) assert(args[0], isFormulaOrTerm);\n    return args[0];\n  } else {\n    return new Logic.XorFormula(args);\n  }\n};\n\nLogic.XorFormula = function (operands) {\n  if (assert) assert(operands, isArrayWhere(isFormulaOrTerm));\n  this.operands = operands;\n};\n\nLogic._defineFormula(Logic.XorFormula, 'xor', {\n  generateClauses: function (isTrue, t) {\n    var args = this.operands;\n    var not = Logic.not;\n    if (args.length > 3) {\n      return t.generate(\n        isTrue,\n        Logic.xor(\n          _.map(group(this.operands, 3), function (group) {\n            return Logic.xor(group);\n          })));\n    } else if (isTrue) { // args.length <= 3\n      if (args.length === 0) {\n        return t.clause(); // always fail\n      } else if (args.length === 1) {\n        return t.clause(args[0]);\n      } else if (args.length === 2) {\n        var A = args[0], B = args[1];\n        return [t.clause(A, B), // A v B\n                t.clause(not(A), not(B))]; // -A v -B\n      } else if (args.length === 3) {\n        var A = args[0], B = args[1], C = args[2];\n        return [t.clause(A, B, C), // A v B v C\n                t.clause(A, not(B), not(C)), // A v -B v -C\n                t.clause(not(A), B, not(C)), // -A v B v -C\n                t.clause(not(A), not(B), C)]; // -A v -B v C\n      }\n    } else { // !isTrue, args.length <= 3\n      if (args.length === 0) {\n        return []; // always succeed\n      } else if (args.length === 1) {\n        return t.clause(not(args[0]));\n      } else if (args.length === 2) {\n        var A = args[0], B = args[1];\n        return [t.clause(A, not(B)), // A v -B\n                t.clause(not(A), B)]; // -A v B\n      } else if (args.length === 3) {\n        var A = args[0], B = args[1], C = args[2];\n        return [t.clause(not(A), not(B), not(C)), // -A v -B v -C\n                t.clause(not(A), B, C), // -A v B v C\n                t.clause(A, not(B), C), // A v -B v C\n                t.clause(A, B, not(C))]; // A v B v -C\n      }\n    }\n  }\n});\n\nLogic.atMostOne = function (/*formulaOrArray, ...*/) {\n  var args = _.flatten(arguments);\n  if (args.length <= 1) {\n    return Logic.TRUE;\n  } else {\n    return new Logic.AtMostOneFormula(args);\n  }\n};\n\nLogic.AtMostOneFormula = function (operands) {\n  if (assert) assert(operands, isArrayWhere(isFormulaOrTerm));\n  this.operands = operands;\n};\n\nLogic._defineFormula(Logic.AtMostOneFormula, 'atMostOne', {\n  generateClauses: function (isTrue, t) {\n     var args = this.operands;\n     var not = Logic.not;\n     if (args.length <= 1) {\n       return []; // always succeed\n     } else if (args.length === 2) {\n       return t.generate(isTrue, Logic.not(Logic.and(args)));\n     } else if (isTrue && args.length === 3) {\n       // Pick any two args; at least one is false (they aren't\n       // both true).  This strategy would also work for\n       // N>3, and could provide a speed-up by having more clauses\n       // (N^2) but fewer propagation steps.  No speed-up was\n       // observed on the Sudoku test from using this strategy\n       // up to N=10.\n       var clauses = [];\n       for (var i = 0; i < args.length; i++) {\n         for (var j = i+1; j < args.length; j++) {\n           clauses.push(t.clause(not(args[i]), not(args[j])));\n         }\n       }\n       return clauses;\n     } else if ((! isTrue) && args.length === 3) {\n       var A = args[0], B = args[1], C = args[2];\n       // Pick any two args; at least one is true (they aren't\n       // both false).  This only works for N=3.\n       return [t.clause(A, B), t.clause(A, C), t.clause(B, C)];\n     } else {\n       // See the \"commander variables\" technique from:\n       // http://www.cs.cmu.edu/~wklieber/papers/2007_efficient-cnf-encoding-for-selecting-1.pdf\n       // But in short: At most one group has at least one \"true\",\n       // and each group has at most one \"true\".  Formula generation\n       // automatically generates the right implications.\n       var groups = group(args, 3);\n       var ors = _.map(groups, function (g) { return Logic.or(g); });\n       if (groups[groups.length - 1].length < 2) {\n         // Remove final group of length 1 so we don't generate\n         // no-op clauses of one sort or another\n         groups.pop();\n       }\n       var atMostOnes = _.map(groups, function (g) {\n         return Logic.atMostOne(g);\n       });\n       return t.generate(isTrue, Logic.and(Logic.atMostOne(ors), atMostOnes));\n     }\n  }\n});\n\nLogic.implies = function (A, B) {\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.implies\");\n  return new Logic.ImpliesFormula(A, B);\n};\n\nLogic.ImpliesFormula = function (A, B) {\n  if (assert) assert(A, isFormulaOrTerm);\n  if (assert) assert(B, isFormulaOrTerm);\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.implies\");\n  this.A = A;\n  this.B = B;\n};\n\nLogic._defineFormula(Logic.ImpliesFormula, 'implies', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(isTrue, Logic.or(Logic.not(this.A), this.B));\n  }\n});\n\nLogic.equiv = function (A, B) {\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.equiv\");\n  return new Logic.EquivFormula(A, B);\n};\n\nLogic.EquivFormula = function (A, B) {\n  if (assert) assert(A, isFormulaOrTerm);\n  if (assert) assert(B, isFormulaOrTerm);\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.equiv\");\n  this.A = A;\n  this.B = B;\n};\n\nLogic._defineFormula(Logic.EquivFormula, 'equiv', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(!isTrue, Logic.xor(this.A, this.B));\n  }\n});\n\nLogic.exactlyOne = function (/*formulaOrArray, ...*/) {\n  var args = _.flatten(arguments);\n  if (args.length === 0) {\n    return Logic.FALSE;\n  } else if (args.length === 1) {\n    if (assert) assert(args[0], isFormulaOrTerm);\n    return args[0];\n  } else {\n    return new Logic.ExactlyOneFormula(args);\n  }\n};\n\nLogic.ExactlyOneFormula = function (operands) {\n  if (assert) assert(operands, isArrayWhere(isFormulaOrTerm));\n  this.operands = operands;\n};\n\nLogic._defineFormula(Logic.ExactlyOneFormula, 'exactlyOne', {\n  generateClauses: function (isTrue, t) {\n    var args = this.operands;\n    if (args.length < 3) {\n      return t.generate(isTrue, Logic.xor(args));\n    } else {\n      return t.generate(isTrue, Logic.and(Logic.atMostOne(args),\n                                          Logic.or(args)));\n    }\n  }\n});\n\n// List of 0 or more formulas or terms, which together represent\n// a non-negative integer.  Least significant bit is first.  That is,\n// the kth array element has a place value of 2^k.\nLogic.Bits = function (formulaArray) {\n  if (assert) assert(formulaArray, isArrayWhere(isFormulaOrTerm));\n  this.bits = formulaArray; // public, immutable\n};\n\nLogic.constantBits = function (wholeNumber) {\n  if (assert) assert(wholeNumber, Logic.isWholeNumber);\n  var result = [];\n  while (wholeNumber) {\n    result.push((wholeNumber & 1) ? Logic.TRUE : Logic.FALSE);\n    wholeNumber >>>= 1;\n  }\n  return new Logic.Bits(result);\n};\n\nLogic.variableBits = function (baseName, nbits) {\n  if (assert) assert(nbits, Logic.isWholeNumber);\n  var result = [];\n  for (var i = 0; i < nbits; i++) {\n    result.push(baseName + '$' + i);\n  }\n  return new Logic.Bits(result);\n};\n\n// bits1 <= bits2\nLogic.lessThanOrEqual = function (bits1, bits2) {\n  return new Logic.LessThanOrEqualFormula(bits1, bits2);\n};\n\nLogic.LessThanOrEqualFormula = function (bits1, bits2) {\n  if (assert) assert(bits1, Logic.isBits);\n  if (assert) assert(bits2, Logic.isBits);\n  if (assert) assertNumArgs(arguments.length, 2, \"Bits comparison function\");\n  this.bits1 = bits1;\n  this.bits2 = bits2;\n};\n\nvar genLTE = function (bits1, bits2, t, notEqual) {\n  var ret = [];\n  // clone so we can mutate them in place\n  var A = bits1.bits.slice();\n  var B = bits2.bits.slice();\n  if (notEqual && ! bits2.bits.length) {\n    // can't be less than 0\n    return t.clause();\n  }\n  // if A is longer than B, the extra (high) bits\n  // must be 0.\n  while (A.length > B.length) {\n    var hi = A.pop();\n    ret.push(t.clause(Logic.not(hi)));\n  }\n  // now B.length >= A.length\n  // Let xors[i] be (A[i] xor B[i]), or just\n  // B[i] if A is too short.\n  var xors = _.map(B, function (b, i) {\n    if (i < A.length) {\n      return Logic.xor(A[i], b);\n    } else {\n      return b;\n    }\n  });\n\n  // Suppose we are comparing 3-bit numbers, requiring\n  // that ABC <= XYZ.  Here is what we require:\n  //\n  // * It is false that A=1 and X=0.\n  // * It is false that A=X, B=1, and Y=0.\n  // * It is false that A=X, B=Y, C=1, and Y=0.\n  //\n  // Translating these into clauses using DeMorgan's law:\n  //\n  // * A=0 or X=1\n  // * (A xor X) or B=0 or Y=1\n  // * (A xor X) or (B xor Y) or C=0 or Y=1\n  //\n  // Since our arguments are LSB first, in the example\n  // we would be given [C, B, A] and [Z, Y, X] as input.\n  // We iterate over the first argument starting from\n  // the right, and build up a clause by iterating over\n  // the xors from the right.\n  //\n  // If we have ABC <= VWXYZ, then we still have three clauses,\n  // but each one is prefixed with \"V or W or\", because V and W\n  // are at the end of the xors array.  This is equivalent to\n  // padding ABC with two zeros.\n\n  for (var i = A.length-1; i >= 0; i--) {\n    ret.push(t.clause(xors.slice(i+1), Logic.not(A[i]), B[i]));\n  }\n  if (notEqual) {\n    ret.push.apply(ret, t.generate(true, Logic.or(xors)));\n  }\n  return ret;\n};\n\nLogic._defineFormula(Logic.LessThanOrEqualFormula, 'lte', {\n  generateClauses: function (isTrue, t) {\n    if (isTrue) {\n      // bits1 <= bits2\n      return genLTE(this.bits1, this.bits2, t, false);\n    } else {\n      // bits2 < bits1\n      return genLTE(this.bits2, this.bits1, t, true);\n    }\n  }\n});\n\n// bits1 < bits2\nLogic.lessThan = function (bits1, bits2) {\n  return new Logic.LessThanFormula(bits1, bits2);\n};\n\nLogic.LessThanFormula = function (bits1, bits2) {\n  if (assert) assert(bits1, Logic.isBits);\n  if (assert) assert(bits2, Logic.isBits);\n  if (assert) assertNumArgs(arguments.length, 2, \"Bits comparison function\");\n  this.bits1 = bits1;\n  this.bits2 = bits2;\n};\n\nLogic._defineFormula(Logic.LessThanFormula, 'lt', {\n  generateClauses: function (isTrue, t) {\n    if (isTrue) {\n      // bits1 < bits2\n      return genLTE(this.bits1, this.bits2, t, true);\n    } else {\n      // bits2 <= bits1\n      return genLTE(this.bits2, this.bits1, t, false);\n    }\n  }\n});\n\nLogic.greaterThan = function (bits1, bits2) {\n  return Logic.lessThan(bits2, bits1);\n};\n\nLogic.greaterThanOrEqual = function (bits1, bits2) {\n  return Logic.lessThanOrEqual(bits2, bits1);\n};\n\nLogic.equalBits = function (bits1, bits2) {\n  return new Logic.EqualBitsFormula(bits1, bits2);\n};\n\nLogic.EqualBitsFormula = function (bits1, bits2) {\n  if (assert) assert(bits1, Logic.isBits);\n  if (assert) assert(bits2, Logic.isBits);\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.equalBits\");\n  this.bits1 = bits1;\n  this.bits2 = bits2;\n};\n\nLogic._defineFormula(Logic.EqualBitsFormula, 'equalBits', {\n  generateClauses: function (isTrue, t) {\n    var A = this.bits1.bits;\n    var B = this.bits2.bits;\n    var nbits = Math.max(A.length, B.length);\n    var facts = [];\n    for (var i = 0; i < nbits; i++) {\n      if (i >= A.length) {\n        facts.push(Logic.not(B[i]));\n      } else if (i >= B.length) {\n        facts.push(Logic.not(A[i]));\n      } else {\n        facts.push(Logic.equiv(A[i], B[i]));\n      }\n    }\n    return t.generate(isTrue, Logic.and(facts));\n  }\n});\n\n// Definition of full-adder and half-adder:\n//\n// A full-adder is a 3-input, 2-output gate producing the sum of its\n// inputs as a 2-bit binary number. The most significant bit is called\n// \"carry\", the least significant \"sum\". A half-adder does the same\n// thing, but has only 2 inputs (and can therefore never output a\n// \"3\").\n//\n// The half-adder sum bit is really just an XOR, and the carry bit\n// is really just an AND.  However, they get their own formula types\n// here to enhance readability of the generated clauses.\n\nLogic.HalfAdderSum = function (formula1, formula2) {\n  if (assert) assert(formula1, isFormulaOrTerm);\n  if (assert) assert(formula2, isFormulaOrTerm);\n\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.HalfAdderSum\");\n  this.a = formula1;\n  this.b = formula2;\n};\n\nLogic._defineFormula(Logic.HalfAdderSum, 'hsum', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(isTrue, Logic.xor(this.a, this.b));\n  }\n});\n\nLogic.HalfAdderCarry = function (formula1, formula2) {\n  if (assert) assert(formula1, isFormulaOrTerm);\n  if (assert) assert(formula2, isFormulaOrTerm);\n  if (assert) assertNumArgs(arguments.length, 2, \"Logic.HalfAdderCarry\");\n  this.a = formula1;\n  this.b = formula2;\n};\n\nLogic._defineFormula(Logic.HalfAdderCarry, 'hcarry', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(isTrue, Logic.and(this.a, this.b));\n  }\n});\n\nLogic.FullAdderSum = function (formula1, formula2, formula3) {\n  if (assert) assert(formula1, isFormulaOrTerm);\n  if (assert) assert(formula2, isFormulaOrTerm);\n  if (assert) assert(formula3, isFormulaOrTerm);\n  if (assert) assertNumArgs(arguments.length, 3, \"Logic.FullAdderSum\");\n  this.a = formula1;\n  this.b = formula2;\n  this.c = formula3;\n};\n\nLogic._defineFormula(Logic.FullAdderSum, 'fsum', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(isTrue, Logic.xor(this.a, this.b, this.c));\n  }\n});\n\nLogic.FullAdderCarry = function (formula1, formula2, formula3) {\n  if (assert) assert(formula1, isFormulaOrTerm);\n  if (assert) assert(formula2, isFormulaOrTerm);\n  if (assert) assert(formula3, isFormulaOrTerm);\n  if (assert) assertNumArgs(arguments.length, 3, \"Logic.FullAdderCarry\");\n  this.a = formula1;\n  this.b = formula2;\n  this.c = formula3;\n};\n\nLogic._defineFormula(Logic.FullAdderCarry, 'fcarry', {\n  generateClauses: function (isTrue, t) {\n    return t.generate(! isTrue,\n                      Logic.atMostOne(this.a, this.b, this.c));\n  }\n});\n\n// Implements the Adder strategy from the MiniSat+ paper:\n// http://minisat.se/downloads/MiniSat+.pdf\n// \"Translating Pseudo-boolean Constraints into SAT\"\n//\n// Takes a list of list of Formulas.  The first list is bits\n// to give weight 1; the second is bits to give weight 2;\n// the third is bits to give weight 4; and so on.\n//\n// Returns an array of Logic.FormulaOrTerm.\nvar binaryWeightedSum = function (varsByWeight) {\n  if (assert) assert(varsByWeight,\n                     isArrayWhere(isArrayWhere(isFormulaOrTerm)));\n  // initialize buckets to a two-level clone of varsByWeight\n  var buckets = _.map(varsByWeight, _.clone);\n  var lowestWeight = 0; // index of the first non-empty array\n  var output = [];\n  while (lowestWeight < buckets.length) {\n    var bucket = buckets[lowestWeight];\n    if (! bucket.length) {\n      output.push(Logic.FALSE);\n      lowestWeight++;\n    } else if (bucket.length === 1) {\n      output.push(bucket[0]);\n      lowestWeight++;\n    } else if (bucket.length === 2) {\n      var sum = new Logic.HalfAdderSum(bucket[0], bucket[1]);\n      var carry = new Logic.HalfAdderCarry(bucket[0], bucket[1]);\n      bucket.length = 0;\n      bucket.push(sum);\n      pushToNth(buckets, lowestWeight+1, carry);\n    } else {\n      // Whether we take variables from the start or end of the\n      // bucket (i.e. `pop` or `shift`) determines the shape of the tree.\n      // Empirically, some logic problems are faster with `shift` (2x or so),\n      // but `pop` gives an order-of-magnitude speed-up on the Meteor Version\n      // Solver \"benchmark-tests\" suite (Slava's benchmarks based on data from\n      // Rails).  So, `pop` it is.\n      var c = bucket.pop();\n      var b = bucket.pop();\n      var a = bucket.pop();\n      var sum = new Logic.FullAdderSum(a, b, c);\n      var carry = new Logic.FullAdderCarry(a, b, c);\n      bucket.push(sum);\n      pushToNth(buckets, lowestWeight+1, carry);\n    }\n  }\n  return output;\n};\n\n// Push `newItem` onto the array at arrayOfArrays[n],\n// first ensuring that it exists by pushing empty\n// arrays onto arrayOfArrays.\nvar pushToNth = function (arrayOfArrays, n, newItem) {\n  while (n >= arrayOfArrays.length) {\n    arrayOfArrays.push([]);\n  }\n  arrayOfArrays[n].push(newItem);\n};\n\nvar checkWeightedSumArgs = function (formulas, weights) {\n  if (assert) assert(formulas, isArrayWhere(isFormulaOrTerm));\n  if (typeof weights === 'number') {\n    if (assert) assert(weights, Logic.isWholeNumber);\n  } else {\n    if (assert) assert(weights, isArrayWhere(Logic.isWholeNumber));\n    if (formulas.length !== weights.length) {\n      throw new Error(\"Formula array and weight array must be same length\" +\n                      \"; they are \" + formulas.length + \" and \" + weights.length);\n    }\n  }\n};\n\nLogic.weightedSum = function (formulas, weights) {\n  checkWeightedSumArgs(formulas, weights);\n\n  if (formulas.length === 0) {\n    return new Logic.Bits([]);\n  }\n\n  if (typeof weights === 'number') {\n    weights = _.map(formulas, function () { return weights; });\n  }\n\n  var binaryWeighted = [];\n  _.each(formulas, function (f, i) {\n    var w = weights[i];\n    var whichBit = 0;\n    while (w) {\n      if (w & 1) {\n        pushToNth(binaryWeighted, whichBit, f);\n      }\n      w >>>= 1;\n      whichBit++;\n    }\n  });\n\n  return new Logic.Bits(binaryWeightedSum(binaryWeighted));\n};\n\nLogic.sum = function (/*formulaOrBitsOrArray, ...*/) {\n  var things = _.flatten(arguments);\n  if (assert) assert(things, isArrayWhere(isFormulaOrTermOrBits));\n\n  var binaryWeighted = [];\n  _.each(things, function (x) {\n    if (x instanceof Logic.Bits) {\n      _.each(x.bits, function (b, i) {\n        pushToNth(binaryWeighted, i, b);\n      });\n    } else {\n      pushToNth(binaryWeighted, 0, x);\n    }\n  });\n\n  return new Logic.Bits(binaryWeightedSum(binaryWeighted));\n};\n\n////////////////////////////////////////\n\nLogic.Solver.prototype.solve = function (_assumpVar) {\n  var self = this;\n  if (_assumpVar !== undefined) {\n    if (! (_assumpVar >= 1)) {\n      throw new Error(\"_assumpVar must be a variable number\");\n    }\n  }\n\n  if (self._unsat) {\n    return null;\n  }\n\n  while (self._numClausesAddedToMiniSat < self.clauses.length) {\n    var i = self._numClausesAddedToMiniSat;\n    var terms = self.clauses[i].terms;\n    if (assert) assert(terms, isArrayWhere(Logic.isNumTerm));\n    var stillSat = self._minisat.addClause(terms);\n    self._numClausesAddedToMiniSat++;\n    if (! stillSat) {\n      self._unsat = true;\n      return null;\n    }\n  }\n\n  if (assert) assert(this._num2name.length - 1, Logic.isWholeNumber);\n  self._minisat.ensureVar(this._num2name.length - 1);\n\n  var stillSat = (_assumpVar ?\n                  self._minisat.solveAssuming(_assumpVar) :\n                  self._minisat.solve());\n  if (! stillSat) {\n    if (! _assumpVar) {\n      self._unsat = true;\n    }\n    return null;\n  }\n\n  return new Logic.Solution(self, self._minisat.getSolution());\n};\n\nLogic.Solver.prototype.solveAssuming = function (formula) {\n  if (assert) assert(formula, isFormulaOrTerm);\n\n  // Wrap the formula in a formula of type Assumption, so that\n  // we always generate a var like `$assump123`, regardless\n  // of whether `formula` is a Term, a NotFormula, an already\n  // required or forbidden Formula, etc.\n  var assump = new Logic.Assumption(formula);\n  var assumpVar = this._formulaToTerm(assump);\n  if (! (typeof assumpVar === 'number' && assumpVar > 0)) {\n    throw new Error(\"Assertion failure: not a positive numeric term\");\n  }\n\n  // Generate clauses as if we used the assumption variable in a\n  // clause, in the positive.  So if we assume \"A v B\", we might get a\n  // clause like \"A v B v -$assump123\" (or actually, \"$or1 v\n  // -$assump123\"), as if we had used $assump123 in a clause.  Instead\n  // of using it in a clause, though, we temporarily assume it to be\n  // true.\n  this._useFormulaTerm(assumpVar);\n\n  var result = this.solve(assumpVar);\n  // Tell MiniSat that we will never use assumpVar again.\n  // The formula may be used again, however.  (For example, you\n  // can solve assuming a formula F, and if it works, require F.)\n  this._minisat.retireVar(assumpVar);\n\n  return result;\n};\n\nLogic.Assumption = function (formula) {\n  if (assert) assert(formula, isFormulaOrTerm);\n  this.formula = formula;\n};\n\nLogic._defineFormula(Logic.Assumption, 'assump', {\n  generateClauses: function (isTrue, t) {\n    if (isTrue) {\n      return t.clause(this.formula);\n    } else {\n      return t.clause(Logic.not(this.formula));\n    }\n  }\n});\n\nLogic.Solution = function (_solver, _assignment) {\n  var self = this;\n  self._solver = _solver;\n  self._assignment = _assignment;\n\n  // save a snapshot of which formulas have variables designated\n  // for them, but where we haven't generated clauses that constrain\n  // those variables in both the positive and the negative direction.\n  self._ungeneratedFormulas = _.clone(_solver._ungeneratedFormulas);\n\n  self._formulaValueCache = {};\n  self._termifier = new Logic.Termifier(self._solver);\n  // Normally, when a Formula uses a Termifier to generate clauses that\n  // refer to other Formulas, the Termifier replaces the Formulas with\n  // their variables.  We hijack this mechanism to replace the Formulas\n  // with their truth variables instead, leading to recursive evaluation.\n  // Note that we cache the evaluated truth values of Formulas to avoid\n  // redundant evaluation.\n  self._termifier.term = function (formula) {\n    return self.evaluate(formula) ? Logic.NUM_TRUE : Logic.NUM_FALSE;\n  };\n\n  // When true, evaluation doesn't throw errors when\n  // `evaluate` or `getWeightedSum` encounter named variables that are\n  // unknown or variables that weren't present when this Solution was\n  // generated.  Instead, the unknown variables are assumed to be false.\n  self._ignoreUnknownVariables = false;\n};\n\nLogic.Solution.prototype.ignoreUnknownVariables = function () {\n  // We only make this settable one way (false to true).\n  // Setting it back and forth would be questionable, since we keep\n  // a cache of Formula evaluations.\n  this._ignoreUnknownVariables = true;\n};\n\n// Get a map of variables to their assignments,\n// such as `{A: true, B: false, C: true}`.\n// Internal variables are excluded.\nLogic.Solution.prototype.getMap = function () {\n  var solver = this._solver;\n  var assignment = this._assignment;\n  var result = {};\n  for (var i = 1; i < assignment.length; i++) {\n    var name = solver.getVarName(i);\n    if (name && name.charAt(0) !== '$') {\n      result[name] = assignment[i];\n    }\n  }\n  return result;\n};\n\n// Get an array of variables that are assigned\n// `true` by this solution, sorted by name.\n// Internal variables are excluded.\nLogic.Solution.prototype.getTrueVars = function () {\n  var solver = this._solver;\n  var assignment = this._assignment;\n  var result = [];\n  for (var i = 1; i < assignment.length; i++) {\n    if (assignment[i]) {\n      var name = solver.getVarName(i);\n      if (name && name.charAt(0) !== '$') {\n        result.push(name);\n      }\n    }\n  }\n  result.sort();\n  return result;\n};\n\n// Get a Formula that says that the variables are assigned\n// according to this solution.  (Internal variables are\n// excluded.)  By forbidding this Formula and solving again,\n// you can see if there are other solutions.\nLogic.Solution.prototype.getFormula = function () {\n  var solver = this._solver;\n  var assignment = this._assignment;\n  var terms = [];\n  for (var i = 1; i < assignment.length; i++) {\n    var name = solver.getVarName(i);\n    if (name && name.charAt(0) !== '$') {\n      terms.push(assignment[i] ? i : -i);\n    }\n  }\n  return Logic.and(terms);\n};\n\n// Returns a boolean if the argument is a Formula (or Term), and an integer\n// if the argument is a Logic.Bits.\nLogic.Solution.prototype.evaluate = function (formulaOrBits) {\n  var self = this;\n  if (assert) assert(formulaOrBits, isFormulaOrTermOrBits);\n\n  if (formulaOrBits instanceof Logic.Bits) {\n    // Evaluate to an integer\n    var ret = 0;\n    _.each(formulaOrBits.bits, function (f, i) {\n      if (self.evaluate(f)) {\n        ret += 1 << i;\n      }\n    });\n    return ret;\n  }\n\n  var solver = self._solver;\n  var ignoreUnknownVariables = self._ignoreUnknownVariables;\n  var assignment = self._assignment;\n  var formula = formulaOrBits;\n  if (formula instanceof Logic.NotFormula) {\n    return ! self.evaluate(formula.operand);\n  } else if (formula instanceof Logic.Formula) {\n    var cachedResult = self._formulaValueCache[formula.guid()];\n    if (typeof cachedResult === 'boolean') {\n      return cachedResult;\n    } else {\n      var value;\n      var info = solver._getFormulaInfo(formula, true);\n      if (info && info.varNum && info.varNum < assignment.length &&\n          ! _.has(self._ungeneratedFormulas, info.varNum)) {\n        // as an optimization, read the value of the formula directly\n        // from a variable if the formula's clauses were completely\n        // generated at the time of solving.  (We must be careful,\n        // because if we didn't generate both the positive and the\n        // negative polarity clauses for the formula, then the formula\n        // variable is not actually constrained to have the right\n        // value.)\n        value = assignment[info.varNum];\n      } else {\n        var clauses = solver._generateFormula(true, formula, self._termifier);\n        var value = _.all(clauses, function (cls) {\n          return _.any(cls.terms, function (t) {\n            return self.evaluate(t);\n          });\n        });\n      }\n      self._formulaValueCache[formula.guid()] = value;\n      return value;\n    }\n  } else {\n    // Term; convert to numeric (possibly negative), but throw\n    // an error if the name is not found.  If `ignoreUnknownVariables`\n    // is set, return false instead.\n    var numTerm = solver.toNumTerm(formula, true);\n    if (! numTerm) {\n      if (ignoreUnknownVariables) {\n        return false;\n      } else {\n        // formula must be a NameTerm naming a variable that doesn't exist\n        var vname = String(formula).replace(/^-*/, '');\n        throw new Error(\"No such variable: \" + vname);\n      }\n    }\n    var v = numTerm;\n    var isNot = false;\n    if (numTerm < 0) {\n      v = -v;\n      isNot = true;\n    }\n    if (v < 1 || v >= assignment.length) {\n      var vname = v;\n      if (v >= 1 && v < solver._num2name.length) {\n        vname = solver._num2name[v];\n      }\n      if (ignoreUnknownVariables) {\n        return false;\n      } else {\n        throw new Error(\"Variable not part of solution: \" + vname);\n      }\n    }\n    var ret = assignment[v];\n    if (isNot) {\n      ret = ! ret;\n    }\n    return ret;\n  }\n};\n\nLogic.Solution.prototype.getWeightedSum = function (formulas, weights) {\n  checkWeightedSumArgs(formulas, weights);\n\n  var total = 0;\n  if (typeof weights === 'number') {\n    for (var i = 0; i < formulas.length; i++) {\n      total += weights * (this.evaluate(formulas[i]) ? 1 : 0);\n    }\n  } else {\n    for (var i = 0; i < formulas.length; i++) {\n      total += weights[i] * (this.evaluate(formulas[i]) ? 1 : 0);\n    }\n  }\n  return total;\n};\nvar getNonZeroWeightedTerms = function (costTerms, costWeights) {\n  if (typeof costWeights === 'number') {\n    return costWeights ? costTerms : [];\n  } else {\n    var terms = [];\n    for (var i = 0; i < costTerms.length; i++) {\n      if (costWeights[i]) {\n        terms.push(costTerms[i]);\n      }\n    }\n    return terms;\n  }\n};\n\n// See comments on minimizeWeightedSum and maximizeWeightedSum.\nvar minMaxWS = function (solver, solution, costTerms, costWeights, options,\n                         isMin) {\n  var curSolution = solution;\n  var curCost = curSolution.getWeightedSum(costTerms, costWeights);\n\n  var optFormula = options && options.formula;\n  var weightedSum = (optFormula || Logic.weightedSum(costTerms, costWeights));\n\n  var progress = options && options.progress;\n  var strategy = options && options.strategy;\n\n  // array of terms with non-zero weights, populated on demand\n  var nonZeroTerms = null;\n\n  if (isMin && curCost > 0) {\n    // try to skip straight to 0 cost, because if it works, it could\n    // save us some time\n    if (progress) {\n      progress('trying', 0);\n    }\n    var zeroSolution = null;\n    nonZeroTerms = getNonZeroWeightedTerms(costTerms, costWeights);\n    var zeroSolution = solver.solveAssuming(Logic.not(Logic.or(nonZeroTerms)));\n    if (zeroSolution) {\n      curSolution = zeroSolution;\n      curCost = 0;\n    }\n  }\n\n  if (isMin && strategy === 'bottom-up') {\n    for (var trialCost = 1; trialCost < curCost; trialCost++) {\n      if (progress) {\n        progress('trying', trialCost);\n      }\n      var costIsTrialCost = Logic.equalBits(\n        weightedSum, Logic.constantBits(trialCost));\n      var newSolution = solver.solveAssuming(costIsTrialCost);\n      if (newSolution) {\n        curSolution = newSolution;\n        curCost = trialCost;\n        break;\n      }\n    }\n  } else if (strategy && strategy !== 'default') {\n    throw new Error(\"Bad strategy: \" + strategy);\n  } else {\n    strategy = 'default';\n  }\n\n  if (strategy === 'default') {\n    // for minimization, count down from current cost. for maximization,\n    // count up.\n    while (isMin ? curCost > 0 : true) {\n      if (progress) {\n        progress('improving', curCost);\n      }\n      var improvement = (isMin ? Logic.lessThan : Logic.greaterThan)(\n        weightedSum, Logic.constantBits(curCost));\n      var newSolution = solver.solveAssuming(improvement);\n      if (! newSolution) {\n        break;\n      }\n      solver.require(improvement);\n      curSolution = newSolution;\n      curCost = curSolution.getWeightedSum(costTerms, costWeights);\n    }\n  }\n\n  if (isMin && curCost === 0) {\n    // express the requirement that the weighted sum be 0 in an efficient\n    // way for the solver (all terms with non-zero weights must be 0)\n    if (! nonZeroTerms) {\n      nonZeroTerms = getNonZeroWeightedTerms(costTerms, costWeights);\n    }\n    solver.forbid(nonZeroTerms);\n  } else {\n    solver.require(Logic.equalBits(weightedSum, Logic.constantBits(curCost)));\n  }\n\n  if (progress) {\n    progress('finished', curCost);\n  }\n\n  return curSolution;\n};\n\n// Minimize (or maximize) the dot product of costTerms and\n// costWeights, and further, require (as in solver.require) that the\n// value of the dot product be equal to the optimum found.  Returns a\n// valid solution where this optimum is achieved.\n//\n// `solution` must be a current valid solution as returned from\n// `solve` or `solveAssuming`.  It is used as a starting point (to\n// evaluate the current cost).\n//\n// costWeights is an array (of same length as costTerms) or a single\n// WholeNumber.\n//\n// if the caller passes options.formula, it should be the formula\n// Logic.weightedSum(costTerms, costWeights).  The optimizer will use\n// this existing formula rather than generating a new one (for\n// efficiency).  The optimizer still wants to know the terms and\n// weights, because it is more efficient for it to evaluate the\n// current cost using them directly rather than the formula.\n//\n// options.progress: a function that takes two arguments, to call at\n// particular times during optimization.  Called with arguments\n// ('improving', cost) when about to search for a way to improve on\n// `cost`, and called with arguments ('finished', cost) when the\n// optimum is reached.  There's also ('trying', cost) when a cost\n// is tried directly (which is usually done with 0 right off the bat).\n//\n// options.strategy: a string hinting how to go about the optimization.\n// the default strategy (option absent or 'default') is to work down\n// from the current cost for minimization or up from the current cost\n// for maximization, and iteratively insist that the cost be made lower\n// if possible.  For minimization, the alternate strategy 'bottom-up' is\n// available, which starts at 0 and tries ever higher costs until one\n// works.  All strategies first try and see if a cost of 0 is possible.\n\n// (\"costTerms\" is kind of a misnomer since they may be Formulas or Terms.)\nLogic.Solver.prototype.minimizeWeightedSum = function (solution, costTerms,\n                                                       costWeights, options) {\n  return minMaxWS(this, solution, costTerms, costWeights, options, true);\n};\n\nLogic.Solver.prototype.maximizeWeightedSum = function (solution, costTerms,\n                                                       costWeights, options) {\n  return minMaxWS(this, solution, costTerms, costWeights, options, false);\n};\nmodule.exports = Logic;\n","var C_MINISAT = require(\"./minisat.js\");\nvar _ = require(\"underscore\");\nvar MiniSat;\nMiniSat = function () {\n  // A MiniSat object wraps an instance of \"native\" MiniSat.  You can\n  // have as many MiniSat objects as you want, and they are all\n  // independent.\n  //\n  // C is the \"module\" object created by Emscripten.  We wrap the\n  // output of Emscripten in a closure, so each call to C_MINISAT()\n  // actually instantiates a separate C environment, including\n  // the \"native\" heap.\n  //\n  // The methods available on `C` include the global functions we\n  // define in `logic-solver.cc`, each prefixed with `_`, and a varied\n  // assortment of helpers put there by Emscripten, some of which are\n  // documented here:\n  // http://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html\n  //\n  // See the README in the meteor/minisat repo for more notes about\n  // our build of MiniSat.\n  var C = this._C = C_MINISAT();\n\n  this._native = {\n    getStackPointer: function () {\n      return C.Runtime.stackSave();\n    },\n    setStackPointer: function (ptr) {\n      C.Runtime.stackRestore(ptr);\n    },\n    allocateBytes: function (len) {\n      return C.allocate(len, 'i8', C.ALLOC_STACK);\n    },\n    pushString: function (str) {\n      return this.allocateBytes(C.intArrayFromString(str));\n    },\n    savingStack: function (func) {\n      var SP = this.getStackPointer();\n      try {\n        return func(this, C);\n      } finally {\n        this.setStackPointer(SP);\n      }\n    }\n  };\n\n  C._createTheSolver();\n\n  // useful log for debugging and testing\n  this._clauses = [];\n};\n\n\n// Make sure MiniSat has allocated space in its model for v,\n// even if v is unused.  If we have variables A,B,C,D which\n// are numbers 1,2,3,4, for example, but we never actually use\n// C and D, calling ensureVar(4) will make MiniSat give us\n// solution values for them anyway.\nMiniSat.prototype.ensureVar = function (v) {\n  this._C._ensureVar(v);\n};\n\n// Add a clause, in the form of an array of Logic.NumTerms.\n// Returns true if the problem is still satisfiable\n// (as far as we know without doing more work), and false if\n// we can already tell that it is unsatisfiable.\nMiniSat.prototype.addClause = function (terms) {\n  this._clauses.push(terms);\n  return this._native.savingStack(function (native, C) {\n    var termsPtr = C.allocate((terms.length+1)*4, 'i32', C.ALLOC_STACK);\n    _.each(terms, function (t, i) {\n      C.setValue(termsPtr + i*4, t, 'i32');\n    });\n    C.setValue(termsPtr + terms.length*4, 0, 'i32'); // 0-terminate\n    return C._addClause(termsPtr) ? true : false;\n  });\n};\n\nMiniSat.prototype.solve = function () {\n  return this._C._solve() ? true : false;\n};\n\nMiniSat.prototype.solveAssuming = function (v) {\n  return this._C._solveAssuming(v) ? true : false;\n};\n\nMiniSat.prototype.getSolution = function () {\n  var solution = [null]; // no 0th var\n  var C = this._C;\n  var numVars = C._getNumVars();\n  var solPtr = C._getSolution();\n  for (var i = 0; i < numVars; i++) {\n    // 0 is Minisat::l_True (lifted \"true\").\n    // Internally, Minisat has three states for a variable:\n    // true, false, and undetermined.  It doesn't distinguish\n    // between \"false\" and \"undetermined\" in solutions though\n    // (I think it sets undetermined variables to false).\n    solution[i+1] = (C.getValue(solPtr+i, 'i8') === 0);\n  }\n  return solution;\n};\n\nMiniSat.prototype.retireVar = function (v) {\n  this._C._retireVar(v);\n};\n\n// The \"conflict clause\" feature of MiniSat is not what it sounds\n// like, unfortunately -- it doesn't help explain conflicts.\n// It only tells us which assumption vars are to blame for a failed\n// solveAssuming (and we only ever pass one var).\n// We keep this function around in case we discover a use for it.\nMiniSat.prototype.getConflictClause = function () {\n  var C = this._C;\n  var numTerms = C._getConflictClauseSize();\n  var clausePtr = C._getConflictClause();\n  var terms = [];\n  for (var i = 0; i < numTerms; i++) {\n    var t = C.getValue(clausePtr + i*4, 'i32');\n    var v = (t >>> 1);\n    var s = (t & 1) ? -1 : 1;\n    terms[i] = v * s;\n  }\n  return terms;\n};\nmodule.exports = MiniSat;\n","var C_MINISAT;\n// This file is generated by the meteor/minisat repo.\n// See that repo's README for instructions for building it.\nC_MINISAT=(function(){var module={};var require=(function(){});var process={argv:[\"node\",\"minisat\"],on:(function(){}),stdout:{write:(function(str){console.log(\"MINISAT-out:\",str.replace(/\\n$/,\"\"))})},stderr:{write:(function(str){console.log(\"MINISAT-err:\",str.replace(/\\n$/,\"\"))})}};var window=0;var Module;if(!Module)Module=(typeof Module!==\"undefined\"?Module:null)||{};var moduleOverrides={};for(var key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var ENVIRONMENT_IS_NODE=typeof process===\"object\"&&typeof require===\"function\";var ENVIRONMENT_IS_WEB=typeof window===\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts===\"function\";var ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){if(!Module[\"print\"])Module[\"print\"]=function print(x){process[\"stdout\"].write(x+\"\\n\")};if(!Module[\"printErr\"])Module[\"printErr\"]=function printErr(x){process[\"stderr\"].write(x+\"\\n\")};var nodeFS=require(\"fs\");var nodePath=require(\"path\");Module[\"read\"]=function read(filename,binary){filename=nodePath[\"normalize\"](filename);var ret=nodeFS[\"readFileSync\"](filename);if(!ret&&filename!=nodePath[\"resolve\"](filename)){filename=path.join(__dirname,\"..\",\"src\",filename);ret=nodeFS[\"readFileSync\"](filename)}if(ret&&!binary)ret=ret.toString();return ret};Module[\"readBinary\"]=function readBinary(filename){return Module[\"read\"](filename,true)};Module[\"load\"]=function load(f){globalEval(read(f))};if(process[\"argv\"].length>1){Module[\"thisProgram\"]=process[\"argv\"][1].replace(/\\\\/g,\"/\")}else{Module[\"thisProgram\"]=\"unknown-program\"}Module[\"arguments\"]=process[\"argv\"].slice(2);if(typeof module!==\"undefined\"){module[\"exports\"]=Module}process[\"on\"](\"uncaughtException\",(function(ex){if(!(ex instanceof ExitStatus)){throw ex}}))}else if(ENVIRONMENT_IS_SHELL){if(!Module[\"print\"])Module[\"print\"]=print;if(typeof printErr!=\"undefined\")Module[\"printErr\"]=printErr;if(typeof read!=\"undefined\"){Module[\"read\"]=read}else{Module[\"read\"]=function read(){throw\"no read() available (jsc?)\"}}Module[\"readBinary\"]=function readBinary(f){if(typeof readbuffer===\"function\"){return new Uint8Array(readbuffer(f))}var data=read(f,\"binary\");assert(typeof data===\"object\");return data};if(typeof scriptArgs!=\"undefined\"){Module[\"arguments\"]=scriptArgs}else if(typeof arguments!=\"undefined\"){Module[\"arguments\"]=arguments}this[\"Module\"]=Module}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){Module[\"read\"]=function read(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(typeof arguments!=\"undefined\"){Module[\"arguments\"]=arguments}if(typeof console!==\"undefined\"){if(!Module[\"print\"])Module[\"print\"]=function print(x){console.log(x)};if(!Module[\"printErr\"])Module[\"printErr\"]=function printErr(x){console.log(x)}}else{var TRY_USE_DUMP=false;if(!Module[\"print\"])Module[\"print\"]=TRY_USE_DUMP&&typeof dump!==\"undefined\"?(function(x){dump(x)}):(function(x){})}if(ENVIRONMENT_IS_WEB){window[\"Module\"]=Module}else{Module[\"load\"]=importScripts}}else{throw\"Unknown runtime environment. Where are we?\"}function globalEval(x){eval.call(null,x)}if(!Module[\"load\"]&&Module[\"read\"]){Module[\"load\"]=function load(f){globalEval(Module[\"read\"](f))}}if(!Module[\"print\"]){Module[\"print\"]=(function(){})}if(!Module[\"printErr\"]){Module[\"printErr\"]=Module[\"print\"]}if(!Module[\"arguments\"]){Module[\"arguments\"]=[]}if(!Module[\"thisProgram\"]){Module[\"thisProgram\"]=\"./this.program\"}Module.print=Module[\"print\"];Module.printErr=Module[\"printErr\"];Module[\"preRun\"]=[];Module[\"postRun\"]=[];for(var key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}var Runtime={setTempRet0:(function(value){tempRet0=value}),getTempRet0:(function(){return tempRet0}),stackSave:(function(){return STACKTOP}),stackRestore:(function(stackTop){STACKTOP=stackTop}),getNativeTypeSize:(function(type){switch(type){case\"i1\":case\"i8\":return 1;case\"i16\":return 2;case\"i32\":return 4;case\"i64\":return 8;case\"float\":return 4;case\"double\":return 8;default:{if(type[type.length-1]===\"*\"){return Runtime.QUANTUM_SIZE}else if(type[0]===\"i\"){var bits=parseInt(type.substr(1));assert(bits%8===0);return bits/8}else{return 0}}}}),getNativeFieldSize:(function(type){return Math.max(Runtime.getNativeTypeSize(type),Runtime.QUANTUM_SIZE)}),STACK_ALIGN:16,getAlignSize:(function(type,size,vararg){if(!vararg&&(type==\"i64\"||type==\"double\"))return 8;if(!type)return Math.min(size,8);return Math.min(size||(type?Runtime.getNativeFieldSize(type):0),Runtime.QUANTUM_SIZE)}),dynCall:(function(sig,ptr,args){if(args&&args.length){if(!args.splice)args=Array.prototype.slice.call(args);args.splice(0,0,ptr);return Module[\"dynCall_\"+sig].apply(null,args)}else{return Module[\"dynCall_\"+sig].call(null,ptr)}}),functionPointers:[],addFunction:(function(func){for(var i=0;i<Runtime.functionPointers.length;i++){if(!Runtime.functionPointers[i]){Runtime.functionPointers[i]=func;return 2*(1+i)}}throw\"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.\"}),removeFunction:(function(index){Runtime.functionPointers[(index-2)/2]=null}),getAsmConst:(function(code,numArgs){if(!Runtime.asmConstCache)Runtime.asmConstCache={};var func=Runtime.asmConstCache[code];if(func)return func;var args=[];for(var i=0;i<numArgs;i++){args.push(String.fromCharCode(36)+i)}var source=Pointer_stringify(code);if(source[0]==='\"'){if(source.indexOf('\"',1)===source.length-1){source=source.substr(1,source.length-2)}else{abort(\"invalid EM_ASM input |\"+source+\"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)\")}}try{var evalled=eval(\"(function(Module, FS) { return function(\"+args.join(\",\")+\"){ \"+source+\" } })\")(Module,typeof FS!==\"undefined\"?FS:null)}catch(e){Module.printErr(\"error in executing inline EM_ASM code: \"+e+\" on: \\n\\n\"+source+\"\\n\\nwith args |\"+args+\"| (make sure to use the right one out of EM_ASM, EM_ASM_ARGS, etc.)\");throw e}return Runtime.asmConstCache[code]=evalled}),warnOnce:(function(text){if(!Runtime.warnOnce.shown)Runtime.warnOnce.shown={};if(!Runtime.warnOnce.shown[text]){Runtime.warnOnce.shown[text]=1;Module.printErr(text)}}),funcWrappers:{},getFuncWrapper:(function(func,sig){assert(sig);if(!Runtime.funcWrappers[sig]){Runtime.funcWrappers[sig]={}}var sigCache=Runtime.funcWrappers[sig];if(!sigCache[func]){sigCache[func]=function dynCall_wrapper(){return Runtime.dynCall(sig,func,arguments)}}return sigCache[func]}),UTF8Processor:(function(){var buffer=[];var needed=0;this.processCChar=(function(code){code=code&255;if(buffer.length==0){if((code&128)==0){return String.fromCharCode(code)}buffer.push(code);if((code&224)==192){needed=1}else if((code&240)==224){needed=2}else{needed=3}return\"\"}if(needed){buffer.push(code);needed--;if(needed>0)return\"\"}var c1=buffer[0];var c2=buffer[1];var c3=buffer[2];var c4=buffer[3];var ret;if(buffer.length==2){ret=String.fromCharCode((c1&31)<<6|c2&63)}else if(buffer.length==3){ret=String.fromCharCode((c1&15)<<12|(c2&63)<<6|c3&63)}else{var codePoint=(c1&7)<<18|(c2&63)<<12|(c3&63)<<6|c4&63;ret=String.fromCharCode(((codePoint-65536)/1024|0)+55296,(codePoint-65536)%1024+56320)}buffer.length=0;return ret});this.processJSString=function processJSString(string){string=unescape(encodeURIComponent(string));var ret=[];for(var i=0;i<string.length;i++){ret.push(string.charCodeAt(i))}return ret}}),getCompilerSetting:(function(name){throw\"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work\"}),stackAlloc:(function(size){var ret=STACKTOP;STACKTOP=STACKTOP+size|0;STACKTOP=STACKTOP+15&-16;return ret}),staticAlloc:(function(size){var ret=STATICTOP;STATICTOP=STATICTOP+size|0;STATICTOP=STATICTOP+15&-16;return ret}),dynamicAlloc:(function(size){var ret=DYNAMICTOP;DYNAMICTOP=DYNAMICTOP+size|0;DYNAMICTOP=DYNAMICTOP+15&-16;if(DYNAMICTOP>=TOTAL_MEMORY)enlargeMemory();return ret}),alignMemory:(function(size,quantum){var ret=size=Math.ceil(size/(quantum?quantum:16))*(quantum?quantum:16);return ret}),makeBigInt:(function(low,high,unsigned){var ret=unsigned?+(low>>>0)+ +(high>>>0)*+4294967296:+(low>>>0)+ +(high|0)*+4294967296;return ret}),GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module[\"Runtime\"]=Runtime;var __THREW__=0;var ABORT=false;var EXITSTATUS=0;var undef=0;var tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat;var tempI64,tempI64b;var tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9;function assert(condition,text){if(!condition){abort(\"Assertion failed: \"+text)}}var globalScope=this;function getCFunc(ident){var func=Module[\"_\"+ident];if(!func){try{func=eval(\"_\"+ident)}catch(e){}}assert(func,\"Cannot call unknown function \"+ident+\" (perhaps LLVM optimizations or closure removed it?)\");return func}var cwrap,ccall;((function(){var JSfuncs={\"stackSave\":(function(){Runtime.stackSave()}),\"stackRestore\":(function(){Runtime.stackRestore()}),\"arrayToC\":(function(arr){var ret=Runtime.stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}),\"stringToC\":(function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=Runtime.stackAlloc((str.length<<2)+1);writeStringToMemory(str,ret)}return ret})};var toC={\"string\":JSfuncs[\"stringToC\"],\"array\":JSfuncs[\"arrayToC\"]};ccall=function ccallFunc(ident,returnType,argTypes,args){var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=Runtime.stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);if(returnType===\"string\")ret=Pointer_stringify(ret);if(stack!==0)Runtime.stackRestore(stack);return ret};var sourceRegex=/^function\\s*\\(([^)]*)\\)\\s*{\\s*([^*]*?)[\\s;]*(?:return\\s*(.*?)[;\\s]*)?}$/;function parseJSFunc(jsfunc){var parsed=jsfunc.toString().match(sourceRegex).slice(1);return{arguments:parsed[0],body:parsed[1],returnValue:parsed[2]}}var JSsource={};for(var fun in JSfuncs){if(JSfuncs.hasOwnProperty(fun)){JSsource[fun]=parseJSFunc(JSfuncs[fun])}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident);var numericArgs=argTypes.every((function(type){return type===\"number\"}));var numericRet=returnType!==\"string\";if(numericRet&&numericArgs){return cfunc}var argNames=argTypes.map((function(x,i){return\"$\"+i}));var funcstr=\"(function(\"+argNames.join(\",\")+\") {\";var nargs=argTypes.length;if(!numericArgs){funcstr+=\"var stack = \"+JSsource[\"stackSave\"].body+\";\";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type===\"number\")continue;var convertCode=JSsource[type+\"ToC\"];funcstr+=\"var \"+convertCode.arguments+\" = \"+arg+\";\";funcstr+=convertCode.body+\";\";funcstr+=arg+\"=\"+convertCode.returnValue+\";\"}}var cfuncname=parseJSFunc((function(){return cfunc})).returnValue;funcstr+=\"var ret = \"+cfuncname+\"(\"+argNames.join(\",\")+\");\";if(!numericRet){var strgfy=parseJSFunc((function(){return Pointer_stringify})).returnValue;funcstr+=\"ret = \"+strgfy+\"(ret);\"}if(!numericArgs){funcstr+=JSsource[\"stackRestore\"].body.replace(\"()\",\"(stack)\")+\";\"}funcstr+=\"return ret})\";return eval(funcstr)}}))();Module[\"cwrap\"]=cwrap;Module[\"ccall\"]=ccall;function setValue(ptr,value,type,noSafe){type=type||\"i8\";if(type.charAt(type.length-1)===\"*\")type=\"i32\";switch(type){case\"i1\":HEAP8[ptr>>0]=value;break;case\"i8\":HEAP8[ptr>>0]=value;break;case\"i16\":HEAP16[ptr>>1]=value;break;case\"i32\":HEAP32[ptr>>2]=value;break;case\"i64\":tempI64=[value>>>0,(tempDouble=value,+Math_abs(tempDouble)>=+1?tempDouble>+0?(Math_min(+Math_floor(tempDouble/+4294967296),+4294967295)|0)>>>0:~~+Math_ceil((tempDouble- +(~~tempDouble>>>0))/+4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case\"float\":HEAPF32[ptr>>2]=value;break;case\"double\":HEAPF64[ptr>>3]=value;break;default:abort(\"invalid type for setValue: \"+type)}}Module[\"setValue\"]=setValue;function getValue(ptr,type,noSafe){type=type||\"i8\";if(type.charAt(type.length-1)===\"*\")type=\"i32\";switch(type){case\"i1\":return HEAP8[ptr>>0];case\"i8\":return HEAP8[ptr>>0];case\"i16\":return HEAP16[ptr>>1];case\"i32\":return HEAP32[ptr>>2];case\"i64\":return HEAP32[ptr>>2];case\"float\":return HEAPF32[ptr>>2];case\"double\":return HEAPF64[ptr>>3];default:abort(\"invalid type for setValue: \"+type)}return null}Module[\"getValue\"]=getValue;var ALLOC_NORMAL=0;var ALLOC_STACK=1;var ALLOC_STATIC=2;var ALLOC_DYNAMIC=3;var ALLOC_NONE=4;Module[\"ALLOC_NORMAL\"]=ALLOC_NORMAL;Module[\"ALLOC_STACK\"]=ALLOC_STACK;Module[\"ALLOC_STATIC\"]=ALLOC_STATIC;Module[\"ALLOC_DYNAMIC\"]=ALLOC_DYNAMIC;Module[\"ALLOC_NONE\"]=ALLOC_NONE;function allocate(slab,types,allocator,ptr){var zeroinit,size;if(typeof slab===\"number\"){zeroinit=true;size=slab}else{zeroinit=false;size=slab.length}var singleType=typeof types===\"string\"?types:null;var ret;if(allocator==ALLOC_NONE){ret=ptr}else{ret=[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][allocator===undefined?ALLOC_STATIC:allocator](Math.max(size,singleType?1:types.length))}if(zeroinit){var ptr=ret,stop;assert((ret&3)==0);stop=ret+(size&~3);for(;ptr<stop;ptr+=4){HEAP32[ptr>>2]=0}stop=ret+size;while(ptr<stop){HEAP8[ptr++>>0]=0}return ret}if(singleType===\"i8\"){if(slab.subarray||slab.slice){HEAPU8.set(slab,ret)}else{HEAPU8.set(new Uint8Array(slab),ret)}return ret}var i=0,type,typeSize,previousType;while(i<size){var curr=slab[i];if(typeof curr===\"function\"){curr=Runtime.getFunctionIndex(curr)}type=singleType||types[i];if(type===0){i++;continue}if(type==\"i64\")type=\"i32\";setValue(ret+i,curr,type);if(previousType!==type){typeSize=Runtime.getNativeTypeSize(type);previousType=type}i+=typeSize}return ret}Module[\"allocate\"]=allocate;function Pointer_stringify(ptr,length){if(length===0||!ptr)return\"\";var hasUtf=false;var t;var i=0;while(1){t=HEAPU8[ptr+i>>0];if(t>=128)hasUtf=true;else if(t==0&&!length)break;i++;if(length&&i==length)break}if(!length)length=i;var ret=\"\";if(!hasUtf){var MAX_CHUNK=1024;var curr;while(length>0){curr=String.fromCharCode.apply(String,HEAPU8.subarray(ptr,ptr+Math.min(length,MAX_CHUNK)));ret=ret?ret+curr:curr;ptr+=MAX_CHUNK;length-=MAX_CHUNK}return ret}var utf8=new Runtime.UTF8Processor;for(i=0;i<length;i++){t=HEAPU8[ptr+i>>0];ret+=utf8.processCChar(t)}return ret}Module[\"Pointer_stringify\"]=Pointer_stringify;function UTF16ToString(ptr){var i=0;var str=\"\";while(1){var codeUnit=HEAP16[ptr+i*2>>1];if(codeUnit==0)return str;++i;str+=String.fromCharCode(codeUnit)}}Module[\"UTF16ToString\"]=UTF16ToString;function stringToUTF16(str,outPtr){for(var i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr+i*2>>1]=codeUnit}HEAP16[outPtr+str.length*2>>1]=0}Module[\"stringToUTF16\"]=stringToUTF16;function UTF32ToString(ptr){var i=0;var str=\"\";while(1){var utf32=HEAP32[ptr+i*4>>2];if(utf32==0)return str;++i;if(utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}else{str+=String.fromCharCode(utf32)}}}Module[\"UTF32ToString\"]=UTF32ToString;function stringToUTF32(str,outPtr){var iChar=0;for(var iCodeUnit=0;iCodeUnit<str.length;++iCodeUnit){var codeUnit=str.charCodeAt(iCodeUnit);if(codeUnit>=55296&&codeUnit<=57343){var trailSurrogate=str.charCodeAt(++iCodeUnit);codeUnit=65536+((codeUnit&1023)<<10)|trailSurrogate&1023}HEAP32[outPtr+iChar*4>>2]=codeUnit;++iChar}HEAP32[outPtr+iChar*4>>2]=0}Module[\"stringToUTF32\"]=stringToUTF32;function demangle(func){var hasLibcxxabi=!!Module[\"___cxa_demangle\"];if(hasLibcxxabi){try{var buf=_malloc(func.length);writeStringToMemory(func.substr(1),buf);var status=_malloc(4);var ret=Module[\"___cxa_demangle\"](buf,0,0,status);if(getValue(status,\"i32\")===0&&ret){return Pointer_stringify(ret)}}catch(e){}finally{if(buf)_free(buf);if(status)_free(status);if(ret)_free(ret)}}var i=3;var basicTypes={\"v\":\"void\",\"b\":\"bool\",\"c\":\"char\",\"s\":\"short\",\"i\":\"int\",\"l\":\"long\",\"f\":\"float\",\"d\":\"double\",\"w\":\"wchar_t\",\"a\":\"signed char\",\"h\":\"unsigned char\",\"t\":\"unsigned short\",\"j\":\"unsigned int\",\"m\":\"unsigned long\",\"x\":\"long long\",\"y\":\"unsigned long long\",\"z\":\"...\"};var subs=[];var first=true;function dump(x){if(x)Module.print(x);Module.print(func);var pre=\"\";for(var a=0;a<i;a++)pre+=\" \";Module.print(pre+\"^\")}function parseNested(){i++;if(func[i]===\"K\")i++;var parts=[];while(func[i]!==\"E\"){if(func[i]===\"S\"){i++;var next=func.indexOf(\"_\",i);var num=func.substring(i,next)||0;parts.push(subs[num]||\"?\");i=next+1;continue}if(func[i]===\"C\"){parts.push(parts[parts.length-1]);i+=2;continue}var size=parseInt(func.substr(i));var pre=size.toString().length;if(!size||!pre){i--;break}var curr=func.substr(i+pre,size);parts.push(curr);subs.push(curr);i+=pre+size}i++;return parts}function parse(rawList,limit,allowVoid){limit=limit||Infinity;var ret=\"\",list=[];function flushList(){return\"(\"+list.join(\", \")+\")\"}var name;if(func[i]===\"N\"){name=parseNested().join(\"::\");limit--;if(limit===0)return rawList?[name]:name}else{if(func[i]===\"K\"||first&&func[i]===\"L\")i++;var size=parseInt(func.substr(i));if(size){var pre=size.toString().length;name=func.substr(i+pre,size);i+=pre+size}}first=false;if(func[i]===\"I\"){i++;var iList=parse(true);var iRet=parse(true,1,true);ret+=iRet[0]+\" \"+name+\"<\"+iList.join(\", \")+\">\"}else{ret=name}paramLoop:while(i<func.length&&limit-->0){var c=func[i++];if(c in basicTypes){list.push(basicTypes[c])}else{switch(c){case\"P\":list.push(parse(true,1,true)[0]+\"*\");break;case\"R\":list.push(parse(true,1,true)[0]+\"&\");break;case\"L\":{i++;var end=func.indexOf(\"E\",i);var size=end-i;list.push(func.substr(i,size));i+=size+2;break};case\"A\":{var size=parseInt(func.substr(i));i+=size.toString().length;if(func[i]!==\"_\")throw\"?\";i++;list.push(parse(true,1,true)[0]+\" [\"+size+\"]\");break};case\"E\":break paramLoop;default:ret+=\"?\"+c;break paramLoop}}}if(!allowVoid&&list.length===1&&list[0]===\"void\")list=[];if(rawList){if(ret){list.push(ret+\"?\")}return list}else{return ret+flushList()}}var parsed=func;try{if(func==\"Object._main\"||func==\"_main\"){return\"main()\"}if(typeof func===\"number\")func=Pointer_stringify(func);if(func[0]!==\"_\")return func;if(func[1]!==\"_\")return func;if(func[2]!==\"Z\")return func;switch(func[3]){case\"n\":return\"operator new()\";case\"d\":return\"operator delete()\"}parsed=parse()}catch(e){parsed+=\"?\"}if(parsed.indexOf(\"?\")>=0&&!hasLibcxxabi){Runtime.warnOnce(\"warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling\")}return parsed}function demangleAll(text){return text.replace(/__Z[\\w\\d_]+/g,(function(x){var y=demangle(x);return x===y?x:x+\" [\"+y+\"]\"}))}function jsStackTrace(){var err=new Error;if(!err.stack){try{throw new Error(0)}catch(e){err=e}if(!err.stack){return\"(no stack trace available)\"}}return err.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module[\"stackTrace\"]=stackTrace;var PAGE_SIZE=4096;function alignMemoryPage(x){return x+4095&-4096}var HEAP;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;var STATIC_BASE=0,STATICTOP=0,staticSealed=false;var STACK_BASE=0,STACKTOP=0,STACK_MAX=0;var DYNAMIC_BASE=0,DYNAMICTOP=0;function enlargeMemory(){abort(\"Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value \"+TOTAL_MEMORY+\", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs.\")}var TOTAL_STACK=Module[\"TOTAL_STACK\"]||5242880;var TOTAL_MEMORY=Module[\"TOTAL_MEMORY\"]||67108864;var FAST_MEMORY=Module[\"FAST_MEMORY\"]||2097152;var totalMemory=64*1024;while(totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK){if(totalMemory<16*1024*1024){totalMemory*=2}else{totalMemory+=16*1024*1024}}if(totalMemory!==TOTAL_MEMORY){Module.printErr(\"increasing TOTAL_MEMORY to \"+totalMemory+\" to be compliant with the asm.js spec\");TOTAL_MEMORY=totalMemory}assert(typeof Int32Array!==\"undefined\"&&typeof Float64Array!==\"undefined\"&&!!(new Int32Array(1))[\"subarray\"]&&!!(new Int32Array(1))[\"set\"],\"JS engine does not provide full typed array support\");var buffer=new ArrayBuffer(TOTAL_MEMORY);HEAP8=new Int8Array(buffer);HEAP16=new Int16Array(buffer);HEAP32=new Int32Array(buffer);HEAPU8=new Uint8Array(buffer);HEAPU16=new Uint16Array(buffer);HEAPU32=new Uint32Array(buffer);HEAPF32=new Float32Array(buffer);HEAPF64=new Float64Array(buffer);HEAP32[0]=255;assert(HEAPU8[0]===255&&HEAPU8[3]===0,\"Typed arrays 2 must be run on a little-endian system\");Module[\"HEAP\"]=HEAP;Module[\"buffer\"]=buffer;Module[\"HEAP8\"]=HEAP8;Module[\"HEAP16\"]=HEAP16;Module[\"HEAP32\"]=HEAP32;Module[\"HEAPU8\"]=HEAPU8;Module[\"HEAPU16\"]=HEAPU16;Module[\"HEAPU32\"]=HEAPU32;Module[\"HEAPF32\"]=HEAPF32;Module[\"HEAPF64\"]=HEAPF64;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback==\"function\"){callback();continue}var func=callback.func;if(typeof func===\"number\"){if(callback.arg===undefined){Runtime.dynCall(\"v\",func)}else{Runtime.dynCall(\"vi\",func,[callback.arg])}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATEXIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeExited=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){if(runtimeInitialized)return;runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__);runtimeExited=true}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}Module[\"addOnPreRun\"]=Module.addOnPreRun=addOnPreRun;function addOnInit(cb){__ATINIT__.unshift(cb)}Module[\"addOnInit\"]=Module.addOnInit=addOnInit;function addOnPreMain(cb){__ATMAIN__.unshift(cb)}Module[\"addOnPreMain\"]=Module.addOnPreMain=addOnPreMain;function addOnExit(cb){__ATEXIT__.unshift(cb)}Module[\"addOnExit\"]=Module.addOnExit=addOnExit;function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}Module[\"addOnPostRun\"]=Module.addOnPostRun=addOnPostRun;function intArrayFromString(stringy,dontAddNull,length){var ret=(new Runtime.UTF8Processor).processJSString(stringy);if(length){ret.length=length}if(!dontAddNull){ret.push(0)}return ret}Module[\"intArrayFromString\"]=intArrayFromString;function intArrayToString(array){var ret=[];for(var i=0;i<array.length;i++){var chr=array[i];if(chr>255){chr&=255}ret.push(String.fromCharCode(chr))}return ret.join(\"\")}Module[\"intArrayToString\"]=intArrayToString;function writeStringToMemory(string,buffer,dontAddNull){var array=intArrayFromString(string,dontAddNull);var i=0;while(i<array.length){var chr=array[i];HEAP8[buffer+i>>0]=chr;i=i+1}}Module[\"writeStringToMemory\"]=writeStringToMemory;function writeArrayToMemory(array,buffer){for(var i=0;i<array.length;i++){HEAP8[buffer+i>>0]=array[i]}}Module[\"writeArrayToMemory\"]=writeArrayToMemory;function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;i++){HEAP8[buffer+i>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer+str.length>>0]=0}Module[\"writeAsciiToMemory\"]=writeAsciiToMemory;function unSign(value,bits,ignore){if(value>=0){return value}return bits<=32?2*Math.abs(1<<bits-1)+value:Math.pow(2,bits)+value}function reSign(value,bits,ignore){if(value<=0){return value}var half=bits<=32?Math.abs(1<<bits-1):Math.pow(2,bits-1);if(value>=half&&(bits<=32||value>half)){value=-2*half+value}return value}if(!Math[\"imul\"]||Math[\"imul\"](4294967295,5)!==-5)Math[\"imul\"]=function imul(a,b){var ah=a>>>16;var al=a&65535;var bh=b>>>16;var bl=b&65535;return al*bl+(ah*bl+al*bh<<16)|0};Math.imul=Math[\"imul\"];var Math_abs=Math.abs;var Math_cos=Math.cos;var Math_sin=Math.sin;var Math_tan=Math.tan;var Math_acos=Math.acos;var Math_asin=Math.asin;var Math_atan=Math.atan;var Math_atan2=Math.atan2;var Math_exp=Math.exp;var Math_log=Math.log;var Math_sqrt=Math.sqrt;var Math_ceil=Math.ceil;var Math_floor=Math.floor;var Math_pow=Math.pow;var Math_imul=Math.imul;var Math_fround=Math.fround;var Math_min=Math.min;var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}Module[\"addRunDependency\"]=addRunDependency;function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module[\"removeRunDependency\"]=removeRunDependency;Module[\"preloadedImages\"]={};Module[\"preloadedAudios\"]={};var memoryInitializer=null;STATIC_BASE=8;STATICTOP=STATIC_BASE+5664;__ATINIT__.push({func:(function(){__GLOBAL__I_a()})},{func:(function(){__GLOBAL__I_a127()})});allocate([78,55,77,105,110,105,115,97,116,50,48,79,117,116,79,102,77,101,109,111,114,121,69,120,99,101,112,116,105,111,110,69,0,0,0,0,0,0,0,0,88,18,0,0,8,0,0,0,78,55,77,105,110,105,115,97,116,54,79,112,116,105,111,110,69,0,0,0,0,0,0,0,88,18,0,0,56,0,0,0,10,32,32,32,32,32,32,32,32,37,115,10,0,0,0,0,0,0,0,0,80,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,0,0,0,1,0,0,0,3,0,0,0,1,0,0,0,1,0,0,0,78,55,77,105,110,105,115,97,116,49,48,66,111,111,108,79,112,116,105,111,110,69,0,0,128,18,0,0,176,0,0,0,80,0,0,0,0,0,0,0,32,32,45,37,115,44,32,45,110,111,45,37,115,0,0,0,40,100,101,102,97,117,108,116,58,32,37,115,41,10,0,0,111,110,0,0,0,0,0,0,111,102,102,0,0,0,0,0,110,111,45,0,0,0,0,0,0,0,0,0,64,1,0,0,1,0,0,0,4,0,0,0,2,0,0,0,2,0,0,0,78,55,77,105,110,105,115,97,116,57,73,110,116,79,112,116,105,111,110,69,0,0,0,0,128,18,0,0,40,1,0,0,80,0,0,0,0,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,91,0,0,0,0,0,0,0,105,109,105,110,0,0,0,0,37,52,100,0,0,0,0,0,32,46,46,32,0,0,0,0,105,109,97,120,0,0,0,0,93,32,40,100,101,102,97,117,108,116,58,32,37,100,41,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,115,109,97,108,108,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118,97,114,45,100,101,99,97,121,0,0,0,0,0,0,0,84,104,101,32,118,97,114,105,97,98,108,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,108,97,45,100,101,99,97,121,0,0,0,0,0,0,0,84,104,101,32,99,108,97,117,115,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,102,114,101,113,0,0,0,0,0,0,0,0,84,104,101,32,102,114,101,113,117,101,110,99,121,32,119,105,116,104,32,119,104,105,99,104,32,116,104,101,32,100,101,99,105,115,105,111,110,32,104,101,117,114,105,115,116,105,99,32,116,114,105,101,115,32,116,111,32,99,104,111,111,115,101,32,97,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,115,101,101,100,0,0,0,0,0,0,0,0,85,115,101,100,32,98,121,32,116,104,101,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,32,115,101,108,101,99,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,99,109,105,110,45,109,111,100,101,0,0,0,0,0,0,67,111,110,116,114,111,108,115,32,99,111,110,102,108,105,99,116,32,99,108,97,117,115,101,32,109,105,110,105,109,105,122,97,116,105,111,110,32,40,48,61,110,111,110,101,44,32,49,61,98,97,115,105,99,44,32,50,61,100,101,101,112,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,104,97,115,101,45,115,97,118,105,110,103,0,0,0,0,67,111,110,116,114,111,108,115,32,116,104,101,32,108,101,118,101,108,32,111,102,32,112,104,97,115,101,32,115,97,118,105,110,103,32,40,48,61,110,111,110,101,44,32,49,61,108,105,109,105,116,101,100,44,32,50,61,102,117,108,108,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,105,110,105,116,0,0,0,0,0,0,0,0,82,97,110,100,111,109,105,122,101,32,116,104,101,32,105,110,105,116,105,97,108,32,97,99,116,105,118,105,116,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,108,117,98,121,0,0,0,0,85,115,101,32,116,104,101,32,76,117,98,121,32,114,101,115,116,97,114,116,32,115,101,113,117,101,110,99,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,102,105,114,115,116,0,0,84,104,101,32,98,97,115,101,32,114,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,105,110,99,0,0,0,0,82,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,32,105,110,99,114,101,97,115,101,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,99,45,102,114,97,99,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,105,110,45,108,101,97,114,110,116,115,0,0,0,0,0,77,105,110,105,109,117,109,32,108,101,97,114,110,116,32,99,108,97,117,115,101,32,108,105,109,105,116,0,0,0,0,0,0,0,0,0,192,7,0,0,5,0,0,0,6,0,0,0,7,0,0,0,0,0,0,0,124,32,37,57,100,32,124,32,37,55,100,32,37,56,100,32,37,56,100,32,124,32,37,56,100,32,37,56,100,32,37,54,46,48,102,32,124,32,37,54,46,51,102,32,37,37,32,124,10,0,0,0,0,0,0,0,124,32,32,71,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,58,32,32,32,37,49,50,100,32,98,121,116,101,115,32,61,62,32,37,49,50,100,32,98,121,116,101,115,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,54,83,111,108,118,101,114,69,0,0,0,0,0,0,0,88,18,0,0,168,7,0,0,60,98,111,111,108,62,0,0,10,32,32,32,32,32,32,32,32,37,115,10,0,0,0,0,60,105,110,116,51,50,62,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,115,109,97,108,108,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,67,79,82,69,0,0,0,0,60,100,111,117,98,108,101,62,0,0,0,0,0,0,0,0,0,0,0,0,168,8,0,0,1,0,0,0,8,0,0,0,3,0,0,0,3,0,0,0,78,55,77,105,110,105,115,97,116,49,50,68,111,117,98,108,101,79,112,116,105,111,110,69,0,0,0,0,0,0,0,0,128,18,0,0,136,8,0,0,80,0,0,0,0,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,37,99,37,52,46,50,103,32,46,46,32,37,52,46,50,103,37,99,32,40,100,101,102,97,117,108,116,58,32,37,103,41,10,0,0,0,0,0,0,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,91,32,83,101,97,114,99,104,32,83,116,97,116,105,115,116,105,99,115,32,93,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,124,32,67,111,110,102,108,105,99,116,115,32,124,32,32,32,32,32,32,32,32,32,32,79,82,73,71,73,78,65,76,32,32,32,32,32,32,32,32,32,124,32,32,32,32,32,32,32,32,32,32,76,69,65,82,78,84,32,32,32,32,32,32,32,32,32,32,124,32,80,114,111,103,114,101,115,115,32,124,0,124,32,32,32,32,32,32,32,32,32,32,32,124,32,32,32,32,86,97,114,115,32,32,67,108,97,117,115,101,115,32,76,105,116,101,114,97,108,115,32,124,32,32,32,32,76,105,109,105,116,32,32,67,108,97,117,115,101,115,32,76,105,116,47,67,108,32,124,32,32,32,32,32,32,32,32,32,32,124,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,97,115,121,109,109,0,0,0,83,104,114,105,110,107,32,99,108,97,117,115,101,115,32,98,121,32,97,115,121,109,109,101,116,114,105,99,32,98,114,97,110,99,104,105,110,103,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,99,104,101,99,107,0,0,67,104,101,99,107,32,105,102,32,97,32,99,108,97,117,115,101,32,105,115,32,97,108,114,101,97,100,121,32,105,109,112,108,105,101,100,46,32,40,99,111,115,116,108,121,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,101,108,105,109,0,0,0,0,80,101,114,102,111,114,109,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,114,111,119,0,0,0,0,65,108,108,111,119,32,97,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,32,115,116,101,112,32,116,111,32,103,114,111,119,32,98,121,32,97,32,110,117,109,98,101,114,32,111,102,32,99,108,97,117,115,101,115,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,108,45,108,105,109,0,0,86,97,114,105,97,98,108,101,115,32,97,114,101,32,110,111,116,32,101,108,105,109,105,110,97,116,101,100,32,105,102,32,105,116,32,112,114,111,100,117,99,101,115,32,97,32,114,101,115,111,108,118,101,110,116,32,119,105,116,104,32,97,32,108,101,110,103,116,104,32,97,98,111,118,101,32,116,104,105,115,32,108,105,109,105,116,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,117,98,45,108,105,109,0,68,111,32,110,111,116,32,99,104,101,99,107,32,105,102,32,115,117,98,115,117,109,112,116,105,111,110,32,97,103,97,105,110,115,116,32,97,32,99,108,97,117,115,101,32,108,97,114,103,101,114,32,116,104,97,110,32,116,104,105,115,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,105,109,112,45,103,99,45,102,114,97,99,0,0,0,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,32,100,117,114,105,110,103,32,115,105,109,112,108,105,102,105,99,97,116,105,111,110,46,0,0,0,0,0,0,0,120,14,0,0,9,0,0,0,10,0,0,0,11,0,0,0,0,0,0,0,115,117,98,115,117,109,112,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,32,40,37,49,48,100,32,115,117,98,115,117,109,101,100,44,32,37,49,48,100,32,100,101,108,101,116,101,100,32,108,105,116,101,114,97,108,115,41,13,0,0,101,108,105,109,105,110,97,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,13,0,124,32,32,69,108,105,109,105,110,97,116,101,100,32,99,108,97,117,115,101,115,58,32,32,32,32,32,37,49,48,46,50,102,32,77,98,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,124,32,32,71,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,58,32,32,32,37,49,50,100,32,98,121,116,101,115,32,61,62,32,37,49,50,100,32,98,121,116,101,115,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,49,48,83,105,109,112,83,111,108,118,101,114,69,0,0,128,18,0,0,96,14,0,0,192,7,0,0,0,0,0,0,60,100,111,117,98,108,101,62,0,0,0,0,0,0,0,0,60,105,110,116,51,50,62,0,83,73,77,80,0,0,0,0,60,98,111,111,108,62,0,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,79,33,0,0,0,0,0,2,0,0,0,0,0,0,0,48,15,0,0,0,0,0,0,117,110,99,97,117,103,104,116,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,58,32,37,115,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,102,111,114,101,105,103,110,32,101,120,99,101,112,116,105,111,110,0,0,0,116,101,114,109,105,110,97,116,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,116,104,114,101,97,100,95,111,110,99,101,32,102,97,105,108,117,114,101,32,105,110,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,95,102,97,115,116,40,41,0,0,0,0,0,0,0,0,99,97,110,110,111,116,32,99,114,101,97,116,101,32,112,116,104,114,101,97,100,32,107,101,121,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,99,97,110,110,111,116,32,122,101,114,111,32,111,117,116,32,116,104,114,101,97,100,32,118,97,108,117,101,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,0,200,16,0,0,12,0,0,0,13,0,0,0,1,0,0,0,0,0,0,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,0,83,116,57,98,97,100,95,97,108,108,111,99,0,0,0,0,128,18,0,0,184,16,0,0,80,17,0,0,0,0,0,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,114,101,116,117,114,110,101,100,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,116,104,114,101,119,32,97,110,32,101,120,99,101,112,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,116,57,101,120,99,101,112,116,105,111,110,0,0,0,0,88,18,0,0,64,17,0,0,83,116,57,116,121,112,101,95,105,110,102,111,0,0,0,0,88,18,0,0,88,17,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,0,128,18,0,0,112,17,0,0,104,17,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,128,18,0,0,168,17,0,0,152,17,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,57,95,95,112,111,105,110,116,101,114,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,112,98,97,115,101,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,128,18,0,0,8,18,0,0,152,17,0,0,0,0,0,0,128,18,0,0,224,17,0,0,48,18,0,0,0,0,0,0,0,0,0,0,208,17,0,0,14,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,200,18,0,0,14,0,0,0,18,0,0,0,16,0,0,0,17,0,0,0,1,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,128,18,0,0,160,18,0,0,208,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,1,2,4,7,3,6,5,0,0,0,0,0,0,0,0,105,110,102,105,110,105,116,121,0,0,0,0,0,0,0,0,110,97,110,0,0,0,0,0,95,112,137,0,255,9,47,15,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5],\"i8\",ALLOC_NONE,Runtime.GLOBAL_BASE);var tempDoublePtr=Runtime.alignMemory(allocate(12,\"i8\",ALLOC_STATIC),8);assert(tempDoublePtr%8==0);function copyTempFloat(ptr){HEAP8[tempDoublePtr]=HEAP8[ptr];HEAP8[tempDoublePtr+1]=HEAP8[ptr+1];HEAP8[tempDoublePtr+2]=HEAP8[ptr+2];HEAP8[tempDoublePtr+3]=HEAP8[ptr+3]}function copyTempDouble(ptr){HEAP8[tempDoublePtr]=HEAP8[ptr];HEAP8[tempDoublePtr+1]=HEAP8[ptr+1];HEAP8[tempDoublePtr+2]=HEAP8[ptr+2];HEAP8[tempDoublePtr+3]=HEAP8[ptr+3];HEAP8[tempDoublePtr+4]=HEAP8[ptr+4];HEAP8[tempDoublePtr+5]=HEAP8[ptr+5];HEAP8[tempDoublePtr+6]=HEAP8[ptr+6];HEAP8[tempDoublePtr+7]=HEAP8[ptr+7]}function _atexit(func,arg){__ATEXIT__.unshift({func:func,arg:arg})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}Module[\"_i64Subtract\"]=_i64Subtract;var ___errno_state=0;function ___setErrNo(value){HEAP32[___errno_state>>2]=value;return value}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(name){switch(name){case 30:return PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:{if(typeof navigator===\"object\")return navigator[\"hardwareConcurrency\"]||1;return 1}}___setErrNo(ERRNO_CODES.EINVAL);return-1}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:(function(adjusted){if(!adjusted||EXCEPTIONS.infos[adjusted])return adjusted;for(var ptr in EXCEPTIONS.infos){var info=EXCEPTIONS.infos[ptr];if(info.adjusted===adjusted){return ptr}}return adjusted}),addRef:(function(ptr){if(!ptr)return;var info=EXCEPTIONS.infos[ptr];info.refcount++}),decRef:(function(ptr){if(!ptr)return;var info=EXCEPTIONS.infos[ptr];assert(info.refcount>0);info.refcount--;if(info.refcount===0){if(info.destructor){Runtime.dynCall(\"vi\",info.destructor,[ptr])}delete EXCEPTIONS.infos[ptr];___cxa_free_exception(ptr)}}),clearRef:(function(ptr){if(!ptr)return;var info=EXCEPTIONS.infos[ptr];info.refcount=0})};function ___resumeException(ptr){if(!EXCEPTIONS.last){EXCEPTIONS.last=ptr}EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(ptr));throw ptr+\" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.\"}function ___cxa_find_matching_catch(){var thrown=EXCEPTIONS.last;if(!thrown){return(asm[\"setTempRet0\"](0),0)|0}var info=EXCEPTIONS.infos[thrown];var throwntype=info.type;if(!throwntype){return(asm[\"setTempRet0\"](0),thrown)|0}var typeArray=Array.prototype.slice.call(arguments);var pointer=Module[\"___cxa_is_pointer_type\"](throwntype);if(!___cxa_find_matching_catch.buffer)___cxa_find_matching_catch.buffer=_malloc(4);HEAP32[___cxa_find_matching_catch.buffer>>2]=thrown;thrown=___cxa_find_matching_catch.buffer;for(var i=0;i<typeArray.length;i++){if(typeArray[i]&&Module[\"___cxa_can_catch\"](typeArray[i],throwntype,thrown)){thrown=HEAP32[thrown>>2];info.adjusted=thrown;return(asm[\"setTempRet0\"](typeArray[i]),thrown)|0}}thrown=HEAP32[thrown>>2];return(asm[\"setTempRet0\"](throwntype),thrown)|0}function ___cxa_throw(ptr,type,destructor){EXCEPTIONS.infos[ptr]={ptr:ptr,adjusted:ptr,type:type,destructor:destructor,refcount:0};EXCEPTIONS.last=ptr;if(!(\"uncaught_exception\"in __ZSt18uncaught_exceptionv)){__ZSt18uncaught_exceptionv.uncaught_exception=1}else{__ZSt18uncaught_exceptionv.uncaught_exception++}throw ptr+\" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch.\"}Module[\"_memset\"]=_memset;Module[\"_bitshift64Shl\"]=_bitshift64Shl;function _abort(){Module[\"abort\"]()}var FS=undefined;var SOCKFS=undefined;function _send(fd,buf,len,flags){var sock=SOCKFS.getSocket(fd);if(!sock){___setErrNo(ERRNO_CODES.EBADF);return-1}return _write(fd,buf,len)}function _pwrite(fildes,buf,nbyte,offset){var stream=FS.getStream(fildes);if(!stream){___setErrNo(ERRNO_CODES.EBADF);return-1}try{var slab=HEAP8;return FS.write(stream,slab,buf,nbyte,offset)}catch(e){FS.handleFSError(e);return-1}}function _write(fildes,buf,nbyte){var stream=FS.getStream(fildes);if(!stream){___setErrNo(ERRNO_CODES.EBADF);return-1}try{var slab=HEAP8;return FS.write(stream,slab,buf,nbyte)}catch(e){FS.handleFSError(e);return-1}}function _fileno(stream){stream=FS.getStreamFromPtr(stream);if(!stream)return-1;return stream.fd}function _fwrite(ptr,size,nitems,stream){var bytesToWrite=nitems*size;if(bytesToWrite==0)return 0;var fd=_fileno(stream);var bytesWritten=_write(fd,ptr,bytesToWrite);if(bytesWritten==-1){var streamObj=FS.getStreamFromPtr(stream);if(streamObj)streamObj.error=true;return 0}else{return bytesWritten/size|0}}Module[\"_strlen\"]=_strlen;function __reallyNegative(x){return x<0||x===0&&1/x===-Infinity}function __formatString(format,varargs){var textIndex=format;var argIndex=0;function getNextArg(type){var ret;if(type===\"double\"){ret=(HEAP32[tempDoublePtr>>2]=HEAP32[varargs+argIndex>>2],HEAP32[tempDoublePtr+4>>2]=HEAP32[varargs+(argIndex+4)>>2],+HEAPF64[tempDoublePtr>>3])}else if(type==\"i64\"){ret=[HEAP32[varargs+argIndex>>2],HEAP32[varargs+(argIndex+4)>>2]]}else{type=\"i32\";ret=HEAP32[varargs+argIndex>>2]}argIndex+=Runtime.getNativeFieldSize(type);return ret}var ret=[];var curr,next,currArg;while(1){var startTextIndex=textIndex;curr=HEAP8[textIndex>>0];if(curr===0)break;next=HEAP8[textIndex+1>>0];if(curr==37){var flagAlwaysSigned=false;var flagLeftAlign=false;var flagAlternative=false;var flagZeroPad=false;var flagPadSign=false;flagsLoop:while(1){switch(next){case 43:flagAlwaysSigned=true;break;case 45:flagLeftAlign=true;break;case 35:flagAlternative=true;break;case 48:if(flagZeroPad){break flagsLoop}else{flagZeroPad=true;break};case 32:flagPadSign=true;break;default:break flagsLoop}textIndex++;next=HEAP8[textIndex+1>>0]}var width=0;if(next==42){width=getNextArg(\"i32\");textIndex++;next=HEAP8[textIndex+1>>0]}else{while(next>=48&&next<=57){width=width*10+(next-48);textIndex++;next=HEAP8[textIndex+1>>0]}}var precisionSet=false,precision=-1;if(next==46){precision=0;precisionSet=true;textIndex++;next=HEAP8[textIndex+1>>0];if(next==42){precision=getNextArg(\"i32\");textIndex++}else{while(1){var precisionChr=HEAP8[textIndex+1>>0];if(precisionChr<48||precisionChr>57)break;precision=precision*10+(precisionChr-48);textIndex++}}next=HEAP8[textIndex+1>>0]}if(precision<0){precision=6;precisionSet=false}var argSize;switch(String.fromCharCode(next)){case\"h\":var nextNext=HEAP8[textIndex+2>>0];if(nextNext==104){textIndex++;argSize=1}else{argSize=2}break;case\"l\":var nextNext=HEAP8[textIndex+2>>0];if(nextNext==108){textIndex++;argSize=8}else{argSize=4}break;case\"L\":case\"q\":case\"j\":argSize=8;break;case\"z\":case\"t\":case\"I\":argSize=4;break;default:argSize=null}if(argSize)textIndex++;next=HEAP8[textIndex+1>>0];switch(String.fromCharCode(next)){case\"d\":case\"i\":case\"u\":case\"o\":case\"x\":case\"X\":case\"p\":{var signed=next==100||next==105;argSize=argSize||4;var currArg=getNextArg(\"i\"+argSize*8);var origArg=currArg;var argText;if(argSize==8){currArg=Runtime.makeBigInt(currArg[0],currArg[1],next==117)}if(argSize<=4){var limit=Math.pow(256,argSize)-1;currArg=(signed?reSign:unSign)(currArg&limit,argSize*8)}var currAbsArg=Math.abs(currArg);var prefix=\"\";if(next==100||next==105){if(argSize==8&&i64Math)argText=i64Math.stringify(origArg[0],origArg[1],null);else argText=reSign(currArg,8*argSize,1).toString(10)}else if(next==117){if(argSize==8&&i64Math)argText=i64Math.stringify(origArg[0],origArg[1],true);else argText=unSign(currArg,8*argSize,1).toString(10);currArg=Math.abs(currArg)}else if(next==111){argText=(flagAlternative?\"0\":\"\")+currAbsArg.toString(8)}else if(next==120||next==88){prefix=flagAlternative&&currArg!=0?\"0x\":\"\";if(argSize==8&&i64Math){if(origArg[1]){argText=(origArg[1]>>>0).toString(16);var lower=(origArg[0]>>>0).toString(16);while(lower.length<8)lower=\"0\"+lower;argText+=lower}else{argText=(origArg[0]>>>0).toString(16)}}else if(currArg<0){currArg=-currArg;argText=(currAbsArg-1).toString(16);var buffer=[];for(var i=0;i<argText.length;i++){buffer.push((15-parseInt(argText[i],16)).toString(16))}argText=buffer.join(\"\");while(argText.length<argSize*2)argText=\"f\"+argText}else{argText=currAbsArg.toString(16)}if(next==88){prefix=prefix.toUpperCase();argText=argText.toUpperCase()}}else if(next==112){if(currAbsArg===0){argText=\"(nil)\"}else{prefix=\"0x\";argText=currAbsArg.toString(16)}}if(precisionSet){while(argText.length<precision){argText=\"0\"+argText}}if(currArg>=0){if(flagAlwaysSigned){prefix=\"+\"+prefix}else if(flagPadSign){prefix=\" \"+prefix}}if(argText.charAt(0)==\"-\"){prefix=\"-\"+prefix;argText=argText.substr(1)}while(prefix.length+argText.length<width){if(flagLeftAlign){argText+=\" \"}else{if(flagZeroPad){argText=\"0\"+argText}else{prefix=\" \"+prefix}}}argText=prefix+argText;argText.split(\"\").forEach((function(chr){ret.push(chr.charCodeAt(0))}));break};case\"f\":case\"F\":case\"e\":case\"E\":case\"g\":case\"G\":{var currArg=getNextArg(\"double\");var argText;if(isNaN(currArg)){argText=\"nan\";flagZeroPad=false}else if(!isFinite(currArg)){argText=(currArg<0?\"-\":\"\")+\"inf\";flagZeroPad=false}else{var isGeneral=false;var effectivePrecision=Math.min(precision,20);if(next==103||next==71){isGeneral=true;precision=precision||1;var exponent=parseInt(currArg.toExponential(effectivePrecision).split(\"e\")[1],10);if(precision>exponent&&exponent>=-4){next=(next==103?\"f\":\"F\").charCodeAt(0);precision-=exponent+1}else{next=(next==103?\"e\":\"E\").charCodeAt(0);precision--}effectivePrecision=Math.min(precision,20)}if(next==101||next==69){argText=currArg.toExponential(effectivePrecision);if(/[eE][-+]\\d$/.test(argText)){argText=argText.slice(0,-1)+\"0\"+argText.slice(-1)}}else if(next==102||next==70){argText=currArg.toFixed(effectivePrecision);if(currArg===0&&__reallyNegative(currArg)){argText=\"-\"+argText}}var parts=argText.split(\"e\");if(isGeneral&&!flagAlternative){while(parts[0].length>1&&parts[0].indexOf(\".\")!=-1&&(parts[0].slice(-1)==\"0\"||parts[0].slice(-1)==\".\")){parts[0]=parts[0].slice(0,-1)}}else{if(flagAlternative&&argText.indexOf(\".\")==-1)parts[0]+=\".\";while(precision>effectivePrecision++)parts[0]+=\"0\"}argText=parts[0]+(parts.length>1?\"e\"+parts[1]:\"\");if(next==69)argText=argText.toUpperCase();if(currArg>=0){if(flagAlwaysSigned){argText=\"+\"+argText}else if(flagPadSign){argText=\" \"+argText}}}while(argText.length<width){if(flagLeftAlign){argText+=\" \"}else{if(flagZeroPad&&(argText[0]==\"-\"||argText[0]==\"+\")){argText=argText[0]+\"0\"+argText.slice(1)}else{argText=(flagZeroPad?\"0\":\" \")+argText}}}if(next<97)argText=argText.toUpperCase();argText.split(\"\").forEach((function(chr){ret.push(chr.charCodeAt(0))}));break};case\"s\":{var arg=getNextArg(\"i8*\");var argLength=arg?_strlen(arg):\"(null)\".length;if(precisionSet)argLength=Math.min(argLength,precision);if(!flagLeftAlign){while(argLength<width--){ret.push(32)}}if(arg){for(var i=0;i<argLength;i++){ret.push(HEAPU8[arg++>>0])}}else{ret=ret.concat(intArrayFromString(\"(null)\".substr(0,argLength),true))}if(flagLeftAlign){while(argLength<width--){ret.push(32)}}break};case\"c\":{if(flagLeftAlign)ret.push(getNextArg(\"i8\"));while(--width>0){ret.push(32)}if(!flagLeftAlign)ret.push(getNextArg(\"i8\"));break};case\"n\":{var ptr=getNextArg(\"i32*\");HEAP32[ptr>>2]=ret.length;break};case\"%\":{ret.push(curr);break};default:{for(var i=startTextIndex;i<textIndex+2;i++){ret.push(HEAP8[i>>0])}}}textIndex+=2}else{ret.push(curr);textIndex+=1}}return ret}function _fprintf(stream,format,varargs){var result=__formatString(format,varargs);var stack=Runtime.stackSave();var ret=_fwrite(allocate(result,\"i8\",ALLOC_STACK),1,result.length,stream);Runtime.stackRestore(stack);return ret}function _printf(format,varargs){var result=__formatString(format,varargs);var string=intArrayToString(result);if(string[string.length-1]===\"\\n\")string=string.substr(0,string.length-1);Module.print(string);return result.length}function _pthread_once(ptr,func){if(!_pthread_once.seen)_pthread_once.seen={};if(ptr in _pthread_once.seen)return;Runtime.dynCall(\"v\",func);_pthread_once.seen[ptr]=1}function _fputc(c,stream){var chr=unSign(c&255);HEAP8[_fputc.ret>>0]=chr;var fd=_fileno(stream);var ret=_write(fd,_fputc.ret,1);if(ret==-1){var streamObj=FS.getStreamFromPtr(stream);if(streamObj)streamObj.error=true;return-1}else{return chr}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(key){return PTHREAD_SPECIFIC[key]||0}Module[\"_i64Add\"]=_i64Add;function _fputs(s,stream){var fd=_fileno(stream);return _write(fd,s,_strlen(s))}var _stdout=allocate(1,\"i32*\",ALLOC_STATIC);function _puts(s){var result=Pointer_stringify(s);var string=result.substr(0);if(string[string.length-1]===\"\\n\")string=string.substr(0,string.length-1);Module.print(string);return result.length}function _pthread_setspecific(key,value){if(!(key in PTHREAD_SPECIFIC)){return ERRNO_CODES.EINVAL}PTHREAD_SPECIFIC[key]=value;return 0}function __exit(status){Module[\"exit\"](status)}function _exit(status){__exit(status)}var _UItoD=true;function _malloc(bytes){var ptr=Runtime.dynamicAlloc(bytes+8);return ptr+8&4294967288}Module[\"_malloc\"]=_malloc;function ___cxa_allocate_exception(size){return _malloc(size)}function _fmod(x,y){return x%y}function _fmodl(){return _fmod.apply(null,arguments)}Module[\"_bitshift64Lshr\"]=_bitshift64Lshr;function ___cxa_pure_virtual(){ABORT=true;throw\"Pure virtual function called!\"}function _time(ptr){var ret=Date.now()/1e3|0;if(ptr){HEAP32[ptr>>2]=ret}return ret}var PTHREAD_SPECIFIC_NEXT_KEY=1;function _pthread_key_create(key,destructor){if(key==0){return ERRNO_CODES.EINVAL}HEAP32[key>>2]=PTHREAD_SPECIFIC_NEXT_KEY;PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0;PTHREAD_SPECIFIC_NEXT_KEY++;return 0}function ___cxa_guard_acquire(variable){if(!HEAP8[variable>>0]){HEAP8[variable>>0]=1;return 1}return 0}function ___cxa_guard_release(){}function _vfprintf(s,f,va_arg){return _fprintf(s,f,HEAP32[va_arg>>2])}function ___cxa_begin_catch(ptr){__ZSt18uncaught_exceptionv.uncaught_exception--;EXCEPTIONS.caught.push(ptr);EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(ptr));return ptr}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest);return dest}Module[\"_memcpy\"]=_memcpy;var _llvm_pow_f64=Math_pow;function _sbrk(bytes){var self=_sbrk;if(!self.called){DYNAMICTOP=alignMemoryPage(DYNAMICTOP);self.called=true;assert(Runtime.dynamicAlloc);self.alloc=Runtime.dynamicAlloc;Runtime.dynamicAlloc=(function(){abort(\"cannot dynamically allocate, sbrk now has control\")})}var ret=DYNAMICTOP;if(bytes!=0)self.alloc(bytes);return ret}var _fabs=Math_abs;function ___errno_location(){return ___errno_state}var _BItoD=true;function _copysign(a,b){return __reallyNegative(a)===__reallyNegative(b)?a:-a}function _copysignl(){return _copysign.apply(null,arguments)}var ___dso_handle=allocate(1,\"i32*\",ALLOC_STATIC);var _stderr=allocate(1,\"i32*\",ALLOC_STATIC);___errno_state=Runtime.staticAlloc(4);HEAP32[___errno_state>>2]=0;_fputc.ret=allocate([0],\"i8\",ALLOC_STATIC);STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP);staticSealed=true;STACK_MAX=STACK_BASE+TOTAL_STACK;DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX);assert(DYNAMIC_BASE<TOTAL_MEMORY,\"TOTAL_MEMORY not big enough for stack\");var ctlz_i8=allocate([8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"i8\",ALLOC_DYNAMIC);var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],\"i8\",ALLOC_DYNAMIC);function invoke_iiii(index,a1,a2,a3){try{return Module[\"dynCall_iiii\"](index,a1,a2,a3)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_viiiii(index,a1,a2,a3,a4,a5){try{Module[\"dynCall_viiiii\"](index,a1,a2,a3,a4,a5)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_vi(index,a1){try{Module[\"dynCall_vi\"](index,a1)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_vii(index,a1,a2){try{Module[\"dynCall_vii\"](index,a1,a2)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_ii(index,a1){try{return Module[\"dynCall_ii\"](index,a1)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_v(index){try{Module[\"dynCall_v\"](index)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_viiiiii(index,a1,a2,a3,a4,a5,a6){try{Module[\"dynCall_viiiiii\"](index,a1,a2,a3,a4,a5,a6)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_iii(index,a1,a2){try{return Module[\"dynCall_iii\"](index,a1,a2)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}function invoke_viiii(index,a1,a2,a3,a4){try{Module[\"dynCall_viiii\"](index,a1,a2,a3,a4)}catch(e){if(typeof e!==\"number\"&&e!==\"longjmp\")throw e;asm[\"setThrew\"](1,0)}}Module.asmGlobalArg={\"Math\":Math,\"Int8Array\":Int8Array,\"Int16Array\":Int16Array,\"Int32Array\":Int32Array,\"Uint8Array\":Uint8Array,\"Uint16Array\":Uint16Array,\"Uint32Array\":Uint32Array,\"Float32Array\":Float32Array,\"Float64Array\":Float64Array};Module.asmLibraryArg={\"abort\":abort,\"assert\":assert,\"min\":Math_min,\"invoke_iiii\":invoke_iiii,\"invoke_viiiii\":invoke_viiiii,\"invoke_vi\":invoke_vi,\"invoke_vii\":invoke_vii,\"invoke_ii\":invoke_ii,\"invoke_v\":invoke_v,\"invoke_viiiiii\":invoke_viiiiii,\"invoke_iii\":invoke_iii,\"invoke_viiii\":invoke_viiii,\"_fabs\":_fabs,\"_llvm_pow_f64\":_llvm_pow_f64,\"_send\":_send,\"_fmod\":_fmod,\"___cxa_guard_acquire\":___cxa_guard_acquire,\"___setErrNo\":___setErrNo,\"_vfprintf\":_vfprintf,\"___cxa_allocate_exception\":___cxa_allocate_exception,\"___cxa_find_matching_catch\":___cxa_find_matching_catch,\"___cxa_guard_release\":___cxa_guard_release,\"_pwrite\":_pwrite,\"__reallyNegative\":__reallyNegative,\"_sbrk\":_sbrk,\"___cxa_begin_catch\":___cxa_begin_catch,\"_emscripten_memcpy_big\":_emscripten_memcpy_big,\"_fileno\":_fileno,\"___resumeException\":___resumeException,\"__ZSt18uncaught_exceptionv\":__ZSt18uncaught_exceptionv,\"_sysconf\":_sysconf,\"_pthread_getspecific\":_pthread_getspecific,\"_atexit\":_atexit,\"_pthread_once\":_pthread_once,\"_puts\":_puts,\"_printf\":_printf,\"_pthread_key_create\":_pthread_key_create,\"_write\":_write,\"___errno_location\":___errno_location,\"_pthread_setspecific\":_pthread_setspecific,\"___cxa_atexit\":___cxa_atexit,\"_copysign\":_copysign,\"_fputc\":_fputc,\"___cxa_throw\":___cxa_throw,\"__exit\":__exit,\"_copysignl\":_copysignl,\"_abort\":_abort,\"_fwrite\":_fwrite,\"_time\":_time,\"_fprintf\":_fprintf,\"__formatString\":__formatString,\"_fputs\":_fputs,\"_exit\":_exit,\"___cxa_pure_virtual\":___cxa_pure_virtual,\"_fmodl\":_fmodl,\"STACKTOP\":STACKTOP,\"STACK_MAX\":STACK_MAX,\"tempDoublePtr\":tempDoublePtr,\"ABORT\":ABORT,\"cttz_i8\":cttz_i8,\"ctlz_i8\":ctlz_i8,\"NaN\":NaN,\"Infinity\":Infinity,\"___dso_handle\":___dso_handle,\"_stderr\":_stderr};// EMSCRIPTEN_START_ASM\nvar asm=(function(global,env,buffer) {\n\"use asm\";var a=new global.Int8Array(buffer);var b=new global.Int16Array(buffer);var c=new global.Int32Array(buffer);var d=new global.Uint8Array(buffer);var e=new global.Uint16Array(buffer);var f=new global.Uint32Array(buffer);var g=new global.Float32Array(buffer);var h=new global.Float64Array(buffer);var i=env.STACKTOP|0;var j=env.STACK_MAX|0;var k=env.tempDoublePtr|0;var l=env.ABORT|0;var m=env.cttz_i8|0;var n=env.ctlz_i8|0;var o=env.___dso_handle|0;var p=env._stderr|0;var q=0;var r=0;var s=0;var t=0;var u=+env.NaN,v=+env.Infinity;var w=0,x=0,y=0,z=0,A=0.0,B=0,C=0,D=0,E=0.0;var F=0;var G=0;var H=0;var I=0;var J=0;var K=0;var L=0;var M=0;var N=0;var O=0;var P=global.Math.floor;var Q=global.Math.abs;var R=global.Math.sqrt;var S=global.Math.pow;var T=global.Math.cos;var U=global.Math.sin;var V=global.Math.tan;var W=global.Math.acos;var X=global.Math.asin;var Y=global.Math.atan;var Z=global.Math.atan2;var _=global.Math.exp;var $=global.Math.log;var aa=global.Math.ceil;var ba=global.Math.imul;var ca=env.abort;var da=env.assert;var ea=env.min;var fa=env.invoke_iiii;var ga=env.invoke_viiiii;var ha=env.invoke_vi;var ia=env.invoke_vii;var ja=env.invoke_ii;var ka=env.invoke_v;var la=env.invoke_viiiiii;var ma=env.invoke_iii;var na=env.invoke_viiii;var oa=env._fabs;var pa=env._llvm_pow_f64;var qa=env._send;var ra=env._fmod;var sa=env.___cxa_guard_acquire;var ta=env.___setErrNo;var ua=env._vfprintf;var va=env.___cxa_allocate_exception;var wa=env.___cxa_find_matching_catch;var xa=env.___cxa_guard_release;var ya=env._pwrite;var za=env.__reallyNegative;var Aa=env._sbrk;var Ba=env.___cxa_begin_catch;var Ca=env._emscripten_memcpy_big;var Da=env._fileno;var Ea=env.___resumeException;var Fa=env.__ZSt18uncaught_exceptionv;var Ga=env._sysconf;var Ha=env._pthread_getspecific;var Ia=env._atexit;var Ja=env._pthread_once;var Ka=env._puts;var La=env._printf;var Ma=env._pthread_key_create;var Na=env._write;var Oa=env.___errno_location;var Pa=env._pthread_setspecific;var Qa=env.___cxa_atexit;var Ra=env._copysign;var Sa=env._fputc;var Ta=env.___cxa_throw;var Ua=env.__exit;var Va=env._copysignl;var Wa=env._abort;var Xa=env._fwrite;var Ya=env._time;var Za=env._fprintf;var _a=env.__formatString;var $a=env._fputs;var ab=env._exit;var bb=env.___cxa_pure_virtual;var cb=env._fmodl;var db=0.0;\n// EMSCRIPTEN_START_FUNCS\nfunction nb(a){a=a|0;var b=0;b=i;i=i+a|0;i=i+15&-16;return b|0}function ob(){return i|0}function pb(a){a=a|0;i=a}function qb(a,b){a=a|0;b=b|0;if(!q){q=a;r=b}}function rb(b){b=b|0;a[k>>0]=a[b>>0];a[k+1>>0]=a[b+1>>0];a[k+2>>0]=a[b+2>>0];a[k+3>>0]=a[b+3>>0]}function sb(b){b=b|0;a[k>>0]=a[b>>0];a[k+1>>0]=a[b+1>>0];a[k+2>>0]=a[b+2>>0];a[k+3>>0]=a[b+3>>0];a[k+4>>0]=a[b+4>>0];a[k+5>>0]=a[b+5>>0];a[k+6>>0]=a[b+6>>0];a[k+7>>0]=a[b+7>>0]}function tb(a){a=a|0;F=a}function ub(){return F|0}function vb(a){a=a|0;Ba(a|0)|0;ud()}function wb(a){a=a|0;return}function xb(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;h=i;c[b>>2]=112;c[b+4>>2]=d;c[b+8>>2]=e;c[b+12>>2]=f;c[b+16>>2]=g;if((a[144]|0)==0?(sa(144)|0)!=0:0){c[32]=0;c[33]=0;c[34]=0;Qa(19,128,o|0)|0;xa(144)}g=c[33]|0;if((g|0)==(c[34]|0)){f=(g>>1)+2&-2;f=(f|0)<2?2:f;if((f|0)>(2147483647-g|0)){d=va(1)|0;Ta(d|0,48,0)}e=c[32]|0;d=f+g|0;c[34]=d;d=Ud(e,d<<2)|0;c[32]=d;if((d|0)==0?(c[(Oa()|0)>>2]|0)==12:0){d=va(1)|0;Ta(d|0,48,0)}g=c[33]|0}c[33]=g+1;g=(c[32]|0)+(g<<2)|0;if(!g){i=h;return}c[g>>2]=b;i=h;return}function yb(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function zb(a){a=a|0;var b=0,d=0;b=i;d=c[a>>2]|0;if(!d){i=b;return}c[a+4>>2]=0;Td(d);c[a>>2]=0;c[a+8>>2]=0;i=b;return}function Ab(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function Bb(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0;e=i;if((a[d>>0]|0)!=45){k=0;i=e;return k|0}f=d+1|0;g=110;j=f;k=0;while(1){h=k+1|0;if((a[j>>0]|0)!=g<<24>>24){g=1;break}j=d+(k+2)|0;if((h|0)==3){g=0;f=j;break}else{g=a[264+h>>0]|0;k=h}}if(ee(f,c[b+4>>2]|0)|0){k=0;i=e;return k|0}a[b+20>>0]=g;k=1;i=e;return k|0}function Cb(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0;h=i;i=i+16|0;e=h;f=c[p>>2]|0;g=b+4|0;j=c[g>>2]|0;c[e>>2]=j;c[e+4>>2]=j;Za(f|0,216,e|0)|0;j=0;while(1){k=j>>>0<(32-((me(c[g>>2]|0)|0)<<1)|0)>>>0;Sa(32,f|0)|0;if(k)j=j+1|0;else break}c[e>>2]=(a[b+20>>0]|0)!=0?248:256;Za(f|0,232,e|0)|0;if(!d){i=h;return}c[e>>2]=c[b+8>>2];Za(f|0,88,e|0)|0;Sa(10,f|0)|0;i=h;return}function Db(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function Eb(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;e=i;i=i+16|0;h=e;g=e+8|0;if((a[d>>0]|0)!=45){n=0;i=e;return n|0}l=d+1|0;f=b+4|0;j=c[f>>2]|0;k=a[j>>0]|0;a:do if(k<<24>>24){m=0;while(1){n=m;m=m+1|0;if((a[l>>0]|0)!=k<<24>>24){b=0;break}k=a[j+m>>0]|0;l=d+(n+2)|0;if(!(k<<24>>24))break a}i=e;return b|0}while(0);if((a[l>>0]|0)!=61){n=0;i=e;return n|0}d=l+1|0;j=de(d,g,10)|0;if(!(c[g>>2]|0)){n=0;i=e;return n|0}if((j|0)>(c[b+24>>2]|0)){n=c[p>>2]|0;m=c[f>>2]|0;c[h>>2]=d;c[h+4>>2]=m;Za(n|0,416,h|0)|0;ab(1)}if((j|0)<(c[b+20>>2]|0)){n=c[p>>2]|0;m=c[f>>2]|0;c[h>>2]=d;c[h+4>>2]=m;Za(n|0,472,h|0)|0;ab(1)}c[b+28>>2]=j;n=1;i=e;return n|0}function Fb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;d=i;i=i+16|0;e=d;f=c[p>>2]|0;g=c[a+16>>2]|0;c[e>>2]=c[a+4>>2];c[e+4>>2]=g;Za(f|0,336,e|0)|0;g=c[a+20>>2]|0;if((g|0)==-2147483648)Xa(360,4,1,f|0)|0;else{c[e>>2]=g;Za(f|0,368,e|0)|0}Xa(376,4,1,f|0)|0;g=c[a+24>>2]|0;if((g|0)==2147483647)Xa(384,4,1,f|0)|0;else{c[e>>2]=g;Za(f|0,368,e|0)|0}c[e>>2]=c[a+28>>2];Za(f|0,392,e|0)|0;if(!b){i=d;return}c[e>>2]=c[a+8>>2];Za(f|0,88,e|0)|0;Sa(10,f|0)|0;i=d;return}function Gb(b){b=b|0;var d=0,e=0,f=0,g=0,j=0;g=i;c[b>>2]=1816;f=b+4|0;e=b+32|0;j=b+48|0;c[f+0>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[f+16>>2]=0;c[f+20>>2]=0;c[e+0>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;h[j>>3]=+h[75];h[b+56>>3]=+h[89];h[b+64>>3]=+h[103];h[b+72>>3]=+h[123];a[b+80>>0]=a[1364]|0;c[b+84>>2]=c[269];c[b+88>>2]=c[297];a[b+92>>0]=0;a[b+93>>0]=a[1292]|0;h[b+96>>3]=+h[204];c[b+104>>2]=c[439];c[b+108>>2]=c[359];h[b+112>>3]=+h[191];h[b+120>>3]=.3333333333333333;h[b+128>>3]=1.1;c[b+136>>2]=100;h[b+144>>3]=1.5;j=b+316|0;c[b+332>>2]=0;c[b+336>>2]=0;c[b+340>>2]=0;c[b+348>>2]=0;c[b+352>>2]=0;c[b+356>>2]=0;c[b+364>>2]=0;c[b+368>>2]=0;c[b+372>>2]=0;c[b+380>>2]=0;c[b+384>>2]=0;c[b+388>>2]=0;c[b+396>>2]=0;c[b+400>>2]=0;c[b+404>>2]=0;e=b+544|0;c[b+412>>2]=0;c[b+416>>2]=0;c[b+420>>2]=0;c[b+428>>2]=0;c[b+432>>2]=0;c[b+436>>2]=0;c[b+444>>2]=0;c[b+448>>2]=0;c[b+452>>2]=0;ke(b+152|0,0,176)|0;c[b+456>>2]=e;f=b+460|0;c[f+0>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[f+16>>2]=0;c[f+20>>2]=0;c[b+488>>2]=j;a[b+492>>0]=1;h[b+496>>3]=1.0;h[b+504>>3]=1.0;c[b+512>>2]=0;c[b+516>>2]=-1;j=b+520|0;f=b+536|0;c[j+0>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;a[f>>0]=1;f=b+540|0;c[f+0>>2]=0;c[f+4>>2]=0;c[f+8>>2]=0;c[f+12>>2]=0;c[f+16>>2]=0;gc(e,1048576);a[b+560>>0]=0;e=b+604|0;f=b+664|0;j=b+564|0;d=j+36|0;do{c[j>>2]=0;j=j+4|0}while((j|0)<(d|0));j=e+0|0;d=j+36|0;do{c[j>>2]=0;j=j+4|0}while((j|0)<(d|0));j=b+680|0;c[f+0>>2]=-1;c[f+4>>2]=-1;c[f+8>>2]=-1;c[f+12>>2]=-1;a[j>>0]=0;i=g;return}function Hb(a){a=a|0;var b=0;b=i;Ib(a);pd(a);i=b;return}function Ib(a){a=a|0;var b=0,d=0,e=0;b=i;c[a>>2]=1816;d=a+628|0;e=c[d>>2]|0;if(e){c[a+632>>2]=0;Td(e);c[d>>2]=0;c[a+636>>2]=0}d=a+616|0;e=c[d>>2]|0;if(e){c[a+620>>2]=0;Td(e);c[d>>2]=0;c[a+624>>2]=0}d=a+604|0;e=c[d>>2]|0;if(e){c[a+608>>2]=0;Td(e);c[d>>2]=0;c[a+612>>2]=0}d=a+588|0;e=c[d>>2]|0;if(e){c[a+592>>2]=0;Td(e);c[d>>2]=0;c[a+596>>2]=0}d=a+576|0;e=c[d>>2]|0;if(e){c[a+580>>2]=0;Td(e);c[d>>2]=0;c[a+584>>2]=0}d=a+564|0;e=c[d>>2]|0;if(e){c[a+568>>2]=0;Td(e);c[d>>2]=0;c[a+572>>2]=0}d=c[a+544>>2]|0;if(d)Td(d);d=a+472|0;e=c[d>>2]|0;if(e){c[a+476>>2]=0;Td(e);c[d>>2]=0;c[a+480>>2]=0}d=a+460|0;e=c[d>>2]|0;if(e){c[a+464>>2]=0;Td(e);c[d>>2]=0;c[a+468>>2]=0}hc(a+412|0);d=a+396|0;e=c[d>>2]|0;if(e){c[a+400>>2]=0;Td(e);c[d>>2]=0;c[a+404>>2]=0}d=a+380|0;e=c[d>>2]|0;if(e){c[a+384>>2]=0;Td(e);c[d>>2]=0;c[a+388>>2]=0}e=a+364|0;d=c[e>>2]|0;if(d){c[a+368>>2]=0;Td(d);c[e>>2]=0;c[a+372>>2]=0}d=a+348|0;e=c[d>>2]|0;if(e){c[a+352>>2]=0;Td(e);c[d>>2]=0;c[a+356>>2]=0}d=a+332|0;e=c[d>>2]|0;if(e){c[a+336>>2]=0;Td(e);c[d>>2]=0;c[a+340>>2]=0}d=a+316|0;e=c[d>>2]|0;if(e){c[a+320>>2]=0;Td(e);c[d>>2]=0;c[a+324>>2]=0}d=a+304|0;e=c[d>>2]|0;if(e){c[a+308>>2]=0;Td(e);c[d>>2]=0;c[a+312>>2]=0}d=a+292|0;e=c[d>>2]|0;if(e){c[a+296>>2]=0;Td(e);c[d>>2]=0;c[a+300>>2]=0}d=a+280|0;e=c[d>>2]|0;if(e){c[a+284>>2]=0;Td(e);c[d>>2]=0;c[a+288>>2]=0}d=a+268|0;e=c[d>>2]|0;if(e){c[a+272>>2]=0;Td(e);c[d>>2]=0;c[a+276>>2]=0}d=a+256|0;e=c[d>>2]|0;if(e){c[a+260>>2]=0;Td(e);c[d>>2]=0;c[a+264>>2]=0}d=a+32|0;e=c[d>>2]|0;if(e){c[a+36>>2]=0;Td(e);c[d>>2]=0;c[a+40>>2]=0}d=a+16|0;e=c[d>>2]|0;if(e){c[a+20>>2]=0;Td(e);c[d>>2]=0;c[a+24>>2]=0}e=a+4|0;d=c[e>>2]|0;if(!d){i=b;return}c[a+8>>2]=0;Td(d);c[e>>2]=0;c[a+12>>2]=0;i=b;return}function Jb(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,j=0,k=0,l=0.0,m=0,n=0,o=0,p=0,q=0,r=0;f=i;i=i+16|0;k=f+4|0;j=f;g=b+580|0;m=c[g>>2]|0;if((m|0)>0){o=m+ -1|0;p=c[(c[b+576>>2]|0)+(o<<2)>>2]|0;c[g>>2]=o;g=p}else{p=b+540|0;g=c[p>>2]|0;c[p>>2]=g+1}m=b+412|0;p=g<<1;c[k>>2]=p;ic(m,k);c[j>>2]=p|1;ic(m,j);k=b+332|0;m=a[544]|0;j=g+1|0;jc(k,j);a[(c[k>>2]|0)+g>>0]=m;k=b+396|0;m=b+400|0;if((c[m>>2]|0)<(j|0)){o=b+404|0;p=c[o>>2]|0;if((p|0)<(j|0)){q=g+2-p&-2;n=(p>>1)+2&-2;n=(q|0)>(n|0)?q:n;if((n|0)>(2147483647-p|0)){q=va(1)|0;Ta(q|0,48,0)}r=c[k>>2]|0;q=n+p|0;c[o>>2]=q;q=Ud(r,q<<3)|0;c[k>>2]=q;if((q|0)==0?(c[(Oa()|0)>>2]|0)==12:0){r=va(1)|0;Ta(r|0,48,0)}}o=c[m>>2]|0;if((o|0)<(j|0))do{n=(c[k>>2]|0)+(o<<3)|0;if(n){r=n;c[r>>2]=0;c[r+4>>2]=0}o=o+1|0}while((o|0)!=(j|0));c[m>>2]=j}m=(c[k>>2]|0)+(g<<3)|0;c[m>>2]=-1;c[m+4>>2]=0;m=b+316|0;if(!(a[b+93>>0]|0))l=0.0;else{r=b+72|0;l=+h[r>>3]*1389796.0;l=l- +(~~(l/2147483647.0)|0)*2147483647.0;h[r>>3]=l;l=l/2147483647.0*1.0e-5}k=b+320|0;if((c[k>>2]|0)<(j|0)){n=b+324|0;o=c[n>>2]|0;if((o|0)<(j|0)){r=g+2-o&-2;p=(o>>1)+2&-2;p=(r|0)>(p|0)?r:p;if((p|0)>(2147483647-o|0)){r=va(1)|0;Ta(r|0,48,0)}q=c[m>>2]|0;r=p+o|0;c[n>>2]=r;r=Ud(q,r<<3)|0;c[m>>2]=r;if((r|0)==0?(c[(Oa()|0)>>2]|0)==12:0){r=va(1)|0;Ta(r|0,48,0)}}p=c[k>>2]|0;if((p|0)<(j|0)){n=c[m>>2]|0;do{o=n+(p<<3)|0;if(o)h[o>>3]=0.0;p=p+1|0}while((p|0)!=(j|0))}c[k>>2]=j}h[(c[m>>2]|0)+(g<<3)>>3]=l;kc(b+588|0,g,0);kc(b+348|0,g,1);k=b+364|0;d=a[d>>0]|0;jc(k,j);a[(c[k>>2]|0)+g>>0]=d;k=b+380|0;d=b+384|0;if((c[d>>2]|0)<(j|0)){m=b+388|0;o=c[m>>2]|0;if((o|0)<(j|0)){r=g+2-o&-2;n=(o>>1)+2&-2;n=(r|0)>(n|0)?r:n;if((n|0)>(2147483647-o|0)){r=va(1)|0;Ta(r|0,48,0)}q=c[k>>2]|0;r=n+o|0;c[m>>2]=r;r=Ud(q,r)|0;c[k>>2]=r;if((r|0)==0?(c[(Oa()|0)>>2]|0)==12:0){r=va(1)|0;Ta(r|0,48,0)}}m=c[d>>2]|0;if((m|0)<(j|0))do{n=(c[k>>2]|0)+m|0;if(n)a[n>>0]=0;m=m+1|0}while((m|0)!=(j|0));c[d>>2]=j}d=b+288|0;k=c[d>>2]|0;if((k|0)<(j|0)){r=g+2-k&-2;j=(k>>1)+2&-2;j=(r|0)>(j|0)?r:j;if((j|0)>(2147483647-k|0)){r=va(1)|0;Ta(r|0,48,0)}q=b+280|0;p=c[q>>2]|0;r=j+k|0;c[d>>2]=r;r=Ud(p,r<<2)|0;c[q>>2]=r;if((r|0)==0?(c[(Oa()|0)>>2]|0)==12:0){r=va(1)|0;Ta(r|0,48,0)}}j=b+380|0;d=(c[j>>2]|0)+g|0;k=(a[d>>0]|0)==0;if(e){if(k){r=b+200|0;q=r;q=ne(c[q>>2]|0,c[q+4>>2]|0,1,0)|0;c[r>>2]=q;c[r+4>>2]=F}}else if(!k){r=b+200|0;q=r;q=ne(c[q>>2]|0,c[q+4>>2]|0,-1,-1)|0;c[r>>2]=q;c[r+4>>2]=F}a[d>>0]=e&1;e=b+460|0;if((c[b+476>>2]|0)>(g|0)?(c[(c[b+472>>2]|0)+(g<<2)>>2]|0)>-1:0){i=f;return g|0}if(!(a[(c[j>>2]|0)+g>>0]|0)){i=f;return g|0}lc(e,g);i=f;return g|0}function Kb(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;f=i;i=i+16|0;k=f+1|0;j=f;g=b+492|0;if(!(a[g>>0]|0)){s=0;i=f;return s|0}s=c[e>>2]|0;h=e+4|0;l=c[h>>2]|0;a[k+0>>0]=a[j+0>>0]|0;oc(s,l,k);l=c[h>>2]|0;a:do if((l|0)>0){k=b+332|0;j=a[528]|0;m=0;n=0;p=-2;while(1){s=c[e>>2]|0;o=c[s+(m<<2)>>2]|0;r=d[(c[k>>2]|0)+(o>>1)>>0]|0;t=r^o&1;q=t&255;u=j&255;if((o|0)==(p^1|0)?1:(q<<24>>24==j<<24>>24&(u>>>1^1)|u&2&t|0)!=0){b=1;break}t=a[536]|0;u=t&255;if((o|0)!=(p|0)?((u>>>1^1)&q<<24>>24==t<<24>>24|r&2&u|0)==0:0){c[s+(n<<2)>>2]=o;l=c[h>>2]|0;n=n+1|0}else o=p;m=m+1|0;if((m|0)<(l|0))p=o;else break a}i=f;return b|0}else{m=0;n=0}while(0);j=m-n|0;if((j|0)>0){l=l-j|0;c[h>>2]=l}if(!l){a[g>>0]=0;u=0;i=f;return u|0}else if((l|0)==1){t=c[c[e>>2]>>2]|0;s=t>>1;a[(c[b+332>>2]|0)+s>>0]=(t&1^1)&255^1;u=c[b+296>>2]|0;s=(c[b+396>>2]|0)+(s<<3)|0;c[s>>2]=-1;c[s+4>>2]=u;s=b+284|0;u=c[s>>2]|0;c[s>>2]=u+1;c[(c[b+280>>2]|0)+(u<<2)>>2]=t;u=(Mb(b)|0)==-1;a[g>>0]=u&1;i=f;return u|0}else{e=pc(b+544|0,e,0)|0;h=b+256|0;g=b+260|0;k=c[g>>2]|0;j=b+264|0;if((k|0)==(c[j>>2]|0)){l=(k>>1)+2&-2;l=(l|0)<2?2:l;if((l|0)>(2147483647-k|0)){u=va(1)|0;Ta(u|0,48,0)}t=c[h>>2]|0;u=l+k|0;c[j>>2]=u;u=Ud(t,u<<2)|0;c[h>>2]=u;if((u|0)==0?(c[(Oa()|0)>>2]|0)==12:0){u=va(1)|0;Ta(u|0,48,0)}k=c[g>>2]|0}c[g>>2]=k+1;g=(c[h>>2]|0)+(k<<2)|0;if(g)c[g>>2]=e;Nb(b,e);u=1;i=f;return u|0}return 0}function Lb(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0;f=c[d>>2]|0;d=f>>1;a[(c[b+332>>2]|0)+d>>0]=(f&1^1)&255^1;g=c[b+296>>2]|0;d=(c[b+396>>2]|0)+(d<<3)|0;c[d>>2]=e;c[d+4>>2]=g;e=b+284|0;d=c[e>>2]|0;c[e>>2]=d+1;c[(c[b+280>>2]|0)+(d<<2)>>2]=f;return}function Mb(b){b=b|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0;k=i;i=i+16|0;r=k;h=b+512|0;t=c[h>>2]|0;q=b+284|0;if((t|0)>=(c[q>>2]|0)){M=0;K=0;O=-1;N=b+184|0;I=N;L=I;L=c[L>>2]|0;I=I+4|0;I=c[I>>2]|0;I=ne(L|0,I|0,M|0,K|0)|0;L=F;J=N;c[J>>2]=I;N=N+4|0;c[N>>2]=L;N=b+520|0;L=N;J=L;J=c[J>>2]|0;L=L+4|0;L=c[L>>2]|0;K=je(J|0,L|0,M|0,K|0)|0;M=F;L=N;c[L>>2]=K;N=N+4|0;c[N>>2]=M;i=k;return O|0}o=b+280|0;j=b+428|0;g=b+412|0;l=b+332|0;m=b+544|0;n=r+4|0;e=b+396|0;p=b+296|0;f=b+456|0;z=-1;s=0;do{c[h>>2]=t+1;w=c[(c[o>>2]|0)+(t<<2)>>2]|0;if(a[(c[j>>2]|0)+w>>0]|0){u=c[g>>2]|0;t=u+(w*12|0)+4|0;y=c[t>>2]|0;if((y|0)>0){u=u+(w*12|0)|0;v=0;x=0;do{B=c[u>>2]|0;A=B+(v<<3)|0;if((c[(c[c[f>>2]>>2]|0)+(c[A>>2]<<2)>>2]&3|0)!=1){N=A;O=c[N+4>>2]|0;y=B+(x<<3)|0;c[y>>2]=c[N>>2];c[y+4>>2]=O;y=c[t>>2]|0;x=x+1|0}v=v+1|0}while((v|0)<(y|0))}else{v=0;x=0}u=v-x|0;if((u|0)>0)c[t>>2]=y-u;a[(c[j>>2]|0)+w>>0]=0}t=c[g>>2]|0;s=s+1|0;u=c[t+(w*12|0)>>2]|0;t=t+(w*12|0)+4|0;x=c[t>>2]|0;v=u+(x<<3)|0;a:do if(!x){v=u;y=u}else{w=w^1;x=(x<<3)+ -1|0;B=u;y=u;while(1){while(1){b:while(1){H=c[B+4>>2]|0;O=d[(c[l>>2]|0)+(H>>1)>>0]^H&1;J=a[528]|0;I=J&255;K=I&2;I=I>>>1^1;if((O&255)<<24>>24==J<<24>>24&I|K&O){E=19;break}A=c[B>>2]|0;E=c[m>>2]|0;G=E+(A<<2)|0;C=E+(A+1<<2)|0;D=c[C>>2]|0;if((D|0)==(w|0)){O=E+(A+2<<2)|0;D=c[O>>2]|0;c[C>>2]=D;c[O>>2]=w}C=B+8|0;c[r>>2]=A;c[n>>2]=D;if((D|0)!=(H|0)?(O=d[(c[l>>2]|0)+(D>>1)>>0]^D&1,((O&255)<<24>>24==J<<24>>24&I|K&O|0)!=0):0){E=27;break}K=c[G>>2]|0;if(K>>>0<=95){E=31;break}I=c[l>>2]|0;J=a[536]|0;H=J&255;O=H&2;H=H>>>1^1;N=2;while(1){L=G+(N<<2)+4|0;M=c[L>>2]|0;P=d[I+(M>>1)>>0]^M&1;N=N+1|0;if(!((P&255)<<24>>24==J<<24>>24&H|O&P))break;if((N|0)>=(K>>>5|0)){E=32;break b}}P=E+(A+2<<2)|0;c[P>>2]=M;c[L>>2]=w;qc((c[g>>2]|0)+((c[P>>2]^1)*12|0)|0,r);if((C|0)==(v|0))break a;else B=C}if((E|0)==19){E=0;N=B;O=c[N+4>>2]|0;P=y;c[P>>2]=c[N>>2];c[P+4>>2]=O;B=B+8|0;y=y+8|0}else if((E|0)==27){E=0;O=r;P=c[O+4>>2]|0;B=y;c[B>>2]=c[O>>2];c[B+4>>2]=P;B=C;y=y+8|0}else if((E|0)==31){J=a[536]|0;E=32}if((E|0)==32){E=y+8|0;G=r;I=c[G+4>>2]|0;H=y;c[H>>2]=c[G>>2];c[H+4>>2]=I;H=D>>1;I=D&1;G=(c[l>>2]|0)+H|0;P=d[G>>0]^I;O=J&255;if((P&255)<<24>>24==J<<24>>24&(O>>>1^1)|O&2&P)break;a[G>>0]=(I^1)&255^1;y=c[p>>2]|0;B=(c[e>>2]|0)+(H<<3)|0;c[B>>2]=A;c[B+4>>2]=y;B=c[q>>2]|0;c[q>>2]=B+1;c[(c[o>>2]|0)+(B<<2)>>2]=D;B=C;y=E}if((B|0)==(v|0))break a}c[h>>2]=c[q>>2];if(C>>>0<v>>>0){z=(u+(x-C)|0)>>>3;while(1){N=C;C=C+8|0;O=c[N+4>>2]|0;P=E;c[P>>2]=c[N>>2];c[P+4>>2]=O;if(C>>>0>=v>>>0)break;else E=E+8|0}B=B+(z+2<<3)|0;y=y+(z+2<<3)|0}else{B=C;y=E}if((B|0)==(v|0)){z=A;break}else z=A}}while(0);u=v-y|0;if((u|0)>0)c[t>>2]=(c[t>>2]|0)-(u>>3);t=c[h>>2]|0}while((t|0)<(c[q>>2]|0));N=s;L=((s|0)<0)<<31>>31;P=z;O=b+184|0;J=O;M=J;M=c[M>>2]|0;J=J+4|0;J=c[J>>2]|0;J=ne(M|0,J|0,N|0,L|0)|0;M=F;K=O;c[K>>2]=J;O=O+4|0;c[O>>2]=M;O=b+520|0;M=O;K=M;K=c[K>>2]|0;M=M+4|0;M=c[M>>2]|0;L=je(K|0,M|0,N|0,L|0)|0;N=F;M=O;c[M>>2]=L;O=O+4|0;c[O>>2]=N;i=k;return P|0}function Nb(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;d=i;i=i+16|0;k=d+8|0;f=d;g=c[a+544>>2]|0;e=g+(b<<2)|0;h=g+(b+1<<2)|0;j=a+412|0;l=(c[j>>2]|0)+((c[h>>2]^1)*12|0)|0;g=g+(b+2<<2)|0;m=c[g>>2]|0;c[k>>2]=b;c[k+4>>2]=m;qc(l,k);g=(c[j>>2]|0)+((c[g>>2]^1)*12|0)|0;h=c[h>>2]|0;c[f>>2]=b;c[f+4>>2]=h;qc(g,f);if(!(c[e>>2]&4)){m=a+208|0;l=m;l=ne(c[l>>2]|0,c[l+4>>2]|0,1,0)|0;c[m>>2]=l;c[m+4>>2]=F;m=a+224|0;l=m;l=ne((c[e>>2]|0)>>>5|0,0,c[l>>2]|0,c[l+4>>2]|0)|0;c[m>>2]=l;c[m+4>>2]=F;i=d;return}else{m=a+216|0;l=m;l=ne(c[l>>2]|0,c[l+4>>2]|0,1,0)|0;c[m>>2]=l;c[m+4>>2]=F;m=a+232|0;l=m;l=ne((c[e>>2]|0)>>>5|0,0,c[l>>2]|0,c[l+4>>2]|0)|0;c[m>>2]=l;c[m+4>>2]=F;i=d;return}}function Ob(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;g=i;i=i+16|0;l=g+4|0;j=g;h=c[b+544>>2]|0;f=h+(d<<2)|0;k=c[h+(d+1<<2)>>2]^1;if(!e){c[l>>2]=k;e=b+428|0;m=c[e>>2]|0;k=m+k|0;if(!(a[k>>0]|0)){a[k>>0]=1;mc(b+444|0,l);m=c[e>>2]|0}d=c[h+(d+2<<2)>>2]^1;c[j>>2]=d;d=m+d|0;if(!(a[d>>0]|0)){a[d>>0]=1;mc(b+444|0,j)}}else{j=b+412|0;e=c[j>>2]|0;l=e+(k*12|0)|0;h=h+(d+2<<2)|0;k=e+(k*12|0)+4|0;m=c[k>>2]|0;a:do if((m|0)>0){p=c[l>>2]|0;o=0;while(1){n=o+1|0;if((c[p+(o<<3)>>2]|0)==(d|0)){n=o;break a}if((n|0)<(m|0))o=n;else break}}else n=0;while(0);m=m+ -1|0;if((n|0)<(m|0)){do{e=c[l>>2]|0;m=n;n=n+1|0;o=e+(n<<3)|0;p=c[o+4>>2]|0;m=e+(m<<3)|0;c[m>>2]=c[o>>2];c[m+4>>2]=p;m=(c[k>>2]|0)+ -1|0}while((n|0)<(m|0));e=c[j>>2]|0}c[k>>2]=m;j=c[h>>2]^1;h=e+(j*12|0)|0;j=e+(j*12|0)+4|0;k=c[j>>2]|0;b:do if((k|0)>0){e=c[h>>2]|0;m=0;while(1){l=m+1|0;if((c[e+(m<<3)>>2]|0)==(d|0)){l=m;break b}if((l|0)<(k|0))m=l;else break}}else l=0;while(0);d=k+ -1|0;if((l|0)<(d|0))do{n=c[h>>2]|0;d=l;l=l+1|0;o=n+(l<<3)|0;p=c[o+4>>2]|0;d=n+(d<<3)|0;c[d>>2]=c[o>>2];c[d+4>>2]=p;d=(c[j>>2]|0)+ -1|0}while((l|0)<(d|0));c[j>>2]=d}if(!(c[f>>2]&4)){p=b+208|0;o=p;o=ne(c[o>>2]|0,c[o+4>>2]|0,-1,-1)|0;c[p>>2]=o;c[p+4>>2]=F;p=b+224|0;o=p;o=je(c[o>>2]|0,c[o+4>>2]|0,(c[f>>2]|0)>>>5|0,0)|0;c[p>>2]=o;c[p+4>>2]=F;i=g;return}else{p=b+216|0;o=p;o=ne(c[o>>2]|0,c[o+4>>2]|0,-1,-1)|0;c[p>>2]=o;c[p+4>>2]=F;p=b+232|0;o=p;o=je(c[o>>2]|0,c[o+4>>2]|0,(c[f>>2]|0)>>>5|0,0)|0;c[p>>2]=o;c[p+4>>2]=F;i=g;return}}function Pb(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;h=i;g=b+544|0;m=c[g>>2]|0;f=m+(e<<2)|0;Ob(b,e,0);m=c[m+(e+1<<2)>>2]|0;j=m>>1;m=(d[(c[b+332>>2]|0)+j>>0]|0)^m&1;o=a[528]|0;n=o&255;if((((m&255)<<24>>24==o<<24>>24&(n>>>1^1)|n&2&m|0)!=0?(k=(c[b+396>>2]|0)+(j<<3)|0,l=c[k>>2]|0,(l|0)!=-1):0)?((c[g>>2]|0)+(l<<2)|0)==(f|0):0)c[k>>2]=-1;c[f>>2]=c[f>>2]&-4|1;n=c[(c[g>>2]|0)+(e<<2)>>2]|0;o=b+556|0;c[o>>2]=((((n>>>3&1)+(n>>>5)<<2)+4|0)>>>2)+(c[o>>2]|0);i=h;return}function Qb(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0;f=i;g=c[e>>2]|0;if(g>>>0<=31){l=0;i=f;return l|0}h=c[b+332>>2]|0;j=a[528]|0;k=j&255;l=k&2;k=k>>>1^1;b=0;while(1){m=c[e+(b<<2)+4>>2]|0;m=(d[h+(m>>1)>>0]|0)^m&1;b=b+1|0;if((m&255)<<24>>24==j<<24>>24&k|l&m){g=1;e=5;break}if((b|0)>=(g>>>5|0)){g=0;e=5;break}}if((e|0)==5){i=f;return g|0}return 0}function Rb(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;g=i;e=b+296|0;if((c[e>>2]|0)<=(d|0)){i=g;return}f=b+284|0;s=c[f>>2]|0;j=b+292|0;t=c[j>>2]|0;u=c[t+(d<<2)>>2]|0;if((s|0)>(u|0)){r=b+280|0;m=b+332|0;l=b+88|0;k=b+348|0;n=b+460|0;p=b+476|0;q=b+472|0;o=b+380|0;do{s=s+ -1|0;u=c[(c[r>>2]|0)+(s<<2)>>2]>>1;a[(c[m>>2]|0)+u>>0]=a[544]|0;t=c[l>>2]|0;if((t|0)<=1){if((t|0)==1?(s|0)>(c[(c[j>>2]|0)+((c[e>>2]|0)+ -1<<2)>>2]|0):0)h=7}else h=7;if((h|0)==7){h=0;a[(c[k>>2]|0)+u>>0]=c[(c[r>>2]|0)+(s<<2)>>2]&1}if(!((c[p>>2]|0)>(u|0)?(c[(c[q>>2]|0)+(u<<2)>>2]|0)>-1:0))h=11;if((h|0)==11?(h=0,(a[(c[o>>2]|0)+u>>0]|0)!=0):0)lc(n,u);t=c[j>>2]|0;u=c[t+(d<<2)>>2]|0}while((s|0)>(u|0));s=c[f>>2]|0}c[b+512>>2]=u;b=c[t+(d<<2)>>2]|0;if((s-b|0)>0)c[f>>2]=b;if(((c[e>>2]|0)-d|0)<=0){i=g;return}c[e>>2]=d;i=g;return}function Sb(b){b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0.0,r=0;d=i;f=b+72|0;q=+h[f>>3]*1389796.0;q=q- +(~~(q/2147483647.0)|0)*2147483647.0;h[f>>3]=q;l=b+464|0;if(q/2147483647.0<+h[b+64>>3]?(m=c[l>>2]|0,(m|0)!=0):0){q=q*1389796.0;q=q- +(~~(q/2147483647.0)|0)*2147483647.0;h[f>>3]=q;m=c[(c[b+460>>2]|0)+(~~(+(m|0)*(q/2147483647.0))<<2)>>2]|0;o=a[(c[b+332>>2]|0)+m>>0]|0;n=a[544]|0;p=n&255;if(((p>>>1^1)&o<<24>>24==n<<24>>24|o&2&p|0)!=0?(a[(c[b+380>>2]|0)+m>>0]|0)!=0:0){p=b+176|0;o=p;o=ne(c[o>>2]|0,c[o+4>>2]|0,1,0)|0;c[p>>2]=o;c[p+4>>2]=F}}else m=-1;n=b+460|0;p=b+332|0;o=b+380|0;while(1){if(((m|0)!=-1?(r=a[(c[p>>2]|0)+m>>0]|0,j=a[544]|0,e=j&255,g=e>>>1^1,(g&r<<24>>24==j<<24>>24|r&2&e|0)!=0):0)?(a[(c[o>>2]|0)+m>>0]|0)!=0:0)break;if(!(c[l>>2]|0)){e=-2;k=17;break}m=rc(n)|0}if((k|0)==17){i=d;return e|0}l=a[(c[b+364>>2]|0)+m>>0]|0;k=l&255;if(!(g&l<<24>>24==j<<24>>24|e&2&k)){p=a[528]|0;r=p&255;r=((r>>>1^1)&l<<24>>24==p<<24>>24|k&2&r|0)!=0|m<<1;i=d;return r|0}if(!(a[b+92>>0]|0)){r=(a[(c[b+348>>2]|0)+m>>0]|0)!=0|m<<1;i=d;return r|0}else{q=+h[f>>3]*1389796.0;q=q- +(~~(q/2147483647.0)|0)*2147483647.0;h[f>>3]=q;r=q/2147483647.0<.5|m<<1;i=d;return r|0}return 0}function Tb(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0.0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0.0,U=0;j=i;i=i+16|0;p=j+8|0;t=j+4|0;n=j;m=e+4|0;k=c[m>>2]|0;l=e+8|0;if((k|0)==(c[l>>2]|0)){q=(k>>1)+2&-2;q=(q|0)<2?2:q;if((q|0)>(2147483647-k|0)){S=va(1)|0;Ta(S|0,48,0)}R=c[e>>2]|0;S=q+k|0;c[l>>2]=S;S=Ud(R,S<<2)|0;c[e>>2]=S;if((S|0)==0?(c[(Oa()|0)>>2]|0)==12:0){S=va(1)|0;Ta(S|0,48,0)}k=c[m>>2]|0}l=(c[e>>2]|0)+(k<<2)|0;if(l){c[l>>2]=0;k=c[m>>2]|0}c[m>>2]=k+1;q=b+544|0;H=b+280|0;k=b+588|0;l=b+396|0;C=b+504|0;E=b+316|0;D=b+540|0;B=b+476|0;A=b+472|0;z=b+460|0;y=b+488|0;x=b+296|0;v=b+496|0;w=b+272|0;G=b+268|0;J=-2;I=(c[b+284>>2]|0)+ -1|0;K=0;do{L=c[q>>2]|0;d=L+(d<<2)|0;M=c[d>>2]|0;if((M&4|0)!=0?(r=+h[v>>3],S=d+(M>>>5<<2)+4|0,T=r+ +g[S>>2],g[S>>2]=T,T>1.0e20):0){O=c[w>>2]|0;if((O|0)>0){N=c[G>>2]|0;M=0;do{S=L+(c[N+(M<<2)>>2]<<2)|0;S=S+((c[S>>2]|0)>>>5<<2)+4|0;g[S>>2]=+g[S>>2]*1.0e-20;M=M+1|0}while((M|0)!=(O|0))}h[v>>3]=r*1.0e-20}J=(J|0)!=-2&1;if(J>>>0<(c[d>>2]|0)>>>5>>>0)do{M=c[d+(J<<2)+4>>2]|0;c[t>>2]=M;M=M>>1;L=(c[k>>2]|0)+M|0;do if((a[L>>0]|0)==0?(c[(c[l>>2]|0)+(M<<3)+4>>2]|0)>0:0){O=c[E>>2]|0;S=O+(M<<3)|0;T=+h[C>>3]+ +h[S>>3];h[S>>3]=T;if(T>1.0e+100){P=c[D>>2]|0;if((P|0)>0){N=0;do{S=O+(N<<3)|0;h[S>>3]=+h[S>>3]*1.0e-100;N=N+1|0}while((N|0)!=(P|0))}h[C>>3]=+h[C>>3]*1.0e-100}if((c[B>>2]|0)>(M|0)?(u=c[A>>2]|0,s=c[u+(M<<2)>>2]|0,(s|0)>-1):0){N=c[z>>2]|0;O=c[N+(s<<2)>>2]|0;a:do if(!s)R=0;else{S=s;while(1){R=S;S=S+ -1>>1;Q=N+(S<<2)|0;P=c[Q>>2]|0;U=c[c[y>>2]>>2]|0;if(!(+h[U+(O<<3)>>3]>+h[U+(P<<3)>>3]))break a;c[N+(R<<2)>>2]=P;c[u+(c[Q>>2]<<2)>>2]=R;if(!S){R=0;break}}}while(0);c[N+(R<<2)>>2]=O;c[u+(O<<2)>>2]=R}a[L>>0]=1;if((c[(c[l>>2]|0)+(M<<3)+4>>2]|0)<(c[x>>2]|0)){mc(e,t);break}else{K=K+1|0;break}}while(0);J=J+1|0}while((J|0)<((c[d>>2]|0)>>>5|0));d=c[H>>2]|0;L=c[k>>2]|0;do{J=I;I=I+ -1|0;J=c[d+(J<<2)>>2]|0;N=J>>1;M=L+N|0}while((a[M>>0]|0)==0);d=c[(c[l>>2]|0)+(N<<3)>>2]|0;a[M>>0]=0;K=K+ -1|0}while((K|0)>0);c[c[e>>2]>>2]=J^1;t=b+616|0;v=c[t>>2]|0;s=b+620|0;if(!v)w=c[s>>2]|0;else{c[s>>2]=0;w=0}u=c[m>>2]|0;if((w|0)<(u|0)){y=b+624|0;x=c[y>>2]|0;if((x|0)<(u|0)){U=u+1-x&-2;w=(x>>1)+2&-2;w=(U|0)>(w|0)?U:w;if((w|0)>(2147483647-x|0)){U=va(1)|0;Ta(U|0,48,0)}U=w+x|0;c[y>>2]=U;v=Ud(v,U<<2)|0;c[t>>2]=v;if((v|0)==0?(c[(Oa()|0)>>2]|0)==12:0){U=va(1)|0;Ta(U|0,48,0)}}w=c[s>>2]|0;b:do if((w|0)<(u|0))while(1){v=v+(w<<2)|0;if(v)c[v>>2]=0;w=w+1|0;if((w|0)==(u|0))break b;v=c[t>>2]|0}while(0);c[s>>2]=u;u=c[m>>2]|0}if((u|0)>0){w=c[t>>2]|0;v=c[e>>2]|0;x=0;do{c[w+(x<<2)>>2]=c[v+(x<<2)>>2];x=x+1|0;u=c[m>>2]|0}while((x|0)<(u|0))}v=c[b+84>>2]|0;if((v|0)==1)if((u|0)>1){n=c[e>>2]|0;o=1;v=1;while(1){u=c[n+(o<<2)>>2]|0;p=c[l>>2]|0;w=c[p+(u>>1<<3)>>2]|0;c:do if((w|0)!=-1){x=(c[q>>2]|0)+(w<<2)|0;y=c[x>>2]|0;if(y>>>0>63){w=c[k>>2]|0;z=1;while(1){U=c[x+(z<<2)+4>>2]>>1;if((a[w+U>>0]|0)==0?(c[p+(U<<3)+4>>2]|0)>0:0)break;z=z+1|0;if((z|0)>=(y>>>5|0))break c}c[n+(v<<2)>>2]=u;v=v+1|0}}else{c[n+(v<<2)>>2]=u;v=v+1|0}while(0);o=o+1|0;p=c[m>>2]|0;if((o|0)>=(p|0)){n=p;break}}}else{n=u;o=1;v=1}else if((v|0)==2)if((u|0)>1){q=1;v=1;do{w=c[e>>2]|0;u=c[w+(q<<2)>>2]|0;if((c[(c[l>>2]|0)+(u>>1<<3)>>2]|0)!=-1){c[n>>2]=u;c[p+0>>2]=c[n+0>>2];if(!(Ub(b,p)|0)){u=c[e>>2]|0;w=u;u=c[u+(q<<2)>>2]|0;o=62}}else o=62;if((o|0)==62){o=0;c[w+(v<<2)>>2]=u;v=v+1|0}q=q+1|0;u=c[m>>2]|0}while((q|0)<(u|0));n=u;o=q}else{n=u;o=1;v=1}else{n=u;o=u;v=u}U=b+240|0;S=U;S=ne(c[S>>2]|0,c[S+4>>2]|0,n|0,((n|0)<0)<<31>>31|0)|0;c[U>>2]=S;c[U+4>>2]=F;o=o-v|0;if((o|0)>0){n=n-o|0;c[m>>2]=n}U=b+248|0;S=U;S=ne(c[S>>2]|0,c[S+4>>2]|0,n|0,((n|0)<0)<<31>>31|0)|0;c[U>>2]=S;c[U+4>>2]=F;if((n|0)==1)e=0;else{e=c[e>>2]|0;if((n|0)>2){b=c[l>>2]|0;m=2;o=1;do{o=(c[b+(c[e+(m<<2)>>2]>>1<<3)+4>>2]|0)>(c[b+(c[e+(o<<2)>>2]>>1<<3)+4>>2]|0)?m:o;m=m+1|0}while((m|0)<(n|0))}else o=1;S=e+(o<<2)|0;U=c[S>>2]|0;e=e+4|0;c[S>>2]=c[e>>2];c[e>>2]=U;e=c[(c[l>>2]|0)+(U>>1<<3)+4>>2]|0}c[f>>2]=e;if((c[s>>2]|0)>0)f=0;else{i=j;return}do{a[(c[k>>2]|0)+(c[(c[t>>2]|0)+(f<<2)>>2]>>1)>>0]=0;f=f+1|0}while((f|0)<(c[s>>2]|0));i=j;return}function Ub(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;e=i;n=c[d>>2]|0;l=b+396|0;q=c[l>>2]|0;k=b+544|0;s=(c[k>>2]|0)+(c[q+(n>>1<<3)>>2]<<2)|0;h=b+604|0;f=b+608|0;if(c[h>>2]|0)c[f>>2]=0;g=b+588|0;j=b+612|0;b=b+616|0;o=1;while(1){if(o>>>0<(c[s>>2]|0)>>>5>>>0){r=c[s+(o<<2)+4>>2]|0;p=r>>1;if((c[q+(p<<3)+4>>2]|0)!=0?(m=a[(c[g>>2]|0)+p>>0]|0,(m+ -1<<24>>24&255)>=2):0){s=c[f>>2]|0;t=(s|0)==(c[j>>2]|0);if(m<<24>>24==3?1:(c[q+(p<<3)>>2]|0)==-1){k=8;break}if(t){q=(s>>1)+2&-2;q=(q|0)<2?2:q;if((q|0)>(2147483647-s|0)){k=24;break}u=c[h>>2]|0;t=q+s|0;c[j>>2]=t;t=Ud(u,t<<3)|0;c[h>>2]=t;if((t|0)==0?(c[(Oa()|0)>>2]|0)==12:0){k=24;break}s=c[f>>2]|0}c[f>>2]=s+1;q=(c[h>>2]|0)+(s<<3)|0;if(q){u=q;c[u>>2]=o;c[u+4>>2]=n}c[d>>2]=r;s=c[l>>2]|0;n=r;q=s;s=(c[k>>2]|0)+(c[s+(p<<3)>>2]<<2)|0;o=0}}else{n=(c[g>>2]|0)+(n>>1)|0;if(!(a[n>>0]|0)){a[n>>0]=2;mc(b,d)}n=c[f>>2]|0;if(!n){f=1;k=34;break}u=n+ -1|0;n=c[h>>2]|0;o=c[n+(u<<3)>>2]|0;n=c[n+(u<<3)+4>>2]|0;c[d>>2]=n;q=c[l>>2]|0;s=(c[k>>2]|0)+(c[q+(n>>1<<3)>>2]<<2)|0;c[f>>2]=u}o=o+1|0}if((k|0)==8){if(t){k=(s>>1)+2&-2;k=(k|0)<2?2:k;if((k|0)>(2147483647-s|0)){u=va(1)|0;Ta(u|0,48,0)}t=c[h>>2]|0;u=k+s|0;c[j>>2]=u;u=Ud(t,u<<3)|0;c[h>>2]=u;if((u|0)==0?(c[(Oa()|0)>>2]|0)==12:0){u=va(1)|0;Ta(u|0,48,0)}s=c[f>>2]|0}j=s+1|0;c[f>>2]=j;k=(c[h>>2]|0)+(s<<3)|0;if(k){j=k;c[j>>2]=0;c[j+4>>2]=n;j=c[f>>2]|0}if((j|0)>0)k=0;else{u=0;i=e;return u|0}do{l=(c[g>>2]|0)+(c[(c[h>>2]|0)+(k<<3)+4>>2]>>1)|0;if(!(a[l>>0]|0)){a[l>>0]=3;mc(b,(c[h>>2]|0)+(k<<3)+4|0);j=c[f>>2]|0}k=k+1|0}while((k|0)<(j|0));f=0;i=e;return f|0}else if((k|0)==24)Ta(va(1)|0,48,0);else if((k|0)==34){i=e;return f|0}return 0}function Vb(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;j=i;i=i+32|0;h=j+16|0;g=j+12|0;k=j+8|0;f=j;n=e+20|0;l=e+16|0;if((c[n>>2]|0)>0){m=0;do{a[(c[e>>2]|0)+(c[(c[l>>2]|0)+(m<<2)>>2]|0)>>0]=0;m=m+1|0}while((m|0)<(c[n>>2]|0))}if(c[l>>2]|0)c[n>>2]=0;m=c[d>>2]|0;c[k>>2]=m;c[g>>2]=m;c[h+0>>2]=c[g+0>>2];sc(e,h,0);l=(c[e>>2]|0)+m|0;if(!(a[l>>0]|0)){a[l>>0]=1;mc(e+16|0,k)}if(!(c[b+296>>2]|0)){i=j;return}d=m>>1;o=b+588|0;a[(c[o>>2]|0)+d>>0]=1;p=c[b+284>>2]|0;n=b+292|0;s=c[c[n>>2]>>2]|0;if((p|0)>(s|0)){k=b+280|0;l=b+396|0;m=e+16|0;b=b+544|0;do{p=p+ -1|0;r=c[(c[k>>2]|0)+(p<<2)>>2]|0;q=r>>1;if(a[(c[o>>2]|0)+q>>0]|0){s=c[l>>2]|0;t=c[s+(q<<3)>>2]|0;a:do if((t|0)==-1){r=r^1;c[f>>2]=r;c[g>>2]=r;c[h+0>>2]=c[g+0>>2];sc(e,h,0);r=(c[e>>2]|0)+r|0;if(!(a[r>>0]|0)){a[r>>0]=1;mc(m,f)}}else{r=(c[b>>2]|0)+(t<<2)|0;t=c[r>>2]|0;if(t>>>0>63){u=1;while(1){v=c[r+(u<<2)+4>>2]>>1;if((c[s+(v<<3)+4>>2]|0)>0){a[(c[o>>2]|0)+v>>0]=1;t=c[r>>2]|0}u=u+1|0;if((u|0)>=(t>>>5|0))break a;s=c[l>>2]|0}}}while(0);a[(c[o>>2]|0)+q>>0]=0;s=c[c[n>>2]>>2]|0}}while((p|0)>(s|0))}a[(c[o>>2]|0)+d>>0]=0;i=j;return}function Wb(b){b=b|0;var e=0,f=0,j=0,k=0,l=0,m=0,n=0.0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0;f=i;i=i+16|0;p=f+4|0;u=f;e=b+272|0;w=c[e>>2]|0;n=+h[b+496>>3]/+(w|0);k=b+544|0;l=b+268|0;v=c[l>>2]|0;c[u>>2]=k;c[p+0>>2]=c[u+0>>2];tc(v,w,p);p=c[e>>2]|0;if((p|0)>0){m=b+332|0;o=b+396|0;q=0;v=0;do{t=c[l>>2]|0;u=c[t+(q<<2)>>2]|0;w=c[k>>2]|0;r=w+(u<<2)|0;s=c[r>>2]|0;do if(s>>>0>95){x=c[w+(u+1<<2)>>2]|0;w=x>>1;x=(d[(c[m>>2]|0)+w>>0]|0)^x&1;z=a[528]|0;y=z&255;if(((x&255)<<24>>24==z<<24>>24&(y>>>1^1)|y&2&x|0)!=0?(z=c[(c[o>>2]|0)+(w<<3)>>2]|0,(z|0)!=-1&(z|0)==(u|0)):0){j=9;break}if((q|0)>=((p|0)/2|0|0)?!(+g[r+(s>>>5<<2)+4>>2]<n):0){j=9;break}Pb(b,u)}else j=9;while(0);if((j|0)==9){j=0;c[t+(v<<2)>>2]=u;v=v+1|0}q=q+1|0;p=c[e>>2]|0}while((q|0)<(p|0))}else{q=0;v=0}j=q-v|0;if((j|0)>0)c[e>>2]=p-j;if(!(+((c[b+556>>2]|0)>>>0)>+h[b+96>>3]*+((c[b+548>>2]|0)>>>0))){i=f;return}gb[c[(c[b>>2]|0)+8>>2]&31](b);i=f;return}function Xb(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;f=i;g=e+4|0;m=c[g>>2]|0;if((m|0)>0){j=b+544|0;h=b+332|0;k=0;l=0;do{u=c[e>>2]|0;p=c[u+(k<<2)>>2]|0;m=(c[j>>2]|0)+(p<<2)|0;o=c[m>>2]|0;do if(o>>>0>31){v=c[h>>2]|0;r=a[528]|0;q=r&255;w=q&2;q=q>>>1^1;s=o>>>5;t=0;do{x=c[m+(t<<2)+4>>2]|0;x=(d[v+(x>>1)>>0]|0)^x&1;t=t+1|0;if((x&255)<<24>>24==r<<24>>24&q|w&x){n=7;break}}while((t|0)<(s|0));if((n|0)==7){n=0;Pb(b,p);break}if(o>>>0>95){n=a[536]|0;q=o>>>5;p=2;do{r=m+(p<<2)+4|0;x=c[r>>2]|0;x=(d[(c[h>>2]|0)+(x>>1)>>0]|0)^x&1;w=n&255;if((x&255)<<24>>24==n<<24>>24&(w>>>1^1)|w&2&x){c[r>>2]=c[m+(q+ -1<<2)+4>>2];o=c[m>>2]|0;if(o&8){o=o>>>5;c[m+(o+ -1<<2)+4>>2]=c[m+(o<<2)+4>>2];o=c[m>>2]|0}o=o+ -32|0;c[m>>2]=o;p=p+ -1|0}p=p+1|0;q=o>>>5}while((p|0)<(q|0));p=c[e>>2]|0;u=p;p=c[p+(k<<2)>>2]|0;n=16}else n=16}else n=16;while(0);if((n|0)==16){n=0;c[u+(l<<2)>>2]=p;l=l+1|0}k=k+1|0;m=c[g>>2]|0}while((k|0)<(m|0))}else{k=0;l=0}e=k-l|0;if((e|0)<=0){i=f;return}c[g>>2]=m-e;i=f;return}function Yb(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;g=i;i=i+16|0;e=g+4|0;h=g;c[e>>2]=0;d=e+4|0;c[d>>2]=0;f=e+8|0;c[f>>2]=0;c[h>>2]=0;j=b+540|0;n=c[j>>2]|0;if((n|0)>0){l=b+380|0;k=b+332|0;m=0;do{if((a[(c[l>>2]|0)+m>>0]|0)!=0?(p=a[(c[k>>2]|0)+m>>0]|0,q=a[544]|0,o=q&255,((o>>>1^1)&p<<24>>24==q<<24>>24|p&2&o|0)!=0):0){nc(e,h);n=c[j>>2]|0}m=m+1|0;c[h>>2]=m}while((m|0)<(n|0))}uc(b+460|0,e);b=c[e>>2]|0;if(!b){i=g;return}c[d>>2]=0;Td(b);c[e>>2]=0;c[f>>2]=0;i=g;return}function Zb(b){b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;d=i;f=b+492|0;if((a[f>>0]|0)!=0?(Mb(b)|0)==-1:0){f=b+284|0;g=b+516|0;if((c[f>>2]|0)==(c[g>>2]|0)){s=1;i=d;return s|0}j=b+520|0;s=j;r=c[s+4>>2]|0;if((r|0)>0|(r|0)==0&(c[s>>2]|0)>>>0>0){s=1;i=d;return s|0}Xb(b,b+268|0);if(a[b+536>>0]|0){Xb(b,b+256|0);l=b+564|0;k=b+568|0;if((c[k>>2]|0)>0){n=b+588|0;m=0;do{a[(c[n>>2]|0)+(c[(c[l>>2]|0)+(m<<2)>>2]|0)>>0]=1;m=m+1|0}while((m|0)<(c[k>>2]|0))}p=c[f>>2]|0;if((p|0)>0){m=c[b+280>>2]|0;n=c[b+588>>2]|0;q=0;o=0;do{r=c[m+(q<<2)>>2]|0;if(!(a[n+(r>>1)>>0]|0)){c[m+(o<<2)>>2]=r;p=c[f>>2]|0;o=o+1|0}q=q+1|0}while((q|0)<(p|0))}else{q=0;o=0}m=q-o|0;if((m|0)>0){p=p-m|0;c[f>>2]=p}c[b+512>>2]=p;a:do if((c[k>>2]|0)>0){o=b+588|0;m=0;do{a[(c[o>>2]|0)+(c[(c[l>>2]|0)+(m<<2)>>2]|0)>>0]=0;m=m+1|0;n=c[k>>2]|0}while((m|0)<(n|0));if((n|0)>0){n=b+580|0;o=b+584|0;m=b+576|0;p=0;while(1){r=c[n>>2]|0;if((r|0)==(c[o>>2]|0)){q=(r>>1)+2&-2;q=(q|0)<2?2:q;if((q|0)>(2147483647-r|0)){e=28;break}s=c[m>>2]|0;q=q+r|0;c[o>>2]=q;q=Ud(s,q<<2)|0;c[m>>2]=q;if((q|0)==0?(c[(Oa()|0)>>2]|0)==12:0){e=28;break}r=c[n>>2]|0}else q=c[m>>2]|0;s=q+(r<<2)|0;if(s){c[s>>2]=0;r=c[n>>2]|0}c[n>>2]=r+1;s=c[l>>2]|0;c[q+(r<<2)>>2]=c[s+(p<<2)>>2];p=p+1|0;if((p|0)>=(c[k>>2]|0))break a}if((e|0)==28)Ta(va(1)|0,48,0)}else e=21}else e=21;while(0);if((e|0)==21)s=c[l>>2]|0;if(s)c[k>>2]=0}if(+((c[b+556>>2]|0)>>>0)>+h[b+96>>3]*+((c[b+548>>2]|0)>>>0))gb[c[(c[b>>2]|0)+8>>2]&31](b);Yb(b);c[g>>2]=c[f>>2];r=b+224|0;s=b+232|0;r=ne(c[s>>2]|0,c[s+4>>2]|0,c[r>>2]|0,c[r+4>>2]|0)|0;s=j;c[s>>2]=r;c[s+4>>2]=F;s=1;i=d;return s|0}a[f>>0]=0;s=0;i=d;return s|0}function _b(b,e,f){b=b|0;e=e|0;f=f|0;var j=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,_=0,$=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0.0,ga=0,ha=0,ia=0,ja=0.0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0.0,ra=0,sa=0,ta=0.0;n=i;i=i+64|0;_=n;G=n+60|0;B=n+56|0;j=n+44|0;$=n+40|0;c[j>>2]=0;m=j+4|0;c[m>>2]=0;l=j+8|0;c[l>>2]=0;N=e+160|0;M=N;M=ne(c[M>>2]|0,c[M+4>>2]|0,1,0)|0;c[N>>2]=M;c[N+4>>2]=F;N=(f|0)<0;M=e+680|0;L=e+664|0;K=e+672|0;q=e+296|0;w=e+272|0;o=e+284|0;I=e+640|0;E=e+308|0;D=e+304|0;r=e+332|0;H=e+292|0;ba=e+168|0;t=e+396|0;v=e+280|0;J=e+184|0;C=e+192|0;u=e+48|0;U=e+504|0;Y=e+56|0;aa=e+496|0;ca=e+656|0;O=e+144|0;P=e+648|0;Q=e+128|0;R=e+44|0;T=e+200|0;V=e+208|0;W=e+224|0;X=e+216|0;s=e+232|0;Z=e+540|0;p=e+292|0;x=e+544|0;z=e+276|0;y=e+268|0;A=e+268|0;da=0;a:while(1){ea=N|(da|0)<(f|0);while(1){ga=Mb(e)|0;if((ga|0)!=-1)break;if(!ea){ga=41;break a}if(a[M>>0]|0){ga=41;break a}ga=L;ha=c[ga+4>>2]|0;if((ha|0)>=0?(sa=C,ra=c[sa+4>>2]|0,!(ra>>>0<ha>>>0|((ra|0)==(ha|0)?(c[sa>>2]|0)>>>0<(c[ga>>2]|0)>>>0:0))):0){ga=41;break a}ga=K;ha=c[ga+4>>2]|0;if((ha|0)>=0?(sa=J,ra=c[sa+4>>2]|0,!(ra>>>0<ha>>>0|((ra|0)==(ha|0)?(c[sa>>2]|0)>>>0<(c[ga>>2]|0)>>>0:0))):0){ga=41;break a}if((c[q>>2]|0)==0?!(Zb(e)|0):0){ga=50;break a}if(+((c[w>>2]|0)-(c[o>>2]|0)|0)>=+h[I>>3])Wb(e);while(1){ga=c[q>>2]|0;if((ga|0)>=(c[E>>2]|0)){ga=59;break}ka=c[(c[D>>2]|0)+(ga<<2)>>2]|0;ha=d[(c[r>>2]|0)+(ka>>1)>>0]|0;sa=ha^ka&1;ia=sa&255;pa=a[528]|0;ra=pa&255;if(!(ia<<24>>24==pa<<24>>24&(ra>>>1^1)|ra&2&sa)){ga=56;break}c[G>>2]=c[o>>2];nc(H,G)}if((ga|0)==56){ga=0;ra=a[536]|0;sa=ra&255;if((sa>>>1^1)&ia<<24>>24==ra<<24>>24|ha&2&sa){ga=57;break a}if((ka|0)==-2)ga=59}if((ga|0)==59){sa=ba;sa=ne(c[sa>>2]|0,c[sa+4>>2]|0,1,0)|0;ka=ba;c[ka>>2]=sa;c[ka+4>>2]=F;ka=Sb(e)|0;if((ka|0)==-2){ga=60;break a}}c[_>>2]=c[o>>2];nc(H,_);sa=ka>>1;a[(c[r>>2]|0)+sa>>0]=(ka&1^1)&255^1;ra=c[q>>2]|0;sa=(c[t>>2]|0)+(sa<<3)|0;c[sa>>2]=-1;c[sa+4>>2]=ra;sa=c[o>>2]|0;c[o>>2]=sa+1;c[(c[v>>2]|0)+(sa<<2)>>2]=ka}ra=C;ra=ne(c[ra>>2]|0,c[ra+4>>2]|0,1,0)|0;sa=C;c[sa>>2]=ra;c[sa+4>>2]=F;da=da+1|0;if(!(c[q>>2]|0)){ga=5;break}if(c[j>>2]|0)c[m>>2]=0;Tb(e,ga,j,B);Rb(e,c[B>>2]|0);if((c[m>>2]|0)==1){ra=c[c[j>>2]>>2]|0;sa=ra>>1;a[(c[r>>2]|0)+sa>>0]=(ra&1^1)&255^1;pa=c[q>>2]|0;sa=(c[t>>2]|0)+(sa<<3)|0;c[sa>>2]=-1;c[sa+4>>2]=pa;sa=c[o>>2]|0;c[o>>2]=sa+1;c[(c[v>>2]|0)+(sa<<2)>>2]=ra}else{ea=pc(x,j,1)|0;ga=c[w>>2]|0;if((ga|0)==(c[z>>2]|0)){ha=(ga>>1)+2&-2;ha=(ha|0)<2?2:ha;if((ha|0)>(2147483647-ga|0)){ga=14;break}ra=c[y>>2]|0;sa=ha+ga|0;c[z>>2]=sa;sa=Ud(ra,sa<<2)|0;c[y>>2]=sa;if((sa|0)==0?(c[(Oa()|0)>>2]|0)==12:0){ga=14;break}ga=c[w>>2]|0}c[w>>2]=ga+1;ga=(c[y>>2]|0)+(ga<<2)|0;if(ga)c[ga>>2]=ea;Nb(e,ea);ia=c[x>>2]|0;sa=ia+(ea<<2)|0;fa=+h[aa>>3];sa=sa+((c[sa>>2]|0)>>>5<<2)+4|0;ta=fa+ +g[sa>>2];g[sa>>2]=ta;if(ta>1.0e20){ha=c[w>>2]|0;if((ha|0)>0){ga=c[A>>2]|0;ka=0;do{sa=ia+(c[ga+(ka<<2)>>2]<<2)|0;sa=sa+((c[sa>>2]|0)>>>5<<2)+4|0;g[sa>>2]=+g[sa>>2]*1.0e-20;ka=ka+1|0}while((ka|0)!=(ha|0))}h[aa>>3]=fa*1.0e-20}ra=c[c[j>>2]>>2]|0;sa=ra>>1;a[(c[r>>2]|0)+sa>>0]=(ra&1^1)&255^1;pa=c[q>>2]|0;sa=(c[t>>2]|0)+(sa<<3)|0;c[sa>>2]=ea;c[sa+4>>2]=pa;sa=c[o>>2]|0;c[o>>2]=sa+1;c[(c[v>>2]|0)+(sa<<2)>>2]=ra}h[U>>3]=1.0/+h[u>>3]*+h[U>>3];h[aa>>3]=1.0/+h[Y>>3]*+h[aa>>3];sa=(c[ca>>2]|0)+ -1|0;c[ca>>2]=sa;if(sa)continue;fa=+h[O>>3]*+h[P>>3];h[P>>3]=fa;c[ca>>2]=~~fa;fa=+h[Q>>3]*+h[I>>3];h[I>>3]=fa;if((c[R>>2]|0)<=0)continue;ga=c[C>>2]|0;ea=c[T>>2]|0;oa=c[q>>2]|0;if(!oa)ha=o;else ha=c[p>>2]|0;ha=c[ha>>2]|0;na=c[V>>2]|0;ma=c[W>>2]|0;la=c[X>>2]|0;ka=s;ia=c[ka>>2]|0;ka=c[ka+4>>2]|0;ja=+(c[Z>>2]|0);qa=1.0/ja;if((oa|0)<0)ta=0.0;else{pa=0;ta=0.0;while(1){if(!pa)ra=0;else ra=c[(c[p>>2]|0)+(pa+ -1<<2)>>2]|0;if((pa|0)==(oa|0))sa=o;else sa=(c[p>>2]|0)+(pa<<2)|0;ta=ta+ +S(+qa,+(+(pa|0)))*+((c[sa>>2]|0)-ra|0);if((pa|0)==(oa|0))break;else pa=pa+1|0}}c[_>>2]=ga;c[_+4>>2]=ea-ha;c[_+8>>2]=na;c[_+12>>2]=ma;c[_+16>>2]=~~fa;c[_+20>>2]=la;sa=_+24|0;h[k>>3]=(+(ia>>>0)+4294967296.0*+(ka>>>0))/+(la|0);c[sa>>2]=c[k>>2];c[sa+4>>2]=c[k+4>>2];sa=_+32|0;h[k>>3]=ta/ja*100.0;c[sa>>2]=c[k>>2];c[sa+4>>2]=c[k+4>>2];La(1832,_|0)|0}if((ga|0)==5)a[b>>0]=a[536]|0;else if((ga|0)==14)Ta(va(1)|0,48,0);else if((ga|0)==41){fa=+(c[Z>>2]|0);ja=1.0/fa;r=c[q>>2]|0;if((r|0)<0)qa=0.0;else{q=0;qa=0.0;while(1){if(!q)s=0;else s=c[(c[p>>2]|0)+(q+ -1<<2)>>2]|0;if((q|0)==(r|0))t=o;else t=(c[p>>2]|0)+(q<<2)|0;qa=qa+ +S(+ja,+(+(q|0)))*+((c[t>>2]|0)-s|0);if((q|0)==(r|0))break;else q=q+1|0}}h[e+528>>3]=qa/fa;Rb(e,0);a[b>>0]=a[544]|0}else if((ga|0)==50)a[b>>0]=a[536]|0;else if((ga|0)==57){c[$>>2]=ka^1;sa=e+16|0;c[_+0>>2]=c[$+0>>2];Vb(e,_,sa);a[b>>0]=a[536]|0}else if((ga|0)==60)a[b>>0]=a[528]|0;b=c[j>>2]|0;if(!b){i=n;return}c[m>>2]=0;Td(b);c[j>>2]=0;c[l>>2]=0;i=n;return}function $b(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0.0,w=0,x=0,y=0,z=0.0,A=0,B=0;f=i;i=i+16|0;j=f;e=d+4|0;if(c[e>>2]|0)c[d+8>>2]=0;g=d+36|0;k=d+32|0;if((c[g>>2]|0)>0){l=d+16|0;m=0;do{a[(c[l>>2]|0)+(c[(c[k>>2]|0)+(m<<2)>>2]|0)>>0]=0;m=m+1|0}while((m|0)<(c[g>>2]|0))}if(c[k>>2]|0)c[g>>2]=0;k=d+492|0;if(!(a[k>>0]|0)){a[b>>0]=a[536]|0;i=f;return}l=d+152|0;y=l;y=ne(c[y>>2]|0,c[y+4>>2]|0,1,0)|0;c[l>>2]=y;c[l+4>>2]=F;z=+h[d+120>>3]*+(c[d+208>>2]|0);l=d+640|0;h[l>>3]=z;v=+(c[d+104>>2]|0);if(z<v)h[l>>3]=v;w=c[d+136>>2]|0;h[d+648>>3]=+(w|0);c[d+656>>2]=w;w=a[544]|0;l=d+44|0;if((c[l>>2]|0)>0){Ka(2288)|0;Ka(2368)|0;Ka(2448)|0;Ka(2528)|0;o=a[544]|0}else o=w;n=d+192|0;m=d+184|0;y=o&255;a:do if((y>>>1^1)&w<<24>>24==o<<24>>24|w&2&y){q=d+80|0;t=d+112|0;p=d+108|0;o=d+680|0;r=d+664|0;s=d+672|0;u=0;while(1){v=+h[t>>3];if(!(a[q>>0]|0))v=+S(+v,+(+(u|0)));else{y=u+1|0;if((u|0)>0){x=0;w=1;do{x=x+1|0;w=w<<1|1}while((w|0)<(y|0));y=w+ -1|0}else{x=0;y=0}if((y|0)!=(u|0)){w=u;do{A=y>>1;x=x+ -1|0;w=(w|0)%(A|0)|0;y=A+ -1|0}while((y|0)!=(w|0))}v=+S(+v,+(+(x|0)))}_b(j,d,~~(v*+(c[p>>2]|0)));w=a[j>>0]|0;if(a[o>>0]|0)break a;y=r;x=c[y+4>>2]|0;if((x|0)>=0?(A=n,B=c[A+4>>2]|0,!(B>>>0<x>>>0|((B|0)==(x|0)?(c[A>>2]|0)>>>0<(c[y>>2]|0)>>>0:0))):0)break a;y=s;x=c[y+4>>2]|0;if((x|0)>=0?(B=m,A=c[B+4>>2]|0,!(A>>>0<x>>>0|((A|0)==(x|0)?(c[B>>2]|0)>>>0<(c[y>>2]|0)>>>0:0))):0)break a;A=a[544]|0;B=A&255;if(!((B>>>1^1)&w<<24>>24==A<<24>>24|w&2&B))break;else u=u+1|0}}while(0);if((c[l>>2]|0)>0)Ka(2528)|0;A=a[528]|0;B=A&255;j=w&2;if(!((B>>>1^1)&w<<24>>24==A<<24>>24|j&B)){A=a[536]|0;B=A&255;if(((B>>>1^1)&w<<24>>24==A<<24>>24|j&B|0)!=0?(c[g>>2]|0)==0:0)a[k>>0]=0}else{g=d+540|0;jc(e,c[g>>2]|0);if((c[g>>2]|0)>0){j=d+332|0;k=0;do{a[(c[e>>2]|0)+k>>0]=a[(c[j>>2]|0)+k>>0]|0;k=k+1|0}while((k|0)<(c[g>>2]|0))}}Rb(d,0);a[b>>0]=w;i=f;return}function ac(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;f=i;h=b+412|0;vc(h);k=b+540|0;if((c[k>>2]|0)>0){j=b+544|0;g=0;do{l=g<<1;n=c[h>>2]|0;m=n+(l*12|0)+4|0;if((c[m>>2]|0)>0){p=n+(l*12|0)|0;o=0;do{s=(c[p>>2]|0)+(o<<3)|0;n=c[s>>2]|0;q=c[j>>2]|0;r=q+(n<<2)|0;if(!(c[r>>2]&16)){t=wc(e,r)|0;c[s>>2]=t;c[r>>2]=c[r>>2]|16;c[q+(n+1<<2)>>2]=t}else c[s>>2]=c[q+(n+1<<2)>>2];o=o+1|0}while((o|0)<(c[m>>2]|0));m=c[h>>2]|0}else m=n;n=l|1;l=m+(n*12|0)+4|0;if((c[l>>2]|0)>0){r=m+(n*12|0)|0;q=0;do{m=(c[r>>2]|0)+(q<<3)|0;p=c[m>>2]|0;o=c[j>>2]|0;n=o+(p<<2)|0;if(!(c[n>>2]&16)){t=wc(e,n)|0;c[m>>2]=t;c[n>>2]=c[n>>2]|16;c[o+(p+1<<2)>>2]=t}else c[m>>2]=c[o+(p+1<<2)>>2];q=q+1|0}while((q|0)<(c[l>>2]|0))}g=g+1|0}while((g|0)<(c[k>>2]|0))}g=b+284|0;if((c[g>>2]|0)>0){l=b+280|0;k=b+396|0;j=b+544|0;h=b+332|0;m=0;do{r=c[k>>2]|0;p=r+(c[(c[l>>2]|0)+(m<<2)>>2]>>1<<3)|0;q=c[p>>2]|0;do if((q|0)!=-1){t=c[j>>2]|0;s=t+(q<<2)|0;o=(c[s>>2]&16|0)==0;if(o){u=c[t+(q+1<<2)>>2]|0;n=u>>1;u=(d[(c[h>>2]|0)+n>>0]|0)^u&1;w=a[528]|0;v=w&255;if(!((u&255)<<24>>24==w<<24>>24&(v>>>1^1)|v&2&u))break;w=c[r+(n<<3)>>2]|0;if(!((w|0)!=-1&(w|0)==(q|0)))break;if(o){w=wc(e,s)|0;c[p>>2]=w;c[s>>2]=c[s>>2]|16;c[t+(q+1<<2)>>2]=w;break}}c[p>>2]=c[t+(q+1<<2)>>2]}while(0);m=m+1|0}while((m|0)<(c[g>>2]|0))}g=b+272|0;n=c[g>>2]|0;if((n|0)>0){j=b+268|0;h=b+544|0;m=c[j>>2]|0;k=0;l=0;do{p=m+(k<<2)|0;o=c[p>>2]|0;r=c[h>>2]|0;q=r+(o<<2)|0;s=c[q>>2]|0;if((s&3|0)!=1){if(!(s&16)){n=wc(e,q)|0;c[p>>2]=n;c[q>>2]=c[q>>2]|16;c[r+(o+1<<2)>>2]=n;n=c[j>>2]|0;m=n;n=c[n+(k<<2)>>2]|0}else{n=c[r+(o+1<<2)>>2]|0;c[p>>2]=n}c[m+(l<<2)>>2]=n;n=c[g>>2]|0;l=l+1|0}k=k+1|0}while((k|0)<(n|0))}else{k=0;l=0}h=k-l|0;if((h|0)>0)c[g>>2]=n-h;g=b+260|0;m=c[g>>2]|0;if((m|0)>0){h=b+256|0;b=b+544|0;l=c[h>>2]|0;j=0;k=0;do{n=l+(j<<2)|0;p=c[n>>2]|0;o=c[b>>2]|0;r=o+(p<<2)|0;q=c[r>>2]|0;if((q&3|0)!=1){if(!(q&16)){m=wc(e,r)|0;c[n>>2]=m;c[r>>2]=c[r>>2]|16;c[o+(p+1<<2)>>2]=m;m=c[h>>2]|0;l=m;m=c[m+(j<<2)>>2]|0}else{m=c[o+(p+1<<2)>>2]|0;c[n>>2]=m}c[l+(k<<2)>>2]=m;m=c[g>>2]|0;k=k+1|0}j=j+1|0}while((j|0)<(m|0))}else{j=0;k=0}e=j-k|0;if((e|0)<=0){i=f;return}c[g>>2]=m-e;i=f;return}function bc(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0;g=i;i=i+32|0;j=g;d=g+8|0;e=b+548|0;f=b+556|0;h=(c[e>>2]|0)-(c[f>>2]|0)|0;c[d+0>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;gc(d,h);h=d+16|0;a[h>>0]=0;ac(b,d);if((c[b+44>>2]|0)>1){k=c[d+4>>2]<<2;c[j>>2]=c[e>>2]<<2;c[j+4>>2]=k;La(1888,j|0)|0}a[b+560>>0]=a[h>>0]|0;h=b+544|0;j=c[h>>2]|0;if(j)Td(j);c[h>>2]=c[d>>2];c[e>>2]=c[d+4>>2];c[b+552>>2]=c[d+8>>2];c[f>>2]=c[d+12>>2];i=g;return}function cc(){var d=0,e=0,f=0;d=i;i=i+16|0;e=d;a[528]=0;a[536]=1;a[544]=2;xb(552,608,624,2136,2144);c[138]=2168;h[72]=0.0;h[73]=1.0;a[592]=0;a[593]=0;b[297]=b[e+0>>1]|0;b[298]=b[e+2>>1]|0;b[299]=b[e+4>>1]|0;h[75]=.95;xb(664,720,736,2136,2144);c[166]=2168;h[86]=0.0;h[87]=1.0;a[704]=0;a[705]=0;b[353]=b[e+0>>1]|0;b[354]=b[e+2>>1]|0;b[355]=b[e+4>>1]|0;h[89]=.999;xb(776,832,848,2136,2144);c[194]=2168;h[100]=0.0;h[101]=1.0;a[816]=1;a[817]=1;b[409]=b[e+0>>1]|0;b[410]=b[e+2>>1]|0;b[411]=b[e+4>>1]|0;h[103]=0.0;xb(936,992,1008,2136,2144);c[234]=2168;h[120]=0.0;h[121]=v;a[976]=0;a[977]=0;b[489]=b[e+0>>1]|0;b[490]=b[e+2>>1]|0;b[491]=b[e+4>>1]|0;h[123]=91648253.0;xb(1048,1080,1096,2136,2016);c[262]=280;f=1068|0;c[f>>2]=0;c[f+4>>2]=2;c[269]=2;xb(1160,1192,1208,2136,2016);c[290]=280;f=1180|0;c[f>>2]=0;c[f+4>>2]=2;c[297]=2;xb(1272,1296,1312,2136,1992);c[318]=160;a[1292]=0;xb(1344,1368,1376,2136,1992);c[336]=160;a[1364]=1;xb(1408,1440,1448,2136,2016);c[352]=280;f=1428|0;c[f>>2]=1;c[f+4>>2]=2147483647;c[359]=100;xb(1480,1536,1544,2136,2144);c[370]=2168;h[188]=1.0;h[189]=v;a[1520]=0;a[1521]=0;b[761]=b[e+0>>1]|0;b[762]=b[e+2>>1]|0;b[763]=b[e+4>>1]|0;h[191]=2.0;xb(1584,1640,1648,2136,2144);c[396]=2168;h[201]=0.0;h[202]=v;a[1624]=0;a[1625]=0;b[813]=b[e+0>>1]|0;b[814]=b[e+2>>1]|0;b[815]=b[e+4>>1]|0;h[204]=.2;xb(1728,1760,1776,2136,2016);c[432]=280;e=1748|0;c[e>>2]=0;c[e+4>>2]=2147483647;c[439]=0;i=d;return}function dc(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function ec(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,q=0.0,r=0.0;e=i;i=i+16|0;j=e;g=e+8|0;if((a[d>>0]|0)!=45){o=0;i=e;return o|0}m=d+1|0;f=b+4|0;k=c[f>>2]|0;l=a[k>>0]|0;a:do if(l<<24>>24){n=0;while(1){o=n;n=n+1|0;if((a[m>>0]|0)!=l<<24>>24){b=0;break}l=a[k+n>>0]|0;m=d+(o+2)|0;if(!(l<<24>>24))break a}i=e;return b|0}while(0);if((a[m>>0]|0)!=61){o=0;i=e;return o|0}k=m+1|0;q=+ce(k,g);if(!(c[g>>2]|0)){o=0;i=e;return o|0}r=+h[b+32>>3];if(q>=r?(a[b+41>>0]|0)==0|q!=r:0){o=c[p>>2]|0;n=c[f>>2]|0;c[j>>2]=k;c[j+4>>2]=n;Za(o|0,2024,j|0)|0;ab(1)}r=+h[b+24>>3];if(q<=r?(a[b+40>>0]|0)==0|q!=r:0){o=c[p>>2]|0;n=c[f>>2]|0;c[j>>2]=k;c[j+4>>2]=n;Za(o|0,2080,j|0)|0;ab(1)}h[b+48>>3]=q;o=1;i=e;return o|0}function fc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,l=0.0,m=0,n=0.0,o=0.0,q=0;e=i;i=i+48|0;f=e;g=c[p>>2]|0;q=c[b+16>>2]|0;m=(a[b+40>>0]|0)!=0?91:40;o=+h[b+24>>3];n=+h[b+32>>3];j=(a[b+41>>0]|0)!=0?93:41;l=+h[b+48>>3];c[f>>2]=c[b+4>>2];c[f+4>>2]=q;c[f+8>>2]=m;m=f+12|0;h[k>>3]=o;c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];m=f+20|0;h[k>>3]=n;c[m>>2]=c[k>>2];c[m+4>>2]=c[k+4>>2];c[f+28>>2]=j;j=f+32|0;h[k>>3]=l;c[j>>2]=c[k>>2];c[j+4>>2]=c[k+4>>2];Za(g|0,2232,f|0)|0;if(!d){i=e;return}c[f>>2]=c[b+8>>2];Za(g|0,2e3,f|0)|0;Sa(10,g|0)|0;i=e;return}function gc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0;d=i;e=a+8|0;f=c[e>>2]|0;if(f>>>0<b>>>0)h=f;else{i=d;return}while(1){if(h>>>0>=b>>>0)break;h=((h>>>3)+2+(h>>>1)&-2)+h|0;c[e>>2]=h;if(h>>>0<=f>>>0){g=4;break}}if((g|0)==4)Ta(va(1)|0,48,0);e=Ud(c[a>>2]|0,h<<2)|0;if((e|0)==0?(c[(Oa()|0)>>2]|0)==12:0)Ta(va(1)|0,48,0);c[a>>2]=e;i=d;return}function hc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0;b=i;e=a+32|0;d=c[e>>2]|0;if(d){c[a+36>>2]=0;Td(d);c[e>>2]=0;c[a+40>>2]=0}e=a+16|0;d=c[e>>2]|0;if(d){c[a+20>>2]=0;Td(d);c[e>>2]=0;c[a+24>>2]=0}e=c[a>>2]|0;if(!e){i=b;return}d=a+4|0;g=c[d>>2]|0;if((g|0)>0){f=0;do{j=e+(f*12|0)|0;h=c[j>>2]|0;if(h){c[e+(f*12|0)+4>>2]=0;Td(h);c[j>>2]=0;c[e+(f*12|0)+8>>2]=0;e=c[a>>2]|0;g=c[d>>2]|0}f=f+1|0}while((f|0)<(g|0))}c[d>>2]=0;Td(e);c[a>>2]=0;c[a+8>>2]=0;i=b;return}function ic(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;f=i;i=i+16|0;e=f+4|0;d=f;l=c[b>>2]|0;h=l+1|0;g=a+4|0;if((c[g>>2]|0)<(h|0)){k=a+8|0;j=c[k>>2]|0;if((j|0)<(h|0)){m=l+2-j&-2;l=(j>>1)+2&-2;l=(m|0)>(l|0)?m:l;if((l|0)>(2147483647-j|0)){m=va(1)|0;Ta(m|0,48,0)}n=c[a>>2]|0;m=l+j|0;c[k>>2]=m;m=Ud(n,m*12|0)|0;c[a>>2]=m;if((m|0)==0?(c[(Oa()|0)>>2]|0)==12:0){n=va(1)|0;Ta(n|0,48,0)}}k=c[g>>2]|0;if((k|0)<(h|0)){j=c[a>>2]|0;do{l=j+(k*12|0)|0;if(l){c[l>>2]=0;c[j+(k*12|0)+4>>2]=0;c[j+(k*12|0)+8>>2]=0}k=k+1|0}while((k|0)!=(h|0))}c[g>>2]=h;l=c[b>>2]|0}g=c[a>>2]|0;if(!(c[g+(l*12|0)>>2]|0)){m=l;n=a+16|0;c[d>>2]=m;c[e+0>>2]=c[d+0>>2];sc(n,e,0);i=f;return}c[g+(l*12|0)+4>>2]=0;m=c[b>>2]|0;n=a+16|0;c[d>>2]=m;c[e+0>>2]=c[d+0>>2];sc(n,e,0);i=f;return}function jc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0;f=i;e=b+4|0;if((c[e>>2]|0)>=(d|0)){i=f;return}h=b+8|0;g=c[h>>2]|0;if((g|0)<(d|0)){k=d+1-g&-2;j=(g>>1)+2&-2;j=(k|0)>(j|0)?k:j;if((j|0)>(2147483647-g|0)){k=va(1)|0;Ta(k|0,48,0)}l=c[b>>2]|0;k=j+g|0;c[h>>2]=k;k=Ud(l,k)|0;c[b>>2]=k;if((k|0)==0?(c[(Oa()|0)>>2]|0)==12:0){l=va(1)|0;Ta(l|0,48,0)}}g=c[e>>2]|0;if((g|0)<(d|0)){b=c[b>>2]|0;do{h=b+g|0;if(h)a[h>>0]=0;g=g+1|0}while((g|0)!=(d|0))}c[e>>2]=d;i=f;return}function kc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;h=i;g=d+1|0;f=b+4|0;if((c[f>>2]|0)>=(g|0)){l=c[b>>2]|0;l=l+d|0;a[l>>0]=e;i=h;return}k=b+8|0;j=c[k>>2]|0;if((j|0)<(g|0)){m=d+2-j&-2;l=(j>>1)+2&-2;l=(m|0)>(l|0)?m:l;if((l|0)>(2147483647-j|0)){m=va(1)|0;Ta(m|0,48,0)}n=c[b>>2]|0;m=l+j|0;c[k>>2]=m;m=Ud(n,m)|0;c[b>>2]=m;if((m|0)==0?(c[(Oa()|0)>>2]|0)==12:0){n=va(1)|0;Ta(n|0,48,0)}}j=c[f>>2]|0;if((j|0)<(g|0))do{k=(c[b>>2]|0)+j|0;if(k)a[k>>0]=0;j=j+1|0}while((j|0)!=(g|0));c[f>>2]=g;n=c[b>>2]|0;n=n+d|0;a[n>>0]=e;i=h;return}function lc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0;d=i;i=i+16|0;g=d;c[g>>2]=b;j=a+12|0;f=b+1|0;e=a+16|0;if((c[e>>2]|0)<(f|0)){l=a+20|0;k=c[l>>2]|0;if((k|0)<(f|0)){n=b+2-k&-2;m=(k>>1)+2&-2;m=(n|0)>(m|0)?n:m;if((m|0)>(2147483647-k|0)){n=va(1)|0;Ta(n|0,48,0)}o=c[j>>2]|0;n=m+k|0;c[l>>2]=n;n=Ud(o,n<<2)|0;c[j>>2]=n;if((n|0)==0?(c[(Oa()|0)>>2]|0)==12:0){o=va(1)|0;Ta(o|0,48,0)}}k=c[e>>2]|0;if((f|0)>(k|0))ke((c[j>>2]|0)+(k<<2)|0,-1,f-k<<2|0)|0;c[e>>2]=f}c[(c[j>>2]|0)+(b<<2)>>2]=c[a+4>>2];nc(a,g);e=c[j>>2]|0;g=c[e+(b<<2)>>2]|0;b=c[a>>2]|0;f=c[b+(g<<2)>>2]|0;if(!g){n=0;o=b+(n<<2)|0;c[o>>2]=f;o=e+(f<<2)|0;c[o>>2]=n;i=d;return}a=a+28|0;while(1){j=g;g=g+ -1>>1;k=b+(g<<2)|0;l=c[k>>2]|0;o=c[c[a>>2]>>2]|0;if(!(+h[o+(f<<3)>>3]>+h[o+(l<<3)>>3])){a=14;break}c[b+(j<<2)>>2]=l;c[e+(c[k>>2]<<2)>>2]=j;if(!g){j=0;a=14;break}}if((a|0)==14){o=b+(j<<2)|0;c[o>>2]=f;o=e+(f<<2)|0;c[o>>2]=j;i=d;return}}function mc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;d=i;e=a+4|0;f=c[e>>2]|0;g=a+8|0;h=c[g>>2]|0;if((f|0)==(h|0)&(h|0)<(f+1|0)){h=(f>>1)+2&-2;h=(h|0)<2?2:h;if((h|0)>(2147483647-f|0)){h=va(1)|0;Ta(h|0,48,0)}j=c[a>>2]|0;f=h+f|0;c[g>>2]=f;f=Ud(j,f<<2)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0){j=va(1)|0;Ta(j|0,48,0)}}else f=c[a>>2]|0;j=c[e>>2]|0;c[e>>2]=j+1;e=f+(j<<2)|0;if(!e){i=d;return}c[e>>2]=c[b>>2];i=d;return}function nc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;d=i;e=a+4|0;f=c[e>>2]|0;g=a+8|0;h=c[g>>2]|0;if((f|0)==(h|0)&(h|0)<(f+1|0)){h=(f>>1)+2&-2;h=(h|0)<2?2:h;if((h|0)>(2147483647-f|0)){h=va(1)|0;Ta(h|0,48,0)}j=c[a>>2]|0;f=h+f|0;c[g>>2]=f;f=Ud(j,f<<2)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0){j=va(1)|0;Ta(j|0,48,0)}}else f=c[a>>2]|0;j=c[e>>2]|0;c[e>>2]=j+1;e=f+(j<<2)|0;if(!e){i=d;return}c[e>>2]=c[b>>2];i=d;return}function oc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;e=i;i=i+16|0;f=e+2|0;h=e+1|0;g=e;if((d|0)<16){g=d+ -1|0;if((g|0)>0)h=0;else{i=e;return}do{f=h;h=h+1|0;if((h|0)<(d|0)){k=f;j=h;do{k=(c[b+(j<<2)>>2]|0)<(c[b+(k<<2)>>2]|0)?j:k;j=j+1|0}while((j|0)!=(d|0))}else k=f;n=b+(f<<2)|0;o=c[n>>2]|0;p=b+(k<<2)|0;c[n>>2]=c[p>>2];c[p>>2]=o}while((h|0)!=(g|0));i=e;return}j=c[b+(((d|0)/2|0)<<2)>>2]|0;m=-1;n=d;while(1){do{m=m+1|0;l=b+(m<<2)|0;k=c[l>>2]|0}while((k|0)<(j|0));do{n=n+ -1|0;o=b+(n<<2)|0;p=c[o>>2]|0}while((j|0)<(p|0));if((m|0)>=(n|0))break;c[l>>2]=p;c[o>>2]=k}a[f+0>>0]=a[h+0>>0]|0;oc(b,m,f);p=d-m|0;a[f+0>>0]=a[g+0>>0]|0;oc(l,p,f);i=e;return}function pc(a,b,e){a=a|0;b=b|0;e=e|0;var f=0,h=0,j=0,k=0,l=0,m=0;f=i;k=e&1;j=d[a+16>>0]|0|k;h=b+4|0;l=((j+(c[h>>2]|0)<<2)+4|0)>>>2;m=a+4|0;gc(a,l+(c[m>>2]|0)|0);e=c[m>>2]|0;l=l+e|0;c[m>>2]=l;if(l>>>0<e>>>0)Ta(va(1)|0,48,0);a=(c[a>>2]|0)+(e<<2)|0;if(!a){i=f;return e|0}j=j<<3|k<<2;c[a>>2]=c[a>>2]&-32|j;j=c[h>>2]<<5|j;c[a>>2]=j;if((c[h>>2]|0)>0){j=c[b>>2]|0;b=0;do{c[a+(b<<2)+4>>2]=c[j+(b<<2)>>2];b=b+1|0}while((b|0)<(c[h>>2]|0));j=c[a>>2]|0}if(!(j&8)){i=f;return e|0}h=j>>>5;if(j&4){g[a+(h<<2)+4>>2]=0.0;i=f;return e|0}if(!h){h=0;j=0}else{j=0;b=0;do{j=1<<((c[a+(b<<2)+4>>2]|0)>>>1&31)|j;b=b+1|0}while((b|0)<(h|0))}c[a+(h<<2)+4>>2]=j;i=f;return e|0}function qc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;d=i;e=a+4|0;f=c[e>>2]|0;g=a+8|0;h=c[g>>2]|0;if((f|0)==(h|0)&(h|0)<(f+1|0)){h=(f>>1)+2&-2;h=(h|0)<2?2:h;if((h|0)>(2147483647-f|0)){h=va(1)|0;Ta(h|0,48,0)}j=c[a>>2]|0;f=h+f|0;c[g>>2]=f;f=Ud(j,f<<3)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0){j=va(1)|0;Ta(j|0,48,0)}}else f=c[a>>2]|0;j=c[e>>2]|0;c[e>>2]=j+1;e=f+(j<<3)|0;if(!e){i=d;return}g=b;h=c[g+4>>2]|0;j=e;c[j>>2]=c[g>>2];c[j+4>>2]=h;i=d;return}function rc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0.0,r=0.0,s=0;b=i;d=c[a>>2]|0;f=c[d>>2]|0;k=a+4|0;o=c[d+((c[k>>2]|0)+ -1<<2)>>2]|0;c[d>>2]=o;e=c[a+12>>2]|0;c[e+(o<<2)>>2]=0;c[e+(f<<2)>>2]=-1;o=(c[k>>2]|0)+ -1|0;c[k>>2]=o;if((o|0)<=1){i=b;return f|0}g=c[d>>2]|0;l=a+28|0;a=0;m=1;while(1){n=(a<<1)+2|0;if((n|0)<(o|0)){p=c[d+(n<<2)>>2]|0;s=c[d+(m<<2)>>2]|0;o=c[c[l>>2]>>2]|0;q=+h[o+(p<<3)>>3];r=+h[o+(s<<3)>>3];if(!(q>r)){p=s;q=r;j=6}}else{o=c[c[l>>2]>>2]|0;j=c[d+(m<<2)>>2]|0;p=j;q=+h[o+(j<<3)>>3];j=6}if((j|0)==6){j=0;n=m}if(!(q>+h[o+(g<<3)>>3]))break;c[d+(a<<2)>>2]=p;c[e+(p<<2)>>2]=a;m=n<<1|1;o=c[k>>2]|0;if((m|0)>=(o|0)){a=n;break}else a=n}c[d+(a<<2)>>2]=g;c[e+(g<<2)>>2]=a;i=b;return f|0}function sc(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0;f=i;k=c[d>>2]|0;d=k+1|0;g=b+4|0;if((c[g>>2]|0)>=(d|0)){i=f;return}j=b+8|0;h=c[j>>2]|0;if((h|0)<(d|0)){l=k+2-h&-2;k=(h>>1)+2&-2;k=(l|0)>(k|0)?l:k;if((k|0)>(2147483647-h|0)){l=va(1)|0;Ta(l|0,48,0)}m=c[b>>2]|0;l=k+h|0;c[j>>2]=l;l=Ud(m,l)|0;c[b>>2]=l;if((l|0)==0?(c[(Oa()|0)>>2]|0)==12:0){m=va(1)|0;Ta(m|0,48,0)}}h=c[g>>2]|0;if((h|0)<(d|0))do{a[(c[b>>2]|0)+h>>0]=e;h=h+1|0}while((h|0)!=(d|0));c[g>>2]=d;i=f;return}function tc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;e=i;i=i+16|0;h=e+8|0;f=e+4|0;j=e;if((b|0)<16){f=b+ -1|0;if((f|0)<=0){i=e;return}h=c[d>>2]|0;d=0;do{j=d;d=d+1|0;if((d|0)<(b|0)){k=c[h>>2]|0;m=j;l=d;do{n=k+(c[a+(l<<2)>>2]<<2)|0;u=c[n>>2]|0;q=u>>>5;if(u>>>0>95){o=k+(c[a+(m<<2)>>2]<<2)|0;p=(c[o>>2]|0)>>>5;if((p|0)==2)m=l;else m=+g[n+(q<<2)+4>>2]<+g[o+(p<<2)+4>>2]?l:m}l=l+1|0}while((l|0)!=(b|0))}else m=j;s=a+(j<<2)|0;t=c[s>>2]|0;u=a+(m<<2)|0;c[s>>2]=c[u>>2];c[u>>2]=t}while((d|0)!=(f|0));i=e;return}k=c[a+(((b|0)/2|0)<<2)>>2]|0;q=-1;o=b;while(1){t=q+1|0;p=a+(t<<2)|0;u=c[p>>2]|0;l=c[d>>2]|0;m=c[l>>2]|0;s=m+(u<<2)|0;r=c[s>>2]|0;q=m+(k<<2)|0;n=c[q>>2]|0;a:do if(r>>>0>95)while(1){v=n>>>5;if((v|0)!=2?!(+g[s+(r>>>5<<2)+4>>2]<+g[q+(v<<2)+4>>2]):0){q=t;break a}t=t+1|0;p=a+(t<<2)|0;u=c[p>>2]|0;s=m+(u<<2)|0;r=c[s>>2]|0;if(r>>>0<=95){q=t;break}}else q=t;while(0);o=o+ -1|0;s=a+(o<<2)|0;r=m+(k<<2)|0;b:do if(n>>>0>95)while(1){t=m+(c[s>>2]<<2)|0;v=(c[t>>2]|0)>>>5;if((v|0)!=2?!(+g[r+(n>>>5<<2)+4>>2]<+g[t+(v<<2)+4>>2]):0)break b;v=o+ -1|0;s=a+(v<<2)|0;o=v}while(0);if((q|0)>=(o|0))break;c[p>>2]=c[s>>2];c[s>>2]=u}c[f>>2]=l;c[h+0>>2]=c[f+0>>2];tc(a,q,h);v=b-q|0;c[j>>2]=l;c[h+0>>2]=c[j+0>>2];tc(p,v,h);i=e;return}function uc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0.0,r=0.0,s=0;e=i;f=a+4|0;j=c[f>>2]|0;g=c[a>>2]|0;if((j|0)>0){l=c[a+12>>2]|0;k=0;do{c[l+(c[g+(k<<2)>>2]<<2)>>2]=-1;k=k+1|0;j=c[f>>2]|0}while((k|0)<(j|0))}if(g){c[f>>2]=0;j=0}g=b+4|0;if((c[g>>2]|0)>0){k=a+12|0;j=0;do{s=(c[b>>2]|0)+(j<<2)|0;c[(c[k>>2]|0)+(c[s>>2]<<2)>>2]=j;nc(a,s);j=j+1|0}while((j|0)<(c[g>>2]|0));j=c[f>>2]|0}if((j|0)<=1){i=e;return}g=c[a>>2]|0;b=a+28|0;a=a+12|0;o=j;k=(j|0)/2|0;while(1){k=k+ -1|0;j=c[g+(k<<2)>>2]|0;m=k<<1|1;a:do if((m|0)<(o|0)){l=k;while(1){n=(l<<1)+2|0;if((n|0)<(o|0)){p=c[g+(n<<2)>>2]|0;s=c[g+(m<<2)>>2]|0;o=c[c[b>>2]>>2]|0;q=+h[o+(p<<3)>>3];r=+h[o+(s<<3)>>3];if(!(q>r)){p=s;q=r;d=16}}else{o=c[c[b>>2]>>2]|0;d=c[g+(m<<2)>>2]|0;p=d;q=+h[o+(d<<3)>>3];d=16}if((d|0)==16){d=0;n=m}if(!(q>+h[o+(j<<3)>>3]))break a;c[g+(l<<2)>>2]=p;c[(c[a>>2]|0)+(p<<2)>>2]=l;m=n<<1|1;o=c[f>>2]|0;if((m|0)>=(o|0)){l=n;break}else l=n}}else l=k;while(0);c[g+(l<<2)>>2]=j;c[(c[a>>2]|0)+(j<<2)>>2]=l;if((k|0)<=0)break;o=c[f>>2]|0}i=e;return}function vc(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;e=i;d=b+36|0;l=c[d>>2]|0;f=b+32|0;n=c[f>>2]|0;if((l|0)>0){h=b+16|0;g=b+44|0;j=0;do{k=n+(j<<2)|0;m=c[k>>2]|0;if(a[(c[h>>2]|0)+m>>0]|0){n=c[b>>2]|0;l=n+(m*12|0)+4|0;p=c[l>>2]|0;if((p|0)>0){m=n+(m*12|0)|0;n=0;o=0;do{q=c[m>>2]|0;r=q+(n<<3)|0;if((c[(c[c[g>>2]>>2]|0)+(c[r>>2]<<2)>>2]&3|0)!=1){s=r;r=c[s+4>>2]|0;p=q+(o<<3)|0;c[p>>2]=c[s>>2];c[p+4>>2]=r;p=c[l>>2]|0;o=o+1|0}n=n+1|0}while((n|0)<(p|0))}else{n=0;o=0}m=n-o|0;if((m|0)>0)c[l>>2]=p-m;a[(c[h>>2]|0)+(c[k>>2]|0)>>0]=0;l=c[d>>2]|0;n=c[f>>2]|0}j=j+1|0}while((j|0)<(l|0))}if(!n){i=e;return}c[d>>2]=0;i=e;return}function wc(a,b){a=a|0;b=b|0;var e=0,f=0,h=0,j=0,k=0;f=i;j=c[b>>2]|0;h=j>>>2&1|(d[a+16>>0]|0);j=((h+(j>>>5)<<2)+4|0)>>>2;k=a+4|0;gc(a,j+(c[k>>2]|0)|0);e=c[k>>2]|0;j=j+e|0;c[k>>2]=j;if(j>>>0<e>>>0)Ta(va(1)|0,48,0);a=(c[a>>2]|0)+(e<<2)|0;if(!a){i=f;return e|0}h=c[b>>2]&-9|h<<3;c[a>>2]=h;if((c[b>>2]|0)>>>0>31){h=0;do{c[a+(h<<2)+4>>2]=c[b+(h<<2)+4>>2];h=h+1|0}while((h|0)<((c[b>>2]|0)>>>5|0));h=c[a>>2]|0}if(!(h&8)){i=f;return e|0}j=h>>>5;b=b+(j<<2)+4|0;if(!(h&4)){c[a+(j<<2)+4>>2]=c[b>>2];i=f;return e|0}else{g[a+(j<<2)+4>>2]=+g[b>>2];i=f;return e|0}return 0}function xc(b){b=b|0;var d=0,e=0,f=0,g=0,j=0,k=0;d=i;i=i+16|0;g=d;Gb(b);c[b>>2]=3424;c[b+684>>2]=c[719];c[b+688>>2]=c[747];c[b+692>>2]=c[785];h[b+696>>3]=+h[411];a[b+704>>0]=a[2652]|0;a[b+705>>0]=a[2724]|0;a[b+706>>0]=a[2804]|0;a[b+707>>0]=1;c[b+708>>2]=0;c[b+712>>2]=0;c[b+716>>2]=0;c[b+720>>2]=1;a[b+724>>0]=1;e=b+732|0;k=b+544|0;c[b+760>>2]=0;c[b+764>>2]=0;c[b+768>>2]=0;c[b+776>>2]=0;c[b+780>>2]=0;c[b+784>>2]=0;c[b+792>>2]=0;c[b+796>>2]=0;c[b+800>>2]=0;j=b+804|0;c[e+0>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[e+20>>2]=0;c[j>>2]=k;j=b+808|0;c[j>>2]=0;c[b+812>>2]=0;c[b+816>>2]=0;e=b+824|0;c[e+0>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[e+20>>2]=0;c[b+852>>2]=j;Qc(b+856|0,1);j=b+868|0;e=b+892|0;c[b+920>>2]=0;c[b+924>>2]=0;c[j+0>>2]=0;c[j+4>>2]=0;c[j+8>>2]=0;c[j+12>>2]=0;c[j+16>>2]=0;c[e+0>>2]=0;c[e+4>>2]=0;c[e+8>>2]=0;c[e+12>>2]=0;c[e+16>>2]=0;c[e+20>>2]=0;e=g+4|0;c[e>>2]=0;j=g+8|0;c[j>>2]=2;f=Ud(0,8)|0;c[g>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0)Ta(va(1)|0,48,0);c[f>>2]=-2;c[e>>2]=1;a[b+560>>0]=1;c[b+928>>2]=pc(k,g,0)|0;a[b+536>>0]=0;if(!f){i=d;return}c[e>>2]=0;Td(f);c[g>>2]=0;c[j>>2]=0;i=d;return}function yc(a){a=a|0;var b=0;b=i;zc(a);pd(a);i=b;return}function zc(a){a=a|0;var b=0,d=0,e=0;b=i;c[a>>2]=3424;d=a+904|0;e=c[d>>2]|0;if(e){c[a+908>>2]=0;Td(e);c[d>>2]=0;c[a+912>>2]=0}d=a+892|0;e=c[d>>2]|0;if(e){c[a+896>>2]=0;Td(e);c[d>>2]=0;c[a+900>>2]=0}d=a+876|0;e=c[d>>2]|0;if(e){c[a+880>>2]=0;Td(e);c[d>>2]=0;c[a+884>>2]=0}d=a+856|0;e=c[d>>2]|0;if(e){c[a+860>>2]=0;Td(e);c[d>>2]=0;c[a+864>>2]=0}e=a+836|0;d=c[e>>2]|0;if(d){c[a+840>>2]=0;Td(d);c[e>>2]=0;c[a+844>>2]=0}d=a+824|0;e=c[d>>2]|0;if(e){c[a+828>>2]=0;Td(e);c[d>>2]=0;c[a+832>>2]=0}d=a+808|0;e=c[d>>2]|0;if(e){c[a+812>>2]=0;Td(e);c[d>>2]=0;c[a+816>>2]=0}Rc(a+760|0);d=a+744|0;e=c[d>>2]|0;if(e){c[a+748>>2]=0;Td(e);c[d>>2]=0;c[a+752>>2]=0}d=a+732|0;e=c[d>>2]|0;if(!e){Ib(a);i=b;return}c[a+736>>2]=0;Td(e);c[d>>2]=0;c[a+740>>2]=0;Ib(a);i=b;return}function Ac(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0;f=i;i=i+32|0;h=f+12|0;k=f+8|0;l=f+16|0;g=f+4|0;j=f;a[l>>0]=a[d>>0]|0;a[h+0>>0]=a[l+0>>0]|0;e=Jb(b,h,e)|0;c[k>>2]=e;kc(b+876|0,e,0);kc(b+904|0,e,0);if(!(a[b+724>>0]|0)){i=f;return e|0}l=b+808|0;d=e<<1;c[g>>2]=d;c[h+0>>2]=c[g+0>>2];Sc(l,h,0);c[j>>2]=d|1;c[h+0>>2]=c[j+0>>2];Sc(l,h,0);Tc(b+760|0,k);kc(b+744|0,e,0);Uc(b+824|0,e);i=f;return e|0}function Bc(b,e,f,g){b=b|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0;k=i;i=i+32|0;h=k+4|0;r=k;p=k+16|0;c[h>>2]=0;j=h+4|0;c[j>>2]=0;l=h+8|0;c[l>>2]=0;s=a[2608]|0;a[b>>0]=s;m=e+724|0;f=(d[m>>0]&(f&1)|0)!=0;if(f){u=e+308|0;x=c[u>>2]|0;if((x|0)>0){t=e+304|0;s=e+876|0;v=0;do{w=c[(c[t>>2]|0)+(v<<2)>>2]>>1;c[r>>2]=w;w=(c[s>>2]|0)+w|0;if(!(a[w>>0]|0)){a[w>>0]=1;nc(h,r);x=c[u>>2]|0}v=v+1|0}while((v|0)<(x|0))}r=(Cc(e,g)|0)&1^1;a[b>>0]=r;g=a[2608]|0}else{g=s;r=s}x=g&255;if(!((x>>>1^1)&r<<24>>24==g<<24>>24|x&2&(r&255))){if((c[e+44>>2]|0)>0)Ka(3760)|0}else{$b(p,e);r=a[p>>0]|0;a[b>>0]=r}w=a[2608]|0;x=w&255;if((((x>>>1^1)&r<<24>>24==w<<24>>24|x&2&(r&255)|0)!=0?(a[e+707>>0]|0)!=0:0)?(q=(c[e+736>>2]|0)+ -1|0,(q|0)>0):0){b=e+732|0;p=e+4|0;do{g=c[b>>2]|0;u=c[g+(q<<2)>>2]|0;v=q+ -1|0;w=c[g+(v<<2)>>2]|0;q=c[p>>2]|0;a:do if((u|0)>1){s=a[2616]|0;r=s&255;t=r&2;r=r>>>1^1;x=v;while(1){w=d[q+(w>>1)>>0]^w&1;v=u+ -1|0;if(!((w&255)<<24>>24==s<<24>>24&r|t&w))break a;u=x+ -1|0;w=c[g+(u<<2)>>2]|0;if((v|0)>1){x=u;u=v}else{x=u;u=v;o=20;break}}}else{x=v;o=20}while(0);if((o|0)==20){o=0;a[q+(w>>1)>>0]=(w&1^1)&255^1}q=x-u|0}while((q|0)>0)}if(f?(n=c[j>>2]|0,(n|0)>0):0){o=c[h>>2]|0;f=e+876|0;p=0;do{b=c[o+(p<<2)>>2]|0;a[(c[f>>2]|0)+b>>0]=0;if(a[m>>0]|0)Vc(e,b);p=p+1|0}while((p|0)<(n|0))}e=c[h>>2]|0;if(!e){i=k;return}c[j>>2]=0;Td(e);c[h>>2]=0;c[l>>2]=0;i=k;return}function Cc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,j=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0;m=i;i=i+16|0;j=m;if(!(Zb(b)|0)){H=0;i=m;return H|0}l=b+724|0;if(!(a[l>>0]|0)){H=1;i=m;return H|0}x=b+924|0;v=b+872|0;w=b+868|0;u=b+860|0;r=b+680|0;y=b+824|0;g=b+828|0;o=b+836|0;z=b+904|0;A=b+332|0;e=b+44|0;B=b+704|0;D=b+706|0;E=b+696|0;p=b+556|0;q=b+548|0;C=b+876|0;s=b+920|0;t=b+284|0;a:while(1){if(((c[x>>2]|0)<=0?(c[s>>2]|0)>=(c[t>>2]|0):0)?(c[g>>2]|0)<=0:0)break;Ic(b);G=c[v>>2]|0;H=c[w>>2]|0;F=G-H|0;if((G|0)<(H|0))F=(c[u>>2]|0)+F|0;if(!((F|0)<=0?(c[s>>2]|0)>=(c[t>>2]|0):0))n=11;if((n|0)==11?(n=0,!(Jc(b,1)|0)):0){n=12;break}H=c[g>>2]|0;if(a[r>>0]|0){n=15;break}if(!H)continue;else F=0;while(1){J=c[y>>2]|0;G=c[J>>2]|0;I=c[J+(H+ -1<<2)>>2]|0;c[J>>2]=I;H=c[o>>2]|0;c[H+(I<<2)>>2]=0;c[H+(G<<2)>>2]=-1;H=(c[g>>2]|0)+ -1|0;c[g>>2]=H;if((H|0)>1)Wc(y,0);if(a[r>>0]|0)continue a;if((a[(c[z>>2]|0)+G>>0]|0)==0?(I=a[(c[A>>2]|0)+G>>0]|0,H=a[2624]|0,J=H&255,((J>>>1^1)&I<<24>>24==H<<24>>24|I&2&J|0)!=0):0){if((c[e>>2]|0)>1&((F|0)%100|0|0)==0){c[j>>2]=c[g>>2];La(3504,j|0)|0}if(a[B>>0]|0){J=(c[C>>2]|0)+G|0;H=a[J>>0]|0;a[J>>0]=1;if(!(Lc(b,G)|0)){n=29;break a}a[(c[C>>2]|0)+G>>0]=H<<24>>24!=0&1}if((((a[D>>0]|0)!=0?(I=a[(c[A>>2]|0)+G>>0]|0,H=a[2624]|0,J=H&255,((J>>>1^1)&I<<24>>24==H<<24>>24|I&2&J|0)!=0):0)?(a[(c[C>>2]|0)+G>>0]|0)==0:0)?!(Mc(b,G)|0):0){n=35;break a}if(+((c[p>>2]|0)>>>0)>+h[E>>3]*+((c[q>>2]|0)>>>0))gb[c[(c[b>>2]|0)+8>>2]&31](b)}H=c[g>>2]|0;if(!H)continue a;else F=F+1|0}}do if((n|0)==12)a[b+492>>0]=0;else if((n|0)==15){r=c[b+824>>2]|0;if((H|0)<=0){if(!r)break}else{t=c[o>>2]|0;s=0;do{c[t+(c[r+(s<<2)>>2]<<2)>>2]=-1;s=s+1|0}while((s|0)<(c[g>>2]|0))}c[g>>2]=0}else if((n|0)==29)a[b+492>>0]=0;else if((n|0)==35)a[b+492>>0]=0;while(0);if(!d){if(+((c[p>>2]|0)>>>0)>+h[b+96>>3]*+((c[q>>2]|0)>>>0))gb[c[(c[b>>2]|0)+8>>2]&31](b)}else{d=b+744|0;p=c[d>>2]|0;if(p){c[b+748>>2]=0;Td(p);c[d>>2]=0;c[b+752>>2]=0}Xc(b+760|0,1);d=b+808|0;p=c[d>>2]|0;if(p){c[b+812>>2]=0;Td(p);c[d>>2]=0;c[b+816>>2]=0}p=b+824|0;d=c[p>>2]|0;if((c[g>>2]|0)<=0){if(d)n=48}else{n=c[o>>2]|0;o=0;do{c[n+(c[d+(o<<2)>>2]<<2)>>2]=-1;o=o+1|0}while((o|0)<(c[g>>2]|0));n=48}if((n|0)==48){c[g>>2]=0;Td(d);c[p>>2]=0;c[b+832>>2]=0}Yc(b+856|0,1);a[l>>0]=0;a[b+536>>0]=1;a[b+560>>0]=0;c[b+728>>2]=c[b+540>>2];Yb(b);gb[c[(c[b>>2]|0)+8>>2]&31](b)}if((c[e>>2]|0)>0?(f=c[b+736>>2]|0,(f|0)>0):0){h[k>>3]=+(f<<2>>>0)*9.5367431640625e-7;c[j>>2]=c[k>>2];c[j+4>>2]=c[k+4>>2];La(3528,j|0)|0}J=(a[b+492>>0]|0)!=0;i=m;return J|0}function Dc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;e=i;i=i+16|0;g=e;j=b+256|0;k=b+260|0;h=c[k>>2]|0;if((a[b+705>>0]|0)!=0?Ec(b,d)|0:0){p=1;i=e;return p|0}if(!(Kb(b,d)|0)){p=0;i=e;return p|0}if(!(a[b+724>>0]|0)){p=1;i=e;return p|0}d=c[k>>2]|0;if((d|0)!=(h+1|0)){p=1;i=e;return p|0}p=c[(c[j>>2]|0)+(d+ -1<<2)>>2]|0;c[g>>2]=p;m=(c[b+544>>2]|0)+(p<<2)|0;Zc(b+856|0,p);if((c[m>>2]|0)>>>0<=31){p=1;i=e;return p|0}l=b+760|0;k=b+808|0;j=b+744|0;h=b+924|0;d=b+824|0;n=b+840|0;b=b+836|0;o=0;do{p=m+(o<<2)+4|0;_c((c[l>>2]|0)+((c[p>>2]>>1)*12|0)|0,g);q=(c[k>>2]|0)+(c[p>>2]<<2)|0;c[q>>2]=(c[q>>2]|0)+1;a[(c[j>>2]|0)+(c[p>>2]>>1)>>0]=1;c[h>>2]=(c[h>>2]|0)+1;p=c[p>>2]>>1;if((c[n>>2]|0)>(p|0)?(f=c[(c[b>>2]|0)+(p<<2)>>2]|0,(f|0)>-1):0)Wc(d,f);o=o+1|0}while((o|0)<((c[m>>2]|0)>>>5|0));f=1;i=e;return f|0}function Ec(b,e){b=b|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;k=i;i=i+16|0;h=k+8|0;j=k+4|0;g=k;c[j>>2]=c[b+284>>2];nc(b+292|0,j);j=e+4|0;m=c[j>>2]|0;a:do if((m|0)>0){f=b+332|0;l=0;while(1){n=c[(c[e>>2]|0)+(l<<2)>>2]|0;p=d[(c[f>>2]|0)+(n>>1)>>0]|0;q=p^n&1;o=q&255;s=a[2608]|0;r=s&255;if(o<<24>>24==s<<24>>24&(r>>>1^1)|r&2&q)break;r=a[2616]|0;s=r&255;if(!((s>>>1^1)&o<<24>>24==r<<24>>24|p&2&s)){c[g>>2]=n^1;c[h+0>>2]=c[g+0>>2];Lb(b,h,-1);m=c[j>>2]|0}l=l+1|0;if((l|0)>=(m|0))break a}Rb(b,0);s=1;i=k;return s|0}while(0);s=(Mb(b)|0)!=-1;Rb(b,0);i=k;return s|0}function Fc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0;e=i;i=i+16|0;g=e;f=(c[b+544>>2]|0)+(d<<2)|0;if(!(a[b+724>>0]|0)){Pb(b,d);i=e;return}if((c[f>>2]|0)>>>0<=31){Pb(b,d);i=e;return}j=b+808|0;k=b+776|0;h=b+792|0;l=0;do{m=f+(l<<2)+4|0;n=(c[j>>2]|0)+(c[m>>2]<<2)|0;c[n>>2]=(c[n>>2]|0)+ -1;Vc(b,c[m>>2]>>1);m=c[m>>2]>>1;c[g>>2]=m;m=(c[k>>2]|0)+m|0;if(!(a[m>>0]|0)){a[m>>0]=1;nc(h,g)}l=l+1|0}while((l|0)<((c[f>>2]|0)>>>5|0));Pb(b,d);i=e;return}function Gc(b,e,f){b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0;g=i;i=i+16|0;j=g+4|0;h=g;l=c[b+544>>2]|0;k=l+(e<<2)|0;Zc(b+856|0,e);if((c[k>>2]&-32|0)==64){Fc(b,e);p=c[f>>2]|0;f=c[k>>2]|0;a:do if(f>>>0>31){m=f>>>5;n=0;while(1){o=n+1|0;if((c[k+(n<<2)+4>>2]|0)==(p|0)){o=n;break a}if((o|0)<(m|0))n=o;else break}}else{m=0;o=0}while(0);n=m+ -1|0;if((o|0)<(n|0))do{f=o;o=o+1|0;c[k+(f<<2)+4>>2]=c[k+(o<<2)+4>>2];f=c[k>>2]|0;m=f>>>5;n=m+ -1|0}while((o|0)<(n|0));if(f&8){c[k+(n<<2)+4>>2]=c[k+(m<<2)+4>>2];f=c[k>>2]|0}m=f+ -32|0;c[k>>2]=m;m=m>>>5;if(!m){m=0;f=0}else{f=0;n=0;do{f=1<<((c[k+(n<<2)+4>>2]|0)>>>1&31)|f;n=n+1|0}while((n|0)<(m|0))}c[k+(m<<2)+4>>2]=f}else{Ob(b,e,1);f=c[f>>2]|0;n=c[k>>2]|0;b:do if(n>>>0>31){m=n>>>5;o=0;while(1){p=o+1|0;if((c[k+(o<<2)+4>>2]|0)==(f|0)){p=o;break b}if((p|0)<(m|0))o=p;else break}}else{m=0;p=0}while(0);o=m+ -1|0;if((p|0)<(o|0))do{n=p;p=p+1|0;c[k+(n<<2)+4>>2]=c[k+(p<<2)+4>>2];n=c[k>>2]|0;m=n>>>5;o=m+ -1|0}while((p|0)<(o|0));if(n&8){c[k+(o<<2)+4>>2]=c[k+(m<<2)+4>>2];n=c[k>>2]|0}o=n+ -32|0;c[k>>2]=o;o=o>>>5;if(!o){o=0;m=0}else{m=0;n=0;do{m=1<<((c[k+(n<<2)+4>>2]|0)>>>1&31)|m;n=n+1|0}while((n|0)<(o|0))}c[k+(o<<2)+4>>2]=m;Nb(b,e);m=f>>1;n=c[b+760>>2]|0;o=n+(m*12|0)|0;n=n+(m*12|0)+4|0;p=c[n>>2]|0;c:do if((p|0)>0){s=c[o>>2]|0;q=0;while(1){r=q+1|0;if((c[s+(q<<2)>>2]|0)==(e|0))break c;if((r|0)<(p|0))q=r;else{q=r;break}}}else q=0;while(0);p=p+ -1|0;if((q|0)<(p|0)){o=c[o>>2]|0;do{p=q;q=q+1|0;c[o+(p<<2)>>2]=c[o+(q<<2)>>2];p=(c[n>>2]|0)+ -1|0}while((q|0)<(p|0))}c[n>>2]=p;s=(c[b+808>>2]|0)+(f<<2)|0;c[s>>2]=(c[s>>2]|0)+ -1;Vc(b,m)}if((c[k>>2]&-32|0)!=32){s=1;i=g;return s|0}l=c[l+(e+1<<2)>>2]|0;k=d[(c[b+332>>2]|0)+(l>>1)>>0]|0;s=k^l&1;e=s&255;q=a[2624]|0;r=q&255;if(!(e<<24>>24==q<<24>>24&(r>>>1^1)|r&2&s)){r=a[2616]|0;s=r&255;if((s>>>1^1)&e<<24>>24==r<<24>>24|k&2&s){s=0;i=g;return s|0}}else{c[h>>2]=l;c[j+0>>2]=c[h+0>>2];Lb(b,j,-1)}s=(Mb(b)|0)==-1;i=g;return s|0}function Hc(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;g=i;i=i+16|0;j=g+4|0;h=g;o=a+708|0;c[o>>2]=(c[o>>2]|0)+1;if(c[f>>2]|0)c[f+4>>2]=0;k=(c[b>>2]|0)>>>5>>>0<(c[d>>2]|0)>>>5>>>0;a=k?d:b;b=k?b:d;k=c[b>>2]|0;a:do if(k>>>0>31){d=0;b:while(1){l=c[b+(d<<2)+4>>2]|0;c:do if((l>>1|0)!=(e|0)){m=c[a>>2]|0;d:do if(m>>>0>31){n=0;while(1){o=c[a+(n<<2)+4>>2]|0;n=n+1|0;if((l^o)>>>0<2)break;if((n|0)>=(m>>>5|0))break d}if((o|0)==(l^1|0)){f=0;break b}else break c}while(0);c[j>>2]=l;mc(f,j);k=c[b>>2]|0}while(0);d=d+1|0;if((d|0)>=(k>>>5|0))break a}i=g;return f|0}while(0);d=c[a>>2]|0;if(d>>>0<=31){o=1;i=g;return o|0}j=0;do{b=c[a+(j<<2)+4>>2]|0;if((b>>1|0)!=(e|0)){c[h>>2]=b;mc(f,h);d=c[a>>2]|0}j=j+1|0}while((j|0)<(d>>>5|0));f=1;i=g;return f|0}function Ic(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;d=i;k=b+924|0;if(!(c[k>>2]|0)){i=d;return}h=b+856|0;e=b+872|0;f=b+868|0;j=b+860|0;g=b+544|0;l=0;while(1){w=c[e>>2]|0;m=c[f>>2]|0;n=w-m|0;if((w|0)<(m|0))n=(c[j>>2]|0)+n|0;if((l|0)>=(n|0))break;n=(c[g>>2]|0)+(c[(c[h>>2]|0)+(((m+l|0)%(c[j>>2]|0)|0)<<2)>>2]<<2)|0;m=c[n>>2]|0;if(!(m&3))c[n>>2]=m&-4|2;l=l+1|0}l=b+540|0;q=c[l>>2]|0;if((q|0)>0){n=b+744|0;o=b+776|0;m=b+760|0;b=b+804|0;p=0;do{if(a[(c[n>>2]|0)+p>>0]|0){r=(c[o>>2]|0)+p|0;if(a[r>>0]|0){s=c[m>>2]|0;q=s+(p*12|0)+4|0;u=c[q>>2]|0;if((u|0)>0){s=c[s+(p*12|0)>>2]|0;v=0;t=0;do{w=c[s+(v<<2)>>2]|0;if((c[(c[c[b>>2]>>2]|0)+(w<<2)>>2]&3|0)!=1){c[s+(t<<2)>>2]=w;u=c[q>>2]|0;t=t+1|0}v=v+1|0}while((v|0)<(u|0))}else{v=0;t=0}s=v-t|0;if((s|0)>0)c[q>>2]=u-s;a[r>>0]=0}r=c[m>>2]|0;q=r+(p*12|0)+4|0;t=c[q>>2]|0;if((t|0)>0){r=r+(p*12|0)|0;s=0;do{u=c[(c[r>>2]|0)+(s<<2)>>2]|0;if(!(c[(c[g>>2]|0)+(u<<2)>>2]&3)){Zc(h,u);t=(c[g>>2]|0)+(c[(c[r>>2]|0)+(s<<2)>>2]<<2)|0;c[t>>2]=c[t>>2]&-4|2;t=c[q>>2]|0}s=s+1|0}while((s|0)<(t|0))}a[(c[n>>2]|0)+p>>0]=0;q=c[l>>2]|0}p=p+1|0}while((p|0)<(q|0));l=0}else l=0;while(1){w=c[e>>2]|0;m=c[f>>2]|0;n=w-m|0;if((w|0)<(m|0))n=(c[j>>2]|0)+n|0;if((l|0)>=(n|0))break;m=(c[g>>2]|0)+(c[(c[h>>2]|0)+(((m+l|0)%(c[j>>2]|0)|0)<<2)>>2]<<2)|0;n=c[m>>2]|0;if((n&3|0)==2)c[m>>2]=n&-4;l=l+1|0}c[k>>2]=0;i=d;return}function Jc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0;e=i;i=i+16|0;m=e;x=e+12|0;g=b+856|0;l=b+872|0;q=b+868|0;j=b+860|0;u=b+680|0;f=b+920|0;h=b+284|0;t=b+280|0;r=b+544|0;s=b+928|0;o=b+44|0;n=b+776|0;v=b+692|0;p=b+804|0;k=b+760|0;C=0;F=0;D=0;a:while(1){E=c[q>>2]|0;do{A=c[l>>2]|0;B=(A|0)<(E|0);A=A-E|0;if(B)G=(c[j>>2]|0)+A|0;else G=A;if((G|0)<=0?(c[f>>2]|0)>=(c[h>>2]|0):0){f=1;j=53;break a}if(a[u>>0]|0){j=8;break a}if(B)A=(c[j>>2]|0)+A|0;if((A|0)==0?(z=c[f>>2]|0,(z|0)<(c[h>>2]|0)):0){c[f>>2]=z+1;c[(c[r>>2]|0)+((c[s>>2]|0)+1<<2)>>2]=c[(c[t>>2]|0)+(z<<2)>>2];A=(c[r>>2]|0)+(c[s>>2]<<2)|0;B=(c[A>>2]|0)>>>5;if(!B){B=0;G=0}else{G=0;E=0;do{G=1<<((c[A+(E<<2)+4>>2]|0)>>>1&31)|G;E=E+1|0}while((E|0)<(B|0))}c[A+(B<<2)+4>>2]=G;Zc(g,c[s>>2]|0);E=c[q>>2]|0}A=c[(c[g>>2]|0)+(E<<2)>>2]|0;E=E+1|0;J=c[j>>2]|0;E=(E|0)==(J|0)?0:E;c[q>>2]=E;G=c[r>>2]|0;B=G+(A<<2)|0;I=c[B>>2]|0}while((I&3|0)!=0);if(d?(c[o>>2]|0)>1:0){H=C+1|0;if(!((C|0)%1e3|0)){I=c[l>>2]|0;c[m>>2]=I-E+((I|0)<(E|0)?J:0);c[m+4>>2]=D;c[m+8>>2]=F;La(3440,m|0)|0;I=c[B>>2]|0;C=H}else C=H}E=G+(A+1<<2)|0;G=c[E>>2]>>1;if(I>>>0>63){H=c[k>>2]|0;I=I>>>5;J=1;do{P=c[B+(J<<2)+4>>2]>>1;G=(c[H+(P*12|0)+4>>2]|0)<(c[H+(G*12|0)+4>>2]|0)?P:G;J=J+1|0}while((J|0)<(I|0))}I=(c[n>>2]|0)+G|0;if(a[I>>0]|0){J=c[k>>2]|0;H=J+(G*12|0)+4|0;M=c[H>>2]|0;if((M|0)>0){J=c[J+(G*12|0)>>2]|0;L=0;K=0;do{N=c[J+(L<<2)>>2]|0;if((c[(c[c[p>>2]>>2]|0)+(N<<2)>>2]&3|0)!=1){c[J+(K<<2)>>2]=N;M=c[H>>2]|0;K=K+1|0}L=L+1|0}while((L|0)<(M|0))}else{L=0;K=0}J=L-K|0;if((J|0)>0)c[H>>2]=M-J;a[I>>0]=0}I=c[k>>2]|0;H=c[I+(G*12|0)>>2]|0;I=I+(G*12|0)+4|0;if((c[I>>2]|0)>0)J=0;else continue;while(1){N=c[B>>2]|0;if(N&3)continue a;K=c[H+(J<<2)>>2]|0;L=c[r>>2]|0;O=L+(K<<2)|0;M=c[O>>2]|0;b:do if(((!((M&3|0)!=0|(K|0)==(A|0))?(P=c[v>>2]|0,y=M>>>5,(P|0)==-1|(y|0)<(P|0)):0)?(w=N>>>5,y>>>0>=w>>>0):0)?(c[B+(w<<2)+4>>2]&~c[O+(y<<2)+4>>2]|0)==0:0){L=L+(K+1<<2)|0;do if(N>>>0>31){if(M>>>0>31){O=-2;M=0}else break b;while(1){N=c[E+(M<<2)>>2]|0;c:do if((O|0)==-2){P=0;while(1){O=c[L+(P<<2)>>2]|0;if((N|0)==(O|0)){N=-2;break c}P=P+1|0;if((N|0)==(O^1|0))break c;if(P>>>0>=y>>>0)break b}}else{P=0;while(1){if((N|0)==(c[L+(P<<2)>>2]|0)){N=O;break c}P=P+1|0;if(P>>>0>=y>>>0)break b}}while(0);M=M+1|0;if(M>>>0>=w>>>0)break;else O=N}if((N|0)==-2)break;else if((N|0)==-1)break b;c[x>>2]=N^1;c[m+0>>2]=c[x+0>>2];if(!(Gc(b,K,m)|0)){f=0;j=53;break a}F=F+1|0;J=(((N>>1|0)==(G|0))<<31>>31)+J|0;break b}while(0);Fc(b,K);D=D+1|0}while(0);J=J+1|0;if((J|0)>=(c[I>>2]|0))continue a}}if((j|0)==8){Yc(g,0);c[f>>2]=c[h>>2];P=1;i=e;return P|0}else if((j|0)==53){i=e;return f|0}return 0}function Kc(b,e,f){b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;h=i;i=i+16|0;g=h+12|0;m=h+8|0;k=h+4|0;j=h;l=(c[b+544>>2]|0)+(f<<2)|0;if(c[l>>2]&3){r=1;i=h;return r|0}if(Qb(b,l)|0){r=1;i=h;return r|0}c[m>>2]=c[b+284>>2];nc(b+292|0,m);p=c[l>>2]|0;if(p>>>0>31){m=b+332|0;n=0;o=-2;do{q=c[l+(n<<2)+4>>2]|0;r=q>>1;if((r|0)!=(e|0)?(r=(d[(c[m>>2]|0)+r>>0]|0)^q&1,t=a[2616]|0,s=t&255,((r&255)<<24>>24==t<<24>>24&(s>>>1^1)|s&2&r|0)==0):0){c[k>>2]=q^1;c[g+0>>2]=c[k+0>>2];Lb(b,g,-1);p=c[l>>2]|0}else o=q;n=n+1|0}while((n|0)<(p>>>5|0))}else o=-2;t=(Mb(b)|0)==-1;Rb(b,0);if(!t){t=b+712|0;c[t>>2]=(c[t>>2]|0)+1;c[j>>2]=o;c[g+0>>2]=c[j+0>>2];if(!(Gc(b,f,g)|0)){t=0;i=h;return t|0}}t=1;i=h;return t|0}function Lc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0;e=i;h=(c[b+776>>2]|0)+d|0;f=b+760|0;if(a[h>>0]|0){k=c[f>>2]|0;g=k+(d*12|0)+4|0;n=c[g>>2]|0;if((n|0)>0){j=b+804|0;k=c[k+(d*12|0)>>2]|0;m=0;l=0;do{o=c[k+(m<<2)>>2]|0;if((c[(c[c[j>>2]>>2]|0)+(o<<2)>>2]&3|0)!=1){c[k+(l<<2)>>2]=o;n=c[g>>2]|0;l=l+1|0}m=m+1|0}while((m|0)<(n|0))}else{m=0;l=0}j=m-l|0;if((j|0)>0)c[g>>2]=n-j;a[h>>0]=0}g=c[f>>2]|0;n=a[(c[b+332>>2]|0)+d>>0]|0;m=a[2624]|0;o=m&255;if(!((o>>>1^1)&n<<24>>24==m<<24>>24|n&2&o)){o=1;i=e;return o|0}f=g+(d*12|0)+4|0;h=c[f>>2]|0;if(!h){o=1;i=e;return o|0}a:do if((h|0)>0){g=g+(d*12|0)|0;h=0;while(1){if(!(Kc(b,d,c[(c[g>>2]|0)+(h<<2)>>2]|0)|0)){b=0;break}h=h+1|0;if((h|0)>=(c[f>>2]|0))break a}i=e;return b|0}while(0);o=Jc(b,0)|0;i=e;return o|0}function Mc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0;e=i;i=i+48|0;s=e+36|0;r=e+32|0;t=e+28|0;u=e+24|0;f=e+12|0;g=e;n=(c[b+776>>2]|0)+d|0;m=b+760|0;if(a[n>>0]|0){q=c[m>>2]|0;o=q+(d*12|0)+4|0;y=c[o>>2]|0;if((y|0)>0){p=b+804|0;q=c[q+(d*12|0)>>2]|0;w=0;v=0;do{z=c[q+(w<<2)>>2]|0;if((c[(c[c[p>>2]>>2]|0)+(z<<2)>>2]&3|0)!=1){c[q+(v<<2)>>2]=z;y=c[o>>2]|0;v=v+1|0}w=w+1|0}while((w|0)<(y|0))}else{w=0;v=0}p=w-v|0;if((p|0)>0)c[o>>2]=y-p;a[n>>0]=0}v=c[m>>2]|0;w=v+(d*12|0)|0;c[f>>2]=0;n=f+4|0;c[n>>2]=0;o=f+8|0;c[o>>2]=0;c[g>>2]=0;q=g+4|0;c[q>>2]=0;p=g+8|0;c[p>>2]=0;v=v+(d*12|0)+4|0;a:do if((c[v>>2]|0)>0){y=b+544|0;B=d<<1;A=0;do{C=(c[w>>2]|0)+(A<<2)|0;E=(c[y>>2]|0)+(c[C>>2]<<2)|0;Z=c[E>>2]|0;z=Z>>>5;b:do if(Z>>>0>31){G=0;while(1){D=G+1|0;if((c[E+(G<<2)+4>>2]|0)==(B|0)){D=G;break b}if((D|0)<(z|0))G=D;else break}}else D=0;while(0);_c((D|0)<(z|0)?f:g,C);A=A+1|0;z=c[v>>2]|0}while((A|0)<(z|0));y=c[n>>2]|0;B=(y|0)>0;if(B){C=c[q>>2]|0;K=(C|0)>0;J=b+544|0;D=c[f>>2]|0;A=c[g>>2]|0;E=b+708|0;I=b+684|0;H=b+688|0;P=0;G=0;while(1){if(K){M=D+(G<<2)|0;L=c[J>>2]|0;N=c[E>>2]|0;O=0;do{S=L+(c[M>>2]<<2)|0;U=L+(c[A+(O<<2)>>2]<<2)|0;N=N+1|0;c[E>>2]=N;Q=(c[S>>2]|0)>>>5>>>0<(c[U>>2]|0)>>>5>>>0;R=Q?U:S;U=Q?S:U;S=R+4|0;Q=U+4|0;R=c[R>>2]|0;T=R>>>5;W=T+ -1|0;U=c[U>>2]|0;c:do if(U>>>0>31){V=0;while(1){Z=c[Q+(V<<2)>>2]|0;d:do if((Z>>1|0)!=(d|0)){e:do if(R>>>0>31){Y=0;while(1){X=c[S+(Y<<2)>>2]|0;Y=Y+1|0;if((X^Z)>>>0<2)break;if((Y|0)>=(T|0))break e}if((X|0)==(Z^1|0))break c;else break d}while(0);W=W+1|0}while(0);V=V+1|0;if((V|0)>=(U>>>5|0)){x=28;break}}}else x=28;while(0);if((x|0)==28){x=0;if((P|0)>=((c[I>>2]|0)+z|0)){b=1;break a}Z=c[H>>2]|0;if((Z|0)!=-1&(W|0)>(Z|0)){b=1;break a}else P=P+1|0}O=O+1|0}while((O|0)<(C|0))}G=G+1|0;if((G|0)>=(y|0)){x=32;break}}}else{B=0;x=32}}else{y=0;B=0;x=32}while(0);f:do if((x|0)==32){a[(c[b+904>>2]|0)+d>>0]=1;z=b+380|0;A=(c[z>>2]|0)+d|0;if(a[A>>0]|0){Z=b+200|0;Y=Z;Y=ne(c[Y>>2]|0,c[Y+4>>2]|0,-1,-1)|0;c[Z>>2]=Y;c[Z+4>>2]=F}a[A>>0]=0;A=b+460|0;if(!((c[b+476>>2]|0)>(d|0)?(c[(c[b+472>>2]|0)+(d<<2)>>2]|0)>-1:0))x=36;if((x|0)==36?(a[(c[z>>2]|0)+d>>0]|0)!=0:0)lc(A,d);x=b+716|0;c[x>>2]=(c[x>>2]|0)+1;x=c[q>>2]|0;if((y|0)>(x|0)){A=b+732|0;if((x|0)>0){u=b+544|0;t=c[g>>2]|0;E=b+736|0;D=0;do{C=(c[u>>2]|0)+(c[t+(D<<2)>>2]<<2)|0;z=c[E>>2]|0;if((c[C>>2]|0)>>>0>31){G=0;H=-1;do{Z=C+(G<<2)+4|0;c[s>>2]=c[Z>>2];_c(A,s);H=(c[Z>>2]>>1|0)==(d|0)?G+z|0:H;G=G+1|0}while((G|0)<((c[C>>2]|0)>>>5|0))}else H=-1;Z=c[A>>2]|0;X=Z+(H<<2)|0;Y=c[X>>2]|0;Z=Z+(z<<2)|0;c[X>>2]=c[Z>>2];c[Z>>2]=Y;c[r>>2]=(c[C>>2]|0)>>>5;_c(A,r);D=D+1|0}while((D|0)<(x|0))}c[s>>2]=d<<1;_c(A,s);c[r>>2]=1;_c(A,r)}else{D=b+732|0;if(B){G=b+544|0;E=c[f>>2]|0;z=b+736|0;H=0;do{C=(c[G>>2]|0)+(c[E+(H<<2)>>2]<<2)|0;A=c[z>>2]|0;if((c[C>>2]|0)>>>0>31){I=0;J=-1;do{Z=C+(I<<2)+4|0;c[s>>2]=c[Z>>2];_c(D,s);J=(c[Z>>2]>>1|0)==(d|0)?I+A|0:J;I=I+1|0}while((I|0)<((c[C>>2]|0)>>>5|0))}else J=-1;Z=c[D>>2]|0;X=Z+(J<<2)|0;Y=c[X>>2]|0;Z=Z+(A<<2)|0;c[X>>2]=c[Z>>2];c[Z>>2]=Y;c[r>>2]=(c[C>>2]|0)>>>5;_c(D,r);H=H+1|0}while((H|0)<(y|0))}c[t>>2]=d<<1|1;_c(D,t);c[u>>2]=1;_c(D,u)}if((c[v>>2]|0)>0){r=0;do{Fc(b,c[(c[w>>2]|0)+(r<<2)>>2]|0);r=r+1|0}while((r|0)<(c[v>>2]|0))}r=b+628|0;g:do if(B){s=b+544|0;w=c[f>>2]|0;A=c[g>>2]|0;if((x|0)>0)v=0;else{r=0;while(1){r=r+1|0;if((r|0)>=(y|0))break g}}do{u=w+(v<<2)|0;t=0;do{Z=c[s>>2]|0;if(Hc(b,Z+(c[u>>2]<<2)|0,Z+(c[A+(t<<2)>>2]<<2)|0,d,r)|0?!(Dc(b,r)|0):0){b=0;break f}t=t+1|0}while((t|0)<(x|0));v=v+1|0}while((v|0)<(y|0))}while(0);r=c[m>>2]|0;m=r+(d*12|0)|0;s=c[m>>2]|0;if(s){c[r+(d*12|0)+4>>2]=0;Td(s);c[m>>2]=0;c[r+(d*12|0)+8>>2]=0}m=b+412|0;d=d<<1;s=c[m>>2]|0;r=s+(d*12|0)+4|0;if((c[r>>2]|0)==0?(l=s+(d*12|0)|0,k=c[l>>2]|0,(k|0)!=0):0){c[r>>2]=0;Td(k);c[l>>2]=0;c[s+(d*12|0)+8>>2]=0;s=c[m>>2]|0}k=d|1;l=s+(k*12|0)+4|0;if((c[l>>2]|0)==0?(j=s+(k*12|0)|0,h=c[j>>2]|0,(h|0)!=0):0){c[l>>2]=0;Td(h);c[j>>2]=0;c[s+(k*12|0)+8>>2]=0}b=Jc(b,0)|0;A=c[g>>2]|0}while(0);if(A){c[q>>2]=0;Td(A);c[g>>2]=0;c[p>>2]=0}g=c[f>>2]|0;if(!g){i=e;return b|0}c[n>>2]=0;Td(g);c[f>>2]=0;c[o>>2]=0;i=e;return b|0}function Nc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;e=i;if(!(a[b+724>>0]|0)){i=e;return}l=b+540|0;if((c[l>>2]|0)>0){j=b+760|0;f=b+804|0;g=b+776|0;k=b+544|0;h=0;do{n=c[j>>2]|0;m=n+(h*12|0)+4|0;p=c[m>>2]|0;if((p|0)>0){n=c[n+(h*12|0)>>2]|0;q=0;o=0;do{r=c[n+(q<<2)>>2]|0;if((c[(c[c[f>>2]>>2]|0)+(r<<2)>>2]&3|0)!=1){c[n+(o<<2)>>2]=r;p=c[m>>2]|0;o=o+1|0}q=q+1|0}while((q|0)<(p|0))}else{q=0;o=0}n=q-o|0;if((n|0)>0)c[m>>2]=p-n;a[(c[g>>2]|0)+h>>0]=0;n=c[j>>2]|0;m=n+(h*12|0)+4|0;if((c[m>>2]|0)>0){r=n+(h*12|0)|0;p=0;do{n=(c[r>>2]|0)+(p<<2)|0;o=c[n>>2]|0;q=c[k>>2]|0;s=q+(o<<2)|0;if(!(c[s>>2]&16)){t=wc(d,s)|0;c[n>>2]=t;c[s>>2]=c[s>>2]|16;c[q+(o+1<<2)>>2]=t}else c[n>>2]=c[q+(o+1<<2)>>2];p=p+1|0}while((p|0)<(c[m>>2]|0))}h=h+1|0}while((h|0)<(c[l>>2]|0))}f=b+856|0;t=c[b+872>>2]|0;g=b+868|0;m=c[g>>2]|0;k=t-m|0;if((t|0)<(m|0))k=(c[b+860>>2]|0)+k|0;a:do if((k|0)>0){h=b+860|0;j=b+544|0;while(1){l=c[(c[f>>2]|0)+(m<<2)>>2]|0;n=m+1|0;c[g>>2]=(n|0)==(c[h>>2]|0)?0:n;n=c[j>>2]|0;o=n+(l<<2)|0;m=c[o>>2]|0;if(!(m&3)){if(!(m&16)){t=wc(d,o)|0;c[o>>2]=c[o>>2]|16;c[n+(l+1<<2)>>2]=t;l=t}else l=c[n+(l+1<<2)>>2]|0;Zc(f,l)}k=k+ -1|0;if((k|0)<=0)break a;m=c[g>>2]|0}}else j=b+544|0;while(0);b=b+928|0;f=c[b>>2]|0;h=c[j>>2]|0;g=h+(f<<2)|0;if(!(c[g>>2]&16)){t=wc(d,g)|0;c[b>>2]=t;c[g>>2]=c[g>>2]|16;c[h+(f+1<<2)>>2]=t;i=e;return}else{c[b>>2]=c[h+(f+1<<2)>>2];i=e;return}}function Oc(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;h=i;i=i+32|0;l=h;d=h+8|0;e=b+544|0;f=b+548|0;g=b+556|0;j=(c[f>>2]|0)-(c[g>>2]|0)|0;c[d+0>>2]=0;c[d+4>>2]=0;c[d+8>>2]=0;c[d+12>>2]=0;gc(d,j);j=d+16|0;k=b+560|0;a[j>>0]=a[k>>0]|0;Nc(b,d);ac(b,d);if((c[b+44>>2]|0)>1){m=c[d+4>>2]<<2;c[l>>2]=c[f>>2]<<2;c[l+4>>2]=m;La(3608,l|0)|0}a[k>>0]=a[j>>0]|0;j=c[e>>2]|0;if(j)Td(j);c[e>>2]=c[d>>2];c[f>>2]=c[d+4>>2];c[b+552>>2]=c[d+8>>2];c[g>>2]=c[d+12>>2];i=h;return}function Pc(){var d=0,e=0,f=0;d=i;i=i+16|0;e=d;a[2608]=0;a[2616]=1;a[2624]=2;xb(2632,2656,2664,3744,3752);c[658]=160;a[2652]=0;xb(2704,2728,2736,3744,3752);c[676]=160;a[2724]=0;xb(2784,2808,2816,3744,3752);c[696]=160;a[2804]=1;xb(2848,2880,2888,3744,3736);c[712]=280;f=2868|0;c[f>>2]=-2147483648;c[f+4>>2]=2147483647;c[719]=0;xb(2960,2992,3e3,3744,3736);c[740]=280;f=2980|0;c[f>>2]=-1;c[f+4>>2]=2147483647;c[747]=20;xb(3112,3144,3152,3744,3736);c[778]=280;f=3132|0;c[f>>2]=-1;c[f+4>>2]=2147483647;c[785]=1e3;xb(3240,3296,3312,3744,3720);c[810]=2168;h[408]=0.0;h[409]=v;a[3280]=0;a[3281]=0;b[1641]=b[e+0>>1]|0;b[1642]=b[e+2>>1]|0;b[1643]=b[e+4>>1]|0;h[411]=.5;i=d;return}function Qc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;d=i;c[a>>2]=0;e=a+4|0;c[e>>2]=0;f=a+8|0;c[f>>2]=0;if((b|0)<=0){i=d;return}g=b+1&-2;g=(g|0)>2?g:2;c[f>>2]=g;f=Ud(0,g<<2)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0)Ta(va(1)|0,48,0);a=c[e>>2]|0;if((a|0)<(b|0))do{g=f+(a<<2)|0;if(g)c[g>>2]=0;a=a+1|0}while((a|0)!=(b|0));c[e>>2]=b;i=d;return}function Rc(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0;b=i;e=a+32|0;d=c[e>>2]|0;if(d){c[a+36>>2]=0;Td(d);c[e>>2]=0;c[a+40>>2]=0}e=a+16|0;d=c[e>>2]|0;if(d){c[a+20>>2]=0;Td(d);c[e>>2]=0;c[a+24>>2]=0}e=c[a>>2]|0;if(!e){i=b;return}d=a+4|0;g=c[d>>2]|0;if((g|0)>0){f=0;do{j=e+(f*12|0)|0;h=c[j>>2]|0;if(h){c[e+(f*12|0)+4>>2]=0;Td(h);c[j>>2]=0;c[e+(f*12|0)+8>>2]=0;e=c[a>>2]|0;g=c[d>>2]|0}f=f+1|0}while((f|0)<(g|0))}c[d>>2]=0;Td(e);c[a>>2]=0;c[a+8>>2]=0;i=b;return}function Sc(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;e=i;b=c[b>>2]|0;g=b+1|0;f=a+4|0;if((c[f>>2]|0)>=(g|0)){k=c[a>>2]|0;k=k+(b<<2)|0;c[k>>2]=d;i=e;return}h=a+8|0;k=c[h>>2]|0;if((k|0)<(g|0)){l=b+2-k&-2;j=(k>>1)+2&-2;j=(l|0)>(j|0)?l:j;if((j|0)>(2147483647-k|0)){l=va(1)|0;Ta(l|0,48,0)}m=c[a>>2]|0;l=j+k|0;c[h>>2]=l;l=Ud(m,l<<2)|0;c[a>>2]=l;if((l|0)==0?(c[(Oa()|0)>>2]|0)==12:0){m=va(1)|0;Ta(m|0,48,0)}}k=c[f>>2]|0;if((k|0)<(g|0)){h=c[a>>2]|0;do{j=h+(k<<2)|0;if(j)c[j>>2]=0;k=k+1|0}while((k|0)!=(g|0))}c[f>>2]=g;m=c[a>>2]|0;m=m+(b<<2)|0;c[m>>2]=d;i=e;return}function Tc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;e=i;k=c[d>>2]|0;g=k+1|0;f=b+4|0;if((c[f>>2]|0)<(g|0)){j=b+8|0;h=c[j>>2]|0;if((h|0)<(g|0)){l=k+2-h&-2;k=(h>>1)+2&-2;k=(l|0)>(k|0)?l:k;if((k|0)>(2147483647-h|0)){l=va(1)|0;Ta(l|0,48,0)}m=c[b>>2]|0;l=k+h|0;c[j>>2]=l;l=Ud(m,l*12|0)|0;c[b>>2]=l;if((l|0)==0?(c[(Oa()|0)>>2]|0)==12:0){m=va(1)|0;Ta(m|0,48,0)}}j=c[f>>2]|0;if((j|0)<(g|0)){h=c[b>>2]|0;do{k=h+(j*12|0)|0;if(k){c[k>>2]=0;c[h+(j*12|0)+4>>2]=0;c[h+(j*12|0)+8>>2]=0}j=j+1|0}while((j|0)!=(g|0))}c[f>>2]=g;h=c[d>>2]|0}else h=k;f=c[b>>2]|0;if(c[f+(h*12|0)>>2]|0){c[f+(h*12|0)+4>>2]=0;h=c[d>>2]|0}d=b+16|0;f=h+1|0;g=b+20|0;if((c[g>>2]|0)>=(f|0)){i=e;return}j=b+24|0;b=c[j>>2]|0;if((b|0)<(f|0)){m=h+2-b&-2;h=(b>>1)+2&-2;h=(m|0)>(h|0)?m:h;if((h|0)>(2147483647-b|0)){m=va(1)|0;Ta(m|0,48,0)}l=c[d>>2]|0;m=h+b|0;c[j>>2]=m;m=Ud(l,m)|0;c[d>>2]=m;if((m|0)==0?(c[(Oa()|0)>>2]|0)==12:0){m=va(1)|0;Ta(m|0,48,0)}}b=c[g>>2]|0;if((b|0)<(f|0))do{a[(c[d>>2]|0)+b>>0]=0;b=b+1|0}while((b|0)!=(f|0));c[g>>2]=f;i=e;return}function Uc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;d=i;i=i+16|0;g=d;c[g>>2]=b;f=a+12|0;e=b+1|0;h=a+16|0;if((c[h>>2]|0)<(e|0)){k=a+20|0;j=c[k>>2]|0;if((j|0)<(e|0)){m=b+2-j&-2;l=(j>>1)+2&-2;l=(m|0)>(l|0)?m:l;if((l|0)>(2147483647-j|0)){m=va(1)|0;Ta(m|0,48,0)}n=c[f>>2]|0;m=l+j|0;c[k>>2]=m;m=Ud(n,m<<2)|0;c[f>>2]=m;if((m|0)==0?(c[(Oa()|0)>>2]|0)==12:0){n=va(1)|0;Ta(n|0,48,0)}}j=c[h>>2]|0;if((e|0)>(j|0))ke((c[f>>2]|0)+(j<<2)|0,-1,e-j<<2|0)|0;c[h>>2]=e}c[(c[f>>2]|0)+(b<<2)>>2]=c[a+4>>2];nc(a,g);e=c[f>>2]|0;j=c[e+(b<<2)>>2]|0;b=c[a>>2]|0;f=c[b+(j<<2)>>2]|0;if(!j){m=0;n=b+(m<<2)|0;c[n>>2]=f;n=e+(f<<2)|0;c[n>>2]=m;i=d;return}a=a+28|0;g=f<<1;h=g|1;while(1){m=j;j=j+ -1>>1;l=b+(j<<2)|0;k=c[l>>2]|0;r=c[c[a>>2]>>2]|0;o=c[r+(g<<2)>>2]|0;q=c[r+(h<<2)>>2]|0;o=we(q|0,((q|0)<0)<<31>>31|0,o|0,((o|0)<0)<<31>>31|0)|0;q=F;p=k<<1;n=c[r+(p<<2)>>2]|0;p=c[r+((p|1)<<2)>>2]|0;n=we(p|0,((p|0)<0)<<31>>31|0,n|0,((n|0)<0)<<31>>31|0)|0;p=F;if(!(q>>>0<p>>>0|(q|0)==(p|0)&o>>>0<n>>>0)){a=14;break}c[b+(m<<2)>>2]=k;c[e+(c[l>>2]<<2)>>2]=m;if(!j){m=0;a=14;break}}if((a|0)==14){r=b+(m<<2)|0;c[r>>2]=f;r=e+(f<<2)|0;c[r>>2]=m;i=d;return}}function Vc(b,d){b=b|0;d=d|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;e=i;h=b+824|0;l=(c[b+840>>2]|0)>(d|0);if(l?(c[(c[b+836>>2]|0)+(d<<2)>>2]|0)>-1:0)j=7;else j=3;do if((j|0)==3){if(a[(c[b+876>>2]|0)+d>>0]|0){i=e;return}if(a[(c[b+904>>2]|0)+d>>0]|0){i=e;return}o=a[(c[b+332>>2]|0)+d>>0]|0;n=a[2624]|0;p=n&255;if((p>>>1^1)&o<<24>>24==n<<24>>24|o&2&p)if(l){j=7;break}else break;else{i=e;return}}while(0);if((j|0)==7?(f=c[b+836>>2]|0,g=f+(d<<2)|0,k=c[g>>2]|0,(k|0)>-1):0){d=c[h>>2]|0;j=c[d+(k<<2)>>2]|0;a:do if(!k)o=0;else{l=b+852|0;m=j<<1;b=m|1;while(1){o=k;k=k+ -1>>1;p=d+(k<<2)|0;n=c[p>>2]|0;u=c[c[l>>2]>>2]|0;r=c[u+(m<<2)>>2]|0;t=c[u+(b<<2)>>2]|0;r=we(t|0,((t|0)<0)<<31>>31|0,r|0,((r|0)<0)<<31>>31|0)|0;t=F;s=n<<1;q=c[u+(s<<2)>>2]|0;s=c[u+((s|1)<<2)>>2]|0;q=we(s|0,((s|0)<0)<<31>>31|0,q|0,((q|0)<0)<<31>>31|0)|0;s=F;if(!(t>>>0<s>>>0|(t|0)==(s|0)&r>>>0<q>>>0))break a;c[d+(o<<2)>>2]=n;c[f+(c[p>>2]<<2)>>2]=o;if(!k){o=0;break}}}while(0);c[d+(o<<2)>>2]=j;c[f+(j<<2)>>2]=o;Wc(h,c[g>>2]|0);i=e;return}Uc(h,d);i=e;return}function Wc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;d=i;e=c[a>>2]|0;f=c[e+(b<<2)>>2]|0;m=b<<1|1;l=a+4|0;o=c[l>>2]|0;if((m|0)>=(o|0)){p=b;q=a+12|0;o=e+(p<<2)|0;c[o>>2]=f;q=c[q>>2]|0;q=q+(f<<2)|0;c[q>>2]=p;i=d;return}h=a+28|0;k=f<<1;j=k|1;a=a+12|0;while(1){n=(b<<1)+2|0;if((n|0)<(o|0)){p=c[e+(n<<2)>>2]|0;q=c[e+(m<<2)>>2]|0;u=p<<1;o=c[c[h>>2]>>2]|0;s=c[o+(u<<2)>>2]|0;u=c[o+((u|1)<<2)>>2]|0;s=we(u|0,((u|0)<0)<<31>>31|0,s|0,((s|0)<0)<<31>>31|0)|0;u=F;t=q<<1;r=c[o+(t<<2)>>2]|0;t=c[o+((t|1)<<2)>>2]|0;r=we(t|0,((t|0)<0)<<31>>31|0,r|0,((r|0)<0)<<31>>31|0)|0;t=F;if(!(u>>>0<t>>>0|(u|0)==(t|0)&s>>>0<r>>>0)){p=q;g=7}}else{p=c[e+(m<<2)>>2]|0;o=c[c[h>>2]>>2]|0;g=7}if((g|0)==7){g=0;n=m}r=p<<1;t=c[o+(r<<2)>>2]|0;r=c[o+((r|1)<<2)>>2]|0;t=we(r|0,((r|0)<0)<<31>>31|0,t|0,((t|0)<0)<<31>>31|0)|0;r=F;u=c[o+(k<<2)>>2]|0;s=c[o+(j<<2)>>2]|0;u=we(s|0,((s|0)<0)<<31>>31|0,u|0,((u|0)<0)<<31>>31|0)|0;s=F;if(!(r>>>0<s>>>0|(r|0)==(s|0)&t>>>0<u>>>0)){g=10;break}c[e+(b<<2)>>2]=p;c[(c[a>>2]|0)+(p<<2)>>2]=b;m=n<<1|1;o=c[l>>2]|0;if((m|0)>=(o|0)){b=n;g=10;break}else b=n}if((g|0)==10){u=e+(b<<2)|0;c[u>>2]=f;u=c[a>>2]|0;u=u+(f<<2)|0;c[u>>2]=b;i=d;return}}function Xc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0;d=i;h=c[a>>2]|0;if(h){e=a+4|0;f=c[e>>2]|0;a:do if((f|0)>0){g=0;while(1){j=h+(g*12|0)|0;k=c[j>>2]|0;if(k){c[h+(g*12|0)+4>>2]=0;Td(k);c[j>>2]=0;c[h+(g*12|0)+8>>2]=0;f=c[e>>2]|0}g=g+1|0;if((g|0)>=(f|0))break a;h=c[a>>2]|0}}while(0);c[e>>2]=0;if(b){Td(c[a>>2]|0);c[a>>2]=0;c[a+8>>2]=0}}e=a+16|0;f=c[e>>2]|0;if((f|0)!=0?(c[a+20>>2]=0,b):0){Td(f);c[e>>2]=0;c[a+24>>2]=0}f=a+32|0;e=c[f>>2]|0;if(!e){i=d;return}c[a+36>>2]=0;if(!b){i=d;return}Td(e);c[f>>2]=0;c[a+40>>2]=0;i=d;return}function Yc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;e=i;f=c[a>>2]|0;d=a+4|0;if(f){c[d>>2]=0;if(b){Td(f);c[a>>2]=0;c[a+8>>2]=0;f=0}}else f=0;if((c[d>>2]|0)>=1){h=a+16|0;c[h>>2]=0;h=a+12|0;c[h>>2]=0;i=e;return}h=a+8|0;g=c[h>>2]|0;if((g|0)<1){j=2-g&-2;b=(g>>1)+2&-2;b=(j|0)>(b|0)?j:b;if((b|0)>(2147483647-g|0)){j=va(1)|0;Ta(j|0,48,0)}j=b+g|0;c[h>>2]=j;f=Ud(f,j<<2)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0){j=va(1)|0;Ta(j|0,48,0)}}b=c[d>>2]|0;if((b|0)<1)while(1){g=f+(b<<2)|0;if(g)c[g>>2]=0;if(!b)break;else b=b+1|0}c[d>>2]=1;j=a+16|0;c[j>>2]=0;j=a+12|0;c[j>>2]=0;i=e;return}function Zc(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;e=i;i=i+16|0;d=e;f=a+16|0;j=c[f>>2]|0;c[f>>2]=j+1;c[(c[a>>2]|0)+(j<<2)>>2]=b;j=c[f>>2]|0;b=a+4|0;h=c[b>>2]|0;if((j|0)==(h|0)){c[f>>2]=0;j=0}g=a+12|0;if((c[g>>2]|0)!=(j|0)){i=e;return}Qc(d,(h*3|0)+1>>1);l=c[g>>2]|0;m=c[b>>2]|0;if((l|0)<(m|0)){j=c[a>>2]|0;k=c[d>>2]|0;m=0;while(1){h=m+1|0;c[k+(m<<2)>>2]=c[j+(l<<2)>>2];l=l+1|0;m=c[b>>2]|0;if((l|0)>=(m|0)){k=h;break}else m=h}}else k=0;h=c[a>>2]|0;if((c[f>>2]|0)>0){j=c[d>>2]|0;l=0;while(1){c[j+(k<<2)>>2]=c[h+(l<<2)>>2];l=l+1|0;if((l|0)>=(c[f>>2]|0))break;else k=k+1|0}m=c[b>>2]|0}c[g>>2]=0;c[f>>2]=m;if(!h)f=a+8|0;else{c[b>>2]=0;Td(h);c[a>>2]=0;f=a+8|0;c[f>>2]=0}c[a>>2]=c[d>>2];l=d+4|0;c[b>>2]=c[l>>2];m=d+8|0;c[f>>2]=c[m>>2];c[d>>2]=0;c[l>>2]=0;c[m>>2]=0;i=e;return}function _c(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;d=i;e=a+4|0;f=c[e>>2]|0;g=a+8|0;h=c[g>>2]|0;if((f|0)==(h|0)&(h|0)<(f+1|0)){h=(f>>1)+2&-2;h=(h|0)<2?2:h;if((h|0)>(2147483647-f|0)){h=va(1)|0;Ta(h|0,48,0)}j=c[a>>2]|0;f=h+f|0;c[g>>2]=f;f=Ud(j,f<<2)|0;c[a>>2]=f;if((f|0)==0?(c[(Oa()|0)>>2]|0)==12:0){j=va(1)|0;Ta(j|0,48,0)}}else f=c[a>>2]|0;j=c[e>>2]|0;c[e>>2]=j+1;e=f+(j<<2)|0;if(!e){i=d;return}c[e>>2]=c[b>>2];i=d;return}function $c(){var a=0,b=0;b=i;Ka(3864)|0;a=od(936)|0;xc(a);i=b;return a|0}function ad(a){a=a|0;var b=0;b=i;if(!a){i=b;return}gb[c[(c[a>>2]|0)+4>>2]&31](a);i=b;return}function bd(){var b=0,d=0,e=0;b=i;i=i+16|0;d=b;e=od(936)|0;xc(e);c[964]=e;Cc(e,1)|0;e=c[964]|0;a[d+0>>0]=a[3840]|0;Ac(e,d,1)|0;i=b;return}function cd(b){b=b|0;var d=0,e=0,f=0;d=i;i=i+16|0;e=d;if((c[962]|0)>=(b|0)){i=d;return}do{f=c[964]|0;a[e+0>>0]=a[3840]|0;Ac(f,e,1)|0;f=(c[962]|0)+1|0;c[962]=f}while((f|0)<(b|0));i=d;return}function dd(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;g=i;i=i+32|0;h=g+16|0;e=g+4|0;j=g;c[e>>2]=0;f=e+4|0;c[f>>2]=0;d=e+8|0;c[d>>2]=0;k=c[b>>2]|0;if(k)do{l=(k|0)<0?0-k|0:k;if((c[962]|0)<(l|0))do{m=c[964]|0;a[h+0>>0]=a[3840]|0;Ac(m,h,1)|0;m=(c[962]|0)+1|0;c[962]=m}while((m|0)<(l|0));c[j>>2]=l<<1|k>>>31;mc(e,j);b=b+4|0;k=c[b>>2]|0}while((k|0)!=0);j=c[964]|0;h=j+628|0;ld(e,h);h=Dc(j,h)|0;j=c[e>>2]|0;if(!j){i=g;return h|0}c[f>>2]=0;Td(j);c[e>>2]=0;c[d>>2]=0;i=g;return h|0}function ed(){var b=0,d=0,e=0,f=0;d=i;i=i+16|0;b=d;e=c[964]|0;f=e+664|0;c[f+0>>2]=-1;c[f+4>>2]=-1;c[f+8>>2]=-1;c[f+12>>2]=-1;if(c[e+304>>2]|0)c[e+308>>2]=0;Bc(b,e,1,0);i=d;return(a[b>>0]|0)==0|0}function fd(){return(c[(c[964]|0)+4>>2]|0)+1|0}function gd(){return c[962]|0}function hd(b){b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0;d=i;i=i+32|0;h=d+16|0;f=d+4|0;j=d;c[f>>2]=0;e=f+4|0;c[e>>2]=0;g=f+8|0;c[g>>2]=0;c[j>>2]=b<<1;mc(f,j);b=c[964]|0;j=b+664|0;c[j+0>>2]=-1;c[j+4>>2]=-1;c[j+8>>2]=-1;c[j+12>>2]=-1;ld(f,b+304|0);Bc(h,b,1,0);b=(a[h>>0]|0)==0;h=c[f>>2]|0;if(!h){i=d;return b|0}c[e>>2]=0;Td(h);c[f>>2]=0;c[g>>2]=0;i=d;return b|0}function id(a){a=a|0;var b=0,d=0,e=0;b=i;i=i+16|0;e=b;d=c[964]|0;c[e>>2]=a<<1|1;a=d+628|0;if(c[a>>2]|0)c[d+632>>2]=0;mc(a,e);Dc(d,a)|0;i=b;return}function jd(){return c[(c[964]|0)+36>>2]|0}function kd(){return c[(c[964]|0)+32>>2]|0}function ld(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0;d=i;h=c[b>>2]|0;e=b+4|0;if(!h)j=c[e>>2]|0;else{c[e>>2]=0;j=0}e=a+4|0;f=c[e>>2]|0;g=b+4|0;if((j|0)<(f|0)){k=b+8|0;j=c[k>>2]|0;if((j|0)<(f|0)){m=f+1-j&-2;l=(j>>1)+2&-2;l=(m|0)>(l|0)?m:l;if((l|0)>(2147483647-j|0)){m=va(1)|0;Ta(m|0,48,0)}m=l+j|0;c[k>>2]=m;h=Ud(h,m<<2)|0;c[b>>2]=h;if((h|0)==0?(c[(Oa()|0)>>2]|0)==12:0){m=va(1)|0;Ta(m|0,48,0)}}j=c[g>>2]|0;a:do if((j|0)<(f|0))while(1){h=h+(j<<2)|0;if(h)c[h>>2]=0;j=j+1|0;if((j|0)==(f|0))break a;h=c[b>>2]|0}while(0);c[g>>2]=f;f=c[e>>2]|0}if((f|0)<=0){i=d;return}b=c[b>>2]|0;a=c[a>>2]|0;f=0;do{c[b+(f<<2)>>2]=c[a+(f<<2)>>2];f=f+1|0}while((f|0)<(c[e>>2]|0));i=d;return}function md(a,b){a=a|0;b=b|0;var d=0;d=i;i=i+16|0;c[d>>2]=b;b=c[p>>2]|0;ua(b|0,a|0,d|0)|0;Sa(10,b|0)|0;Wa()}function nd(){var a=0,b=0;a=i;i=i+16|0;if(!(Ja(4064,3)|0)){b=Ha(c[1014]|0)|0;i=a;return b|0}else md(4072,a);return 0}function od(a){a=a|0;var b=0,d=0;b=i;a=(a|0)==0?1:a;d=Sd(a)|0;if(d){i=b;return d|0}while(1){d=vd()|0;if(!d){a=4;break}jb[d&3]();d=Sd(a)|0;if(d){a=5;break}}if((a|0)==4){d=va(4)|0;c[d>>2]=4248;Ta(d|0,4296,12)}else if((a|0)==5){i=b;return d|0}return 0}function pd(a){a=a|0;var b=0;b=i;Td(a);i=b;return}function qd(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function rd(a){a=a|0;return}function sd(a){a=a|0;return 4264}function td(a){a=a|0;var b=0;b=i;i=i+16|0;jb[a&3]();md(4312,b)}function ud(){var a=0,b=0;b=nd()|0;if(((b|0)!=0?(a=c[b>>2]|0,(a|0)!=0):0)?(b=a+48|0,(c[b>>2]&-256|0)==1126902528?(c[b+4>>2]|0)==1129074247:0):0)td(c[a+12>>2]|0);b=c[968]|0;c[968]=b+0;td(b)}function vd(){var a=0;a=c[1102]|0;c[1102]=a+0;return a|0}function wd(a){a=a|0;return}function xd(a){a=a|0;return}function yd(a){a=a|0;return}function zd(a){a=a|0;return}function Ad(a){a=a|0;return}function Bd(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function Cd(a){a=a|0;var b=0;b=i;pd(a);i=b;return}function Dd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0,h=0;e=i;i=i+64|0;f=e;if((a|0)==(b|0)){h=1;i=e;return h|0}if(!b){h=0;i=e;return h|0}b=Hd(b,4504,4560,0)|0;if(!b){h=0;i=e;return h|0}h=f+0|0;g=h+56|0;do{c[h>>2]=0;h=h+4|0}while((h|0)<(g|0));c[f>>2]=b;c[f+8>>2]=a;c[f+12>>2]=-1;c[f+48>>2]=1;mb[c[(c[b>>2]|0)+28>>2]&3](b,f,c[d>>2]|0,1);if((c[f+24>>2]|0)!=1){h=0;i=e;return h|0}c[d>>2]=c[f+16>>2];h=1;i=e;return h|0}function Ed(b,d,e,f){b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0;b=i;g=d+16|0;h=c[g>>2]|0;if(!h){c[g>>2]=e;c[d+24>>2]=f;c[d+36>>2]=1;i=b;return}if((h|0)!=(e|0)){h=d+36|0;c[h>>2]=(c[h>>2]|0)+1;c[d+24>>2]=2;a[d+54>>0]=1;i=b;return}e=d+24|0;if((c[e>>2]|0)!=2){i=b;return}c[e>>2]=f;i=b;return}function Fd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=i;if((c[b+8>>2]|0)!=(a|0)){i=f;return}Ed(0,b,d,e);i=f;return}function Gd(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0;f=i;if((a|0)==(c[b+8>>2]|0)){Ed(0,b,d,e);i=f;return}else{a=c[a+8>>2]|0;mb[c[(c[a>>2]|0)+28>>2]&3](a,b,d,e);i=f;return}}function Hd(d,e,f,g){d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;h=i;i=i+64|0;j=h;k=c[d>>2]|0;l=d+(c[k+ -8>>2]|0)|0;k=c[k+ -4>>2]|0;c[j>>2]=f;c[j+4>>2]=d;c[j+8>>2]=e;c[j+12>>2]=g;n=j+16|0;o=j+20|0;e=j+24|0;m=j+28|0;g=j+32|0;d=j+40|0;p=(k|0)==(f|0);q=n+0|0;f=q+36|0;do{c[q>>2]=0;q=q+4|0}while((q|0)<(f|0));b[n+36>>1]=0;a[n+38>>0]=0;if(p){c[j+48>>2]=1;kb[c[(c[k>>2]|0)+20>>2]&3](k,j,l,l,1,0);q=(c[e>>2]|0)==1?l:0;i=h;return q|0}fb[c[(c[k>>2]|0)+24>>2]&3](k,j,l,1,0);j=c[j+36>>2]|0;if(!j){q=(c[d>>2]|0)==1&(c[m>>2]|0)==1&(c[g>>2]|0)==1?c[o>>2]|0:0;i=h;return q|0}else if((j|0)==1){if((c[e>>2]|0)!=1?!((c[d>>2]|0)==0&(c[m>>2]|0)==1&(c[g>>2]|0)==1):0){q=0;i=h;return q|0}q=c[n>>2]|0;i=h;return q|0}else{q=0;i=h;return q|0}return 0}function Id(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;b=i;a[d+53>>0]=1;if((c[d+4>>2]|0)!=(f|0)){i=b;return}a[d+52>>0]=1;f=d+16|0;h=c[f>>2]|0;if(!h){c[f>>2]=e;c[d+24>>2]=g;c[d+36>>2]=1;if(!((g|0)==1?(c[d+48>>2]|0)==1:0)){i=b;return}a[d+54>>0]=1;i=b;return}if((h|0)!=(e|0)){h=d+36|0;c[h>>2]=(c[h>>2]|0)+1;a[d+54>>0]=1;i=b;return}e=d+24|0;f=c[e>>2]|0;if((f|0)==2)c[e>>2]=g;else g=f;if(!((g|0)==1?(c[d+48>>2]|0)==1:0)){i=b;return}a[d+54>>0]=1;i=b;return}function Jd(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0,j=0,k=0,l=0,m=0;h=i;if((b|0)==(c[d+8>>2]|0)){if((c[d+4>>2]|0)!=(e|0)){i=h;return}j=d+28|0;if((c[j>>2]|0)==1){i=h;return}c[j>>2]=f;i=h;return}if((b|0)!=(c[d>>2]|0)){l=c[b+8>>2]|0;fb[c[(c[l>>2]|0)+24>>2]&3](l,d,e,f,g);i=h;return}if((c[d+16>>2]|0)!=(e|0)?(k=d+20|0,(c[k>>2]|0)!=(e|0)):0){c[d+32>>2]=f;f=d+44|0;if((c[f>>2]|0)==4){i=h;return}l=d+52|0;a[l>>0]=0;m=d+53|0;a[m>>0]=0;b=c[b+8>>2]|0;kb[c[(c[b>>2]|0)+20>>2]&3](b,d,e,e,1,g);if(a[m>>0]|0){if(!(a[l>>0]|0)){b=1;j=13}}else{b=0;j=13}do if((j|0)==13){c[k>>2]=e;m=d+40|0;c[m>>2]=(c[m>>2]|0)+1;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==2:0){a[d+54>>0]=1;if(b)break}else j=16;if((j|0)==16?b:0)break;c[f>>2]=4;i=h;return}while(0);c[f>>2]=3;i=h;return}if((f|0)!=1){i=h;return}c[d+32>>2]=1;i=h;return}function Kd(b,d,e,f,g){b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;g=i;if((c[d+8>>2]|0)==(b|0)){if((c[d+4>>2]|0)!=(e|0)){i=g;return}d=d+28|0;if((c[d>>2]|0)==1){i=g;return}c[d>>2]=f;i=g;return}if((c[d>>2]|0)!=(b|0)){i=g;return}if((c[d+16>>2]|0)!=(e|0)?(h=d+20|0,(c[h>>2]|0)!=(e|0)):0){c[d+32>>2]=f;c[h>>2]=e;b=d+40|0;c[b>>2]=(c[b>>2]|0)+1;if((c[d+36>>2]|0)==1?(c[d+24>>2]|0)==2:0)a[d+54>>0]=1;c[d+44>>2]=4;i=g;return}if((f|0)!=1){i=g;return}c[d+32>>2]=1;i=g;return}function Ld(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;var h=0;h=i;if((a|0)==(c[b+8>>2]|0)){Id(0,b,d,e,f);i=h;return}else{a=c[a+8>>2]|0;kb[c[(c[a>>2]|0)+20>>2]&3](a,b,d,e,f,g);i=h;return}}function Md(a,b,d,e,f,g){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;g=g|0;g=i;if((c[b+8>>2]|0)!=(a|0)){i=g;return}Id(0,b,d,e,f);i=g;return}function Nd(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0;e=i;i=i+16|0;f=e;c[f>>2]=c[d>>2];a=eb[c[(c[a>>2]|0)+16>>2]&1](a,b,f)|0;b=a&1;if(!a){i=e;return b|0}c[d>>2]=c[f>>2];i=e;return b|0}function Od(a){a=a|0;var b=0;b=i;if(!a)a=0;else a=(Hd(a,4504,4672,0)|0)!=0;i=b;return a&1|0}function Pd(){var a=0,b=0,d=0,e=0,f=0;a=i;i=i+16|0;b=a;a=a+12|0;d=nd()|0;if(!d)md(4040,b);d=c[d>>2]|0;if(!d)md(4040,b);f=d+48|0;e=c[f>>2]|0;f=c[f+4>>2]|0;if(!((e&-256|0)==1126902528&(f|0)==1129074247)){c[b>>2]=c[970];md(4e3,b)}if((e|0)==1126902529&(f|0)==1129074247)e=c[d+44>>2]|0;else e=d+80|0;c[a>>2]=e;f=c[d>>2]|0;d=c[f+4>>2]|0;if(eb[c[(c[4432>>2]|0)+16>>2]&1](4432,f,a)|0){f=c[a>>2]|0;e=c[970]|0;f=ib[c[(c[f>>2]|0)+8>>2]&1](f)|0;c[b>>2]=e;c[b+4>>2]=d;c[b+8>>2]=f;md(3904,b)}else{c[b>>2]=c[970];c[b+4>>2]=d;md(3952,b)}}function Qd(){var a=0;a=i;i=i+16|0;if(!(Ma(4056,20)|0)){i=a;return}else md(4128,a)}function Rd(a){a=a|0;var b=0;b=i;i=i+16|0;Td(a);if(!(Pa(c[1014]|0,0)|0)){i=b;return}else md(4184,b)}function Sd(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0;b=i;do if(a>>>0<245){if(a>>>0<11)a=16;else a=a+11&-8;x=a>>>3;p=c[1206]|0;w=p>>>x;if(w&3){g=(w&1^1)+x|0;f=g<<1;d=4864+(f<<2)|0;f=4864+(f+2<<2)|0;h=c[f>>2]|0;j=h+8|0;e=c[j>>2]|0;do if((d|0)!=(e|0)){if(e>>>0<(c[1210]|0)>>>0)Wa();k=e+12|0;if((c[k>>2]|0)==(h|0)){c[k>>2]=d;c[f>>2]=e;break}else Wa()}else c[1206]=p&~(1<<g);while(0);H=g<<3;c[h+4>>2]=H|3;H=h+(H|4)|0;c[H>>2]=c[H>>2]|1;H=j;i=b;return H|0}v=c[1208]|0;if(a>>>0>v>>>0){if(w){h=2<<x;h=w<<x&(h|0-h);h=(h&0-h)+ -1|0;d=h>>>12&16;h=h>>>d;j=h>>>5&8;h=h>>>j;f=h>>>2&4;h=h>>>f;g=h>>>1&2;h=h>>>g;e=h>>>1&1;e=(j|d|f|g|e)+(h>>>e)|0;h=e<<1;g=4864+(h<<2)|0;h=4864+(h+2<<2)|0;f=c[h>>2]|0;d=f+8|0;j=c[d>>2]|0;do if((g|0)!=(j|0)){if(j>>>0<(c[1210]|0)>>>0)Wa();k=j+12|0;if((c[k>>2]|0)==(f|0)){c[k>>2]=g;c[h>>2]=j;E=c[1208]|0;break}else Wa()}else{c[1206]=p&~(1<<e);E=v}while(0);H=e<<3;e=H-a|0;c[f+4>>2]=a|3;g=f+a|0;c[f+(a|4)>>2]=e|1;c[f+H>>2]=e;if(E){f=c[1211]|0;l=E>>>3;j=l<<1;h=4864+(j<<2)|0;k=c[1206]|0;l=1<<l;if(k&l){j=4864+(j+2<<2)|0;k=c[j>>2]|0;if(k>>>0<(c[1210]|0)>>>0)Wa();else{D=j;C=k}}else{c[1206]=k|l;D=4864+(j+2<<2)|0;C=h}c[D>>2]=f;c[C+12>>2]=f;c[f+8>>2]=C;c[f+12>>2]=h}c[1208]=e;c[1211]=g;H=d;i=b;return H|0}p=c[1207]|0;if(p){d=(p&0-p)+ -1|0;G=d>>>12&16;d=d>>>G;F=d>>>5&8;d=d>>>F;H=d>>>2&4;d=d>>>H;f=d>>>1&2;d=d>>>f;e=d>>>1&1;e=c[5128+((F|G|H|f|e)+(d>>>e)<<2)>>2]|0;d=(c[e+4>>2]&-8)-a|0;f=e;while(1){g=c[f+16>>2]|0;if(!g){g=c[f+20>>2]|0;if(!g)break}f=(c[g+4>>2]&-8)-a|0;H=f>>>0<d>>>0;d=H?f:d;f=g;e=H?g:e}h=c[1210]|0;if(e>>>0<h>>>0)Wa();f=e+a|0;if(e>>>0>=f>>>0)Wa();g=c[e+24>>2]|0;k=c[e+12>>2]|0;do if((k|0)==(e|0)){k=e+20|0;j=c[k>>2]|0;if(!j){k=e+16|0;j=c[k>>2]|0;if(!j){B=0;break}}while(1){l=j+20|0;m=c[l>>2]|0;if(m){j=m;k=l;continue}l=j+16|0;m=c[l>>2]|0;if(!m)break;else{j=m;k=l}}if(k>>>0<h>>>0)Wa();else{c[k>>2]=0;B=j;break}}else{j=c[e+8>>2]|0;if(j>>>0<h>>>0)Wa();h=j+12|0;if((c[h>>2]|0)!=(e|0))Wa();l=k+8|0;if((c[l>>2]|0)==(e|0)){c[h>>2]=k;c[l>>2]=j;B=k;break}else Wa()}while(0);do if(g){j=c[e+28>>2]|0;h=5128+(j<<2)|0;if((e|0)==(c[h>>2]|0)){c[h>>2]=B;if(!B){c[1207]=c[1207]&~(1<<j);break}}else{if(g>>>0<(c[1210]|0)>>>0)Wa();h=g+16|0;if((c[h>>2]|0)==(e|0))c[h>>2]=B;else c[g+20>>2]=B;if(!B)break}h=c[1210]|0;if(B>>>0<h>>>0)Wa();c[B+24>>2]=g;g=c[e+16>>2]|0;do if(g)if(g>>>0<h>>>0)Wa();else{c[B+16>>2]=g;c[g+24>>2]=B;break}while(0);g=c[e+20>>2]|0;if(g)if(g>>>0<(c[1210]|0)>>>0)Wa();else{c[B+20>>2]=g;c[g+24>>2]=B;break}}while(0);if(d>>>0<16){H=d+a|0;c[e+4>>2]=H|3;H=e+(H+4)|0;c[H>>2]=c[H>>2]|1}else{c[e+4>>2]=a|3;c[e+(a|4)>>2]=d|1;c[e+(d+a)>>2]=d;h=c[1208]|0;if(h){g=c[1211]|0;k=h>>>3;l=k<<1;h=4864+(l<<2)|0;j=c[1206]|0;k=1<<k;if(j&k){j=4864+(l+2<<2)|0;k=c[j>>2]|0;if(k>>>0<(c[1210]|0)>>>0)Wa();else{A=j;z=k}}else{c[1206]=j|k;A=4864+(l+2<<2)|0;z=h}c[A>>2]=g;c[z+12>>2]=g;c[g+8>>2]=z;c[g+12>>2]=h}c[1208]=d;c[1211]=f}H=e+8|0;i=b;return H|0}}}else if(a>>>0<=4294967231){z=a+11|0;a=z&-8;B=c[1207]|0;if(B){A=0-a|0;z=z>>>8;if(z)if(a>>>0>16777215)C=31;else{G=(z+1048320|0)>>>16&8;H=z<<G;F=(H+520192|0)>>>16&4;H=H<<F;C=(H+245760|0)>>>16&2;C=14-(F|G|C)+(H<<C>>>15)|0;C=a>>>(C+7|0)&1|C<<1}else C=0;D=c[5128+(C<<2)>>2]|0;a:do if(!D){F=0;z=0}else{if((C|0)==31)z=0;else z=25-(C>>>1)|0;F=0;E=a<<z;z=0;while(1){G=c[D+4>>2]&-8;H=G-a|0;if(H>>>0<A>>>0)if((G|0)==(a|0)){A=H;F=D;z=D;break a}else{A=H;z=D}H=c[D+20>>2]|0;D=c[D+(E>>>31<<2)+16>>2]|0;F=(H|0)==0|(H|0)==(D|0)?F:H;if(!D)break;else E=E<<1}}while(0);if((F|0)==0&(z|0)==0){H=2<<C;B=B&(H|0-H);if(!B)break;H=(B&0-B)+ -1|0;D=H>>>12&16;H=H>>>D;C=H>>>5&8;H=H>>>C;E=H>>>2&4;H=H>>>E;G=H>>>1&2;H=H>>>G;F=H>>>1&1;F=c[5128+((C|D|E|G|F)+(H>>>F)<<2)>>2]|0}if(F)while(1){H=(c[F+4>>2]&-8)-a|0;B=H>>>0<A>>>0;A=B?H:A;z=B?F:z;B=c[F+16>>2]|0;if(B){F=B;continue}F=c[F+20>>2]|0;if(!F)break}if((z|0)!=0?A>>>0<((c[1208]|0)-a|0)>>>0:0){f=c[1210]|0;if(z>>>0<f>>>0)Wa();d=z+a|0;if(z>>>0>=d>>>0)Wa();e=c[z+24>>2]|0;g=c[z+12>>2]|0;do if((g|0)==(z|0)){h=z+20|0;g=c[h>>2]|0;if(!g){h=z+16|0;g=c[h>>2]|0;if(!g){x=0;break}}while(1){j=g+20|0;k=c[j>>2]|0;if(k){g=k;h=j;continue}j=g+16|0;k=c[j>>2]|0;if(!k)break;else{g=k;h=j}}if(h>>>0<f>>>0)Wa();else{c[h>>2]=0;x=g;break}}else{h=c[z+8>>2]|0;if(h>>>0<f>>>0)Wa();j=h+12|0;if((c[j>>2]|0)!=(z|0))Wa();f=g+8|0;if((c[f>>2]|0)==(z|0)){c[j>>2]=g;c[f>>2]=h;x=g;break}else Wa()}while(0);do if(e){f=c[z+28>>2]|0;g=5128+(f<<2)|0;if((z|0)==(c[g>>2]|0)){c[g>>2]=x;if(!x){c[1207]=c[1207]&~(1<<f);break}}else{if(e>>>0<(c[1210]|0)>>>0)Wa();f=e+16|0;if((c[f>>2]|0)==(z|0))c[f>>2]=x;else c[e+20>>2]=x;if(!x)break}f=c[1210]|0;if(x>>>0<f>>>0)Wa();c[x+24>>2]=e;e=c[z+16>>2]|0;do if(e)if(e>>>0<f>>>0)Wa();else{c[x+16>>2]=e;c[e+24>>2]=x;break}while(0);e=c[z+20>>2]|0;if(e)if(e>>>0<(c[1210]|0)>>>0)Wa();else{c[x+20>>2]=e;c[e+24>>2]=x;break}}while(0);b:do if(A>>>0>=16){c[z+4>>2]=a|3;c[z+(a|4)>>2]=A|1;c[z+(A+a)>>2]=A;f=A>>>3;if(A>>>0<256){h=f<<1;e=4864+(h<<2)|0;g=c[1206]|0;f=1<<f;do if(!(g&f)){c[1206]=g|f;w=4864+(h+2<<2)|0;v=e}else{f=4864+(h+2<<2)|0;g=c[f>>2]|0;if(g>>>0>=(c[1210]|0)>>>0){w=f;v=g;break}Wa()}while(0);c[w>>2]=d;c[v+12>>2]=d;c[z+(a+8)>>2]=v;c[z+(a+12)>>2]=e;break}e=A>>>8;if(e)if(A>>>0>16777215)e=31;else{G=(e+1048320|0)>>>16&8;H=e<<G;F=(H+520192|0)>>>16&4;H=H<<F;e=(H+245760|0)>>>16&2;e=14-(F|G|e)+(H<<e>>>15)|0;e=A>>>(e+7|0)&1|e<<1}else e=0;f=5128+(e<<2)|0;c[z+(a+28)>>2]=e;c[z+(a+20)>>2]=0;c[z+(a+16)>>2]=0;g=c[1207]|0;h=1<<e;if(!(g&h)){c[1207]=g|h;c[f>>2]=d;c[z+(a+24)>>2]=f;c[z+(a+12)>>2]=d;c[z+(a+8)>>2]=d;break}h=c[f>>2]|0;if((e|0)==31)e=0;else e=25-(e>>>1)|0;c:do if((c[h+4>>2]&-8|0)!=(A|0)){e=A<<e;while(1){g=h+(e>>>31<<2)+16|0;f=c[g>>2]|0;if(!f)break;if((c[f+4>>2]&-8|0)==(A|0)){p=f;break c}else{e=e<<1;h=f}}if(g>>>0<(c[1210]|0)>>>0)Wa();else{c[g>>2]=d;c[z+(a+24)>>2]=h;c[z+(a+12)>>2]=d;c[z+(a+8)>>2]=d;break b}}else p=h;while(0);f=p+8|0;e=c[f>>2]|0;H=c[1210]|0;if(p>>>0>=H>>>0&e>>>0>=H>>>0){c[e+12>>2]=d;c[f>>2]=d;c[z+(a+8)>>2]=e;c[z+(a+12)>>2]=p;c[z+(a+24)>>2]=0;break}else Wa()}else{H=A+a|0;c[z+4>>2]=H|3;H=z+(H+4)|0;c[H>>2]=c[H>>2]|1}while(0);H=z+8|0;i=b;return H|0}}}else a=-1;while(0);p=c[1208]|0;if(p>>>0>=a>>>0){e=p-a|0;d=c[1211]|0;if(e>>>0>15){c[1211]=d+a;c[1208]=e;c[d+(a+4)>>2]=e|1;c[d+p>>2]=e;c[d+4>>2]=a|3}else{c[1208]=0;c[1211]=0;c[d+4>>2]=p|3;H=d+(p+4)|0;c[H>>2]=c[H>>2]|1}H=d+8|0;i=b;return H|0}p=c[1209]|0;if(p>>>0>a>>>0){G=p-a|0;c[1209]=G;H=c[1212]|0;c[1212]=H+a;c[H+(a+4)>>2]=G|1;c[H+4>>2]=a|3;H=H+8|0;i=b;return H|0}do if(!(c[1324]|0)){p=Ga(30)|0;if(!(p+ -1&p)){c[1326]=p;c[1325]=p;c[1327]=-1;c[1328]=-1;c[1329]=0;c[1317]=0;c[1324]=(Ya(0)|0)&-16^1431655768;break}else Wa()}while(0);x=a+48|0;p=c[1326]|0;w=a+47|0;A=p+w|0;p=0-p|0;v=A&p;if(v>>>0<=a>>>0){H=0;i=b;return H|0}z=c[1316]|0;if((z|0)!=0?(G=c[1314]|0,H=G+v|0,H>>>0<=G>>>0|H>>>0>z>>>0):0){H=0;i=b;return H|0}d:do if(!(c[1317]&4)){B=c[1212]|0;e:do if(B){z=5272|0;while(1){C=c[z>>2]|0;if(C>>>0<=B>>>0?(y=z+4|0,(C+(c[y>>2]|0)|0)>>>0>B>>>0):0)break;z=c[z+8>>2]|0;if(!z){o=181;break e}}if(z){A=A-(c[1209]|0)&p;if(A>>>0<2147483647){p=Aa(A|0)|0;if((p|0)==((c[z>>2]|0)+(c[y>>2]|0)|0)){z=A;o=190}else{z=A;o=191}}else z=0}else o=181}else o=181;while(0);do if((o|0)==181){y=Aa(0)|0;if((y|0)!=(-1|0)){A=y;z=c[1325]|0;p=z+ -1|0;if(!(p&A))z=v;else z=v-A+(p+A&0-z)|0;p=c[1314]|0;A=p+z|0;if(z>>>0>a>>>0&z>>>0<2147483647){H=c[1316]|0;if((H|0)!=0?A>>>0<=p>>>0|A>>>0>H>>>0:0){z=0;break}p=Aa(z|0)|0;if((p|0)==(y|0)){p=y;o=190}else o=191}else z=0}else z=0}while(0);f:do if((o|0)==190){if((p|0)!=(-1|0)){q=z;o=201;break d}}else if((o|0)==191){o=0-z|0;do if((p|0)!=(-1|0)&z>>>0<2147483647&x>>>0>z>>>0?(u=c[1326]|0,u=w-z+u&0-u,u>>>0<2147483647):0)if((Aa(u|0)|0)==(-1|0)){Aa(o|0)|0;z=0;break f}else{z=u+z|0;break}while(0);if((p|0)==(-1|0))z=0;else{q=z;o=201;break d}}while(0);c[1317]=c[1317]|4;o=198}else{z=0;o=198}while(0);if((((o|0)==198?v>>>0<2147483647:0)?(t=Aa(v|0)|0,s=Aa(0)|0,(t|0)!=(-1|0)&(s|0)!=(-1|0)&t>>>0<s>>>0):0)?(r=s-t|0,q=r>>>0>(a+40|0)>>>0,q):0){p=t;q=q?r:z;o=201}if((o|0)==201){r=(c[1314]|0)+q|0;c[1314]=r;if(r>>>0>(c[1315]|0)>>>0)c[1315]=r;r=c[1212]|0;g:do if(r){t=5272|0;while(1){s=c[t>>2]|0;v=t+4|0;w=c[v>>2]|0;if((p|0)==(s+w|0)){o=213;break}u=c[t+8>>2]|0;if(!u)break;else t=u}if(((o|0)==213?(c[t+12>>2]&8|0)==0:0)?r>>>0>=s>>>0&r>>>0<p>>>0:0){c[v>>2]=w+q;d=(c[1209]|0)+q|0;e=r+8|0;if(!(e&7))e=0;else e=0-e&7;H=d-e|0;c[1212]=r+e;c[1209]=H;c[r+(e+4)>>2]=H|1;c[r+(d+4)>>2]=40;c[1213]=c[1328];break}s=c[1210]|0;if(p>>>0<s>>>0){c[1210]=p;s=p}v=p+q|0;t=5272|0;while(1){if((c[t>>2]|0)==(v|0)){o=223;break}u=c[t+8>>2]|0;if(!u)break;else t=u}if((o|0)==223?(c[t+12>>2]&8|0)==0:0){c[t>>2]=p;h=t+4|0;c[h>>2]=(c[h>>2]|0)+q;h=p+8|0;if(!(h&7))h=0;else h=0-h&7;j=p+(q+8)|0;if(!(j&7))n=0;else n=0-j&7;o=p+(n+q)|0;k=h+a|0;j=p+k|0;m=o-(p+h)-a|0;c[p+(h+4)>>2]=a|3;h:do if((o|0)!=(r|0)){if((o|0)==(c[1211]|0)){H=(c[1208]|0)+m|0;c[1208]=H;c[1211]=j;c[p+(k+4)>>2]=H|1;c[p+(H+k)>>2]=H;break}r=q+4|0;u=c[p+(r+n)>>2]|0;if((u&3|0)==1){a=u&-8;t=u>>>3;i:do if(u>>>0>=256){l=c[p+((n|24)+q)>>2]|0;t=c[p+(q+12+n)>>2]|0;do if((t|0)==(o|0)){v=n|16;u=p+(r+v)|0;t=c[u>>2]|0;if(!t){u=p+(v+q)|0;t=c[u>>2]|0;if(!t){g=0;break}}while(1){w=t+20|0;v=c[w>>2]|0;if(v){t=v;u=w;continue}w=t+16|0;v=c[w>>2]|0;if(!v)break;else{t=v;u=w}}if(u>>>0<s>>>0)Wa();else{c[u>>2]=0;g=t;break}}else{u=c[p+((n|8)+q)>>2]|0;if(u>>>0<s>>>0)Wa();v=u+12|0;if((c[v>>2]|0)!=(o|0))Wa();s=t+8|0;if((c[s>>2]|0)==(o|0)){c[v>>2]=t;c[s>>2]=u;g=t;break}else Wa()}while(0);if(!l)break;s=c[p+(q+28+n)>>2]|0;t=5128+(s<<2)|0;do if((o|0)!=(c[t>>2]|0)){if(l>>>0<(c[1210]|0)>>>0)Wa();s=l+16|0;if((c[s>>2]|0)==(o|0))c[s>>2]=g;else c[l+20>>2]=g;if(!g)break i}else{c[t>>2]=g;if(g)break;c[1207]=c[1207]&~(1<<s);break i}while(0);o=c[1210]|0;if(g>>>0<o>>>0)Wa();c[g+24>>2]=l;s=n|16;l=c[p+(s+q)>>2]|0;do if(l)if(l>>>0<o>>>0)Wa();else{c[g+16>>2]=l;c[l+24>>2]=g;break}while(0);l=c[p+(r+s)>>2]|0;if(!l)break;if(l>>>0<(c[1210]|0)>>>0)Wa();else{c[g+20>>2]=l;c[l+24>>2]=g;break}}else{g=c[p+((n|8)+q)>>2]|0;r=c[p+(q+12+n)>>2]|0;u=4864+(t<<1<<2)|0;do if((g|0)!=(u|0)){if(g>>>0<s>>>0)Wa();if((c[g+12>>2]|0)==(o|0))break;Wa()}while(0);if((r|0)==(g|0)){c[1206]=c[1206]&~(1<<t);break}do if((r|0)==(u|0))l=r+8|0;else{if(r>>>0<s>>>0)Wa();s=r+8|0;if((c[s>>2]|0)==(o|0)){l=s;break}Wa()}while(0);c[g+12>>2]=r;c[l>>2]=g}while(0);o=p+((a|n)+q)|0;m=a+m|0}g=o+4|0;c[g>>2]=c[g>>2]&-2;c[p+(k+4)>>2]=m|1;c[p+(m+k)>>2]=m;g=m>>>3;if(m>>>0<256){l=g<<1;d=4864+(l<<2)|0;m=c[1206]|0;g=1<<g;do if(!(m&g)){c[1206]=m|g;f=4864+(l+2<<2)|0;e=d}else{l=4864+(l+2<<2)|0;g=c[l>>2]|0;if(g>>>0>=(c[1210]|0)>>>0){f=l;e=g;break}Wa()}while(0);c[f>>2]=j;c[e+12>>2]=j;c[p+(k+8)>>2]=e;c[p+(k+12)>>2]=d;break}e=m>>>8;do if(!e)e=0;else{if(m>>>0>16777215){e=31;break}G=(e+1048320|0)>>>16&8;H=e<<G;F=(H+520192|0)>>>16&4;H=H<<F;e=(H+245760|0)>>>16&2;e=14-(F|G|e)+(H<<e>>>15)|0;e=m>>>(e+7|0)&1|e<<1}while(0);l=5128+(e<<2)|0;c[p+(k+28)>>2]=e;c[p+(k+20)>>2]=0;c[p+(k+16)>>2]=0;g=c[1207]|0;f=1<<e;if(!(g&f)){c[1207]=g|f;c[l>>2]=j;c[p+(k+24)>>2]=l;c[p+(k+12)>>2]=j;c[p+(k+8)>>2]=j;break}f=c[l>>2]|0;if((e|0)==31)e=0;else e=25-(e>>>1)|0;j:do if((c[f+4>>2]&-8|0)!=(m|0)){e=m<<e;while(1){g=f+(e>>>31<<2)+16|0;l=c[g>>2]|0;if(!l)break;if((c[l+4>>2]&-8|0)==(m|0)){d=l;break j}else{e=e<<1;f=l}}if(g>>>0<(c[1210]|0)>>>0)Wa();else{c[g>>2]=j;c[p+(k+24)>>2]=f;c[p+(k+12)>>2]=j;c[p+(k+8)>>2]=j;break h}}else d=f;while(0);e=d+8|0;f=c[e>>2]|0;H=c[1210]|0;if(d>>>0>=H>>>0&f>>>0>=H>>>0){c[f+12>>2]=j;c[e>>2]=j;c[p+(k+8)>>2]=f;c[p+(k+12)>>2]=d;c[p+(k+24)>>2]=0;break}else Wa()}else{H=(c[1209]|0)+m|0;c[1209]=H;c[1212]=j;c[p+(k+4)>>2]=H|1}while(0);H=p+(h|8)|0;i=b;return H|0}e=5272|0;while(1){d=c[e>>2]|0;if(d>>>0<=r>>>0?(n=c[e+4>>2]|0,m=d+n|0,m>>>0>r>>>0):0)break;e=c[e+8>>2]|0}e=d+(n+ -39)|0;if(!(e&7))e=0;else e=0-e&7;d=d+(n+ -47+e)|0;d=d>>>0<(r+16|0)>>>0?r:d;e=d+8|0;f=p+8|0;if(!(f&7))f=0;else f=0-f&7;H=q+ -40-f|0;c[1212]=p+f;c[1209]=H;c[p+(f+4)>>2]=H|1;c[p+(q+ -36)>>2]=40;c[1213]=c[1328];c[d+4>>2]=27;c[e+0>>2]=c[1318];c[e+4>>2]=c[1319];c[e+8>>2]=c[1320];c[e+12>>2]=c[1321];c[1318]=p;c[1319]=q;c[1321]=0;c[1320]=e;e=d+28|0;c[e>>2]=7;if((d+32|0)>>>0<m>>>0)do{H=e;e=e+4|0;c[e>>2]=7}while((H+8|0)>>>0<m>>>0);if((d|0)!=(r|0)){d=d-r|0;e=r+(d+4)|0;c[e>>2]=c[e>>2]&-2;c[r+4>>2]=d|1;c[r+d>>2]=d;e=d>>>3;if(d>>>0<256){f=e<<1;d=4864+(f<<2)|0;g=c[1206]|0;e=1<<e;do if(!(g&e)){c[1206]=g|e;k=4864+(f+2<<2)|0;j=d}else{f=4864+(f+2<<2)|0;e=c[f>>2]|0;if(e>>>0>=(c[1210]|0)>>>0){k=f;j=e;break}Wa()}while(0);c[k>>2]=r;c[j+12>>2]=r;c[r+8>>2]=j;c[r+12>>2]=d;break}e=d>>>8;if(e)if(d>>>0>16777215)e=31;else{G=(e+1048320|0)>>>16&8;H=e<<G;F=(H+520192|0)>>>16&4;H=H<<F;e=(H+245760|0)>>>16&2;e=14-(F|G|e)+(H<<e>>>15)|0;e=d>>>(e+7|0)&1|e<<1}else e=0;j=5128+(e<<2)|0;c[r+28>>2]=e;c[r+20>>2]=0;c[r+16>>2]=0;f=c[1207]|0;g=1<<e;if(!(f&g)){c[1207]=f|g;c[j>>2]=r;c[r+24>>2]=j;c[r+12>>2]=r;c[r+8>>2]=r;break}f=c[j>>2]|0;if((e|0)==31)e=0;else e=25-(e>>>1)|0;k:do if((c[f+4>>2]&-8|0)!=(d|0)){e=d<<e;j=f;while(1){f=j+(e>>>31<<2)+16|0;g=c[f>>2]|0;if(!g)break;if((c[g+4>>2]&-8|0)==(d|0)){h=g;break k}else{e=e<<1;j=g}}if(f>>>0<(c[1210]|0)>>>0)Wa();else{c[f>>2]=r;c[r+24>>2]=j;c[r+12>>2]=r;c[r+8>>2]=r;break g}}else h=f;while(0);e=h+8|0;d=c[e>>2]|0;H=c[1210]|0;if(h>>>0>=H>>>0&d>>>0>=H>>>0){c[d+12>>2]=r;c[e>>2]=r;c[r+8>>2]=d;c[r+12>>2]=h;c[r+24>>2]=0;break}else Wa()}}else{H=c[1210]|0;if((H|0)==0|p>>>0<H>>>0)c[1210]=p;c[1318]=p;c[1319]=q;c[1321]=0;c[1215]=c[1324];c[1214]=-1;d=0;do{H=d<<1;G=4864+(H<<2)|0;c[4864+(H+3<<2)>>2]=G;c[4864+(H+2<<2)>>2]=G;d=d+1|0}while((d|0)!=32);d=p+8|0;if(!(d&7))d=0;else d=0-d&7;H=q+ -40-d|0;c[1212]=p+d;c[1209]=H;c[p+(d+4)>>2]=H|1;c[p+(q+ -36)>>2]=40;c[1213]=c[1328]}while(0);d=c[1209]|0;if(d>>>0>a>>>0){G=d-a|0;c[1209]=G;H=c[1212]|0;c[1212]=H+a;c[H+(a+4)>>2]=G|1;c[H+4>>2]=a|3;H=H+8|0;i=b;return H|0}}c[(Oa()|0)>>2]=12;H=0;i=b;return H|0}function Td(a){a=a|0;var b=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0;b=i;if(!a){i=b;return}q=a+ -8|0;r=c[1210]|0;if(q>>>0<r>>>0)Wa();n=c[a+ -4>>2]|0;m=n&3;if((m|0)==1)Wa();j=n&-8;h=a+(j+ -8)|0;do if(!(n&1)){u=c[q>>2]|0;if(!m){i=b;return}q=-8-u|0;n=a+q|0;m=u+j|0;if(n>>>0<r>>>0)Wa();if((n|0)==(c[1211]|0)){e=a+(j+ -4)|0;o=c[e>>2]|0;if((o&3|0)!=3){e=n;o=m;break}c[1208]=m;c[e>>2]=o&-2;c[a+(q+4)>>2]=m|1;c[h>>2]=m;i=b;return}t=u>>>3;if(u>>>0<256){e=c[a+(q+8)>>2]|0;o=c[a+(q+12)>>2]|0;p=4864+(t<<1<<2)|0;if((e|0)!=(p|0)){if(e>>>0<r>>>0)Wa();if((c[e+12>>2]|0)!=(n|0))Wa()}if((o|0)==(e|0)){c[1206]=c[1206]&~(1<<t);e=n;o=m;break}if((o|0)!=(p|0)){if(o>>>0<r>>>0)Wa();p=o+8|0;if((c[p>>2]|0)==(n|0))s=p;else Wa()}else s=o+8|0;c[e+12>>2]=o;c[s>>2]=e;e=n;o=m;break}s=c[a+(q+24)>>2]|0;t=c[a+(q+12)>>2]|0;do if((t|0)==(n|0)){u=a+(q+20)|0;t=c[u>>2]|0;if(!t){u=a+(q+16)|0;t=c[u>>2]|0;if(!t){p=0;break}}while(1){v=t+20|0;w=c[v>>2]|0;if(w){t=w;u=v;continue}v=t+16|0;w=c[v>>2]|0;if(!w)break;else{t=w;u=v}}if(u>>>0<r>>>0)Wa();else{c[u>>2]=0;p=t;break}}else{u=c[a+(q+8)>>2]|0;if(u>>>0<r>>>0)Wa();r=u+12|0;if((c[r>>2]|0)!=(n|0))Wa();v=t+8|0;if((c[v>>2]|0)==(n|0)){c[r>>2]=t;c[v>>2]=u;p=t;break}else Wa()}while(0);if(s){r=c[a+(q+28)>>2]|0;t=5128+(r<<2)|0;if((n|0)==(c[t>>2]|0)){c[t>>2]=p;if(!p){c[1207]=c[1207]&~(1<<r);e=n;o=m;break}}else{if(s>>>0<(c[1210]|0)>>>0)Wa();r=s+16|0;if((c[r>>2]|0)==(n|0))c[r>>2]=p;else c[s+20>>2]=p;if(!p){e=n;o=m;break}}r=c[1210]|0;if(p>>>0<r>>>0)Wa();c[p+24>>2]=s;s=c[a+(q+16)>>2]|0;do if(s)if(s>>>0<r>>>0)Wa();else{c[p+16>>2]=s;c[s+24>>2]=p;break}while(0);q=c[a+(q+20)>>2]|0;if(q)if(q>>>0<(c[1210]|0)>>>0)Wa();else{c[p+20>>2]=q;c[q+24>>2]=p;e=n;o=m;break}else{e=n;o=m}}else{e=n;o=m}}else{e=q;o=j}while(0);if(e>>>0>=h>>>0)Wa();m=a+(j+ -4)|0;n=c[m>>2]|0;if(!(n&1))Wa();if(!(n&2)){if((h|0)==(c[1212]|0)){w=(c[1209]|0)+o|0;c[1209]=w;c[1212]=e;c[e+4>>2]=w|1;if((e|0)!=(c[1211]|0)){i=b;return}c[1211]=0;c[1208]=0;i=b;return}if((h|0)==(c[1211]|0)){w=(c[1208]|0)+o|0;c[1208]=w;c[1211]=e;c[e+4>>2]=w|1;c[e+w>>2]=w;i=b;return}o=(n&-8)+o|0;m=n>>>3;do if(n>>>0>=256){l=c[a+(j+16)>>2]|0;m=c[a+(j|4)>>2]|0;do if((m|0)==(h|0)){n=a+(j+12)|0;m=c[n>>2]|0;if(!m){n=a+(j+8)|0;m=c[n>>2]|0;if(!m){k=0;break}}while(1){q=m+20|0;p=c[q>>2]|0;if(p){m=p;n=q;continue}p=m+16|0;q=c[p>>2]|0;if(!q)break;else{m=q;n=p}}if(n>>>0<(c[1210]|0)>>>0)Wa();else{c[n>>2]=0;k=m;break}}else{n=c[a+j>>2]|0;if(n>>>0<(c[1210]|0)>>>0)Wa();p=n+12|0;if((c[p>>2]|0)!=(h|0))Wa();q=m+8|0;if((c[q>>2]|0)==(h|0)){c[p>>2]=m;c[q>>2]=n;k=m;break}else Wa()}while(0);if(l){m=c[a+(j+20)>>2]|0;n=5128+(m<<2)|0;if((h|0)==(c[n>>2]|0)){c[n>>2]=k;if(!k){c[1207]=c[1207]&~(1<<m);break}}else{if(l>>>0<(c[1210]|0)>>>0)Wa();m=l+16|0;if((c[m>>2]|0)==(h|0))c[m>>2]=k;else c[l+20>>2]=k;if(!k)break}h=c[1210]|0;if(k>>>0<h>>>0)Wa();c[k+24>>2]=l;l=c[a+(j+8)>>2]|0;do if(l)if(l>>>0<h>>>0)Wa();else{c[k+16>>2]=l;c[l+24>>2]=k;break}while(0);h=c[a+(j+12)>>2]|0;if(h)if(h>>>0<(c[1210]|0)>>>0)Wa();else{c[k+20>>2]=h;c[h+24>>2]=k;break}}}else{k=c[a+j>>2]|0;j=c[a+(j|4)>>2]|0;a=4864+(m<<1<<2)|0;if((k|0)!=(a|0)){if(k>>>0<(c[1210]|0)>>>0)Wa();if((c[k+12>>2]|0)!=(h|0))Wa()}if((j|0)==(k|0)){c[1206]=c[1206]&~(1<<m);break}if((j|0)!=(a|0)){if(j>>>0<(c[1210]|0)>>>0)Wa();a=j+8|0;if((c[a>>2]|0)==(h|0))l=a;else Wa()}else l=j+8|0;c[k+12>>2]=j;c[l>>2]=k}while(0);c[e+4>>2]=o|1;c[e+o>>2]=o;if((e|0)==(c[1211]|0)){c[1208]=o;i=b;return}}else{c[m>>2]=n&-2;c[e+4>>2]=o|1;c[e+o>>2]=o}h=o>>>3;if(o>>>0<256){j=h<<1;d=4864+(j<<2)|0;k=c[1206]|0;h=1<<h;if(k&h){j=4864+(j+2<<2)|0;h=c[j>>2]|0;if(h>>>0<(c[1210]|0)>>>0)Wa();else{f=j;g=h}}else{c[1206]=k|h;f=4864+(j+2<<2)|0;g=d}c[f>>2]=e;c[g+12>>2]=e;c[e+8>>2]=g;c[e+12>>2]=d;i=b;return}f=o>>>8;if(f)if(o>>>0>16777215)f=31;else{v=(f+1048320|0)>>>16&8;w=f<<v;u=(w+520192|0)>>>16&4;w=w<<u;f=(w+245760|0)>>>16&2;f=14-(u|v|f)+(w<<f>>>15)|0;f=o>>>(f+7|0)&1|f<<1}else f=0;g=5128+(f<<2)|0;c[e+28>>2]=f;c[e+20>>2]=0;c[e+16>>2]=0;j=c[1207]|0;h=1<<f;a:do if(j&h){g=c[g>>2]|0;if((f|0)==31)f=0;else f=25-(f>>>1)|0;b:do if((c[g+4>>2]&-8|0)!=(o|0)){f=o<<f;while(1){j=g+(f>>>31<<2)+16|0;h=c[j>>2]|0;if(!h)break;if((c[h+4>>2]&-8|0)==(o|0)){d=h;break b}else{f=f<<1;g=h}}if(j>>>0<(c[1210]|0)>>>0)Wa();else{c[j>>2]=e;c[e+24>>2]=g;c[e+12>>2]=e;c[e+8>>2]=e;break a}}else d=g;while(0);g=d+8|0;f=c[g>>2]|0;w=c[1210]|0;if(d>>>0>=w>>>0&f>>>0>=w>>>0){c[f+12>>2]=e;c[g>>2]=e;c[e+8>>2]=f;c[e+12>>2]=d;c[e+24>>2]=0;break}else Wa()}else{c[1207]=j|h;c[g>>2]=e;c[e+24>>2]=g;c[e+12>>2]=e;c[e+8>>2]=e}while(0);w=(c[1214]|0)+ -1|0;c[1214]=w;if(!w)d=5280|0;else{i=b;return}while(1){d=c[d>>2]|0;if(!d)break;else d=d+8|0}c[1214]=-1;i=b;return}function Ud(a,b){a=a|0;b=b|0;var d=0,e=0,f=0;d=i;do if(a){if(b>>>0>4294967231){c[(Oa()|0)>>2]=12;e=0;break}if(b>>>0<11)e=16;else e=b+11&-8;e=fe(a+ -8|0,e)|0;if(e){e=e+8|0;break}e=Sd(b)|0;if(!e)e=0;else{f=c[a+ -4>>2]|0;f=(f&-8)-((f&3|0)==0?8:4)|0;pe(e|0,a|0,(f>>>0<b>>>0?f:b)|0)|0;Td(a)}}else e=Sd(b)|0;while(0);i=d;return e|0}function Vd(a){a=a|0;if((a|0)==32)a=1;else a=(a+ -9|0)>>>0<5;return a&1|0}function Wd(b,e,f,g,h){b=b|0;e=e|0;f=f|0;g=g|0;h=h|0;var j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;j=i;if(e>>>0>36){c[(Oa()|0)>>2]=22;s=0;t=0;F=s;i=j;return t|0}k=b+4|0;l=b+100|0;do{m=c[k>>2]|0;if(m>>>0<(c[l>>2]|0)>>>0){c[k>>2]=m+1;o=d[m>>0]|0}else o=Zd(b)|0}while((Vd(o)|0)!=0);do if((o|0)==43|(o|0)==45){m=((o|0)==45)<<31>>31;n=c[k>>2]|0;if(n>>>0<(c[l>>2]|0)>>>0){c[k>>2]=n+1;o=d[n>>0]|0;break}else{o=Zd(b)|0;break}}else m=0;while(0);n=(e|0)==0;do if((e&-17|0)==0&(o|0)==48){o=c[k>>2]|0;if(o>>>0<(c[l>>2]|0)>>>0){c[k>>2]=o+1;o=d[o>>0]|0}else o=Zd(b)|0;if((o|32|0)!=120)if(n){e=8;f=46;break}else{f=32;break}e=c[k>>2]|0;if(e>>>0<(c[l>>2]|0)>>>0){c[k>>2]=e+1;o=d[e>>0]|0}else o=Zd(b)|0;if((d[o+5321>>0]|0)>15){g=(c[l>>2]|0)==0;if(!g)c[k>>2]=(c[k>>2]|0)+ -1;if(!f){Yd(b,0);s=0;t=0;F=s;i=j;return t|0}if(g){s=0;t=0;F=s;i=j;return t|0}c[k>>2]=(c[k>>2]|0)+ -1;s=0;t=0;F=s;i=j;return t|0}else{e=16;f=46}}else{e=n?10:e;if((d[o+5321>>0]|0)>>>0<e>>>0)f=32;else{if(c[l>>2]|0)c[k>>2]=(c[k>>2]|0)+ -1;Yd(b,0);c[(Oa()|0)>>2]=22;s=0;t=0;F=s;i=j;return t|0}}while(0);if((f|0)==32)if((e|0)==10){e=o+ -48|0;if(e>>>0<10){n=0;do{n=(n*10|0)+e|0;e=c[k>>2]|0;if(e>>>0<(c[l>>2]|0)>>>0){c[k>>2]=e+1;o=d[e>>0]|0}else o=Zd(b)|0;e=o+ -48|0}while(e>>>0<10&n>>>0<429496729);p=0}else{n=0;p=0}e=o+ -48|0;if(e>>>0<10){do{q=we(n|0,p|0,10,0)|0;r=F;s=((e|0)<0)<<31>>31;t=~s;if(r>>>0>t>>>0|(r|0)==(t|0)&q>>>0>~e>>>0)break;n=ne(q|0,r|0,e|0,s|0)|0;p=F;e=c[k>>2]|0;if(e>>>0<(c[l>>2]|0)>>>0){c[k>>2]=e+1;o=d[e>>0]|0}else o=Zd(b)|0;e=o+ -48|0}while(e>>>0<10&(p>>>0<429496729|(p|0)==429496729&n>>>0<2576980378));if(e>>>0<=9){e=10;f=72}}}else f=46;a:do if((f|0)==46){if(!(e+ -1&e)){f=a[5584+((e*23|0)>>>5&7)>>0]|0;r=a[o+5321>>0]|0;n=r&255;if(n>>>0<e>>>0){o=n;n=0;do{n=o|n<<f;o=c[k>>2]|0;if(o>>>0<(c[l>>2]|0)>>>0){c[k>>2]=o+1;s=d[o>>0]|0}else s=Zd(b)|0;r=a[s+5321>>0]|0;o=r&255}while(o>>>0<e>>>0&n>>>0<134217728);p=0}else{p=0;n=0;s=o}o=oe(-1,-1,f|0)|0;q=F;if((r&255)>>>0>=e>>>0|(p>>>0>q>>>0|(p|0)==(q|0)&n>>>0>o>>>0)){o=s;f=72;break}while(1){n=le(n|0,p|0,f|0)|0;p=F;n=r&255|n;r=c[k>>2]|0;if(r>>>0<(c[l>>2]|0)>>>0){c[k>>2]=r+1;s=d[r>>0]|0}else s=Zd(b)|0;r=a[s+5321>>0]|0;if((r&255)>>>0>=e>>>0|(p>>>0>q>>>0|(p|0)==(q|0)&n>>>0>o>>>0)){o=s;f=72;break a}}}r=a[o+5321>>0]|0;f=r&255;if(f>>>0<e>>>0){n=0;do{n=f+(ba(n,e)|0)|0;f=c[k>>2]|0;if(f>>>0<(c[l>>2]|0)>>>0){c[k>>2]=f+1;q=d[f>>0]|0}else q=Zd(b)|0;r=a[q+5321>>0]|0;f=r&255}while(f>>>0<e>>>0&n>>>0<119304647);p=0}else{n=0;p=0;q=o}if((r&255)>>>0<e>>>0){f=xe(-1,-1,e|0,0)|0;o=F;while(1){if(p>>>0>o>>>0|(p|0)==(o|0)&n>>>0>f>>>0){o=q;f=72;break a}s=we(n|0,p|0,e|0,0)|0;t=F;r=r&255;if(t>>>0>4294967295|(t|0)==-1&s>>>0>~r>>>0){o=q;f=72;break a}n=ne(r|0,0,s|0,t|0)|0;p=F;q=c[k>>2]|0;if(q>>>0<(c[l>>2]|0)>>>0){c[k>>2]=q+1;q=d[q>>0]|0}else q=Zd(b)|0;r=a[q+5321>>0]|0;if((r&255)>>>0>=e>>>0){o=q;f=72;break}}}else{o=q;f=72}}while(0);if((f|0)==72)if((d[o+5321>>0]|0)>>>0<e>>>0){do{f=c[k>>2]|0;if(f>>>0<(c[l>>2]|0)>>>0){c[k>>2]=f+1;f=d[f>>0]|0}else f=Zd(b)|0}while((d[f+5321>>0]|0)>>>0<e>>>0);c[(Oa()|0)>>2]=34;p=h;n=g}if(c[l>>2]|0)c[k>>2]=(c[k>>2]|0)+ -1;if(!(p>>>0<h>>>0|(p|0)==(h|0)&n>>>0<g>>>0)){if(!((g&1|0)!=0|0!=0|(m|0)!=0)){c[(Oa()|0)>>2]=34;t=ne(g|0,h|0,-1,-1)|0;s=F;F=s;i=j;return t|0}if(p>>>0>h>>>0|(p|0)==(h|0)&n>>>0>g>>>0){c[(Oa()|0)>>2]=34;s=h;t=g;F=s;i=j;return t|0}}t=((m|0)<0)<<31>>31;t=je(n^m|0,p^t|0,m|0,t|0)|0;s=F;F=s;i=j;return t|0}\n\n\n\nfunction Xd(b,e,f){b=b|0;e=e|0;f=f|0;var g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0.0,r=0,s=0,t=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,G=0.0,H=0,I=0.0,J=0.0,K=0.0,L=0.0;g=i;i=i+512|0;k=g;if(!e){e=24;j=-149}else if((e|0)==2){e=53;j=-1074}else if((e|0)==1){e=53;j=-1074}else{J=0.0;i=g;return+J}n=b+4|0;o=b+100|0;do{h=c[n>>2]|0;if(h>>>0<(c[o>>2]|0)>>>0){c[n>>2]=h+1;w=d[h>>0]|0}else w=Zd(b)|0}while((Vd(w)|0)!=0);do if((w|0)==43|(w|0)==45){h=1-(((w|0)==45&1)<<1)|0;m=c[n>>2]|0;if(m>>>0<(c[o>>2]|0)>>>0){c[n>>2]=m+1;w=d[m>>0]|0;break}else{w=Zd(b)|0;break}}else h=1;while(0);r=0;do{if((w|32|0)!=(a[5600+r>>0]|0))break;do if(r>>>0<7){m=c[n>>2]|0;if(m>>>0<(c[o>>2]|0)>>>0){c[n>>2]=m+1;w=d[m>>0]|0;break}else{w=Zd(b)|0;break}}while(0);r=r+1|0}while(r>>>0<8);do if((r|0)==3)p=23;else if((r|0)!=8){m=(f|0)!=0;if(r>>>0>3&m)if((r|0)==8)break;else{p=23;break}a:do if(!r){r=0;do{if((w|32|0)!=(a[5616+r>>0]|0))break a;do if(r>>>0<2){s=c[n>>2]|0;if(s>>>0<(c[o>>2]|0)>>>0){c[n>>2]=s+1;w=d[s>>0]|0;break}else{w=Zd(b)|0;break}}while(0);r=r+1|0}while(r>>>0<3)}while(0);if(!r){do if((w|0)==48){m=c[n>>2]|0;if(m>>>0<(c[o>>2]|0)>>>0){c[n>>2]=m+1;m=d[m>>0]|0}else m=Zd(b)|0;if((m|32|0)!=120){if(!(c[o>>2]|0)){w=48;break}c[n>>2]=(c[n>>2]|0)+ -1;w=48;break}k=c[n>>2]|0;if(k>>>0<(c[o>>2]|0)>>>0){c[n>>2]=k+1;z=d[k>>0]|0;x=0}else{z=Zd(b)|0;x=0}while(1){if((z|0)==46){p=70;break}else if((z|0)!=48){k=0;m=0;s=0;r=0;w=0;y=0;G=1.0;t=0;q=0.0;break}k=c[n>>2]|0;if(k>>>0<(c[o>>2]|0)>>>0){c[n>>2]=k+1;z=d[k>>0]|0;x=1;continue}else{z=Zd(b)|0;x=1;continue}}if((p|0)==70){k=c[n>>2]|0;if(k>>>0<(c[o>>2]|0)>>>0){c[n>>2]=k+1;z=d[k>>0]|0}else z=Zd(b)|0;if((z|0)==48){s=0;r=0;do{k=c[n>>2]|0;if(k>>>0<(c[o>>2]|0)>>>0){c[n>>2]=k+1;z=d[k>>0]|0}else z=Zd(b)|0;s=ne(s|0,r|0,-1,-1)|0;r=F}while((z|0)==48);k=0;m=0;x=1;w=1;y=0;G=1.0;t=0;q=0.0}else{k=0;m=0;s=0;r=0;w=1;y=0;G=1.0;t=0;q=0.0}}b:while(1){B=z+ -48|0;do if(B>>>0>=10){A=z|32;C=(z|0)==46;if(!((A+ -97|0)>>>0<6|C))break b;if(C)if(!w){s=m;r=k;w=1;break}else{z=46;break b}else{B=(z|0)>57?A+ -87|0:B;p=83;break}}else p=83;while(0);if((p|0)==83){p=0;do if(!((k|0)<0|(k|0)==0&m>>>0<8)){if((k|0)<0|(k|0)==0&m>>>0<14){J=G*.0625;I=J;q=q+J*+(B|0);break}if((B|0)==0|(y|0)!=0)I=G;else{y=1;I=G;q=q+G*.5}}else{I=G;t=B+(t<<4)|0}while(0);m=ne(m|0,k|0,1,0)|0;k=F;x=1;G=I}z=c[n>>2]|0;if(z>>>0<(c[o>>2]|0)>>>0){c[n>>2]=z+1;z=d[z>>0]|0;continue}else{z=Zd(b)|0;continue}}if(!x){e=(c[o>>2]|0)==0;if(!e)c[n>>2]=(c[n>>2]|0)+ -1;if(f){if(!e?(l=c[n>>2]|0,c[n>>2]=l+ -1,(w|0)!=0):0)c[n>>2]=l+ -2}else Yd(b,0);J=+(h|0)*0.0;i=g;return+J}p=(w|0)==0;l=p?m:s;p=p?k:r;if((k|0)<0|(k|0)==0&m>>>0<8)do{t=t<<4;m=ne(m|0,k|0,1,0)|0;k=F}while((k|0)<0|(k|0)==0&m>>>0<8);do if((z|32|0)==112){m=he(b,f)|0;k=F;if((m|0)==0&(k|0)==-2147483648)if(!f){Yd(b,0);J=0.0;i=g;return+J}else{if(!(c[o>>2]|0)){m=0;k=0;break}c[n>>2]=(c[n>>2]|0)+ -1;m=0;k=0;break}}else if(!(c[o>>2]|0)){m=0;k=0}else{c[n>>2]=(c[n>>2]|0)+ -1;m=0;k=0}while(0);l=le(l|0,p|0,2)|0;l=ne(l|0,F|0,-32,-1)|0;k=ne(l|0,F|0,m|0,k|0)|0;l=F;if(!t){J=+(h|0)*0.0;i=g;return+J}if((l|0)>0|(l|0)==0&k>>>0>(0-j|0)>>>0){c[(Oa()|0)>>2]=34;J=+(h|0)*1.7976931348623157e+308*1.7976931348623157e+308;i=g;return+J}H=j+ -106|0;E=((H|0)<0)<<31>>31;if((l|0)<(E|0)|(l|0)==(E|0)&k>>>0<H>>>0){c[(Oa()|0)>>2]=34;J=+(h|0)*2.2250738585072014e-308*2.2250738585072014e-308;i=g;return+J}if((t|0)>-1)do{t=t<<1;if(!(q>=.5))G=q;else{G=q+-1.0;t=t|1}q=q+G;k=ne(k|0,l|0,-1,-1)|0;l=F}while((t|0)>-1);j=je(32,0,j|0,((j|0)<0)<<31>>31|0)|0;j=ne(k|0,l|0,j|0,F|0)|0;H=F;if(0>(H|0)|0==(H|0)&e>>>0>j>>>0)if((j|0)<0){e=0;p=126}else{e=j;p=124}else p=124;if((p|0)==124)if((e|0)<53)p=126;else{j=e;G=+(h|0);I=0.0}if((p|0)==126){I=+(h|0);j=e;G=I;I=+Va(+(+_d(1.0,84-e|0)),+I)}H=(j|0)<32&q!=0.0&(t&1|0)==0;q=G*(H?0.0:q)+(I+G*+(((H&1)+t|0)>>>0))-I;if(!(q!=0.0))c[(Oa()|0)>>2]=34;J=+$d(q,k);i=g;return+J}while(0);m=j+e|0;l=0-m|0;B=0;while(1){if((w|0)==46){p=137;break}else if((w|0)!=48){D=0;C=0;A=0;break}r=c[n>>2]|0;if(r>>>0<(c[o>>2]|0)>>>0){c[n>>2]=r+1;w=d[r>>0]|0;B=1;continue}else{w=Zd(b)|0;B=1;continue}}if((p|0)==137){p=c[n>>2]|0;if(p>>>0<(c[o>>2]|0)>>>0){c[n>>2]=p+1;w=d[p>>0]|0}else w=Zd(b)|0;if((w|0)==48){D=0;C=0;do{D=ne(D|0,C|0,-1,-1)|0;C=F;p=c[n>>2]|0;if(p>>>0<(c[o>>2]|0)>>>0){c[n>>2]=p+1;w=d[p>>0]|0}else w=Zd(b)|0}while((w|0)==48);B=1;A=1}else{D=0;C=0;A=1}}c[k>>2]=0;z=w+ -48|0;E=(w|0)==46;c:do if(z>>>0<10|E){p=k+496|0;y=0;x=0;t=0;s=0;r=0;d:while(1){do if(E)if(!A){D=y;C=x;A=1}else break d;else{E=ne(y|0,x|0,1,0)|0;x=F;H=(w|0)!=48;if((s|0)>=125){if(!H){y=E;break}c[p>>2]=c[p>>2]|1;y=E;break}y=k+(s<<2)|0;if(t)z=w+ -48+((c[y>>2]|0)*10|0)|0;c[y>>2]=z;t=t+1|0;z=(t|0)==9;y=E;B=1;t=z?0:t;s=(z&1)+s|0;r=H?E:r}while(0);w=c[n>>2]|0;if(w>>>0<(c[o>>2]|0)>>>0){c[n>>2]=w+1;w=d[w>>0]|0}else w=Zd(b)|0;z=w+ -48|0;E=(w|0)==46;if(!(z>>>0<10|E)){p=160;break c}}z=(B|0)!=0;p=168}else{y=0;x=0;t=0;s=0;r=0;p=160}while(0);do if((p|0)==160){z=(A|0)==0;D=z?y:D;C=z?x:C;z=(B|0)!=0;if(!(z&(w|32|0)==101))if((w|0)>-1){p=168;break}else{p=170;break}z=he(b,f)|0;w=F;do if((z|0)==0&(w|0)==-2147483648)if(!f){Yd(b,0);J=0.0;i=g;return+J}else{if(!(c[o>>2]|0)){z=0;w=0;break}c[n>>2]=(c[n>>2]|0)+ -1;z=0;w=0;break}while(0);b=ne(z|0,w|0,D|0,C|0)|0;C=F}while(0);if((p|0)==168)if(c[o>>2]|0){c[n>>2]=(c[n>>2]|0)+ -1;if(z)b=D;else p=171}else p=170;if((p|0)==170)if(z)b=D;else p=171;if((p|0)==171){c[(Oa()|0)>>2]=22;Yd(b,0);J=0.0;i=g;return+J}n=c[k>>2]|0;if(!n){J=+(h|0)*0.0;i=g;return+J}if((b|0)==(y|0)&(C|0)==(x|0)&((x|0)<0|(x|0)==0&y>>>0<10)?e>>>0>30|(n>>>e|0)==0:0){J=+(h|0)*+(n>>>0);i=g;return+J}H=(j|0)/-2|0;E=((H|0)<0)<<31>>31;if((C|0)>(E|0)|(C|0)==(E|0)&b>>>0>H>>>0){c[(Oa()|0)>>2]=34;J=+(h|0)*1.7976931348623157e+308*1.7976931348623157e+308;i=g;return+J}H=j+ -106|0;E=((H|0)<0)<<31>>31;if((C|0)<(E|0)|(C|0)==(E|0)&b>>>0<H>>>0){c[(Oa()|0)>>2]=34;J=+(h|0)*2.2250738585072014e-308*2.2250738585072014e-308;i=g;return+J}if(t){if((t|0)<9){n=k+(s<<2)|0;o=c[n>>2]|0;do{o=o*10|0;t=t+1|0}while((t|0)!=9);c[n>>2]=o}s=s+1|0}if((r|0)<9?(r|0)<=(b|0)&(b|0)<18:0){if((b|0)==9){J=+(h|0)*+((c[k>>2]|0)>>>0);i=g;return+J}if((b|0)<9){J=+(h|0)*+((c[k>>2]|0)>>>0)/+(c[5632+(8-b<<2)>>2]|0);i=g;return+J}H=e+27+(ba(b,-3)|0)|0;n=c[k>>2]|0;if((H|0)>30|(n>>>H|0)==0){J=+(h|0)*+(n>>>0)*+(c[5632+(b+ -10<<2)>>2]|0);i=g;return+J}}n=(b|0)%9|0;if(!n){n=0;o=0}else{f=(b|0)>-1?n:n+9|0;p=c[5632+(8-f<<2)>>2]|0;if(s){r=1e9/(p|0)|0;n=0;o=0;t=0;do{D=k+(t<<2)|0;E=c[D>>2]|0;H=((E>>>0)/(p>>>0)|0)+o|0;c[D>>2]=H;o=ba((E>>>0)%(p>>>0)|0,r)|0;E=t;t=t+1|0;if((E|0)==(n|0)&(H|0)==0){n=t&127;b=b+ -9|0}}while((t|0)!=(s|0));if(o){c[k+(s<<2)>>2]=o;s=s+1|0}}else{n=0;s=0}o=0;b=9-f+b|0}e:while(1){f=k+(n<<2)|0;if((b|0)<18){do{r=0;f=s+127|0;while(1){f=f&127;p=k+(f<<2)|0;t=le(c[p>>2]|0,0,29)|0;t=ne(t|0,F|0,r|0,0)|0;r=F;if(r>>>0>0|(r|0)==0&t>>>0>1e9){H=xe(t|0,r|0,1e9,0)|0;t=ye(t|0,r|0,1e9,0)|0;r=H}else r=0;c[p>>2]=t;p=(f|0)==(n|0);if(!((f|0)!=(s+127&127|0)|p))s=(t|0)==0?f:s;if(p)break;else f=f+ -1|0}o=o+ -29|0}while((r|0)==0)}else{if((b|0)!=18)break;do{if((c[f>>2]|0)>>>0>=9007199){b=18;break e}r=0;p=s+127|0;while(1){p=p&127;t=k+(p<<2)|0;w=le(c[t>>2]|0,0,29)|0;w=ne(w|0,F|0,r|0,0)|0;r=F;if(r>>>0>0|(r|0)==0&w>>>0>1e9){H=xe(w|0,r|0,1e9,0)|0;w=ye(w|0,r|0,1e9,0)|0;r=H}else r=0;c[t>>2]=w;t=(p|0)==(n|0);if(!((p|0)!=(s+127&127|0)|t))s=(w|0)==0?p:s;if(t)break;else p=p+ -1|0}o=o+ -29|0}while((r|0)==0)}n=n+127&127;if((n|0)==(s|0)){H=s+127&127;s=k+((s+126&127)<<2)|0;c[s>>2]=c[s>>2]|c[k+(H<<2)>>2];s=H}c[k+(n<<2)>>2]=r;b=b+9|0}f:while(1){f=s+1&127;p=k+((s+127&127)<<2)|0;while(1){t=(b|0)==18;r=(b|0)>27?9:1;while(1){w=0;while(1){x=w+n&127;if((x|0)==(s|0)){w=2;break}y=c[k+(x<<2)>>2]|0;z=c[5624+(w<<2)>>2]|0;if(y>>>0<z>>>0){w=2;break}x=w+1|0;if(y>>>0>z>>>0)break;if((x|0)<2)w=x;else{w=x;break}}if((w|0)==2&t)break f;o=r+o|0;if((n|0)==(s|0))n=s;else break}t=(1<<r)+ -1|0;w=1e9>>>r;x=n;y=0;do{D=k+(n<<2)|0;E=c[D>>2]|0;H=(E>>>r)+y|0;c[D>>2]=H;y=ba(E&t,w)|0;H=(n|0)==(x|0)&(H|0)==0;n=n+1&127;b=H?b+ -9|0:b;x=H?n:x}while((n|0)!=(s|0));if(!y){n=x;continue}if((f|0)!=(x|0))break;c[p>>2]=c[p>>2]|1;n=x}c[k+(s<<2)>>2]=y;n=x;s=f}b=n&127;if((b|0)==(s|0)){c[k+(f+ -1<<2)>>2]=0;s=f}G=+((c[k+(b<<2)>>2]|0)>>>0);b=n+1&127;if((b|0)==(s|0)){s=s+1&127;c[k+(s+ -1<<2)>>2]=0}q=+(h|0);I=q*(G*1.0e9+ +((c[k+(b<<2)>>2]|0)>>>0));h=o+53|0;j=h-j|0;if((j|0)<(e|0))if((j|0)<0){e=0;b=1;p=244}else{e=j;b=1;p=243}else{b=0;p=243}if((p|0)==243)if((e|0)<53)p=244;else{G=0.0;J=0.0}if((p|0)==244){L=+Va(+(+_d(1.0,105-e|0)),+I);K=+cb(+I,+(+_d(1.0,53-e|0)));G=L;J=K;I=L+(I-K)}f=n+2&127;do if((f|0)!=(s|0)){k=c[k+(f<<2)>>2]|0;do if(k>>>0>=5e8){if(k>>>0>5e8){J=q*.75+J;break}if((n+3&127|0)==(s|0)){J=q*.5+J;break}else{J=q*.75+J;break}}else{if((k|0)==0?(n+3&127|0)==(s|0):0)break;J=q*.25+J}while(0);if((53-e|0)<=1)break;if(+cb(+J,1.0)!=0.0)break;J=J+1.0}while(0);q=I+J-G;do if((h&2147483647|0)>(-2-m|0)){if(+Q(+q)>=9007199254740992.0){b=(b|0)!=0&(e|0)==(j|0)?0:b;o=o+1|0;q=q*.5}if((o+50|0)<=(l|0)?!((b|0)!=0&J!=0.0):0)break;c[(Oa()|0)>>2]=34}while(0);L=+$d(q,o);i=g;return+L}else if((r|0)==3){e=c[n>>2]|0;if(e>>>0<(c[o>>2]|0)>>>0){c[n>>2]=e+1;e=d[e>>0]|0}else e=Zd(b)|0;if((e|0)==40)e=1;else{if(!(c[o>>2]|0)){L=u;i=g;return+L}c[n>>2]=(c[n>>2]|0)+ -1;L=u;i=g;return+L}while(1){h=c[n>>2]|0;if(h>>>0<(c[o>>2]|0)>>>0){c[n>>2]=h+1;h=d[h>>0]|0}else h=Zd(b)|0;if(!((h+ -48|0)>>>0<10|(h+ -65|0)>>>0<26)?!((h+ -97|0)>>>0<26|(h|0)==95):0)break;e=e+1|0}if((h|0)==41){L=u;i=g;return+L}h=(c[o>>2]|0)==0;if(!h)c[n>>2]=(c[n>>2]|0)+ -1;if(!m){c[(Oa()|0)>>2]=22;Yd(b,0);L=0.0;i=g;return+L}if((e|0)==0|h){L=u;i=g;return+L}do{e=e+ -1|0;c[n>>2]=(c[n>>2]|0)+ -1}while((e|0)!=0);q=u;i=g;return+q}else{if(c[o>>2]|0)c[n>>2]=(c[n>>2]|0)+ -1;c[(Oa()|0)>>2]=22;Yd(b,0);L=0.0;i=g;return+L}}while(0);if((p|0)==23){e=(c[o>>2]|0)==0;if(!e)c[n>>2]=(c[n>>2]|0)+ -1;if(!(r>>>0<4|(f|0)==0|e))do{c[n>>2]=(c[n>>2]|0)+ -1;r=r+ -1|0}while(r>>>0>3)}L=+(h|0)*v;i=g;return+L}function Yd(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0;d=i;c[a+104>>2]=b;f=c[a+8>>2]|0;e=c[a+4>>2]|0;g=f-e|0;c[a+108>>2]=g;if((b|0)!=0&(g|0)>(b|0)){c[a+100>>2]=e+b;i=d;return}else{c[a+100>>2]=f;i=d;return}}function Zd(b){b=b|0;var e=0,f=0,g=0,h=0,j=0,k=0,l=0;f=i;j=b+104|0;l=c[j>>2]|0;if(!((l|0)!=0?(c[b+108>>2]|0)>=(l|0):0))k=3;if((k|0)==3?(e=be(b)|0,(e|0)>=0):0){k=c[j>>2]|0;j=c[b+8>>2]|0;if((k|0)!=0?(g=c[b+4>>2]|0,h=k-(c[b+108>>2]|0)+ -1|0,(j-g|0)>(h|0)):0)c[b+100>>2]=g+h;else c[b+100>>2]=j;g=c[b+4>>2]|0;if(j){l=b+108|0;c[l>>2]=j+1-g+(c[l>>2]|0)}b=g+ -1|0;if((d[b>>0]|0|0)==(e|0)){l=e;i=f;return l|0}a[b>>0]=e;l=e;i=f;return l|0}c[b+100>>2]=0;l=-1;i=f;return l|0}function _d(a,b){a=+a;b=b|0;var d=0,e=0;d=i;if((b|0)>1023){a=a*8.98846567431158e+307;e=b+ -1023|0;if((e|0)>1023){b=b+ -2046|0;b=(b|0)>1023?1023:b;a=a*8.98846567431158e+307}else b=e}else if((b|0)<-1022){a=a*2.2250738585072014e-308;e=b+1022|0;if((e|0)<-1022){b=b+2044|0;b=(b|0)<-1022?-1022:b;a=a*2.2250738585072014e-308}else b=e}b=le(b+1023|0,0,52)|0;e=F;c[k>>2]=b;c[k+4>>2]=e;a=a*+h[k>>3];i=d;return+a}function $d(a,b){a=+a;b=b|0;var c=0;c=i;a=+_d(a,b);i=c;return+a}function ae(b){b=b|0;var d=0,e=0,f=0;e=i;f=b+74|0;d=a[f>>0]|0;a[f>>0]=d+255|d;f=b+20|0;d=b+44|0;if((c[f>>2]|0)>>>0>(c[d>>2]|0)>>>0)eb[c[b+36>>2]&1](b,0,0)|0;c[b+16>>2]=0;c[b+28>>2]=0;c[f>>2]=0;f=c[b>>2]|0;if(!(f&20)){f=c[d>>2]|0;c[b+8>>2]=f;c[b+4>>2]=f;f=0;i=e;return f|0}if(!(f&4)){f=-1;i=e;return f|0}c[b>>2]=f|32;f=-1;i=e;return f|0}function be(a){a=a|0;var b=0,e=0;b=i;i=i+16|0;e=b;if((c[a+8>>2]|0)==0?(ae(a)|0)!=0:0)a=-1;else if((eb[c[a+32>>2]&1](a,e,1)|0)==1)a=d[e>>0]|0;else a=-1;i=b;return a|0}function ce(a,b){a=a|0;b=b|0;var d=0,e=0,f=0.0,g=0,h=0;d=i;i=i+112|0;e=d;h=e+0|0;g=h+112|0;do{c[h>>2]=0;h=h+4|0}while((h|0)<(g|0));g=e+4|0;c[g>>2]=a;h=e+8|0;c[h>>2]=-1;c[e+44>>2]=a;c[e+76>>2]=-1;Yd(e,0);f=+Xd(e,1,1);e=(c[g>>2]|0)-(c[h>>2]|0)+(c[e+108>>2]|0)|0;if(!b){i=d;return+f}if(e)a=a+e|0;c[b>>2]=a;i=d;return+f}function de(a,b,d){a=a|0;b=b|0;d=d|0;var e=0,f=0,g=0;e=i;i=i+112|0;g=e;c[g>>2]=0;f=g+4|0;c[f>>2]=a;c[g+44>>2]=a;if((a|0)<0)c[g+8>>2]=-1;else c[g+8>>2]=a+2147483647;c[g+76>>2]=-1;Yd(g,0);d=Wd(g,d,1,-2147483648,0)|0;if(!b){i=e;return d|0}c[b>>2]=a+((c[f>>2]|0)+(c[g+108>>2]|0)-(c[g+8>>2]|0));i=e;return d|0}function ee(b,c){b=b|0;c=c|0;var d=0,e=0,f=0;d=i;f=a[b>>0]|0;e=a[c>>0]|0;if(f<<24>>24==0?1:f<<24>>24!=e<<24>>24)c=f;else{do{b=b+1|0;c=c+1|0;f=a[b>>0]|0;e=a[c>>0]|0}while(!(f<<24>>24==0?1:f<<24>>24!=e<<24>>24));c=f}i=d;return(c&255)-(e&255)|0}function fe(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;d=i;f=a+4|0;e=c[f>>2]|0;l=e&-8;j=a+l|0;m=c[1210]|0;h=e&3;if(!((h|0)!=1&a>>>0>=m>>>0&a>>>0<j>>>0))Wa();g=a+(l|4)|0;p=c[g>>2]|0;if(!(p&1))Wa();if(!h){if(b>>>0<256){r=0;i=d;return r|0}if(l>>>0>=(b+4|0)>>>0?(l-b|0)>>>0<=c[1326]<<1>>>0:0){r=a;i=d;return r|0}r=0;i=d;return r|0}if(l>>>0>=b>>>0){h=l-b|0;if(h>>>0<=15){r=a;i=d;return r|0}c[f>>2]=e&1|b|2;c[a+(b+4)>>2]=h|3;c[g>>2]=c[g>>2]|1;ge(a+b|0,h);r=a;i=d;return r|0}if((j|0)==(c[1212]|0)){g=(c[1209]|0)+l|0;if(g>>>0<=b>>>0){r=0;i=d;return r|0}r=g-b|0;c[f>>2]=e&1|b|2;c[a+(b+4)>>2]=r|1;c[1212]=a+b;c[1209]=r;r=a;i=d;return r|0}if((j|0)==(c[1211]|0)){h=(c[1208]|0)+l|0;if(h>>>0<b>>>0){r=0;i=d;return r|0}g=h-b|0;if(g>>>0>15){c[f>>2]=e&1|b|2;c[a+(b+4)>>2]=g|1;c[a+h>>2]=g;e=a+(h+4)|0;c[e>>2]=c[e>>2]&-2;e=a+b|0}else{c[f>>2]=e&1|h|2;e=a+(h+4)|0;c[e>>2]=c[e>>2]|1;e=0;g=0}c[1208]=g;c[1211]=e;r=a;i=d;return r|0}if(p&2){r=0;i=d;return r|0}g=(p&-8)+l|0;if(g>>>0<b>>>0){r=0;i=d;return r|0}h=g-b|0;o=p>>>3;do if(p>>>0>=256){n=c[a+(l+24)>>2]|0;o=c[a+(l+12)>>2]|0;do if((o|0)==(j|0)){p=a+(l+20)|0;o=c[p>>2]|0;if(!o){p=a+(l+16)|0;o=c[p>>2]|0;if(!o){k=0;break}}while(1){r=o+20|0;q=c[r>>2]|0;if(q){o=q;p=r;continue}q=o+16|0;r=c[q>>2]|0;if(!r)break;else{o=r;p=q}}if(p>>>0<m>>>0)Wa();else{c[p>>2]=0;k=o;break}}else{p=c[a+(l+8)>>2]|0;if(p>>>0<m>>>0)Wa();m=p+12|0;if((c[m>>2]|0)!=(j|0))Wa();q=o+8|0;if((c[q>>2]|0)==(j|0)){c[m>>2]=o;c[q>>2]=p;k=o;break}else Wa()}while(0);if(n){m=c[a+(l+28)>>2]|0;o=5128+(m<<2)|0;if((j|0)==(c[o>>2]|0)){c[o>>2]=k;if(!k){c[1207]=c[1207]&~(1<<m);break}}else{if(n>>>0<(c[1210]|0)>>>0)Wa();m=n+16|0;if((c[m>>2]|0)==(j|0))c[m>>2]=k;else c[n+20>>2]=k;if(!k)break}j=c[1210]|0;if(k>>>0<j>>>0)Wa();c[k+24>>2]=n;m=c[a+(l+16)>>2]|0;do if(m)if(m>>>0<j>>>0)Wa();else{c[k+16>>2]=m;c[m+24>>2]=k;break}while(0);j=c[a+(l+20)>>2]|0;if(j)if(j>>>0<(c[1210]|0)>>>0)Wa();else{c[k+20>>2]=j;c[j+24>>2]=k;break}}}else{k=c[a+(l+8)>>2]|0;l=c[a+(l+12)>>2]|0;p=4864+(o<<1<<2)|0;if((k|0)!=(p|0)){if(k>>>0<m>>>0)Wa();if((c[k+12>>2]|0)!=(j|0))Wa()}if((l|0)==(k|0)){c[1206]=c[1206]&~(1<<o);break}if((l|0)!=(p|0)){if(l>>>0<m>>>0)Wa();m=l+8|0;if((c[m>>2]|0)==(j|0))n=m;else Wa()}else n=l+8|0;c[k+12>>2]=l;c[n>>2]=k}while(0);if(h>>>0<16){c[f>>2]=g|e&1|2;r=a+(g|4)|0;c[r>>2]=c[r>>2]|1;r=a;i=d;return r|0}else{c[f>>2]=e&1|b|2;c[a+(b+4)>>2]=h|3;r=a+(g|4)|0;c[r>>2]=c[r>>2]|1;ge(a+b|0,h);r=a;i=d;return r|0}return 0}function ge(a,b){a=a|0;b=b|0;var d=0,e=0,f=0,g=0,h=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;d=i;h=a+b|0;l=c[a+4>>2]|0;do if(!(l&1)){p=c[a>>2]|0;if(!(l&3)){i=d;return}l=a+(0-p)|0;m=p+b|0;r=c[1210]|0;if(l>>>0<r>>>0)Wa();if((l|0)==(c[1211]|0)){e=a+(b+4)|0;n=c[e>>2]|0;if((n&3|0)!=3){e=l;n=m;break}c[1208]=m;c[e>>2]=n&-2;c[a+(4-p)>>2]=m|1;c[h>>2]=m;i=d;return}s=p>>>3;if(p>>>0<256){e=c[a+(8-p)>>2]|0;n=c[a+(12-p)>>2]|0;o=4864+(s<<1<<2)|0;if((e|0)!=(o|0)){if(e>>>0<r>>>0)Wa();if((c[e+12>>2]|0)!=(l|0))Wa()}if((n|0)==(e|0)){c[1206]=c[1206]&~(1<<s);e=l;n=m;break}if((n|0)!=(o|0)){if(n>>>0<r>>>0)Wa();o=n+8|0;if((c[o>>2]|0)==(l|0))q=o;else Wa()}else q=n+8|0;c[e+12>>2]=n;c[q>>2]=e;e=l;n=m;break}q=c[a+(24-p)>>2]|0;s=c[a+(12-p)>>2]|0;do if((s|0)==(l|0)){u=16-p|0;t=a+(u+4)|0;s=c[t>>2]|0;if(!s){t=a+u|0;s=c[t>>2]|0;if(!s){o=0;break}}while(1){v=s+20|0;u=c[v>>2]|0;if(u){s=u;t=v;continue}u=s+16|0;v=c[u>>2]|0;if(!v)break;else{s=v;t=u}}if(t>>>0<r>>>0)Wa();else{c[t>>2]=0;o=s;break}}else{t=c[a+(8-p)>>2]|0;if(t>>>0<r>>>0)Wa();r=t+12|0;if((c[r>>2]|0)!=(l|0))Wa();u=s+8|0;if((c[u>>2]|0)==(l|0)){c[r>>2]=s;c[u>>2]=t;o=s;break}else Wa()}while(0);if(q){s=c[a+(28-p)>>2]|0;r=5128+(s<<2)|0;if((l|0)==(c[r>>2]|0)){c[r>>2]=o;if(!o){c[1207]=c[1207]&~(1<<s);e=l;n=m;break}}else{if(q>>>0<(c[1210]|0)>>>0)Wa();r=q+16|0;if((c[r>>2]|0)==(l|0))c[r>>2]=o;else c[q+20>>2]=o;if(!o){e=l;n=m;break}}r=c[1210]|0;if(o>>>0<r>>>0)Wa();c[o+24>>2]=q;p=16-p|0;q=c[a+p>>2]|0;do if(q)if(q>>>0<r>>>0)Wa();else{c[o+16>>2]=q;c[q+24>>2]=o;break}while(0);p=c[a+(p+4)>>2]|0;if(p)if(p>>>0<(c[1210]|0)>>>0)Wa();else{c[o+20>>2]=p;c[p+24>>2]=o;e=l;n=m;break}else{e=l;n=m}}else{e=l;n=m}}else{e=a;n=b}while(0);l=c[1210]|0;if(h>>>0<l>>>0)Wa();m=a+(b+4)|0;o=c[m>>2]|0;if(!(o&2)){if((h|0)==(c[1212]|0)){v=(c[1209]|0)+n|0;c[1209]=v;c[1212]=e;c[e+4>>2]=v|1;if((e|0)!=(c[1211]|0)){i=d;return}c[1211]=0;c[1208]=0;i=d;return}if((h|0)==(c[1211]|0)){v=(c[1208]|0)+n|0;c[1208]=v;c[1211]=e;c[e+4>>2]=v|1;c[e+v>>2]=v;i=d;return}n=(o&-8)+n|0;m=o>>>3;do if(o>>>0>=256){k=c[a+(b+24)>>2]|0;o=c[a+(b+12)>>2]|0;do if((o|0)==(h|0)){o=a+(b+20)|0;m=c[o>>2]|0;if(!m){o=a+(b+16)|0;m=c[o>>2]|0;if(!m){j=0;break}}while(1){p=m+20|0;q=c[p>>2]|0;if(q){m=q;o=p;continue}q=m+16|0;p=c[q>>2]|0;if(!p)break;else{m=p;o=q}}if(o>>>0<l>>>0)Wa();else{c[o>>2]=0;j=m;break}}else{m=c[a+(b+8)>>2]|0;if(m>>>0<l>>>0)Wa();p=m+12|0;if((c[p>>2]|0)!=(h|0))Wa();l=o+8|0;if((c[l>>2]|0)==(h|0)){c[p>>2]=o;c[l>>2]=m;j=o;break}else Wa()}while(0);if(k){m=c[a+(b+28)>>2]|0;l=5128+(m<<2)|0;if((h|0)==(c[l>>2]|0)){c[l>>2]=j;if(!j){c[1207]=c[1207]&~(1<<m);break}}else{if(k>>>0<(c[1210]|0)>>>0)Wa();l=k+16|0;if((c[l>>2]|0)==(h|0))c[l>>2]=j;else c[k+20>>2]=j;if(!j)break}h=c[1210]|0;if(j>>>0<h>>>0)Wa();c[j+24>>2]=k;k=c[a+(b+16)>>2]|0;do if(k)if(k>>>0<h>>>0)Wa();else{c[j+16>>2]=k;c[k+24>>2]=j;break}while(0);h=c[a+(b+20)>>2]|0;if(h)if(h>>>0<(c[1210]|0)>>>0)Wa();else{c[j+20>>2]=h;c[h+24>>2]=j;break}}}else{j=c[a+(b+8)>>2]|0;a=c[a+(b+12)>>2]|0;b=4864+(m<<1<<2)|0;if((j|0)!=(b|0)){if(j>>>0<l>>>0)Wa();if((c[j+12>>2]|0)!=(h|0))Wa()}if((a|0)==(j|0)){c[1206]=c[1206]&~(1<<m);break}if((a|0)!=(b|0)){if(a>>>0<l>>>0)Wa();b=a+8|0;if((c[b>>2]|0)==(h|0))k=b;else Wa()}else k=a+8|0;c[j+12>>2]=a;c[k>>2]=j}while(0);c[e+4>>2]=n|1;c[e+n>>2]=n;if((e|0)==(c[1211]|0)){c[1208]=n;i=d;return}}else{c[m>>2]=o&-2;c[e+4>>2]=n|1;c[e+n>>2]=n}b=n>>>3;if(n>>>0<256){a=b<<1;h=4864+(a<<2)|0;j=c[1206]|0;b=1<<b;if(j&b){a=4864+(a+2<<2)|0;j=c[a>>2]|0;if(j>>>0<(c[1210]|0)>>>0)Wa();else{g=a;f=j}}else{c[1206]=j|b;g=4864+(a+2<<2)|0;f=h}c[g>>2]=e;c[f+12>>2]=e;c[e+8>>2]=f;c[e+12>>2]=h;i=d;return}f=n>>>8;if(f)if(n>>>0>16777215)f=31;else{u=(f+1048320|0)>>>16&8;v=f<<u;t=(v+520192|0)>>>16&4;v=v<<t;f=(v+245760|0)>>>16&2;f=14-(t|u|f)+(v<<f>>>15)|0;f=n>>>(f+7|0)&1|f<<1}else f=0;g=5128+(f<<2)|0;c[e+28>>2]=f;c[e+20>>2]=0;c[e+16>>2]=0;a=c[1207]|0;h=1<<f;if(!(a&h)){c[1207]=a|h;c[g>>2]=e;c[e+24>>2]=g;c[e+12>>2]=e;c[e+8>>2]=e;i=d;return}g=c[g>>2]|0;if((f|0)==31)f=0;else f=25-(f>>>1)|0;a:do if((c[g+4>>2]&-8|0)!=(n|0)){f=n<<f;a=g;while(1){h=a+(f>>>31<<2)+16|0;g=c[h>>2]|0;if(!g)break;if((c[g+4>>2]&-8|0)==(n|0))break a;else{f=f<<1;a=g}}if(h>>>0<(c[1210]|0)>>>0)Wa();c[h>>2]=e;c[e+24>>2]=a;c[e+12>>2]=e;c[e+8>>2]=e;i=d;return}while(0);f=g+8|0;h=c[f>>2]|0;v=c[1210]|0;if(!(g>>>0>=v>>>0&h>>>0>=v>>>0))Wa();c[h+12>>2]=e;c[f>>2]=e;c[e+8>>2]=h;c[e+12>>2]=g;c[e+24>>2]=0;i=d;return}function he(a,b){a=a|0;b=b|0;var e=0,f=0,g=0,h=0,j=0,k=0;e=i;g=a+4|0;h=c[g>>2]|0;f=a+100|0;if(h>>>0<(c[f>>2]|0)>>>0){c[g>>2]=h+1;j=d[h>>0]|0}else j=Zd(a)|0;if((j|0)==43|(j|0)==45){k=c[g>>2]|0;h=(j|0)==45&1;if(k>>>0<(c[f>>2]|0)>>>0){c[g>>2]=k+1;j=d[k>>0]|0}else j=Zd(a)|0;if((j+ -48|0)>>>0>9&(b|0)!=0?(c[f>>2]|0)!=0:0)c[g>>2]=(c[g>>2]|0)+ -1}else h=0;if((j+ -48|0)>>>0>9){if(!(c[f>>2]|0)){j=-2147483648;k=0;F=j;i=e;return k|0}c[g>>2]=(c[g>>2]|0)+ -1;j=-2147483648;k=0;F=j;i=e;return k|0}else b=0;do{b=j+ -48+(b*10|0)|0;j=c[g>>2]|0;if(j>>>0<(c[f>>2]|0)>>>0){c[g>>2]=j+1;j=d[j>>0]|0}else j=Zd(a)|0}while((j+ -48|0)>>>0<10&(b|0)<214748364);k=((b|0)<0)<<31>>31;if((j+ -48|0)>>>0<10)do{k=we(b|0,k|0,10,0)|0;b=F;j=ne(j|0,((j|0)<0)<<31>>31|0,-48,-1)|0;b=ne(j|0,F|0,k|0,b|0)|0;k=F;j=c[g>>2]|0;if(j>>>0<(c[f>>2]|0)>>>0){c[g>>2]=j+1;j=d[j>>0]|0}else j=Zd(a)|0}while((j+ -48|0)>>>0<10&((k|0)<21474836|(k|0)==21474836&b>>>0<2061584302));if((j+ -48|0)>>>0<10)do{j=c[g>>2]|0;if(j>>>0<(c[f>>2]|0)>>>0){c[g>>2]=j+1;j=d[j>>0]|0}else j=Zd(a)|0}while((j+ -48|0)>>>0<10);if(c[f>>2]|0)c[g>>2]=(c[g>>2]|0)+ -1;g=(h|0)!=0;h=je(0,0,b|0,k|0)|0;j=g?F:k;k=g?h:b;F=j;i=e;return k|0}function ie(){}function je(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;b=b-d-(c>>>0>a>>>0|0)>>>0;return(F=b,a-c>>>0|0)|0}function ke(b,d,e){b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,i=0;f=b+e|0;if((e|0)>=20){d=d&255;i=b&3;h=d|d<<8|d<<16|d<<24;g=f&~3;if(i){i=b+4-i|0;while((b|0)<(i|0)){a[b>>0]=d;b=b+1|0}}while((b|0)<(g|0)){c[b>>2]=h;b=b+4|0}}while((b|0)<(f|0)){a[b>>0]=d;b=b+1|0}return b-e|0}function le(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){F=b<<c|(a&(1<<c)-1<<32-c)>>>32-c;return a<<c}F=a<<c-32;return 0}function me(b){b=b|0;var c=0;c=b;while(a[c>>0]|0)c=c+1|0;return c-b|0}function ne(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;c=a+c>>>0;return(F=b+d+(c>>>0<a>>>0|0)>>>0,c|0)|0}function oe(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){F=b>>>c;return a>>>c|(b&(1<<c)-1)<<32-c}F=0;return b>>>c-32|0}function pe(b,d,e){b=b|0;d=d|0;e=e|0;var f=0;if((e|0)>=4096)return Ca(b|0,d|0,e|0)|0;f=b|0;if((b&3)==(d&3)){while(b&3){if(!e)return f|0;a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}while((e|0)>=4){c[b>>2]=c[d>>2];b=b+4|0;d=d+4|0;e=e-4|0}}while((e|0)>0){a[b>>0]=a[d>>0]|0;b=b+1|0;d=d+1|0;e=e-1|0}return f|0}function qe(a,b,c){a=a|0;b=b|0;c=c|0;if((c|0)<32){F=b>>c;return a>>>c|(b&(1<<c)-1)<<32-c}F=(b|0)<0?-1:0;return b>>c-32|0}function re(b){b=b|0;var c=0;c=a[n+(b>>>24)>>0]|0;if((c|0)<8)return c|0;c=a[n+(b>>16&255)>>0]|0;if((c|0)<8)return c+8|0;c=a[n+(b>>8&255)>>0]|0;if((c|0)<8)return c+16|0;return(a[n+(b&255)>>0]|0)+24|0}function se(b){b=b|0;var c=0;c=a[m+(b&255)>>0]|0;if((c|0)<8)return c|0;c=a[m+(b>>8&255)>>0]|0;if((c|0)<8)return c+8|0;c=a[m+(b>>16&255)>>0]|0;if((c|0)<8)return c+16|0;return(a[m+(b>>>24)>>0]|0)+24|0}function te(a,b){a=a|0;b=b|0;var c=0,d=0,e=0,f=0;f=a&65535;d=b&65535;c=ba(d,f)|0;e=a>>>16;d=(c>>>16)+(ba(d,e)|0)|0;b=b>>>16;a=ba(b,f)|0;return(F=(d>>>16)+(ba(b,e)|0)+(((d&65535)+a|0)>>>16)|0,d+a<<16|c&65535|0)|0}function ue(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0,g=0,h=0,i=0,j=0;j=b>>31|((b|0)<0?-1:0)<<1;i=((b|0)<0?-1:0)>>31|((b|0)<0?-1:0)<<1;f=d>>31|((d|0)<0?-1:0)<<1;e=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1;h=je(j^a,i^b,j,i)|0;g=F;b=f^j;a=e^i;a=je((ze(h,g,je(f^c,e^d,f,e)|0,F,0)|0)^b,F^a,b,a)|0;return a|0}function ve(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0,h=0,j=0,k=0,l=0;f=i;i=i+8|0;j=f|0;h=b>>31|((b|0)<0?-1:0)<<1;g=((b|0)<0?-1:0)>>31|((b|0)<0?-1:0)<<1;l=e>>31|((e|0)<0?-1:0)<<1;k=((e|0)<0?-1:0)>>31|((e|0)<0?-1:0)<<1;b=je(h^a,g^b,h,g)|0;a=F;ze(b,a,je(l^d,k^e,l,k)|0,F,j)|0;a=je(c[j>>2]^h,c[j+4>>2]^g,h,g)|0;b=F;i=f;return(F=b,a)|0}function we(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0,f=0;e=a;f=c;a=te(e,f)|0;c=F;return(F=(ba(b,f)|0)+(ba(d,e)|0)+c|c&0,a|0|0)|0}function xe(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;a=ze(a,b,c,d,0)|0;return a|0}function ye(a,b,d,e){a=a|0;b=b|0;d=d|0;e=e|0;var f=0,g=0;g=i;i=i+8|0;f=g|0;ze(a,b,d,e,f)|0;i=g;return(F=c[f+4>>2]|0,c[f>>2]|0)|0}function ze(a,b,d,e,f){a=a|0;b=b|0;d=d|0;e=e|0;f=f|0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;h=a;j=b;i=j;l=d;g=e;k=g;if(!i){g=(f|0)!=0;if(!k){if(g){c[f>>2]=(h>>>0)%(l>>>0);c[f+4>>2]=0}k=0;m=(h>>>0)/(l>>>0)>>>0;return(F=k,m)|0}else{if(!g){l=0;m=0;return(F=l,m)|0}c[f>>2]=a|0;c[f+4>>2]=b&0;l=0;m=0;return(F=l,m)|0}}m=(k|0)==0;do if(l){if(!m){k=(re(k|0)|0)-(re(i|0)|0)|0;if(k>>>0<=31){m=k+1|0;l=31-k|0;a=k-31>>31;j=m;b=h>>>(m>>>0)&a|i<<l;a=i>>>(m>>>0)&a;k=0;l=h<<l;break}if(!f){l=0;m=0;return(F=l,m)|0}c[f>>2]=a|0;c[f+4>>2]=j|b&0;l=0;m=0;return(F=l,m)|0}k=l-1|0;if(k&l){l=(re(l|0)|0)+33-(re(i|0)|0)|0;p=64-l|0;m=32-l|0;n=m>>31;o=l-32|0;a=o>>31;j=l;b=m-1>>31&i>>>(o>>>0)|(i<<m|h>>>(l>>>0))&a;a=a&i>>>(l>>>0);k=h<<p&n;l=(i<<p|h>>>(o>>>0))&n|h<<m&l-33>>31;break}if(f){c[f>>2]=k&h;c[f+4>>2]=0}if((l|0)==1){o=j|b&0;p=a|0|0;return(F=o,p)|0}else{p=se(l|0)|0;o=i>>>(p>>>0)|0;p=i<<32-p|h>>>(p>>>0)|0;return(F=o,p)|0}}else{if(m){if(f){c[f>>2]=(i>>>0)%(l>>>0);c[f+4>>2]=0}o=0;p=(i>>>0)/(l>>>0)>>>0;return(F=o,p)|0}if(!h){if(f){c[f>>2]=0;c[f+4>>2]=(i>>>0)%(k>>>0)}o=0;p=(i>>>0)/(k>>>0)>>>0;return(F=o,p)|0}l=k-1|0;if(!(l&k)){if(f){c[f>>2]=a|0;c[f+4>>2]=l&i|b&0}o=0;p=i>>>((se(k|0)|0)>>>0);return(F=o,p)|0}k=(re(k|0)|0)-(re(i|0)|0)|0;if(k>>>0<=30){a=k+1|0;l=31-k|0;j=a;b=i<<l|h>>>(a>>>0);a=i>>>(a>>>0);k=0;l=h<<l;break}if(!f){o=0;p=0;return(F=o,p)|0}c[f>>2]=a|0;c[f+4>>2]=j|b&0;o=0;p=0;return(F=o,p)|0}while(0);if(!j){g=l;e=0;i=0}else{h=d|0|0;g=g|e&0;e=ne(h,g,-1,-1)|0;d=F;i=0;do{m=l;l=k>>>31|l<<1;k=i|k<<1;m=b<<1|m>>>31|0;n=b>>>31|a<<1|0;je(e,d,m,n)|0;p=F;o=p>>31|((p|0)<0?-1:0)<<1;i=o&1;b=je(m,n,o&h,(((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1)&g)|0;a=F;j=j-1|0}while((j|0)!=0);g=l;e=0}h=0;if(f){c[f>>2]=b;c[f+4>>2]=a}o=(k|0)>>>31|(g|h)<<1|(h<<1|k>>>31)&0|e;p=(k<<1|0>>>31)&-2|i;return(F=o,p)|0}function Ae(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;return eb[a&1](b|0,c|0,d|0)|0}function Be(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;fb[a&3](b|0,c|0,d|0,e|0,f|0)}function Ce(a,b){a=a|0;b=b|0;gb[a&31](b|0)}function De(a,b,c){a=a|0;b=b|0;c=c|0;hb[a&3](b|0,c|0)}function Ee(a,b){a=a|0;b=b|0;return ib[a&1](b|0)|0}function Fe(a){a=a|0;jb[a&3]()}function Ge(a,b,c,d,e,f,g){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;g=g|0;kb[a&3](b|0,c|0,d|0,e|0,f|0,g|0)}function He(a,b,c){a=a|0;b=b|0;c=c|0;return lb[a&3](b|0,c|0)|0}function Ie(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;mb[a&3](b|0,c|0,d|0,e|0)}function Je(a,b,c){a=a|0;b=b|0;c=c|0;ca(0);return 0}function Ke(a,b,c,d,e){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;ca(1)}function Le(a){a=a|0;ca(2)}function Me(a,b){a=a|0;b=b|0;ca(3)}function Ne(a){a=a|0;ca(4);return 0}function Oe(){ca(5)}function Pe(){bb()}function Qe(a,b,c,d,e,f){a=a|0;b=b|0;c=c|0;d=d|0;e=e|0;f=f|0;ca(6)}function Re(a,b){a=a|0;b=b|0;ca(7);return 0}function Se(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;ca(8)}\n\n\n\n\n// EMSCRIPTEN_END_FUNCS\n// (start of meteor/midamble.js)\n// This \"midamble\" is hacked into the output JS in a place\n// where it has access to the inner function generated\n// by Emscripten, the one that starts with \"use asm\".\n// NOTE: This doesn't work with minification on!\n/////setInnerMalloc = function (hookedMalloc) {\n/////  _malloc = hookedMalloc;\n/////};\n/////setInnerFree = function (hookedFree) {\n/////  _free = hookedFree;\n/////};\n// (end of meteor/midamble.js)\nvar eb=[Je,Dd];var fb=[Ke,Kd,Jd,Ke];var gb=[Le,wb,yb,Ab,Db,Ib,Hb,bc,dc,zc,yc,Oc,rd,qd,yd,Bd,zd,Ad,Cd,zb,Rd,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le,Le];var hb=[Me,Cb,Fb,fc];var ib=[Ne,sd];var jb=[Oe,Pe,Pd,Qd];var kb=[Qe,Md,Ld,Qe];var lb=[Re,Bb,Eb,ec];var mb=[Se,Fd,Gd,Se];return{_yo:$c,_strlen:me,_retireVar:id,_bitshift64Lshr:oe,_unyo:ad,_solve:ed,_bitshift64Shl:le,_getSolution:fd,___cxa_is_pointer_type:Od,_memset:ke,_getNumVars:gd,_memcpy:pe,_getConflictClauseSize:jd,_addClause:dd,_i64Subtract:je,_createTheSolver:bd,_realloc:Ud,_i64Add:ne,_solveAssuming:hd,___cxa_can_catch:Nd,_ensureVar:cd,_getConflictClause:kd,_free:Td,_malloc:Sd,__GLOBAL__I_a:cc,__GLOBAL__I_a127:Pc,runPostSets:ie,stackAlloc:nb,stackSave:ob,stackRestore:pb,setThrew:qb,setTempRet0:tb,getTempRet0:ub,dynCall_iiii:Ae,dynCall_viiiii:Be,dynCall_vi:Ce,dynCall_vii:De,dynCall_ii:Ee,dynCall_v:Fe,dynCall_viiiiii:Ge,dynCall_iii:He,dynCall_viiii:Ie}})\n\n\n// EMSCRIPTEN_END_ASM\n(Module.asmGlobalArg,Module.asmLibraryArg,buffer);var _yo=Module[\"_yo\"]=asm[\"_yo\"];var _strlen=Module[\"_strlen\"]=asm[\"_strlen\"];var _retireVar=Module[\"_retireVar\"]=asm[\"_retireVar\"];var _bitshift64Lshr=Module[\"_bitshift64Lshr\"]=asm[\"_bitshift64Lshr\"];var _unyo=Module[\"_unyo\"]=asm[\"_unyo\"];var _solve=Module[\"_solve\"]=asm[\"_solve\"];var _bitshift64Shl=Module[\"_bitshift64Shl\"]=asm[\"_bitshift64Shl\"];var _getSolution=Module[\"_getSolution\"]=asm[\"_getSolution\"];var ___cxa_is_pointer_type=Module[\"___cxa_is_pointer_type\"]=asm[\"___cxa_is_pointer_type\"];var _memset=Module[\"_memset\"]=asm[\"_memset\"];var _getNumVars=Module[\"_getNumVars\"]=asm[\"_getNumVars\"];var _memcpy=Module[\"_memcpy\"]=asm[\"_memcpy\"];var _getConflictClauseSize=Module[\"_getConflictClauseSize\"]=asm[\"_getConflictClauseSize\"];var _addClause=Module[\"_addClause\"]=asm[\"_addClause\"];var _i64Subtract=Module[\"_i64Subtract\"]=asm[\"_i64Subtract\"];var _createTheSolver=Module[\"_createTheSolver\"]=asm[\"_createTheSolver\"];var _realloc=Module[\"_realloc\"]=asm[\"_realloc\"];var _i64Add=Module[\"_i64Add\"]=asm[\"_i64Add\"];var _solveAssuming=Module[\"_solveAssuming\"]=asm[\"_solveAssuming\"];var ___cxa_can_catch=Module[\"___cxa_can_catch\"]=asm[\"___cxa_can_catch\"];var _ensureVar=Module[\"_ensureVar\"]=asm[\"_ensureVar\"];var _getConflictClause=Module[\"_getConflictClause\"]=asm[\"_getConflictClause\"];var _free=Module[\"_free\"]=asm[\"_free\"];var _malloc=Module[\"_malloc\"]=asm[\"_malloc\"];var __GLOBAL__I_a=Module[\"__GLOBAL__I_a\"]=asm[\"__GLOBAL__I_a\"];var __GLOBAL__I_a127=Module[\"__GLOBAL__I_a127\"]=asm[\"__GLOBAL__I_a127\"];var runPostSets=Module[\"runPostSets\"]=asm[\"runPostSets\"];var dynCall_iiii=Module[\"dynCall_iiii\"]=asm[\"dynCall_iiii\"];var dynCall_viiiii=Module[\"dynCall_viiiii\"]=asm[\"dynCall_viiiii\"];var dynCall_vi=Module[\"dynCall_vi\"]=asm[\"dynCall_vi\"];var dynCall_vii=Module[\"dynCall_vii\"]=asm[\"dynCall_vii\"];var dynCall_ii=Module[\"dynCall_ii\"]=asm[\"dynCall_ii\"];var dynCall_v=Module[\"dynCall_v\"]=asm[\"dynCall_v\"];var dynCall_viiiiii=Module[\"dynCall_viiiiii\"]=asm[\"dynCall_viiiiii\"];var dynCall_iii=Module[\"dynCall_iii\"]=asm[\"dynCall_iii\"];var dynCall_viiii=Module[\"dynCall_viiii\"]=asm[\"dynCall_viiii\"];Runtime.stackAlloc=asm[\"stackAlloc\"];Runtime.stackSave=asm[\"stackSave\"];Runtime.stackRestore=asm[\"stackRestore\"];Runtime.setTempRet0=asm[\"setTempRet0\"];Runtime.getTempRet0=asm[\"getTempRet0\"];var i64Math=(function(){var goog={math:{}};goog.math.Long=(function(low,high){this.low_=low|0;this.high_=high|0});goog.math.Long.IntCache_={};goog.math.Long.fromInt=(function(value){if(-128<=value&&value<128){var cachedObj=goog.math.Long.IntCache_[value];if(cachedObj){return cachedObj}}var obj=new goog.math.Long(value|0,value<0?-1:0);if(-128<=value&&value<128){goog.math.Long.IntCache_[value]=obj}return obj});goog.math.Long.fromNumber=(function(value){if(isNaN(value)||!isFinite(value)){return goog.math.Long.ZERO}else if(value<=-goog.math.Long.TWO_PWR_63_DBL_){return goog.math.Long.MIN_VALUE}else if(value+1>=goog.math.Long.TWO_PWR_63_DBL_){return goog.math.Long.MAX_VALUE}else if(value<0){return goog.math.Long.fromNumber(-value).negate()}else{return new goog.math.Long(value%goog.math.Long.TWO_PWR_32_DBL_|0,value/goog.math.Long.TWO_PWR_32_DBL_|0)}});goog.math.Long.fromBits=(function(lowBits,highBits){return new goog.math.Long(lowBits,highBits)});goog.math.Long.fromString=(function(str,opt_radix){if(str.length==0){throw Error(\"number format error: empty string\")}var radix=opt_radix||10;if(radix<2||36<radix){throw Error(\"radix out of range: \"+radix)}if(str.charAt(0)==\"-\"){return goog.math.Long.fromString(str.substring(1),radix).negate()}else if(str.indexOf(\"-\")>=0){throw Error('number format error: interior \"-\" character: '+str)}var radixToPower=goog.math.Long.fromNumber(Math.pow(radix,8));var result=goog.math.Long.ZERO;for(var i=0;i<str.length;i+=8){var size=Math.min(8,str.length-i);var value=parseInt(str.substring(i,i+size),radix);if(size<8){var power=goog.math.Long.fromNumber(Math.pow(radix,size));result=result.multiply(power).add(goog.math.Long.fromNumber(value))}else{result=result.multiply(radixToPower);result=result.add(goog.math.Long.fromNumber(value))}}return result});goog.math.Long.TWO_PWR_16_DBL_=1<<16;goog.math.Long.TWO_PWR_24_DBL_=1<<24;goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_;goog.math.Long.TWO_PWR_31_DBL_=goog.math.Long.TWO_PWR_32_DBL_/2;goog.math.Long.TWO_PWR_48_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_16_DBL_;goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_;goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2;goog.math.Long.ZERO=goog.math.Long.fromInt(0);goog.math.Long.ONE=goog.math.Long.fromInt(1);goog.math.Long.NEG_ONE=goog.math.Long.fromInt(-1);goog.math.Long.MAX_VALUE=goog.math.Long.fromBits(4294967295|0,2147483647|0);goog.math.Long.MIN_VALUE=goog.math.Long.fromBits(0,2147483648|0);goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(1<<24);goog.math.Long.prototype.toInt=(function(){return this.low_});goog.math.Long.prototype.toNumber=(function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()});goog.math.Long.prototype.toString=(function(opt_radix){var radix=opt_radix||10;if(radix<2||36<radix){throw Error(\"radix out of range: \"+radix)}if(this.isZero()){return\"0\"}if(this.isNegative()){if(this.equals(goog.math.Long.MIN_VALUE)){var radixLong=goog.math.Long.fromNumber(radix);var div=this.div(radixLong);var rem=div.multiply(radixLong).subtract(this);return div.toString(radix)+rem.toInt().toString(radix)}else{return\"-\"+this.negate().toString(radix)}}var radixToPower=goog.math.Long.fromNumber(Math.pow(radix,6));var rem=this;var result=\"\";while(true){var remDiv=rem.div(radixToPower);var intval=rem.subtract(remDiv.multiply(radixToPower)).toInt();var digits=intval.toString(radix);rem=remDiv;if(rem.isZero()){return digits+result}else{while(digits.length<6){digits=\"0\"+digits}result=\"\"+digits+result}}});goog.math.Long.prototype.getHighBits=(function(){return this.high_});goog.math.Long.prototype.getLowBits=(function(){return this.low_});goog.math.Long.prototype.getLowBitsUnsigned=(function(){return this.low_>=0?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_});goog.math.Long.prototype.getNumBitsAbs=(function(){if(this.isNegative()){if(this.equals(goog.math.Long.MIN_VALUE)){return 64}else{return this.negate().getNumBitsAbs()}}else{var val=this.high_!=0?this.high_:this.low_;for(var bit=31;bit>0;bit--){if((val&1<<bit)!=0){break}}return this.high_!=0?bit+33:bit+1}});goog.math.Long.prototype.isZero=(function(){return this.high_==0&&this.low_==0});goog.math.Long.prototype.isNegative=(function(){return this.high_<0});goog.math.Long.prototype.isOdd=(function(){return(this.low_&1)==1});goog.math.Long.prototype.equals=(function(other){return this.high_==other.high_&&this.low_==other.low_});goog.math.Long.prototype.notEquals=(function(other){return this.high_!=other.high_||this.low_!=other.low_});goog.math.Long.prototype.lessThan=(function(other){return this.compare(other)<0});goog.math.Long.prototype.lessThanOrEqual=(function(other){return this.compare(other)<=0});goog.math.Long.prototype.greaterThan=(function(other){return this.compare(other)>0});goog.math.Long.prototype.greaterThanOrEqual=(function(other){return this.compare(other)>=0});goog.math.Long.prototype.compare=(function(other){if(this.equals(other)){return 0}var thisNeg=this.isNegative();var otherNeg=other.isNegative();if(thisNeg&&!otherNeg){return-1}if(!thisNeg&&otherNeg){return 1}if(this.subtract(other).isNegative()){return-1}else{return 1}});goog.math.Long.prototype.negate=(function(){if(this.equals(goog.math.Long.MIN_VALUE)){return goog.math.Long.MIN_VALUE}else{return this.not().add(goog.math.Long.ONE)}});goog.math.Long.prototype.add=(function(other){var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00+b00;c16+=c00>>>16;c00&=65535;c16+=a16+b16;c32+=c16>>>16;c16&=65535;c32+=a32+b32;c48+=c32>>>16;c32&=65535;c48+=a48+b48;c48&=65535;return goog.math.Long.fromBits(c16<<16|c00,c48<<16|c32)});goog.math.Long.prototype.subtract=(function(other){return this.add(other.negate())});goog.math.Long.prototype.multiply=(function(other){if(this.isZero()){return goog.math.Long.ZERO}else if(other.isZero()){return goog.math.Long.ZERO}if(this.equals(goog.math.Long.MIN_VALUE)){return other.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO}else if(other.equals(goog.math.Long.MIN_VALUE)){return this.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().multiply(other.negate())}else{return this.negate().multiply(other).negate()}}else if(other.isNegative()){return this.multiply(other.negate()).negate()}if(this.lessThan(goog.math.Long.TWO_PWR_24_)&&other.lessThan(goog.math.Long.TWO_PWR_24_)){return goog.math.Long.fromNumber(this.toNumber()*other.toNumber())}var a48=this.high_>>>16;var a32=this.high_&65535;var a16=this.low_>>>16;var a00=this.low_&65535;var b48=other.high_>>>16;var b32=other.high_&65535;var b16=other.low_>>>16;var b00=other.low_&65535;var c48=0,c32=0,c16=0,c00=0;c00+=a00*b00;c16+=c00>>>16;c00&=65535;c16+=a16*b00;c32+=c16>>>16;c16&=65535;c16+=a00*b16;c32+=c16>>>16;c16&=65535;c32+=a32*b00;c48+=c32>>>16;c32&=65535;c32+=a16*b16;c48+=c32>>>16;c32&=65535;c32+=a00*b32;c48+=c32>>>16;c32&=65535;c48+=a48*b00+a32*b16+a16*b32+a00*b48;c48&=65535;return goog.math.Long.fromBits(c16<<16|c00,c48<<16|c32)});goog.math.Long.prototype.div=(function(other){if(other.isZero()){throw Error(\"division by zero\")}else if(this.isZero()){return goog.math.Long.ZERO}if(this.equals(goog.math.Long.MIN_VALUE)){if(other.equals(goog.math.Long.ONE)||other.equals(goog.math.Long.NEG_ONE)){return goog.math.Long.MIN_VALUE}else if(other.equals(goog.math.Long.MIN_VALUE)){return goog.math.Long.ONE}else{var halfThis=this.shiftRight(1);var approx=halfThis.div(other).shiftLeft(1);if(approx.equals(goog.math.Long.ZERO)){return other.isNegative()?goog.math.Long.ONE:goog.math.Long.NEG_ONE}else{var rem=this.subtract(other.multiply(approx));var result=approx.add(rem.div(other));return result}}}else if(other.equals(goog.math.Long.MIN_VALUE)){return goog.math.Long.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().div(other.negate())}else{return this.negate().div(other).negate()}}else if(other.isNegative()){return this.div(other.negate()).negate()}var res=goog.math.Long.ZERO;var rem=this;while(rem.greaterThanOrEqual(other)){var approx=Math.max(1,Math.floor(rem.toNumber()/other.toNumber()));var log2=Math.ceil(Math.log(approx)/Math.LN2);var delta=log2<=48?1:Math.pow(2,log2-48);var approxRes=goog.math.Long.fromNumber(approx);var approxRem=approxRes.multiply(other);while(approxRem.isNegative()||approxRem.greaterThan(rem)){approx-=delta;approxRes=goog.math.Long.fromNumber(approx);approxRem=approxRes.multiply(other)}if(approxRes.isZero()){approxRes=goog.math.Long.ONE}res=res.add(approxRes);rem=rem.subtract(approxRem)}return res});goog.math.Long.prototype.modulo=(function(other){return this.subtract(this.div(other).multiply(other))});goog.math.Long.prototype.not=(function(){return goog.math.Long.fromBits(~this.low_,~this.high_)});goog.math.Long.prototype.and=(function(other){return goog.math.Long.fromBits(this.low_&other.low_,this.high_&other.high_)});goog.math.Long.prototype.or=(function(other){return goog.math.Long.fromBits(this.low_|other.low_,this.high_|other.high_)});goog.math.Long.prototype.xor=(function(other){return goog.math.Long.fromBits(this.low_^other.low_,this.high_^other.high_)});goog.math.Long.prototype.shiftLeft=(function(numBits){numBits&=63;if(numBits==0){return this}else{var low=this.low_;if(numBits<32){var high=this.high_;return goog.math.Long.fromBits(low<<numBits,high<<numBits|low>>>32-numBits)}else{return goog.math.Long.fromBits(0,low<<numBits-32)}}});goog.math.Long.prototype.shiftRight=(function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return goog.math.Long.fromBits(low>>>numBits|high<<32-numBits,high>>numBits)}else{return goog.math.Long.fromBits(high>>numBits-32,high>=0?0:-1)}}});goog.math.Long.prototype.shiftRightUnsigned=(function(numBits){numBits&=63;if(numBits==0){return this}else{var high=this.high_;if(numBits<32){var low=this.low_;return goog.math.Long.fromBits(low>>>numBits|high<<32-numBits,high>>>numBits)}else if(numBits==32){return goog.math.Long.fromBits(high,0)}else{return goog.math.Long.fromBits(high>>>numBits-32,0)}}});var navigator={appName:\"Modern Browser\"};var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if(\"number\"==typeof a)this.fromNumber(a,b,c);else if(b==null&&\"string\"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&navigator.appName==\"Microsoft Internet Explorer\"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!=\"Netscape\"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM=\"0123456789abcdefghijklmnopqrstuvwxyz\";var BI_RC=new Array;var rr,vv;rr=\"0\".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr=\"a\".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr=\"A\".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)==\"-\")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return\"-\"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r=\"\",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:\"0\"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)==\"-\"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return\"0\";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r=\"\";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.addTo=bnpAddTo;var Wrapper={abs:(function(l,h){var x=new goog.math.Long(l,h);var ret;if(x.isNegative()){ret=x.negate()}else{ret=x}HEAP32[tempDoublePtr>>2]=ret.low_;HEAP32[tempDoublePtr+4>>2]=ret.high_}),ensureTemps:(function(){if(Wrapper.ensuredTemps)return;Wrapper.ensuredTemps=true;Wrapper.two32=new BigInteger;Wrapper.two32.fromString(\"4294967296\",10);Wrapper.two64=new BigInteger;Wrapper.two64.fromString(\"18446744073709551616\",10);Wrapper.temp1=new BigInteger;Wrapper.temp2=new BigInteger}),lh2bignum:(function(l,h){var a=new BigInteger;a.fromString(h.toString(),10);var b=new BigInteger;a.multiplyTo(Wrapper.two32,b);var c=new BigInteger;c.fromString(l.toString(),10);var d=new BigInteger;c.addTo(b,d);return d}),stringify:(function(l,h,unsigned){var ret=(new goog.math.Long(l,h)).toString();if(unsigned&&ret[0]==\"-\"){Wrapper.ensureTemps();var bignum=new BigInteger;bignum.fromString(ret,10);ret=new BigInteger;Wrapper.two64.addTo(bignum,ret);ret=ret.toString(10)}return ret}),fromString:(function(str,base,min,max,unsigned){Wrapper.ensureTemps();var bignum=new BigInteger;bignum.fromString(str,base);var bigmin=new BigInteger;bigmin.fromString(min,10);var bigmax=new BigInteger;bigmax.fromString(max,10);if(unsigned&&bignum.compareTo(BigInteger.ZERO)<0){var temp=new BigInteger;bignum.addTo(Wrapper.two64,temp);bignum=temp}var error=false;if(bignum.compareTo(bigmin)<0){bignum=bigmin;error=true}else if(bignum.compareTo(bigmax)>0){bignum=bigmax;error=true}var ret=goog.math.Long.fromString(bignum.toString());HEAP32[tempDoublePtr>>2]=ret.low_;HEAP32[tempDoublePtr+4>>2]=ret.high_;if(error)throw\"range error\"})};return Wrapper})();if(memoryInitializer){if(typeof Module[\"locateFile\"]===\"function\"){memoryInitializer=Module[\"locateFile\"](memoryInitializer)}else if(Module[\"memoryInitializerPrefixURL\"]){memoryInitializer=Module[\"memoryInitializerPrefixURL\"]+memoryInitializer}if(ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module[\"readBinary\"](memoryInitializer);HEAPU8.set(data,STATIC_BASE)}else{addRunDependency(\"memory initializer\");Browser.asyncLoad(memoryInitializer,(function(data){HEAPU8.set(data,STATIC_BASE);removeRunDependency(\"memory initializer\")}),(function(data){throw\"could not load memory initializer \"+memoryInitializer}))}}function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}ExitStatus.prototype=new Error;ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;var preloadStartTime=null;var calledMain=false;dependenciesFulfilled=function runCaller(){if(!Module[\"calledRun\"]&&shouldRunNow)run();if(!Module[\"calledRun\"])dependenciesFulfilled=runCaller};Module[\"callMain\"]=Module.callMain=function callMain(args){assert(runDependencies==0,\"cannot call main when async dependencies remain! (listen on __ATMAIN__)\");assert(__ATPRERUN__.length==0,\"cannot call main when preRun functions remain to be called\");args=args||[];ensureInitRuntime();var argc=args.length+1;function pad(){for(var i=0;i<4-1;i++){argv.push(0)}}var argv=[allocate(intArrayFromString(Module[\"thisProgram\"]),\"i8\",ALLOC_NORMAL)];pad();for(var i=0;i<argc-1;i=i+1){argv.push(allocate(intArrayFromString(args[i]),\"i8\",ALLOC_NORMAL));pad()}argv.push(0);argv=allocate(argv,\"i32\",ALLOC_NORMAL);initialStackTop=STACKTOP;try{var ret=Module[\"_main\"](argc,argv,0);exit(ret)}catch(e){if(e instanceof ExitStatus){return}else if(e==\"SimulateInfiniteLoop\"){Module[\"noExitRuntime\"]=true;return}else{if(e&&typeof e===\"object\"&&e.stack)Module.printErr(\"exception thrown: \"+[e,e.stack]);throw e}}finally{calledMain=true}};function run(args){args=args||Module[\"arguments\"];if(preloadStartTime===null)preloadStartTime=Date.now();if(runDependencies>0){return}preRun();if(runDependencies>0)return;if(Module[\"calledRun\"])return;function doRun(){if(Module[\"calledRun\"])return;Module[\"calledRun\"]=true;if(ABORT)return;ensureInitRuntime();preMain();if(ENVIRONMENT_IS_WEB&&preloadStartTime!==null){Module.printErr(\"pre-main prep time: \"+(Date.now()-preloadStartTime)+\" ms\")}if(Module[\"_main\"]&&shouldRunNow){Module[\"callMain\"](args)}postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout((function(){setTimeout((function(){Module[\"setStatus\"](\"\")}),1);doRun()}),1)}else{doRun()}}Module[\"run\"]=Module.run=run;function exit(status){if(Module[\"noExitRuntime\"]){return}ABORT=true;EXITSTATUS=status;STACKTOP=initialStackTop;exitRuntime();if(ENVIRONMENT_IS_NODE){process[\"stdout\"][\"once\"](\"drain\",(function(){process[\"exit\"](status)}));console.log(\" \");setTimeout((function(){process[\"exit\"](status)}),500)}else if(ENVIRONMENT_IS_SHELL&&typeof quit===\"function\"){quit(status)}throw new ExitStatus(status)}Module[\"exit\"]=Module.exit=exit;function abort(text){if(text){Module.print(text);Module.printErr(text)}ABORT=true;EXITSTATUS=1;var extra=\"\\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.\";throw\"abort() at \"+stackTrace()+extra}Module[\"abort\"]=Module.abort=abort;if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}var shouldRunNow=true;if(Module[\"noInitialRun\"]){shouldRunNow=false}run();var origMalloc=Module._malloc;var origFree=Module._free;var MEMSTATS={totalMemory:Module.HEAPU8.length,heapUsed:0};var MEMSTATS_DATA={pointerToSizeMap:{},getSizeOfPointer:(function(ptr){return MEMSTATS_DATA.pointerToSizeMap[ptr]})};Module.MEMSTATS=MEMSTATS;Module.MEMSTATS_DATA=MEMSTATS_DATA;var hookedMalloc=(function(size){var ptr=origMalloc(size);if(!ptr){return 0}MEMSTATS.heapUsed+=size;MEMSTATS_DATA.pointerToSizeMap[ptr]=size;return ptr});var hookedFree=(function(ptr){if(ptr){MEMSTATS.heapUsed-=MEMSTATS_DATA.getSizeOfPointer(ptr)||0;delete MEMSTATS_DATA.pointerToSizeMap[ptr]}return origFree(ptr)});Module._malloc=hookedMalloc;Module._free=hookedFree;_malloc=hookedMalloc;_free=hookedFree;var setInnerMalloc,setInnerFree;if(setInnerMalloc){setInnerMalloc(hookedMalloc);setInnerFree(hookedFree)}return module.exports});if(typeof module!==\"undefined\"){module.exports=C_MINISAT}\n\n\n\n\n","import { StructureDescription, Layout, Placement } from './complex-embedder'\nimport { TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { StructureComponent, RegionComponent, RegionsType } from '../components/region'\nimport { AssetType } from '../assets/assets'\nimport { Random } from '../random'\nimport { directions, oppositeOf } from '../spatial/direction'\nimport { Vector } from '../spatial'\nimport { retry } from './retry'\nimport { shapeOfAsset, createAssetFromShape } from '../components/asset'\nimport { WorldMap } from '../resources/world-map'\nimport { features } from '../assets/features'\nimport { ItemBaseType } from '../assets/items'\nimport { InventoryComponent, createEntityWithItemComponent } from '../components/items'\nimport { Rectangle } from '../geometry/rectangle'\nimport { placeCharacter } from '../component-reducers/place-character'\nimport { CharacterCreator } from '../assets/characters'\n\ntype AssetPlacements = { [key in Placement]: AssetType[] }\nexport function fill(world: TlbWorld, map: WorldMap, level: number, entity: Entity, random: Random, description: StructureDescription) {\n  const structure = world.getComponent<StructureComponent>(entity, 'structure')!\n  const region = world.getComponent<RegionComponent>(structure.region, 'region')!\n\n  const sampledContainers: AssetPlacements = { center: [], wall: [], random: [] }\n  description.containers.forEach(c => {\n    sampledContainers[c.placement].push(...sampleSpawn(random, c))\n  })\n  const containers: Entity[] = placeAssets(world, map, level, random, sampledContainers, structure.shape.bounds())\n\n  const sampledDecorations: AssetPlacements = { center: [], wall: [], random: [] }\n  description.decorations.forEach(c => {\n    sampledDecorations[c.placement].push(...sampleSpawn(random, c))\n  })\n  placeAssets(world, map, level, random, sampledDecorations, structure.shape.bounds())\n\n  const sampledItems: ItemBaseType[] = []\n  description.loots.forEach(l => sampledItems.push(...sampleSpawn(random, l)))\n\n  const sampledCharacters: CharacterCreator[] = []\n  description.npcs.forEach(l => sampledCharacters.push(...sampleSpawn(random, l)))\n  placeCharacterRandomly(world, map, level, random, region.type, sampledCharacters, structure.shape.bounds())\n\n  if (containers.length > 0) {\n    const createdItems: Entity[] = sampledItems.map(i => createEntityWithItemComponent(world, i, random, region.type))\n    createdItems.forEach(item => {\n      const container = random.pick(containers)\n      world.getComponent<InventoryComponent>(container, 'inventory')!.content.push(item)\n    })\n  }\n}\n\nfunction sampleSpawn<S>(random: Random, layout: Layout<S>): S[] {\n  const amount = random.integerBetween(layout.occurrence.minimum, layout.occurrence.maximum)\n  const result: S[] = []\n  for (let i = 0; i < amount; i++) {\n    result.push(random.pick(layout.types))\n  }\n  return result\n}\n\nfunction placeAssets(\n  world: TlbWorld,\n  map: WorldMap,\n  level: number,\n  random: Random,\n  placements: AssetPlacements,\n  bounds: Rectangle\n): Entity[] {\n  return [\n    ...placeAssetAtWalls(world, map, level, random, placements.wall, bounds),\n    ...placeAssetRandomly(world, map, level, random, placements.random, bounds),\n    ...placeAssetCentered(world, map, level, random, placements.center, bounds),\n  ]\n}\n\nfunction placeAssetAtWalls(\n  world: TlbWorld,\n  map: WorldMap,\n  level: number,\n  random: Random,\n  assets: AssetType[],\n  bounds: Rectangle\n): Entity[] {\n  const placedAssets: Entity[] = []\n  retry(random, assets, a => {\n    const direction = random.pick(directions)\n    const directionIntoRoom = oppositeOf(direction)\n    const center = bounds.centerOf(direction)\n    const h = Math.floor(bounds.height / 2)\n    const offset = Vector.fromDirection(direction)\n      .perpendicular()\n      .mult(random.integerBetween(-h, h))\n    const p = center.add(offset)\n    const shape = shapeOfAsset(a, p, directionIntoRoom)\n    const isFree = shape.all(p =>\n      map.levels[level].tileMatches(world, p, t => t !== undefined && (t.feature() === features.room || t.feature() === features.corridor))\n    )\n    if (isFree) {\n      placedAssets.push(createAssetFromShape(world, random, level, shape, a))\n    }\n    return isFree\n  })\n  return placedAssets\n}\n\nfunction placeAssetRandomly(\n  world: TlbWorld,\n  map: WorldMap,\n  level: number,\n  random: Random,\n  assets: AssetType[],\n  bounds: Rectangle\n): Entity[] {\n  const placedAssets: Entity[] = []\n  retry(random, assets, a => {\n    const direction = random.pick(directions)\n    const position = new Vector([random.integerBetween(bounds.left, bounds.right), random.integerBetween(bounds.top, bounds.bottom)])\n    const shape = shapeOfAsset(a, position, direction)\n    const isFree = shape.all(p => canPlace(world, map, level, p))\n    if (isFree) {\n      placedAssets.push(createAssetFromShape(world, random, level, shape, a))\n    }\n    return isFree\n  })\n  return placedAssets\n}\n\nfunction placeAssetCentered(\n  world: TlbWorld,\n  map: WorldMap,\n  level: number,\n  random: Random,\n  assets: AssetType[],\n  bounds: Rectangle\n): Entity[] {\n  const placedAssets: Entity[] = []\n  retry(random, assets, a => {\n    const direction = random.pick(directions)\n    const position = bounds.center\n    const shape = shapeOfAsset(a, position, direction)\n    const isFree = shape.all(p => canPlace(world, map, level, p))\n    if (isFree) {\n      placedAssets.push(createAssetFromShape(world, random, level, shape, a))\n    }\n    return isFree\n  })\n  return placedAssets\n}\n\nfunction placeCharacterRandomly(\n  world: TlbWorld,\n  map: WorldMap,\n  level: number,\n  random: Random,\n  region: RegionsType,\n  characters: CharacterCreator[],\n  bounds: Rectangle\n): Entity[] {\n  const placedCharacters: Entity[] = []\n  retry(random, characters, creator => {\n    const position = new Vector([random.integerBetween(bounds.left, bounds.right), random.integerBetween(bounds.top, bounds.bottom)])\n    const isFree = canPlace(world, map, level, position)\n    if (isFree) {\n      const character = creator(world, random, region, {})\n      placeCharacter(world, character, level, position)\n      placedCharacters.push(character)\n    }\n    return isFree\n  })\n  return placedCharacters\n}\n\nfunction canPlace(world: TlbWorld, map: WorldMap, level: number, position: Vector): boolean {\n  return map.levels[level].tileMatches(world, position, t => t !== undefined && t.feature().ground)\n}\n","import { Entity } from '../ecs/entity'\nimport { PositionComponent, centeredPosition } from '../components/position'\nimport { TlbWorld } from '../tlb'\nimport { WorldMapResource } from '../resources/world-map'\nimport { Vector } from '../spatial'\n\nexport function placeCharacter(world: TlbWorld, entity: Entity, level: number, position: Vector): void {\n  const map = world.getResource<WorldMapResource>('map')\n  map.levels[level].setCharacter(position, entity)\n  world.editEntity(entity).withComponent<PositionComponent>('position', centeredPosition(level, position))\n}\n","import { Vector } from '../spatial'\n\nexport interface PositionComponent {\n  level: number\n  position: Vector\n}\n\nexport function centeredPosition(level: number, position: Vector): PositionComponent {\n  return { level, position: position.center }\n}\n","import { Shape } from '../geometry/shape'\nimport { Distribution } from '../random/distributions'\nimport { Vector } from '../spatial'\nimport { Random } from '../random'\n\nimport { Partitioner, Partition } from './partitioners/Partitioner'\nimport * as partitioners from './partitioners'\n\nexport class SpacePartitioner {\n  private random: Random\n  private partitioners: Partitioner[]\n\n  public constructor(rng: Distribution) {\n    this.random = new Random(rng)\n    this.partitioners = [new partitioners.NoSplit(10)]\n  }\n\n  public registerPartitioner(partitioner: Partitioner): void {\n    this.partitioners.push(partitioner)\n  }\n\n  public partition(shape: Shape, exits: Vector[]): Partition {\n    const partitioners = this.partitioners.filter(p => p.canPartition(shape, exits) && p.weight > 0)\n    let partitioner: Partitioner = this.partitioners[0]\n    if (partitioners.length > 0) {\n      const decision = this.random.weightedDecision(partitioners.map(p => p.weight))\n      partitioner = partitioners[decision]\n    }\n    return partitioner.partition(this, this.random, shape, exits)\n  }\n\n  public createRoom(shape: Shape, exits: Vector[]): Partition {\n    return { type: 'final', shape, exits, kind: 'room' }\n  }\n  public createCorridor(shape: Shape, exits: Vector[]): Partition {\n    return { type: 'final', shape, exits, kind: 'corridor' }\n  }\n  public exitConnectsShape(shape: Shape, exit: Vector): boolean {\n    return shape\n      .bounds()\n      .grow()\n      .containsVector(exit)\n  }\n}\n","import { Partitioner, Partition } from './Partitioner'\n\nimport { SpacePartitioner } from '../space-partitioner'\nimport { Shape } from '../../geometry/shape'\nimport { Vector } from '../../spatial'\nimport { Axis } from '../../spatial/axis'\nimport { Random } from '../../random'\nimport { Rectangle } from '../../geometry/rectangle'\n\nexport class CorridorSplit implements Partitioner {\n  public constructor(private readonly corridorWidth: number, private readonly maxRoomWidth: number) {}\n\n  public weight = 20\n\n  public canPartition(shape: Shape, exits: Vector[]): boolean {\n    const exit = exits[0]\n    const bounds = shape.bounds().grow()\n    const axis: Axis = bounds.top === exit.y || bounds.bottom === exit.y ? 'x' : 'y'\n    const minimalSideLength = Math.min(bounds.width, bounds.height)\n    const minimalSplitSidelength =\n      axis === 'x' ? Math.min(exit.x - bounds.left, bounds.right - exit.x) : Math.min(exit.y - bounds.top, bounds.bottom - exit.y)\n    const axisIsSplittable = minimalSplitSidelength > this.maxRoomWidth + Math.ceil(this.corridorWidth / 2)\n    return axisIsSplittable && minimalSideLength > this.maxRoomWidth\n  }\n\n  public partition(context: SpacePartitioner, random: Random, shape: Shape, exits: Vector[]): Partition {\n    const [head, ...tail] = exits\n    const bounds = shape.bounds()\n    const axis: Axis = bounds.grow().top === head.y || bounds.grow().bottom === head.y ? 'x' : 'y'\n    const split = axis === 'x' ? head.x - bounds.left : head.y - bounds.top\n    const [left, middle, right] = this.split(bounds, axis, split - Math.ceil(this.corridorWidth / 2), this.corridorWidth)\n\n    const yOffset = Vector.fromDirection('down').mult(4)\n    const xOffset = Vector.fromDirection('right').mult(4)\n    const leftExit =\n      axis === 'x'\n        ? random.betweenVectors(left.grow().topRight.add(yOffset), left.grow().bottomRight.minus(yOffset))\n        : random.betweenVectors(left.grow().bottomLeft.add(xOffset), left.grow().bottomRight.minus(xOffset))\n    const rightExit =\n      axis === 'x'\n        ? random.betweenVectors(right.grow().topLeft.add(yOffset), right.grow().bottomLeft.minus(yOffset))\n        : random.betweenVectors(right.grow().topLeft.add(xOffset), right.grow().topRight.minus(xOffset))\n    const leftTail = tail.filter(e => context.exitConnectsShape(left, e))\n    const rightTail = tail.filter(e => context.exitConnectsShape(right, e))\n    return {\n      shape,\n      type: 'node',\n      exit: 1,\n      partitions: [\n        context.partition(left, [leftExit, ...leftTail]),\n        context.createCorridor(middle, exits),\n        context.partition(right, [rightExit, ...rightTail]),\n      ],\n      connections: [\n        { from: 0, to: 1 },\n        { from: 1, to: 2 },\n      ],\n    }\n  }\n\n  private split(r: Rectangle, axis: Axis, split: number, width: number): [Rectangle, Rectangle, Rectangle] {\n    let a: Rectangle\n    let b: Rectangle\n    let c: Rectangle\n    if (axis === 'x') {\n      a = Rectangle.fromBounds(r.left, r.left + split - 1, r.top, r.bottom)\n      b = Rectangle.fromBounds(a.right + 2, a.right + 1 + width, r.top, r.bottom)\n      c = Rectangle.fromBounds(b.right + 2, r.right, r.top, r.bottom)\n    } else {\n      a = Rectangle.fromBounds(r.left, r.right, r.top, r.top + split - 1)\n      b = Rectangle.fromBounds(r.left, r.right, a.bottom + 2, a.bottom + 1 + width)\n      c = Rectangle.fromBounds(r.left, r.right, b.bottom + 2, r.bottom)\n    }\n    return [a, b, c]\n  }\n}\n","import { Partitioner, Partition } from './Partitioner'\nimport { Random } from '../../random'\nimport { Shape } from '../../geometry/shape'\nimport { Vector } from '../../spatial'\nimport { SpacePartitioner } from '../space-partitioner'\n\nexport class NoSplit implements Partitioner {\n  public constructor(private readonly maxRoomWidth: number) {}\n\n  public weight = 2\n\n  public canPartition(shape: Shape): boolean {\n    return shape.bounds().width <= this.maxRoomWidth || shape.bounds().height <= this.maxRoomWidth\n  }\n\n  public partition(context: SpacePartitioner, _random: Random, shape: Shape, exits: Vector[]): Partition {\n    return context.createRoom(shape, exits)\n  }\n}\n","import { Partitioner, Partition } from './Partitioner'\nimport { Difference } from '../../geometry/difference'\nimport { Random } from '../../random'\nimport { Shape } from '../../geometry/shape'\nimport { Vector } from '../../spatial'\nimport { SpacePartitioner } from '../space-partitioner'\n\nexport class OutsetCorridorSplit implements Partitioner {\n  public constructor(private readonly outerWidth: number, private readonly minInnerWidth: number) {}\n\n  public weight = 1\n\n  public canPartition(shape: Shape): boolean {\n    const bounds = shape.bounds()\n    const width = Math.min(bounds.width, bounds.height)\n    return width - this.outerWidth - 1 > this.minInnerWidth\n  }\n\n  public partition(context: SpacePartitioner, _random: Random, shape: Shape, exits: Vector[]): Partition {\n    const inner = shape.shrink(this.outerWidth + 1)\n    const outer = new Difference(shape, inner.grow())\n    const leftExit = inner.bounds().grow().centerLeft\n    return {\n      shape,\n      type: 'node',\n      exit: 1,\n      partitions: [context.partition(inner, [leftExit]), context.createCorridor(outer, exits)],\n      connections: [{ from: 0, to: 1 }],\n    }\n  }\n}\n","import { Partitioner, Partition } from './Partitioner'\n\nimport { SpacePartitioner } from '../space-partitioner'\nimport { Shape } from '../../geometry/shape'\nimport { Axis } from '../../spatial/axis'\nimport { Vector } from '../../spatial'\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Random } from '../../random'\n\nexport class RoomSplit implements Partitioner {\n  public constructor(private readonly minRoomWidth: number) {}\n\n  public weight = 10\n\n  public canPartition(shape: Shape, exits: Vector[]): boolean {\n    const exit = exits[0]\n    const bounds = shape.bounds().grow()\n    const axis: Axis = bounds.top === exit.y || bounds.bottom === exit.y ? 'y' : 'x'\n    const sideLength = axis === 'x' ? bounds.width : bounds.height\n    return sideLength > 2 * this.minRoomWidth\n  }\n\n  public partition(context: SpacePartitioner, random: Random, shape: Shape, exits: Vector[]): Partition {\n    const [head, ...tail] = exits\n    const bounds = shape.bounds()\n    const axis: Axis = bounds.grow().top === head.y || bounds.grow().bottom === head.y ? 'y' : 'x'\n    const sideLength = axis === 'x' ? bounds.width : bounds.height\n    const split = random.integerBetween(this.minRoomWidth, sideLength - this.minRoomWidth)\n    let [left, right] = this.split(bounds, axis, split)\n    let exit = axis === 'x' ? left.grow().centerRight : left.grow().centerBottom\n    if (context.exitConnectsShape(right, head)) {\n      ;[left, right] = [right, left]\n    }\n    const leftTail = tail.filter(e => context.exitConnectsShape(left, e))\n    const rightTail = tail.filter(e => context.exitConnectsShape(right, e))\n    return {\n      shape,\n      type: 'node',\n      exit: 0,\n      partitions: [context.partition(left, [head, exit, ...leftTail]), context.partition(right, [exit, ...rightTail])],\n      connections: [{ from: 0, to: 1 }],\n    }\n  }\n\n  public split(r: Rectangle, axis: Axis, split: number): [Rectangle, Rectangle] {\n    let a: Rectangle\n    let b: Rectangle\n    if (axis === 'x') {\n      a = Rectangle.fromBounds(r.left, r.left + split, r.top, r.bottom)\n      b = Rectangle.fromBounds(a.right + 2, r.right, r.top, r.bottom)\n    } else {\n      a = Rectangle.fromBounds(r.left, r.right, r.top, r.top + split)\n      b = Rectangle.fromBounds(r.left, r.right, a.bottom + 2, r.bottom)\n    }\n    return [a, b]\n  }\n}\n","import { Partitioner, Partition } from './Partitioner'\nimport { Random } from '../../random'\nimport { Shape } from '../../geometry/shape'\nimport { Vector } from '../../spatial'\nimport { SpacePartitioner } from '../space-partitioner'\nimport { Rectangle } from '../../geometry/rectangle'\nimport { Difference } from '../../geometry/difference'\nimport { Union } from '../../geometry/union'\n\n/*\n          1         2     \n01234567890123456789012345\n#########################0\n#33333333333333333333322#1\n#33333333333333333333322#2\n#44###################22#3\n#44#66777777777777777#22#5\n#44#66777777777777777#22#5\n#44#66#############88#22#6\n#44#66#33333333322#88#22#7\n#44#66#33333333322#88#22#8\n#44#66#44#######22#88#22#9\n#44#66#44#CCCCC#22#88#22#01\n#44#66#44#CCCCC#22#88#22#1\n#44#66#44#CCCCC#22#88#22#2\n#44#55544#CCCCC111#88#22#3\n#44#55544#CCCCC111#88#22#4\n#44################88#22#5\n#4455555555555#999988#22#6\n#4455555555555#999988#22#7\n############66#00#####22#8\n            66#001111111#9\n            66#001111111#0\n           ###############1\n*/\n\nexport class KnossosMaze implements Partitioner {\n  public weight = 1\n\n  public canPartition(_shape: Shape): boolean {\n    return true\n  }\n\n  public partition(context: SpacePartitioner, _random: Random, shape: Shape, exits: Vector[]): Partition {\n    const corridorWidth = 2\n    const wallWidth = 1\n    const center = new Rectangle(shape.bounds().center.x - 5, shape.bounds().center.y, 10, 10)\n    const c1 = new Rectangle(center.bottomRight.x + 1, center.bottomRight.y - corridorWidth + 1, corridorWidth + wallWidth, corridorWidth)\n    const c2 = new Rectangle(\n      center.topRight.x + wallWidth + 1,\n      center.topRight.y - corridorWidth - wallWidth,\n      corridorWidth,\n      wallWidth + center.height\n    )\n    const c3 = new Rectangle(\n      center.topLeft.x - wallWidth - corridorWidth,\n      center.topLeft.y - corridorWidth - wallWidth,\n      corridorWidth + 2 * wallWidth + center.width,\n      corridorWidth\n    )\n    const c4 = new Rectangle(\n      center.topLeft.x - wallWidth - corridorWidth,\n      center.topLeft.y - wallWidth,\n      corridorWidth,\n      center.height + wallWidth\n    )\n    const c5 = new Rectangle(\n      center.bottomLeft.x - 2 * corridorWidth - 2 * wallWidth,\n      center.bottomLeft.y - corridorWidth + 1,\n      corridorWidth + wallWidth,\n      corridorWidth\n    )\n    const c6 = new Rectangle(\n      center.topLeft.x - 2 * corridorWidth - 2 * wallWidth,\n      center.topLeft.y - 2 * corridorWidth - 2 * wallWidth,\n      corridorWidth,\n      center.height - corridorWidth + 2 * (wallWidth + corridorWidth)\n    )\n    const c7 = new Rectangle(\n      center.topLeft.x - corridorWidth - 2 * wallWidth,\n      center.topLeft.y - 2 * corridorWidth - 2 * wallWidth,\n      center.width + 3 * corridorWidth + 4 * wallWidth,\n      corridorWidth\n    )\n    const c8 = new Rectangle(\n      center.topRight.x + corridorWidth + 2 * wallWidth + 1,\n      center.topRight.y - corridorWidth - 2 * wallWidth,\n      corridorWidth,\n      center.height + 2 * corridorWidth + 3 * wallWidth\n    )\n    const c9 = new Rectangle(center.bottomRight.x + 1, center.bottomRight.y + wallWidth + 1, corridorWidth + 2 * wallWidth, corridorWidth)\n    const c10 = new Rectangle(\n      center.bottomRight.x + 1,\n      center.bottomRight.y + wallWidth + 1 + corridorWidth,\n      corridorWidth,\n      corridorWidth + wallWidth\n    )\n    const c11 = new Rectangle(\n      center.bottomRight.x + 1 + corridorWidth,\n      center.bottomRight.y + 2 * wallWidth + 1 + corridorWidth,\n      2 * corridorWidth + 3 * wallWidth,\n      corridorWidth\n    )\n    const c12 = new Rectangle(\n      center.topRight.x + 2 * corridorWidth + 3 * wallWidth + 1,\n      center.topRight.y - 3 * corridorWidth - 3 * wallWidth,\n      corridorWidth,\n      center.height + 4 * corridorWidth + 5 * wallWidth\n    )\n    const c13 = new Rectangle(\n      center.topLeft.x - 3 * corridorWidth - 3 * wallWidth,\n      center.topLeft.y - 3 * corridorWidth - 3 * wallWidth,\n      center.width + 5 * corridorWidth + 6 * wallWidth,\n      corridorWidth\n    )\n    const c14 = new Rectangle(\n      center.topLeft.x - 3 * corridorWidth - 3 * wallWidth,\n      center.topLeft.y - 2 * corridorWidth - 3 * wallWidth,\n      corridorWidth,\n      center.height + 3 * corridorWidth + 4 * wallWidth\n    )\n    const c15 = new Rectangle(\n      center.topLeft.x - 2 * corridorWidth - 3 * wallWidth,\n      center.bottomRight.y + wallWidth + 1,\n      center.width + 2 * corridorWidth + 2 * wallWidth,\n      corridorWidth\n    )\n    const c16 = new Rectangle(\n      center.bottomRight.x + 1 - wallWidth - corridorWidth,\n      center.bottomRight.y + wallWidth + 1 + corridorWidth,\n      corridorWidth,\n      corridorWidth + wallWidth\n    )\n    const maze = Union.of(center, c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16)\n    const outer = new Difference(shape, maze.grow())\n    return {\n      shape,\n      type: 'node',\n      exit: 1,\n      partitions: [\n        context.createRoom(center, [c1.grow().centerLeft]),\n        context.createCorridor(c1, [c2.grow().centerBottom]),\n        context.createCorridor(c2, [c3.grow().centerRight]),\n        context.createCorridor(c3, [c4.grow().centerTop]),\n        context.createCorridor(c4, [c5.grow().centerRight]),\n        context.createCorridor(c5, [c6.grow().centerBottom]),\n        context.createCorridor(c6, [c7.grow().centerLeft]),\n        context.createCorridor(c7, [c8.grow().centerTop]),\n        context.createCorridor(c8, [c9.grow().centerRight]),\n        context.createCorridor(c9, [c10.grow().centerTop]),\n        context.createCorridor(c10, [c11.grow().centerLeft]),\n        context.createCorridor(c11, [c12.grow().centerBottom]),\n        context.createCorridor(c12, [c13.grow().centerRight]),\n        context.createCorridor(c13, [c14.grow().centerLeft]),\n        context.createCorridor(c14, [c15.grow().centerLeft]),\n        context.createCorridor(c15, [c16.grow().centerTop]),\n        context.createCorridor(c16, [c16.grow().centerBottom]),\n        context.createCorridor(outer, exits),\n      ],\n      connections: [\n        { from: 0, to: 1 },\n        { from: 1, to: 2 },\n        { from: 2, to: 3 },\n        { from: 3, to: 4 },\n        { from: 4, to: 5 },\n        { from: 5, to: 6 },\n        { from: 6, to: 7 },\n        { from: 7, to: 8 },\n        { from: 8, to: 9 },\n        { from: 9, to: 10 },\n        { from: 10, to: 11 },\n        { from: 11, to: 12 },\n        { from: 12, to: 13 },\n        { from: 13, to: 14 },\n        { from: 14, to: 15 },\n        { from: 15, to: 16 },\n      ],\n    }\n  }\n}\n","import { Shape, AbstractShape } from './shape'\nimport { Rectangle } from './rectangle'\nimport { Vector } from '../spatial/vector'\n\nexport class Union extends AbstractShape {\n  public constructor(public readonly shape1: Shape, public readonly shape2: Shape) {\n    super()\n  }\n\n  public static of(...shapes: Shape[]): Shape {\n    return shapes.reduce((p, c) => new Union(p, c))\n  }\n\n  public bounds(): Rectangle {\n    return this.shape1.bounds().plus(this.shape2.bounds())\n  }\n\n  public containsVector(p: Vector): boolean {\n    return this.shape1.containsVector(p) || this.shape2.containsVector(p)\n  }\n\n  public grow(cells: number = 1): Union {\n    return new Union(this.shape1.grow(cells), this.shape2.grow(cells))\n  }\n\n  public shrink(cells: number = 1): Union {\n    return new Union(this.shape1.shrink(cells), this.shape2.shrink(cells))\n  }\n\n  public translate(t: Vector): Union {\n    return new Union(this.shape1.translate(t), this.shape2.translate(t))\n  }\n\n  public all(f: (p: Vector) => boolean): boolean {\n    return this.bounds().all(p => {\n      if (this.containsVector(p)) {\n        return f(p)\n      }\n      return true\n    })\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld, PushState } from '../tlb'\nimport { TakeTurnComponent, SelectionState } from '../components/rounds'\nimport { Queries } from '../renderer/queries'\nimport { WorldMapResource, WorldMap } from '../resources/world-map'\nimport { InputResource, Input } from '../resources/input'\nimport { Viewport, ViewportResource } from '../resources/viewport'\nimport { Entity } from '../ecs/entity'\nimport { Movement, Attack, Status, Action, SubAction, Jump } from '../components/action'\nimport { UIResource, UI } from '../resources/ui'\nimport { ScriptComponent } from '../components/script'\nimport { calculateAvailableActions } from '../component-reducers/available-actions'\nimport { SelectableAction } from '../ui/tabs/action-selector'\nimport { Random } from '../random'\nimport { attackTarget } from '../component-reducers/attack-target'\nimport { ItemComponent } from '../components/items'\nimport { consumeItem } from '../component-reducers/consume-item'\nimport { Distribution } from '../random/distributions'\nimport { applyEffect, clearExpiredEffects } from '../component-reducers/apply-effect'\nimport { createInventoryDescription } from '../component-reducers/inventory-description'\nimport { instantiateItem } from '../component-reducers/instantiate-item'\nimport { replacingEquip, unequip } from '../assets/characters'\nimport { Modal } from '../game-states/modal'\nimport { TriggeredByComponent } from '../components/trigger'\n\nexport class PlayerRoundControl implements TlbSystem {\n  public readonly components: ComponentName[] = ['take-turn', 'player', 'position']\n  private readonly random: Random\n\n  public constructor(public readonly queries: Queries, public readonly pushState: PushState, public rng: Distribution) {\n    this.random = new Random(rng)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const script = world.getComponent<ScriptComponent>(entity, 'script')\n    const takeTurn = world.getComponent<TakeTurnComponent>(entity, 'take-turn')!\n    const isInAnimation = script !== undefined\n    if (!isInAnimation) {\n      const turnIsOver = takeTurn.acted && takeTurn.moved\n      if (!turnIsOver) {\n        const availableActions = calculateAvailableActions(world, entity, true)\n        this.doTurn(world, entity, takeTurn, availableActions)\n      } else {\n        this.endTurn(world, entity)\n      }\n    }\n  }\n\n  public doTurn(world: TlbWorld, entity: Entity, takeTurn: TakeTurnComponent, availableActions: SelectableAction[]) {\n    const ui: UI = world.getResource<UIResource>('ui')\n    const input: Input = world.getResource<InputResource>('input')\n\n    if (takeTurn.selectionState === undefined) {\n      ui.showActionSelector(availableActions)\n      takeTurn.selectionState = {\n        currentSubAction: 0,\n        skippedActions: 0,\n      }\n    } else if (takeTurn.selectionState.selection === undefined) {\n      const selection = ui.selectedAction()\n      if (selection !== undefined) {\n        takeTurn.selectionState.selection = selection\n        ui.hideSelectors()\n      }\n    } else {\n      const skip = input.isActive('cancel')\n      const action = takeTurn.selectionState.selection!.action\n      const subActionCount = action.subActions.length\n      const allDone = takeTurn.selectionState.currentSubAction >= subActionCount\n      if (!allDone) {\n        if (skip) {\n          takeTurn.selectionState.currentSubAction += 1\n          takeTurn.selectionState.skippedActions += 1\n        } else {\n          const currentSubAction = action.subActions[takeTurn.selectionState.currentSubAction]\n          const done = this.handleSubAction(world, entity, action, currentSubAction, takeTurn.selectionState)\n          if (done) {\n            takeTurn.selectionState.currentSubAction += 1\n          }\n        }\n      } else {\n        clearExpiredEffects(world, entity)\n        const action = takeTurn.selectionState.selection!.action\n        const noActionsOrAtLeastOneActionTaken = subActionCount == 0 || subActionCount - takeTurn.selectionState.skippedActions > 0\n        if (noActionsOrAtLeastOneActionTaken) {\n          switch (action.cost) {\n            case 'action':\n              takeTurn.acted = true\n              break\n            case 'movement':\n              takeTurn.moved = true\n              break\n            case 'either':\n              if (takeTurn.moved) {\n                takeTurn.acted = true\n              } else {\n                takeTurn.moved = true\n              }\n              break\n            case 'all':\n            case 'both':\n              takeTurn.acted = true\n              takeTurn.moved = true\n              break\n          }\n        }\n        takeTurn.selectionState = undefined\n      }\n    }\n  }\n\n  public handleSubAction(world: TlbWorld, entity: Entity, action: Action, subAction: SubAction, state: SelectionState): boolean {\n    switch (subAction.kind) {\n      case 'attack':\n        if (state.target === undefined) {\n          state.target = this.findTarget(world, entity, subAction)\n          return false\n        } else {\n          const result = attackTarget(world, this.random, entity, state.target!, subAction)\n          if (subAction.grants) {\n            action.subActions.splice(state.currentSubAction + 1, 0, ...subAction.grants(result))\n          }\n          state.target = undefined\n          return true\n        }\n      case 'movement':\n      case 'jump':\n        return this.move(world, entity, subAction)\n      case 'status':\n        // status is not actively skippable\n        state.skippedActions += 1\n        return this.status(world, entity, subAction, state.selection!.entity)\n      case 'changeEquipment':\n        return this.changeEquipment(world, entity)\n      case 'trigger':\n        return this.trigger(world, entity, state.selection!.entity)\n    }\n  }\n\n  public endTurn(world: TlbWorld, entity: Entity): void {\n    world\n      .editEntity(entity)\n      .removeComponent('take-turn')\n      .withComponent('took-turn', {})\n  }\n\n  public move(world: TlbWorld, entity: Entity, movement: Movement | Jump): boolean {\n    const ui = world.getResource<UIResource>('ui')\n    ui.showMovementSelector(entity, this.queries, movement)\n    const path = ui.selectedMovement()\n    if (path !== undefined) {\n      ui.hideSelectors()\n      world.editEntity(entity).withComponent<ScriptComponent>('script', {\n        path: path.path,\n      })\n      return true\n    }\n    return false\n  }\n\n  public findTarget(world: TlbWorld, entity: Entity, attack: Attack): Entity | undefined {\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    const ui = world.getResource<UIResource>('ui')\n    ui.showAttackSelector(entity, this.queries, attack.range)\n    const path = ui.selectedAttack()\n    if (path !== undefined) {\n      for (let i = 0; i < path.path.length; ++i) {\n        const region = map.levels[viewport.level]\n        let target = region.getCharacter(path.path[i])\n        const hasEnemy = target !== undefined && target !== entity\n        if (hasEnemy) {\n          ui.hideSelectors()\n          return target\n        }\n      }\n    }\n    return undefined\n  }\n\n  public status(world: TlbWorld, entity: Entity, status: Status, item: Entity): boolean {\n    const target = status.target === 'item' ? item : entity\n    status.effects.forEach(effect => {\n      applyEffect(world, this.random, target, { source: item, effect, isCritical: false, isPiercing: false })\n    })\n    const itemComponent = world.getComponent<ItemComponent>(item, 'item')\n    if (itemComponent !== undefined && itemComponent.item.kind === 'consumable') {\n      consumeItem(world, entity, item)\n    }\n    return true\n  }\n\n  public trigger(world: TlbWorld, entity: Entity, target: Entity): boolean {\n    world\n      .editEntity(target)\n      .withComponent('active', {})\n      .withComponent<TriggeredByComponent>('triggered-by', { entity })\n    return true\n  }\n\n  public changeEquipment(world: TlbWorld, entity: Entity): boolean {\n    const ui = world.getResource<UIResource>('ui')\n    let selection: Entity | undefined = undefined\n    const inventory = createInventoryDescription(world, entity)\n    if (!ui.multipleChoiceModalShowing()) {\n      const items = inventory.items\n        .filter(i => i.item.attachments > 0)\n        .map(i => ({\n          entity: i.entity,\n          description: i.item.name + (inventory.equipment.some(e => e.entity === i.entity) ? '*' : ''),\n        }))\n      ui.showMultipleChoiceModal(world, 'choose item', items)\n      this.pushState(new Modal(world.activeSystemsList()))\n    } else {\n      selection = ui.selectedModalOption()\n      ui.hideMultipleChoiceModal()\n    }\n    if (selection !== undefined) {\n      const { item } = instantiateItem(world, selection)\n      const attachementIndex = inventory.equipment.findIndex(e => e.entity === selection)\n\n      if (attachementIndex >= 0) {\n        unequip(world, entity, selection)\n      } else {\n        replacingEquip(world, entity, selection, item)\n      }\n      return true\n    }\n    return false\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { Attack } from '../components/action'\nimport { Entity } from '../ecs/entity'\nimport { PositionComponent } from '../components/position'\nimport { Vector } from '../spatial'\nimport { calculateCover } from './cover'\nimport { getAim, getCriticalChance } from './stats'\n\nexport interface HitChanceCalculation {\n  base: number\n  distancePenalty: number\n  coverPenalty: number\n  final: number\n\n  criticalHit: number\n}\n\nexport function calculateHitChance(world: TlbWorld, entity: Entity, target: Entity, attack: Attack): HitChanceCalculation {\n  const position = world.getComponent<PositionComponent>(entity, 'position')!\n  const targetPosition = world.getComponent<PositionComponent>(target, 'position')!\n\n  const cover = calculateCover(world, targetPosition.level, position.position, targetPosition.position)\n\n  const distance = new Vector([position.position.fX - targetPosition.position.fX, position.position.fY - targetPosition.position.fY]).lN()\n  const normalizedDistance = (10 * (distance - 1)) / attack.range\n\n  const aim = getAim(world, entity) / 10\n  const accuracy = attack.accuracy / 10\n  const criticalHit = getCriticalChance(world, entity) / 10\n\n  const base = Math.min(aim, accuracy)\n  const distancePenalty = normalizedDistance < 2 ? 0 : normalizedDistance < 5 ? 0.1 : 0.2\n  const coverPenalty = cover === 'full' ? 0.5 : cover === 'partial' ? 0.2 : 0\n  return {\n    base,\n    distancePenalty,\n    coverPenalty,\n    final: base - distancePenalty - coverPenalty,\n\n    criticalHit,\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { AssetComponent, removeAsset } from '../components/asset'\nimport { FeatureComponent } from '../components/feature'\nimport { GroundComponent } from '../components/ground'\nimport { Entity } from '../ecs/entity'\nimport { TriggersComponent, TriggeredByComponent } from '../components/trigger'\nimport { InventoryComponent } from '../components/items'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { State } from '../game-states/state'\nimport { UIResource, UI, runDialog } from '../resources/ui'\nimport { Modal } from '../game-states/modal'\nimport { LogResource, Log } from '../resources/log'\nimport { DialogComponent } from '../components/dialog'\nimport { Random } from '../random'\nimport { AiComponent } from '../components/ai'\nimport { engage } from '../component-reducers/ai'\nimport { move } from '../component-reducers/position'\nimport { PositionComponent } from '../components/position'\nimport { Distribution } from '../random/distributions'\nimport { LoreComponent } from '../components/lore'\nimport { ProgressResource } from '../resources/progress'\nimport { QuestComponent } from '../components/quest'\n\nexport class Trigger implements TlbSystem {\n  public readonly components: ComponentName[] = ['active', 'triggers']\n  private readonly random: Random\n\n  public constructor(public rng: Distribution, public readonly pushState: (state: State) => void) {\n    this.random = new Random(rng)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    let handled = true\n    const triggers = world.getComponent<TriggersComponent>(entity, 'triggers')!\n    switch (triggers.type) {\n      case 'dialog':\n        handled = this.handleDialog(world, entity, triggers)\n        break\n      case 'asset':\n        handled = this.handleAsset(world, entity, triggers)\n        break\n    }\n\n    if (handled) {\n      world\n        .editEntity(entity)\n        .removeComponent('active')\n        .removeComponent('triggered-by')\n    }\n  }\n\n  public handleDialog(world: TlbWorld, entity: Entity, triggers: TriggersComponent): boolean {\n    const dialog = this.getDialog(world, entity, triggers)\n    const triggeredBy = world.getComponent<TriggeredByComponent>(entity, 'triggered-by')!\n    const result = runDialog(\n      world.getResource<UIResource>('ui'),\n      world,\n      this.random,\n      dialog.type,\n      triggeredBy.entity,\n      entity,\n      this.pushState\n    )\n    if (result !== undefined) {\n      switch (result.type) {\n        case 'attack': {\n          const ai = world.getComponent<AiComponent>(entity, 'ai')\n          if (ai !== undefined) {\n            engage(world, ai, entity, triggeredBy.entity, this.pushState)\n          }\n          break\n        }\n        case 'move_level_up': {\n          const p = world.getComponent<PositionComponent>(triggeredBy.entity, 'position')!\n          move(world, triggeredBy.entity, p.level + 1, p.position)\n          break\n        }\n        case 'move_level_down': {\n          const p = world.getComponent<PositionComponent>(triggeredBy.entity, 'position')!\n          move(world, triggeredBy.entity, p.level - 1, p.position)\n          break\n        }\n        case 'unlock_lore': {\n          const lore = world.getComponent<LoreComponent>(entity, 'lore')!\n          world.getResource<ProgressResource>('progress').unlockLore(world, lore.type)\n          break\n        }\n        case 'start_quest': {\n          const quest = world.getComponent<QuestComponent>(entity, 'quest')!\n          world.getResource<ProgressResource>('progress').startQuest(world, quest.type)\n          break\n        }\n        case 'trigger': {\n          world\n            .editEntity(result.target!)\n            .withComponent('active', {})\n            .withComponent<TriggeredByComponent>('triggered-by', { entity: triggeredBy.entity })\n          break\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  private getDialog(world: TlbWorld, entity: Entity, triggers: TriggersComponent): DialogComponent {\n    let dialog = world.getComponent<DialogComponent>(entity, 'dialog')\n    if (dialog === undefined) {\n      dialog = world.getComponent<DialogComponent>(triggers.entities[0], 'dialog')!\n    }\n    return dialog\n  }\n\n  public handleAsset(world: TlbWorld, entity: Entity, triggers: TriggersComponent): boolean {\n    const asset = world.getComponent<AssetComponent>(entity, 'asset')!\n    switch (asset.type) {\n      case 'door':\n        return this.door(world, triggers)\n      case 'loot':\n        return this.loot(world, entity, triggers, true)\n      case 'elevator':\n      case 'terminal':\n        return this.handleDialog(world, entity, triggers)\n      case 'trash':\n      case 'locker':\n      case 'table':\n        return this.loot(world, entity, triggers, false)\n      case 'generator':\n        this.log(world, 'clonck')\n        return true\n      default:\n        return true\n    }\n  }\n\n  public door(world: TlbWorld, triggers: TriggersComponent): boolean {\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    const charactersInWay = triggers.entities.some(e => {\n      const position = world.getComponent<PositionComponent>(e, 'position')!\n      return map.levels[position.level].getCharacter(position.position) !== undefined\n    })\n    if (!charactersInWay) {\n      triggers.entities.forEach(doorPart => this.swapGroundAndFeature(world, doorPart))\n    }\n    return true\n  }\n\n  public loot(world: TlbWorld, entity: Entity, triggers: TriggersComponent, remove: boolean): boolean {\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    const ui: UI = world.getResource<UIResource>('ui')\n    if (!ui.isModal) {\n      const triggeredBy = world.getComponent<TriggeredByComponent>(entity, 'triggered-by')!\n      const sourceFeature = world.getComponent<FeatureComponent>(triggers.entities[0], 'feature')!\n      const targetFeature = world.getComponent<FeatureComponent>(triggeredBy.entity, 'feature')!\n      const targetText = targetFeature.feature().name\n      const sourceText = sourceFeature.feature().name\n      ui.showInventoryTransferModal(world, entity, sourceText, triggeredBy.entity, targetText)\n      this.pushState(new Modal(world.activeSystemsList()))\n    } else if (!ui.inventoryTransferModalShowing()) {\n      ui.isModal = false\n      const inventory = world.getComponent<InventoryComponent>(entity, 'inventory')!\n      if (remove && inventory.content.length === 0) {\n        removeAsset(world, map, entity)\n      }\n      return true\n    }\n    return false\n  }\n\n  public log(world: TlbWorld, text: string) {\n    const log: Log = world.getResource<LogResource>('log')\n    log.text(text)\n  }\n\n  public swapGroundAndFeature(world: TlbWorld, entity: Entity): void {\n    const feature = world.getComponent<FeatureComponent>(entity, 'feature')!\n    const ground = world.getComponent<GroundComponent>(entity, 'ground')!\n    const f = feature.feature\n    feature.feature = ground.feature\n    ground.feature = f\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { ScriptComponent } from '../components/script'\nimport { Entity } from '../ecs/entity'\nimport { Vector } from '../spatial'\nimport { CharacterStatsComponent, speed } from '../components/character-stats'\nimport { Line } from '../spatial/line'\nimport { WorldMapResource } from '../resources/world-map'\nimport { findTriggerOfEntity } from '../component-reducers/trigger'\nimport { TriggeredByComponent, TriggersComponent } from '../components/trigger'\n\nexport class Script implements TlbSystem {\n  public readonly components: ComponentName[] = ['script']\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const script = world.getComponent<ScriptComponent>(entity, 'script')!\n    const nextLocation = script.path.pop()\n    if (nextLocation === undefined) {\n      world.editEntity(entity).removeComponent('script')\n    } else {\n      const done = this.moveOrTrigger(world, entity, nextLocation)\n      if (!done) {\n        script.path.push(nextLocation)\n      }\n    }\n  }\n\n  public moveOrTrigger(world: TlbWorld, entity: Entity, target: Vector): boolean {\n    const stats = world.getComponent<CharacterStatsComponent>(entity, 'character-stats')!\n    const current = world.getComponent<PositionComponent>(entity, 'position')!\n    const delta = target.center.minus(current.position).normalize()\n    if (delta.isNan()) {\n      console.warn('target already reached')\n      return true\n    }\n\n    const movement = delta.mult(speed(stats))\n    let newPosition = current.position.add(movement)\n    const map = world.getResource<WorldMapResource>('map')\n    const level = map.levels[current.level]\n\n    const isBlocked = level.isBlocking(world, newPosition, entity)\n    const trigger = findTriggerOfEntity(world, level.getTile(newPosition)!)\n    if (isBlocked && trigger !== undefined && world.getComponent<TriggersComponent>(trigger, 'triggers')!.inTurnBased) {\n      world\n        .editEntity(trigger)\n        .withComponent('active', {})\n        .withComponent<TriggeredByComponent>('triggered-by', { entity })\n      world.getComponent<ScriptComponent>(entity, 'script')!.path = []\n      return false\n    } else {\n      const finishLine = new Line(target.center, delta.perpendicular())\n      let reached = false\n      if (finishLine.side(current.position) !== finishLine.side(newPosition)) {\n        newPosition = target.center\n        reached = true\n      }\n      level.removeCharacter(current.position)\n      level.setCharacter(newPosition, entity)\n      current.position = newPosition\n      return reached\n    }\n  }\n}\n","import { Vector } from './vector'\n\nexport class Line {\n  public constructor(public origin: Vector, public direction: Vector) {}\n\n  public side(point: Vector): 'left' | 'inside' | 'right' {\n    const d = (point.x - this.origin.x) * this.direction.y - (point.y - this.origin.y) * this.direction.x\n    if (d < 0) {\n      return 'left'\n    } else if (d === 0) {\n      return 'inside'\n    } else {\n      return 'right'\n    }\n  }\n\n  public isEqual(line: Line): boolean {\n    return this.side(line.origin) === 'inside' && this.side(line.origin.add(line.direction)) === 'inside'\n  }\n}\n","import { DiscreteSpace, Vector, Space, DiscreteStackSpace } from '../spatial'\nimport { Entity } from '../ecs/entity'\nimport { ResourceName, TlbResource, TlbWorld } from '../tlb'\nimport { FeatureComponent } from '../components/feature'\nimport { Shape } from '../geometry/shape'\nimport { SetSpace } from '../spatial/set-space'\nimport { FovComponent } from '../components/fov'\nimport { PositionComponent } from '../components/position'\nimport { Rectangle } from '../geometry/rectangle'\n\nexport class Level {\n  public readonly boundary: Rectangle\n\n  public readonly tiles: Space<Entity>\n  public readonly characters: Space<Entity>\n  public readonly structures: Space<Entity>\n\n  public visible: SetSpace\n  public readonly discovered: SetSpace\n\n  public constructor(width: number) {\n    this.boundary = new Rectangle(0, 0, width, width)\n\n    this.tiles = new DiscreteSpace(width)\n    this.characters = new DiscreteStackSpace(width)\n    this.structures = new DiscreteSpace(width)\n\n    this.visible = new SetSpace(width)\n    this.discovered = new SetSpace(width)\n  }\n\n  public setTile(position: Vector, entity: Entity): void {\n    this.tiles.set(position, entity)\n  }\n  public getTile(position: Vector): Entity | undefined {\n    return this.tiles.get(position)\n  }\n  public removeTile(position: Vector): Entity | undefined {\n    return this.tiles.remove(position)\n  }\n\n  public setStructure(position: Vector, entity: Entity): void {\n    this.structures.set(position, entity)\n  }\n  public getStructure(position: Vector): Entity | undefined {\n    return this.structures.get(position)\n  }\n\n  public setCharacter(position: Vector, entity: Entity): void {\n    this.characters.set(position, entity)\n  }\n  public getCharacter(position: Vector): Entity | undefined {\n    return this.characters.get(position)\n  }\n  public removeCharacter(position: Vector): Entity | undefined {\n    return this.characters.remove(position)\n  }\n\n  public isDiscovered(position: Vector): boolean {\n    return this.discovered.has(position)\n  }\n  public isVisible(position: Vector): boolean {\n    return this.visible.has(position)\n  }\n\n  public blocksJump(world: TlbWorld, position: Vector): boolean {\n    return this.tileMatches(world, position, f => {\n      if (f === undefined) {\n        return true\n      }\n      return f.feature().cover === 'full'\n    })\n  }\n\n  public isBlocking(world: TlbWorld, position: Vector, self?: Entity | undefined): boolean {\n    return (\n      this.tileMatches(world, position, f => {\n        if (f === undefined) {\n          return true\n        }\n        return f.feature().blocking\n      }) ||\n      this.characterMatches(\n        world,\n        position,\n        (f: FeatureComponent | undefined) => {\n          if (f === undefined) {\n            return false\n          }\n          return f.feature().blocking\n        },\n        self\n      )\n    )\n  }\n\n  public isLightBlocking(world: TlbWorld, position: Vector): boolean {\n    return (\n      this.tileMatches(world, position, (f: FeatureComponent | undefined) => {\n        if (f === undefined) {\n          return true\n        }\n        return f.feature().lightBlocking\n      }) ||\n      this.characterMatches(world, position, (f: FeatureComponent | undefined) => {\n        if (f === undefined) {\n          return false\n        }\n        return f.feature().lightBlocking\n      })\n    )\n  }\n\n  public tileMatches(world: TlbWorld, position: Vector, predicate: (f: FeatureComponent | undefined) => boolean): boolean {\n    return this.featureMatches(world, this.tiles.get(position), predicate)\n  }\n\n  public characterMatches(\n    world: TlbWorld,\n    position: Vector,\n    predicate: (f: FeatureComponent | undefined) => boolean,\n    self?: Entity | undefined\n  ): boolean {\n    const character = this.characters.get(position)\n    if (character !== undefined && self !== undefined && self === character) {\n      return false\n    }\n    return this.featureMatches(world, character, predicate)\n  }\n\n  public featureMatches(world: TlbWorld, entity: Entity | undefined, predicate: (f: FeatureComponent | undefined) => boolean): boolean {\n    let feature: FeatureComponent | undefined\n    if (entity !== undefined) {\n      feature = world.getComponent<FeatureComponent>(entity, 'feature')\n    }\n    return predicate(feature)\n  }\n\n  public isShapeFree(world: TlbWorld, shape: Shape): boolean {\n    return this.shapeHasAll(world, shape, f => f === undefined)\n  }\n\n  public isShapeBlocked(world: TlbWorld, shape: Shape): boolean {\n    return this.shapeHasSome(world, shape, f => f !== undefined)\n  }\n\n  public shapeHasAll(world: TlbWorld, shape: Shape, predicate: (f: FeatureComponent | undefined) => boolean): boolean {\n    return shape.all(p => this.tileMatches(world, p, predicate))\n  }\n\n  public shapeHasSome(world: TlbWorld, shape: Shape, predicate: (f: FeatureComponent | undefined) => boolean): boolean {\n    return shape.some(p => this.tileMatches(world, p, predicate))\n  }\n}\n\nexport interface WorldMap {\n  levels: Level[]\n}\n\nexport class WorldMapResource implements TlbResource, WorldMap {\n  public readonly kind: ResourceName = 'map'\n\n  public readonly levels: Level[] = []\n\n  public constructor(public readonly width: number) {\n    this.levels.push(new Level(this.width))\n    this.levels.push(new Level(this.width))\n    this.levels.push(new Level(this.width))\n    this.levels.push(new Level(this.width))\n    this.levels.push(new Level(this.width))\n    this.levels.push(new Level(this.width))\n  }\n\n  public update(world: TlbWorld): void {\n    world.components.get('player')!.foreach(player => {\n      const position = world.getComponent<PositionComponent>(player, 'position')\n      if (position !== undefined) {\n        const level = this.levels[position.level]\n        const fov = world.getComponent<FovComponent>(player, 'fov')\n        if (fov !== undefined) {\n          level.visible = fov.fov\n          level.discovered.add(fov.fov)\n        }\n      }\n    })\n  }\n}\n","import { Vector } from '../spatial'\nimport { Position } from '../renderer/position'\nimport { TlbWorld, ResourceName, TlbResource } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { Input, InputResource } from './input'\nimport { Entity } from '../ecs/entity'\nimport { Color } from '../renderer/color'\nimport { WorldMapResource } from './world-map'\nimport { StructureComponent, RegionComponent, RegionsType } from '../components/region'\nimport { primary } from '../renderer/palettes'\n\nexport interface Renderable {\n  entity: Entity | undefined\n  opaque: boolean\n  centered: boolean\n}\n\nexport interface Viewport {\n  fromDisplay(p: Position): Vector\n  collectRenderables(world: TlbWorld): Renderable[]\n  toDisplay(p: Vector, centered: boolean): Position\n  focus(level: number, position: Vector): void\n  addLayer(layer: Layer): void\n  gridLocked: boolean\n  boundaries: Vector\n  ambientColor: Color\n\n  level: number\n}\n\nexport interface Layer {\n  getRenderable: (world: TlbWorld, layer: number, position: Vector) => Renderable\n  transformed: boolean\n}\n\nconst ambientColors: { [key in RegionsType]: Color | undefined } = {\n  entrance: new Color([200, 120, 120]),\n  'ground-floor': new Color([80, 80, 120]),\n  elevator: undefined,\n  'red-base': primary[3],\n  'red-plus': primary[3],\n  'green-base': primary[1],\n  'green-plus': primary[1],\n  'yellow-base': primary[0],\n  'yellow-plus': primary[0],\n  'blue-base': primary[2],\n  'blue-plus': primary[2],\n  core: primary[4],\n}\n\nexport class ViewportResource implements TlbResource, Viewport {\n  public readonly kind: ResourceName = 'viewport'\n\n  public gridLocked: boolean = false\n  public topLeft: Vector = new Vector([0, 0])\n  public level: number = 0\n  public ambientColor: Color = new Color([200, 120, 120])\n\n  public readonly layers: Layer[] = []\n\n  public constructor(public readonly boundaries: Vector) {}\n\n  public update(world: TlbWorld): void {\n    const input: Input = world.getResource<InputResource>('input')\n    if (input.isActive('grid')) {\n      this.gridLocked = !this.gridLocked\n    }\n\n    world.components.get('viewport-focus')!.foreach(focus => {\n      const position = world.getComponent<PositionComponent>(focus, 'position')\n      if (position !== undefined) {\n        this.focus(position.level, position.position)\n      }\n    })\n\n    const map = world.getResource<WorldMapResource>('map')\n    const structure = map.levels[this.level].getStructure(this.center())\n    if (structure !== undefined) {\n      const s = world.getComponent<StructureComponent>(structure, 'structure')!\n      const r = world.getComponent<RegionComponent>(s.region, 'region')!\n      const color = ambientColors[r.type]\n      if (color !== undefined) {\n        this.ambientColor = color\n      }\n    }\n  }\n\n  public center(): Vector {\n    const x = this.topLeft.x + Math.floor(this.boundaries.x / 2) - 5\n    const y = this.topLeft.y + Math.floor(this.boundaries.y / 2) - 5\n    return new Vector([x, y])\n  }\n\n  public collectRenderables(world: TlbWorld): Renderable[] {\n    const renderables: Renderable[] = []\n    for (let y = 0; y < this.boundaries.y; y++) {\n      for (let x = 0; x < this.boundaries.x; x++) {\n        for (let l = this.layers.length - 1; l >= 0; l--) {\n          const layer = this.layers[l]\n          let renderable\n          if (layer.transformed) {\n            renderable = layer.getRenderable(world, this.level, this.fromDisplay({ x, y }))\n          } else {\n            renderable = layer.getRenderable(world, this.level, new Vector([x, y]))\n          }\n          if (renderable.entity !== undefined) {\n            renderables.push(renderable)\n          }\n          if (!renderable.opaque) {\n            break\n          }\n        }\n      }\n    }\n    return renderables.reverse()\n  }\n\n  public addLayer(layer: Layer) {\n    this.layers.push(layer)\n  }\n\n  public fromDisplay(p: Position): Vector {\n    return new Vector([this.topLeft.x + p.x, this.topLeft.y + p.y])\n  }\n\n  public toDisplay(p: Vector, centered: boolean): Position {\n    const position = { x: p.x - this.topLeft.x, y: p.y - this.topLeft.y }\n    if (this.gridLocked) {\n      position.x = Math.floor(position.x)\n      position.y = Math.floor(position.y)\n    }\n    if (!this.gridLocked && centered) {\n      position.x += 0.5\n      position.y += 0.25\n    }\n    return position\n  }\n\n  public focus(level: number, position: Vector): void {\n    this.level = level\n\n    const x = position.x - Math.floor(this.boundaries.x / 2) + 5\n    const y = position.y - Math.floor(this.boundaries.y / 2) + 5\n    if (this.gridLocked) {\n      this.topLeft = new Vector([Math.floor(x), Math.floor(y)])\n    } else {\n      this.topLeft = new Vector([x, y])\n    }\n  }\n}\n","import { TlbResource, ResourceName } from '../tlb'\nimport { Vector } from '../spatial'\nimport { Position } from '../renderer/position'\n\nexport interface Key {\n  ctrl: boolean\n  meta: boolean\n  alt: boolean\n  key: string\n}\n\nfunction key(key: string) {\n  return {\n    ctrl: false,\n    meta: false,\n    alt: false,\n    key,\n  }\n}\n\nexport const defaultKeyMapping: { [key in KeyboardCommand]: Key } = {\n  // player controls\n  left: key('h'),\n  down: key('j'),\n  up: key('k'),\n  right: key('l'),\n  use: key('e'),\n  plus: key('+'),\n  minus: key('-'),\n\n  // ui interaction\n  accept: key('Enter'),\n  cancel: key('Escape'),\n\n  0: key('1'),\n  1: key('2'),\n  2: key('3'),\n  3: key('4'),\n  4: key('5'),\n  5: key('6'),\n  6: key('7'),\n  7: key('8'),\n  8: key('9'),\n\n  // tabs selection\n  inventory: key('i'),\n  log: key('o'),\n  overview: key('u'),\n  focus: key('q'),\n\n  // options\n  grid: key('g'),\n}\n\nexport type NumericKeyboardCommand = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8\nexport type OptionsKeyboardCommand = 'grid'\nexport type TabKeyboardCommand = 'inventory' | 'log' | 'focus' | 'overview'\nexport type UIInteractionKeyboardCommand = 'accept' | 'cancel'\nexport type PlayerInteractionKeyboardCommand = 'left' | 'down' | 'up' | 'right' | 'use' | 'plus' | 'minus'\nexport type KeyboardCommand =\n  | NumericKeyboardCommand\n  | PlayerInteractionKeyboardCommand\n  | UIInteractionKeyboardCommand\n  | TabKeyboardCommand\n  | OptionsKeyboardCommand\n\nexport interface Input {\n  position: Position | undefined\n  mouseDown: boolean\n  mousePressed: boolean\n  mouseReleased: boolean\n\n  numericActive(): NumericKeyboardCommand | undefined\n  isActive(key: KeyboardCommand): boolean\n\n  createMovementDelta(): Vector\n}\n\nexport class InputResource implements TlbResource, Input {\n  public readonly kind: ResourceName = 'input'\n\n  public position: Position | undefined = undefined\n\n  public mouseDown: boolean = false\n  public mousePressed: boolean = false\n  public mouseReleased: boolean = false\n\n  public shift: boolean = false\n  public ctrl: boolean = false\n  public alt: boolean = false\n  public meta: boolean = false\n\n  public keyDown: Set<string> = new Set()\n  public keyPressed: Set<string> = new Set()\n  public keyReleased: Set<string> = new Set()\n\n  private mouseEvent: MouseEvent | undefined = undefined\n  private keyEvents: KeyboardEvent[] = []\n\n  public constructor(public readonly eventToPosition: (event: MouseEvent | TouchEvent) => Position | undefined) {\n    document.addEventListener('mousedown', e => (this.mouseEvent = e))\n    document.addEventListener('mousemove', e => (this.mouseEvent = e))\n    document.addEventListener('keydown', e => this.keyEvents.push(e))\n    document.addEventListener('keyup', e => this.keyEvents.push(e))\n  }\n\n  public update(): void {\n    this.handleMouseEvent()\n    this.handleKeyboardEvents()\n  }\n\n  isActive(command: KeyboardCommand): boolean {\n    const mapped = defaultKeyMapping[command]\n    return this.alt === mapped.alt && this.ctrl === mapped.ctrl && this.meta === mapped.meta && this.keyPressed.has(mapped.key)\n  }\n\n  isDown(command: KeyboardCommand): boolean {\n    const mapped = defaultKeyMapping[command]\n    return this.alt === mapped.alt && this.ctrl === mapped.ctrl && this.meta === mapped.meta && this.keyDown.has(mapped.key)\n  }\n\n  numericActive(): NumericKeyboardCommand | undefined {\n    const numerics: NumericKeyboardCommand[] = [0, 1, 2, 3, 4, 5, 6, 7, 8]\n    return numerics.find(k => this.isActive(k))\n  }\n\n  public createMovementDelta(): Vector {\n    let delta = new Vector([0, 0])\n    if (this.isDown('left')) {\n      delta = delta.add(Vector.fromDirection('left'))\n    }\n    if (this.isDown('down')) {\n      delta = delta.add(Vector.fromDirection('down'))\n    }\n    if (this.isDown('up')) {\n      delta = delta.add(Vector.fromDirection('up'))\n    }\n    if (this.isDown('right')) {\n      delta = delta.add(Vector.fromDirection('right'))\n    }\n    return delta.normalize()\n  }\n\n  private handleMouseEvent(): void {\n    this.mouseReleased = false\n    this.mousePressed = false\n    if (this.mouseEvent) {\n      this.position = this.eventToPosition(this.mouseEvent)\n      const pressed = this.mouseEvent.buttons > 0\n      if (pressed) {\n        if (this.position) {\n          this.mousePressed = true\n          this.mouseDown = true\n        }\n      } else {\n        this.mouseDown = false\n        this.mouseReleased = true\n      }\n      this.mouseEvent = undefined\n    }\n  }\n\n  private handleKeyboardEvents(): void {\n    this.keyPressed.clear()\n    this.keyReleased.clear()\n    for (const e of this.keyEvents) {\n      this.shift = e.shiftKey\n      this.ctrl = e.ctrlKey\n      this.alt = e.altKey\n      this.meta = e.metaKey\n      if (e.type === 'keydown') {\n        this.keyPressed.add(e.key)\n        this.keyDown.add(e.key)\n      } else {\n        this.keyReleased.add(e.key)\n        this.keyDown.delete(e.key)\n      }\n    }\n    this.keyEvents = []\n  }\n}\n","import { ResourceName, TlbResource, TlbWorld } from '../tlb'\nimport { Renderer } from '../renderer/renderer'\nimport { getFeature } from '../components/feature'\nimport { Entity } from '../ecs/entity'\nimport { AttackResult } from '../component-reducers/attack-target'\n\nexport interface Log {\n  getEntries(offset: number, limit: number): string[]\n\n  text(text: string): void\n\n  attack(world: TlbWorld, source: Entity, target: Entity, result: AttackResult): void\n  died(world: TlbWorld, entity: Entity): void\n}\n\nexport class LogResource implements TlbResource, Log {\n  public readonly kind: ResourceName = 'log'\n\n  entries: string[] = []\n\n  public update({}: TlbWorld): void {}\n\n  public render({}: Renderer): void {}\n\n  public getEntries(offset: number, limit: number): string[] {\n    const start = Math.max(0, this.entries.length + offset - limit)\n    const end = Math.min(this.entries.length, start + limit)\n    return this.entries.slice(start, end)\n  }\n\n  public text(text: string): void {\n    this.entries.push(text)\n  }\n\n  public attack(world: TlbWorld, source: Entity, target: Entity, result: AttackResult): void {\n    const subject = this.getName(world, source)!\n    const object = this.getName(world, target)!\n\n    let attackText = `${subject} ${this.verbify(subject, 'try')} to hit ${object} (${this.percentage(\n      result.chance.final\n    )} chance, ${this.percentage(result.chance.criticalHit)} crit)`\n\n    let hitText = `${subject} ${result.isCritical ? 'critically' : ''} ${\n      result.isHit ? this.verbify(subject, 'hit') : this.verbify(subject, 'miss')\n    } ${object}`\n    let applyText = `${subject} ${this.verbify(subject, 'make')} ${object}`\n    this.entries.push(attackText)\n    result.effects.forEach(e => {\n      if (e.type === 'damage') {\n        this.entries.push(`${hitText} ${e.finalDamage}${result.isCritical ? '!' : ''}dmg (${e.defense}def)`)\n      } else {\n        this.entries.push(`${applyText} ${e.type}`)\n      }\n    })\n  }\n\n  public died(world: TlbWorld, entity: Entity): void {\n    const subject = this.getName(world, entity)!\n    this.entries.push(`${subject} died`)\n  }\n\n  public percentage(value: number): string {\n    return `${Math.floor(value * 100)}%`\n  }\n\n  public getName(world: TlbWorld, entity: Entity): string {\n    const feature = getFeature(world, entity)\n    if (feature !== undefined) {\n      return feature.name\n    }\n    return 'something'\n  }\n\n  public verbify(source: string, verb: string): string {\n    if (source !== 'you') {\n      if (verb === 'miss') {\n        return 'misses'\n      }\n      if (verb === 'try') {\n        return 'tries'\n      }\n      return verb + 's'\n    }\n    return verb\n  }\n\n  public owner(target: string): string {\n    if (target === 'you') {\n      return 'your'\n    }\n    return `${target}'s`\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { TakeTurnComponent, SelectionState } from '../components/rounds'\nimport { Queries } from '../renderer/queries'\nimport { PositionComponent } from '../components/position'\nimport { Entity } from '../ecs/entity'\nimport { ScriptComponent } from '../components/script'\nimport { Vector } from '../spatial'\nimport { calculateAvailableActions } from '../component-reducers/available-actions'\nimport { Movement, SelectedAction, Attack, Status } from '../components/action'\nimport { Random } from '../random'\nimport { SelectableAction } from '../ui/tabs/action-selector'\nimport { attackTarget } from '../component-reducers/attack-target'\nimport { Distribution } from '../random/distributions'\nimport { applyEffect, clearExpiredEffects } from '../component-reducers/apply-effect'\n\nexport class AiRoundControl implements TlbSystem {\n  public readonly components: ComponentName[] = ['take-turn', 'ai', 'position']\n  public readonly random: Random\n\n  public constructor(public readonly queries: Queries, distribution: Distribution) {\n    this.random = new Random(distribution)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    const script = world.getComponent<ScriptComponent>(entity, 'script')\n    const takeTurn = world.getComponent<TakeTurnComponent>(entity, 'take-turn')!\n\n    const isInAnimation = script !== undefined\n    const turnIsOver = takeTurn.acted && takeTurn.moved\n    if (!isInAnimation) {\n      if (!turnIsOver) {\n        if (takeTurn.selectionState === undefined) {\n          const availableActions = calculateAvailableActions(world, entity, false)\n          this.selectAction(world, entity, takeTurn, availableActions)\n        } else {\n          this.takeAction(world, entity, takeTurn, takeTurn.selectionState)\n        }\n      } else {\n        this.endTurn(world, entity)\n      }\n    }\n  }\n\n  public selectAction(world: TlbWorld, entity: Entity, takeTurn: TakeTurnComponent, selectableActions: SelectableAction[]) {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    let target = this.findTarget(world, position.position)\n\n    if (target !== undefined) {\n      const targetPosition = world.getComponent<PositionComponent>(target, 'position')!\n      const path = this.queries.los(world, position.level, position.position, targetPosition.position, {})\n\n      const movementActions: SelectedAction[] = []\n      const fightActions: SelectedAction[] = []\n      const allActions: SelectedAction[] = []\n      for (const selectableAction of selectableActions) {\n        const selectedAction = { entity: selectableAction.entity, action: selectableAction.action }\n        const hasMovement = selectableAction.action.subActions.find(s => s.kind === 'movement') !== undefined\n        if (hasMovement) {\n          movementActions.push(selectedAction)\n        }\n        const hasAttack =\n          selectableAction.action.subActions.find(s => path !== undefined && s.kind === 'attack' && s.range >= path.cost) !== undefined\n        if (hasAttack) {\n          fightActions.push(selectedAction)\n        }\n        allActions.push(selectedAction)\n      }\n\n      const dist = targetPosition.position.minus(position.position)\n      let selection: SelectedAction | undefined = undefined\n      const canGetCloser = dist.lN() > 1 && movementActions.length > 0\n      const isInSight = path !== undefined\n      if (canGetCloser) {\n        selection = this.random.pick(movementActions)\n      } else if (fightActions.length > 0 && isInSight) {\n        selection = this.random.pick(fightActions)\n      } else {\n        selection = allActions.find(a => a.action.name === 'no move')\n      }\n\n      if (selection !== undefined) {\n        takeTurn.selectionState = {\n          skippedActions: 0,\n          target,\n          currentSubAction: 0,\n          selection,\n        }\n      } else {\n        this.endTurn(world, entity)\n      }\n    } else {\n      this.endTurn(world, entity)\n    }\n  }\n\n  public takeAction(world: TlbWorld, entity: Entity, takeTurn: TakeTurnComponent, state: SelectionState) {\n    const action = state.selection!.action\n    const subActions = action.subActions.length\n    if (state.currentSubAction >= subActions) {\n      clearExpiredEffects(world, entity)\n      switch (action.cost) {\n        case 'action':\n          takeTurn.acted = true\n          break\n        case 'movement':\n          takeTurn.moved = true\n          break\n        case 'either':\n          if (takeTurn.moved) {\n            takeTurn.acted = true\n          } else {\n            takeTurn.moved = true\n          }\n          break\n        case 'all':\n        case 'both':\n          takeTurn.acted = true\n          takeTurn.moved = true\n          break\n      }\n      takeTurn.selectionState = undefined\n    } else {\n      const currentAction = action.subActions[state.currentSubAction]\n      switch (currentAction.kind) {\n        case 'movement':\n          this.move(world, entity, state.target!, currentAction)\n          break\n        case 'attack':\n          this.attack(world, entity, state.target!, currentAction)\n          break\n        case 'status':\n          this.status(world, entity, currentAction, state.selection!.entity)\n          break\n      }\n      state.currentSubAction++\n    }\n  }\n\n  public move(world: TlbWorld, entity: Entity, target: Entity, movement: Movement) {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const targetPosition = world.getComponent<PositionComponent>(target, 'position')!\n    const path = this.queries.shortestPath(world, position.level, position.position, targetPosition.position, {\n      self: entity,\n      maximumCost: movement.range,\n      endInDoor: true,\n      bestEffort: true,\n    })\n    if (path !== undefined && path.path.length > 0) {\n      world.editEntity(entity).withComponent<ScriptComponent>('script', {\n        path: path.path,\n      })\n    }\n  }\n\n  public attack(world: TlbWorld, entity: Entity, target: Entity, attack: Attack) {\n    const position = world.getComponent<PositionComponent>(entity, 'position')!\n    const targetPosition = world.getComponent<PositionComponent>(target!, 'position')!\n    const path = this.queries.los(world, position.level, position.position, targetPosition.position, {})\n    if (path !== undefined && path.cost <= attack.range) {\n      attackTarget(world, this.random, entity, target!, attack)\n    }\n  }\n\n  public findTarget(world: TlbWorld, position: Vector): Entity | undefined {\n    let nearestPlayer: Entity | undefined\n    let bestDist = Number.MAX_SAFE_INTEGER\n    world.getStorage('player').foreach(player => {\n      const playerPosition = world.getComponent<PositionComponent>(player, 'position')\n      if (playerPosition !== undefined) {\n        const dist = position.minus(playerPosition.position).squaredLength()\n        if (nearestPlayer === undefined && dist < bestDist) {\n          nearestPlayer = player\n          bestDist = dist\n        }\n      }\n    })\n    return nearestPlayer\n  }\n\n  public status(world: TlbWorld, entity: Entity, status: Status, item: Entity): boolean {\n    status.effects.forEach(effect => {\n      applyEffect(world, this.random, entity, { source: item, effect, isCritical: false, isPiercing: false })\n    })\n    return true\n  }\n\n  public endTurn(world: TlbWorld, entity: Entity): void {\n    world\n      .editEntity(entity)\n      .removeComponent('take-turn')\n      .withComponent('took-turn', {})\n  }\n}\n","import { ComponentName, TlbSystem, TlbWorld } from '../tlb'\nimport { Entity } from '../ecs/entity'\nimport { TakeTurnComponent } from '../components/rounds'\nimport { clearExpiredEffects, updateEffects } from '../component-reducers/apply-effect'\nimport { Random } from '../random'\nimport { Distribution } from '../random/distributions'\nimport { InventoryComponent } from '../components/items'\n\nexport class StartRound implements TlbSystem {\n  public readonly components: ComponentName[] = ['start-turn']\n\n  private readonly uniform: Random\n  public constructor(rng: Distribution) {\n    this.uniform = new Random(rng)\n  }\n\n  public update(world: TlbWorld, entity: Entity): void {\n    clearExpiredEffects(world, entity)\n    updateEffects(world, entity, this.uniform)\n    world.getComponent<InventoryComponent>(entity, 'inventory')!.content.forEach(item => {\n      clearExpiredEffects(world, item)\n      updateEffects(world, item, this.uniform)\n    })\n\n    world\n      .editEntity(entity)\n      .removeComponent('start-turn')\n      .withComponent<TakeTurnComponent>('take-turn', {\n        moved: false,\n        acted: false,\n        selectionState: undefined,\n      })\n  }\n}\n","import { ResourceName, TlbResource, TlbWorld } from '../tlb'\nimport { Renderer } from '../renderer/renderer'\nimport { LoreType } from '../assets/lores'\nimport { LogResource, Log } from './log'\nimport { QuestType } from '../assets/quests'\n\nexport interface Progress {\n  readonly unlockedLore: Set<LoreType>\n\n  unlockLore(world: TlbWorld, lore: LoreType): void\n  startQuest(world: TlbWorld, quest: QuestType): void\n}\n\nexport class ProgressResource implements TlbResource, Progress {\n  public readonly kind: ResourceName = 'progress'\n\n  public readonly unlockedLore: Set<LoreType> = new Set()\n  public readonly activeQuests: Set<QuestType> = new Set()\n\n  public update({}: TlbWorld): void {}\n\n  public render({}: Renderer): void {}\n\n  public unlockLore(world: TlbWorld, lore: LoreType): void {\n    this.unlockedLore.add(lore)\n    const log: Log = world.getResource<LogResource>('log')\n    log.text(`You unlocked ${lore}!`)\n  }\n\n  public startQuest(world: TlbWorld, quest: QuestType): void {\n    this.activeQuests.add(quest)\n    const log: Log = world.getResource<LogResource>('log')\n    log.text(`You started quest ${quest}!`)\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { PositionComponent } from '../components/position'\nimport { AbstractState, State } from './state'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { ViewportResource, Viewport } from '../resources/viewport'\nimport { UIResource } from '../resources/ui'\nimport { Entity } from '../ecs/entity'\nimport { MainMenu } from './main-menu'\nimport { characterCreators } from '../assets/characters'\nimport { Random } from '../random'\nimport { Distribution } from '../random/distributions'\n\nexport class Running extends AbstractState {\n  private uniform: Random\n  public constructor(rng: Distribution) {\n    super('running', ['fov', 'player-control', 'player-interaction', 'npc', 'trigger', 'free-mode-control'])\n    this.uniform = new Random(rng)\n  }\n\n  public start(world: TlbWorld): void {\n    super.start(world)\n    if (world.components.get('viewport-focus')!.size() === 0) {\n      this.createViewportFocus(world)\n    }\n    world.getResource<UIResource>('ui').reset()\n  }\n\n  public createViewportFocus(world: TlbWorld): void {\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    world.components.get('spawn')!.foreach(spawn => {\n      this.spawnPlayer(world, this.uniform, map, spawn)\n    })\n    this.createUILayer(world)\n  }\n\n  public spawnPlayer(world: TlbWorld, random: Random, map: WorldMap, spawn: Entity): void {\n    const position = world.getComponent<PositionComponent>(spawn, 'position')!\n    const player = characterCreators.player(world, random, 'entrance', {\n      type: random.pick(['red_player', 'green_player', 'yellow_player', 'blue_player']),\n    })\n    world\n      .editEntity(player)\n      .withComponent('position', { ...position })\n      .withComponent<{}>('viewport-focus', {})\n\n    const ui = world.getResource<UIResource>('ui')\n    ui.createTabs(world, player)\n\n    map.levels[position.level].setCharacter(position.position, player)\n  }\n\n  public createUILayer(world: TlbWorld): void {\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    viewport.addLayer({\n      getRenderable: (world, _, position) => {\n        const ui = world.getResource<UIResource>('ui')\n        return { entity: undefined, opaque: !ui.hasElement(position), centered: true }\n      },\n      transformed: false,\n    })\n  }\n\n  public update(world: TlbWorld, pushState: (state: State) => void): void {\n    const player: Entity = world.getStorage('player').first()!\n    if (world.hasComponent(player, 'dead')) {\n      pushState(new MainMenu())\n    }\n  }\n\n  public isFrameLocked(): boolean {\n    return true\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { AbstractState } from './state'\nimport { PositionComponent } from '../components/position'\n\nexport class MainMenu extends AbstractState {\n  public constructor() {\n    super('main-menu', ['free-mode-control'])\n  }\n\n  public start(world: TlbWorld) {\n    super.start(world)\n    const focus = world.getStorage('viewport-focus').first()!\n    world.getStorage('viewport-focus').clear()\n\n    const position = world.getComponent<PositionComponent>(focus, 'position')\n    if (position) {\n      world\n        .createEntity()\n        .withComponent<{}>('free-mode-anchor', {})\n        .withComponent('viewport-focus', {})\n        .withComponent<PositionComponent>('position', { ...position })\n    }\n  }\n\n  public isDone(_world: TlbWorld) {\n    return false\n  }\n\n  public update(_world: TlbWorld): void {}\n\n  public isFrameLocked(): boolean {\n    return true\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { AbstractState } from './state'\n\nimport { RegionComponent } from '../components/region'\n\nimport { Entity } from '../ecs/entity'\nimport { PositionComponent } from '../components/position'\nimport { WorldMap, WorldMapResource } from '../resources/world-map'\nimport { FunctionalShape } from '../geometry/functional-shape'\nimport { FeatureComponent, createFeatureFromType } from '../components/feature'\nimport { ViewportResource, Viewport } from '../resources/viewport'\nimport { create } from '../generative/region-creator'\n\nexport class MapCreation extends AbstractState {\n  private startRegion: Entity | undefined\n\n  public constructor() {\n    super('map-creation', ['region-builder'])\n  }\n\n  public start(world: TlbWorld): void {\n    super.start(world)\n\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n    const map = world.getResource<WorldMapResource>('map')\n    viewport.addLayer({\n      getRenderable: (_world, level, position) => {\n        const entity = map.levels[level].getTile(position)\n        return { entity, opaque: true, centered: true }\n      },\n      transformed: true,\n    })\n    viewport.addLayer({\n      getRenderable: (_world, level, position) => {\n        const entity = map.levels[level].getCharacter(position)\n        return { entity, opaque: true, centered: false }\n      },\n      transformed: true,\n    })\n\n    this.startRegion = create(world)\n  }\n\n  public update({}: TlbWorld): void {}\n\n  public stop(world: TlbWorld): void {\n    super.stop(world)\n    if (this.startRegion !== undefined) {\n      const region = world.getComponent<RegionComponent>(this.startRegion, 'region')!\n      world\n        .createEntity()\n        .withComponent<PositionComponent>('position', { level: region.level, position: region.exits[0] })\n        .withComponent('spawn', {})\n    }\n    this.fillWalls(world)\n  }\n\n  public isFrameLocked(): boolean {\n    return false\n  }\n\n  private fillWalls(world: TlbWorld) {\n    const map: WorldMap = world.getResource<WorldMapResource>('map')\n    map.levels.forEach((region, index) => {\n      region.boundary.foreach(p => {\n        const someTileExists = FunctionalShape.lN(p, 1, false).some(p1 => {\n          const e = region.getTile(p1)\n          return e !== undefined && world.getComponent<FeatureComponent>(e, 'feature')!.feature().name !== 'wall'\n        })\n        if (region.getTile(p) === undefined && someTileExists) {\n          createFeatureFromType(world, index, p, 'wall')\n        }\n      })\n    })\n  }\n}\n","import { TlbWorld } from '../tlb'\nimport { RegionComponent, RegionsType } from '../components/region'\nimport { Rectangle } from '../geometry/rectangle'\nimport { Shape } from '../geometry/shape'\nimport { Entity } from '../ecs/entity'\nimport { Vector } from '../spatial'\n\nfunction regionComponent(type: RegionsType, shape: Shape, exits: Vector[], level: number): RegionComponent {\n  return { type, shape, level, exits, authorized: new Set() }\n}\n\nexport function createRegion(world: TlbWorld, level: number, type: RegionsType, shape: Shape, exits: Vector[]): Entity {\n  return world\n    .createEntity()\n    .withComponent<RegionComponent>('region', regionComponent(type, shape, exits, level))\n    .withComponent('active', {}).entity\n}\n\nconst leftRegion = new Rectangle(6, 1, 49, 49)\nconst rightRegion = new Rectangle(56, 1, 49, 49)\nconst leftElevator = new Rectangle(1, 26, 5, 5)\nconst rightElevator = new Rectangle(105, 26, 5, 5)\nconst regionConnect = new Vector([55, 29])\n\nconst cyberSpaceBase = new Rectangle(6, 1, 49, 49)\nconst cyberSpacePlus = new Rectangle(56, 1, 49, 49)\n\nexport function buildCore(world: TlbWorld): void {\n  const coreRegion = new Rectangle(6, 1, 99, 50)\n  createRegion(world, 4, 'elevator', leftElevator, [leftElevator.centerRight])\n  createRegion(world, 4, 'core', coreRegion, [leftElevator.grow().centerRight, rightElevator.grow().centerLeft])\n  createRegion(world, 4, 'elevator', rightElevator, [rightElevator.centerLeft])\n}\n\nexport function buildCyberSpace(world: TlbWorld): void {\n  createRegion(world, 5, 'blue-plus', cyberSpacePlus, [cyberSpaceBase.grow().centerRight])\n  createRegion(world, 5, 'blue-base', cyberSpaceBase, [cyberSpacePlus.grow().centerLeft])\n}\n\nexport function buildLevel(world: TlbWorld, level: number, left: RegionsType, right: RegionsType): Entity {\n  createRegion(world, level, 'elevator', leftElevator, [leftElevator.centerRight])\n  createRegion(world, level, left, leftRegion, [leftElevator.grow().centerRight, regionConnect])\n  createRegion(world, level, right, rightRegion, [rightElevator.grow().centerLeft, regionConnect])\n  return createRegion(world, level, 'elevator', rightElevator, [rightElevator.centerLeft])\n}\n\nexport function buildGroundFloor(world: TlbWorld): Entity {\n  const groundFloorRegion = new Rectangle(6, 1, 99, 50)\n  const entranceRegion = new Rectangle(56, 52, 20, 20)\n  createRegion(world, 0, 'elevator', leftElevator, [leftElevator.centerRight])\n  createRegion(world, 0, 'ground-floor', groundFloorRegion, [entranceRegion.grow().centerTop])\n  createRegion(world, 0, 'elevator', rightElevator, [rightElevator.centerLeft])\n  return createRegion(world, 0, 'entrance', entranceRegion, [entranceRegion.center])\n}\n\nexport function create(world: TlbWorld): Entity {\n  buildCore(world)\n  buildCyberSpace(world)\n  buildLevel(world, 3, 'red-plus', 'green-plus')\n  buildLevel(world, 2, 'yellow-plus', 'red-base')\n  buildLevel(world, 1, 'green-base', 'yellow-base')\n  return buildGroundFloor(world)\n}\n","import { TlbWorld } from '../tlb'\nimport { WorldMapResource } from '../resources/world-map'\nimport { Vector } from '../spatial'\nimport { bfs } from './bfs'\nimport { FunctionalShape } from '../geometry/functional-shape'\nimport { astar, Path } from './astar'\nimport { Entity } from '../ecs/entity'\nimport { digitalLine } from './digital-line'\nimport { PermissiveFov } from 'permissive-fov'\n\nexport interface QueryParameters {\n  onlyDiscovered: boolean\n  maximumCost: number\n  bestEffort: boolean\n  self: Entity\n\n  endInDoor: boolean\n  jump: boolean\n}\n\nexport class Queries {\n  public fov(world: TlbWorld, level: number, origin: Vector, callback: (pos: Vector) => void) {\n    const originFloor = new Vector([origin.fX, origin.fY])\n    const map = world.getResource<WorldMapResource>('map')\n    const fov = new PermissiveFov(map.width, map.width, (x, y) => !map.levels[level].isLightBlocking(world, new Vector([x, y])))\n    fov.compute(originFloor.x, originFloor.y, 20, (x, y) => {\n      callback(new Vector([x, y]))\n    })\n  }\n\n  public explore(\n    world: TlbWorld,\n    level: number,\n    origin: Vector,\n    visit: (pos: Vector, distance: number) => boolean,\n    params: Partial<QueryParameters>\n  ): void {\n    const map = world.getResource<WorldMapResource>('map')\n    const originFloor = new Vector([origin.fX, origin.fY])\n    const maximumDepth = params.maximumCost || Number.MAX_SAFE_INTEGER\n    const onlyDiscovered = params.onlyDiscovered || false\n    bfs(\n      map.levels[level].boundary.width,\n      originFloor,\n      target => FunctionalShape.lN(target, 1, false),\n      visit,\n      (target, depth) => {\n        if (depth >= maximumDepth || map.levels[level].isBlocking(world, target)) {\n          return false\n        }\n        return onlyDiscovered ? map.levels[level].isDiscovered(target) : true\n      }\n    )\n  }\n\n  public shortestPath(world: TlbWorld, level: number, origin: Vector, target: Vector, params: Partial<QueryParameters>): Path | undefined {\n    const map = world.getResource<WorldMapResource>('map').levels[level]\n    const onlyDiscovered = params.onlyDiscovered || false\n    const originFloor = new Vector([origin.fX, origin.fY])\n    const targetFloor = new Vector([target.fX, target.fY])\n    const maximumCost = params.maximumCost || Number.MAX_SAFE_INTEGER\n    const bestEffort = params.bestEffort || false\n    const endInDoor = params.endInDoor || false\n    const jump = params.jump || false\n    if (!bestEffort && map.isBlocking(world, target)) {\n      return undefined\n    }\n\n    const isBlocked = (v: Vector) => (jump ? map.blocksJump(world, v) : map.isBlocking(world, v, params.self))\n\n    const path = astar(\n      originFloor,\n      targetFloor,\n      (current, neighbour) => {\n        if (onlyDiscovered && !map.isDiscovered(neighbour)) {\n          return undefined\n        }\n\n        if (isBlocked(neighbour)) {\n          if (endInDoor && map.tileMatches(world, neighbour, f => f !== undefined && f.feature().name === 'door')) {\n            return current.minus(neighbour).l1()\n          }\n          return undefined\n        }\n        return current.minus(neighbour).l1()\n      },\n      v => {\n        if (endInDoor && !bestEffort && isBlocked(v)) {\n          return FunctionalShape.empty(v)\n        }\n        return FunctionalShape.l1(v, 1, false)\n      },\n      v => targetFloor.minus(v).l1(),\n      maximumCost,\n      bestEffort\n    )\n\n    if (path !== undefined && path.path.length - 1 <= maximumCost) {\n      return { path: path.path.slice(0, path.path.length - 1), cost: path.cost }\n    }\n    return undefined\n  }\n\n  public los(world: TlbWorld, level: number, origin: Vector, target: Vector, params: Partial<QueryParameters>): Path | undefined {\n    const map = world.getResource<WorldMapResource>('map')\n    const originFloor = new Vector([origin.fX, origin.fY])\n    const targetFloor = new Vector([target.fX, target.fY])\n    const maximumCost = params.maximumCost || Number.MAX_SAFE_INTEGER\n    if (targetFloor.minus(originFloor).length() <= maximumCost) {\n      const path = digitalLine(originFloor, targetFloor, p => map.levels[level].isLightBlocking(world, p))\n      if (path !== undefined) {\n        return { path: path.slice(1, path.length), cost: path.length - 1 }\n      }\n    }\n    return undefined\n  }\n}\n","import { Vector } from '../spatial'\nimport { Shape } from '../geometry/shape'\nimport { SetSpace } from '../spatial/set-space'\n\nexport function bfs(\n  width: number,\n  origin: Vector,\n  neighbourhood: (target: Vector) => Shape,\n  visit: (target: Vector, depth: number) => boolean,\n  canVisit: (target: Vector, depth: number) => boolean\n): void {\n  const visited: SetSpace = new SetSpace(width)\n  visited.set(origin)\n  let currentDepth: number = 1\n  let currentLayer: Vector[] = []\n  let nextLayer: Vector[] = []\n  putNeighboursIntoNextLayer(visited, neighbourhood(origin), currentLayer, n => canVisit(n, currentDepth))\n\n  let finished = false\n  while (!finished) {\n    const current = currentLayer.pop()\n    if (current !== undefined) {\n      finished = visit(current, currentDepth)\n      putNeighboursIntoNextLayer(visited, neighbourhood(current), nextLayer, n => canVisit(n, currentDepth))\n    } else {\n      currentLayer = nextLayer\n      nextLayer = []\n      currentDepth++\n      if (currentLayer.length === 0) {\n        break\n      }\n    }\n  }\n}\n\nfunction putNeighboursIntoNextLayer(\n  visited: SetSpace,\n  neighbourhood: Shape,\n  layer: Vector[],\n  canVisit: (neighbour: Vector) => boolean\n): void {\n  neighbourhood.foreach(neighbour => {\n    if (!visited.has(neighbour) && canVisit(neighbour)) {\n      layer.push(neighbour)\n      visited.set(neighbour)\n    }\n  })\n}\n","import { RadixHeap } from './radix-heap'\nimport { Vector } from '../spatial'\nimport { Shape } from '../geometry/shape'\n\nexport interface Path {\n  path: Vector[]\n  cost: number\n}\n\nexport function astar(\n  from: Vector,\n  to: Vector,\n  cost: (v: Vector, w: Vector) => number | undefined,\n  neighbourhood: (target: Vector) => Shape,\n  heuristic: (v: Vector) => number,\n  maximumCost: number,\n  bestEffort: boolean = false\n): Path | undefined {\n  const actualMaximumCost = bestEffort ? Number.MAX_SAFE_INTEGER : maximumCost\n  const { parent, costMap, closest } = calculateAstar(from, to, cost, neighbourhood, heuristic, actualMaximumCost)\n  if (bestEffort === false && closest.key !== to.key) {\n    return undefined\n  }\n  return extractPath(closest, parent, costMap, maximumCost)\n}\n\nfunction calculateAstar(\n  from: Vector,\n  to: Vector,\n  cost: (v: Vector, w: Vector) => number | undefined,\n  neighbourhood: (target: Vector) => Shape,\n  heuristic: (v: Vector) => number,\n  maximumCost: number\n): { parent: Map<string, Vector>; costMap: Map<string, number>; closest: Vector } {\n  const targetKey = to.key\n  const parent: Map<string, Vector> = new Map()\n  const closed: Set<string> = new Set()\n  const open: RadixHeap<Vector> = new RadixHeap(256)\n  const costMap: Map<string, number> = new Map()\n  let closest = from\n  let minHeuristic = heuristic(from)\n  open.insert(from.key, from, minHeuristic)\n  costMap.set(from.key, 0)\n  parent.set(from.key, from)\n\n  while (true) {\n    const position = open.extractMin()\n    if (position === undefined) {\n      break\n    }\n    const currentHeuristic = heuristic(position)\n    if (currentHeuristic <= minHeuristic) {\n      closest = position\n      minHeuristic = currentHeuristic\n    }\n    const currentKey = position.key\n    if (targetKey === currentKey || currentHeuristic > 5 * minHeuristic) {\n      break\n    }\n\n    closed.add(currentKey)\n    const currentCost = costMap.get(currentKey)!\n\n    neighbourhood(position).foreach(neighbor => {\n      const key = neighbor.key\n      if (!closed.has(key)) {\n        const distance = cost(position, neighbor)\n        if (distance !== undefined) {\n          const tentative = currentCost + distance\n          const previousCost = costMap.get(key) || Number.MAX_SAFE_INTEGER\n          if (tentative < previousCost && tentative <= maximumCost) {\n            parent.set(key, position)\n            costMap.set(key, tentative)\n\n            const heuristicScore = tentative + heuristic(neighbor)\n            if (open.getPriority(key) === undefined) {\n              open.insert(key, neighbor, heuristicScore)\n            } else {\n              open.decreasePriority(key, heuristicScore)\n            }\n          }\n        }\n      }\n    })\n  }\n  return { parent, costMap, closest }\n}\n\nfunction extractPath(to: Vector, parent: Map<string, Vector>, costMap: Map<string, number>, maximumCost: number): Path | undefined {\n  let path: Vector[] = []\n  let current = to\n  let cost = costMap.get(to.key)!\n  while (true) {\n    const key = current.key\n    const tentativeCost = costMap.get(current.key)!\n    if (cost > maximumCost) {\n      cost = tentativeCost\n    }\n    if (cost <= maximumCost) {\n      path.push(current)\n    }\n\n    const parentValue = parent.get(key)\n    if (parentValue === undefined) {\n      return undefined\n    }\n    if (current.key === parentValue.key) {\n      break\n    }\n    current = parentValue\n  }\n  return { path, cost }\n}\n","import { dropAt } from '../array-utils'\n\ninterface Entry<T> {\n  priority: number\n  key: string\n  value: T\n}\n\nexport class RadixHeap<T> {\n  public readonly bucketCount: number\n  public readonly bucketOfValue: Map<string, number> = new Map()\n  public readonly buckets: Entry<T>[][] = []\n  public readonly boundaries: number[] = []\n\n  constructor(public readonly maximumKeySpan: number) {\n    this.bucketCount = Math.floor(Math.log2(maximumKeySpan + 1)) + 1\n    this.boundaries[0] = 0\n    this.buckets[0] = []\n    this.boundaries[1] = 1\n    this.buckets[1] = []\n    this.boundaries[this.bucketCount + 1] = maximumKeySpan\n    for (let i = 2; i <= this.bucketCount; i++) {\n      this.boundaries[i] = 2 << (i - 2)\n      this.buckets[i] = []\n    }\n  }\n\n  insert(key: string, value: T, priority: number): void {\n    this.insertIntoLargestPossibleBucket(key, value, priority, this.bucketCount)\n  }\n\n  getPriority(key: string): number | undefined {\n    let bucket = this.bucketOfValue.get(key)\n    if (bucket === undefined) {\n      return undefined\n    }\n    return this.findInBucket(bucket, key)\n  }\n\n  decreasePriority(key: string, priority: number): void {\n    let bucket = this.bucketOfValue.get(key)\n    if (bucket === undefined) {\n      throw Error(`unknown bucket for key ${key}`)\n    }\n    const entry = this.removeFromBucket(key, bucket)\n    this.insertIntoLargestPossibleBucket(key, entry.value, priority, bucket)\n  }\n\n  extractMin(): T | undefined {\n    let result = this.buckets[0].pop()\n    if (result === undefined) {\n      let bucket = 1\n      while (bucket <= this.bucketCount && this.buckets[bucket].length === 0) {\n        bucket++\n      }\n      if (bucket > this.bucketCount) {\n        return undefined\n      }\n      let smallestK = Number.MAX_SAFE_INTEGER\n      const currentBucket = this.buckets[bucket]\n      this.buckets[bucket] = []\n      for (let i = 0; i < currentBucket.length; i++) {\n        const entry = currentBucket[i]\n        if (smallestK > entry.priority) {\n          smallestK = entry.priority\n        }\n        this.bucketOfValue.delete(entry.key)\n      }\n\n      this.boundaries[0] = smallestK\n      this.boundaries[1] = smallestK + 1\n      for (let i = 2; i <= bucket; i++) {\n        this.boundaries[i] = Math.min(this.boundaries[i - 1] + (2 << (i - 2)), this.boundaries[bucket + 1])\n      }\n      for (let i = 0; i < currentBucket.length; i++) {\n        const entry = currentBucket[i]\n        this.insertIntoLargestPossibleBucket(entry.key, entry.value, entry.priority, bucket)\n      }\n      result = this.buckets[0].pop()\n    }\n    this.bucketOfValue.delete(result!.key)\n    return result!.value\n  }\n\n  private removeFromBucket(key: string, bucket: number): Entry<T> {\n    this.bucketOfValue.delete(key)\n    const currentBucket = this.buckets[bucket]\n    const index = currentBucket.findIndex(v => v.key === key)!\n    const entry = currentBucket[index]\n    dropAt(currentBucket, index)\n    return entry\n  }\n\n  private insertIntoLargestPossibleBucket(key: string, value: T, priority: number, bucket: number): void {\n    while (this.boundaries[bucket] > priority) {\n      --bucket\n    }\n    this.buckets[bucket].push({ key, value, priority })\n    this.bucketOfValue.set(key, bucket)\n  }\n\n  private findInBucket(bucket: number, key: string): number | undefined {\n    const currentBucket = this.buckets[bucket]\n    const index = currentBucket.findIndex(v => v.key === key)!\n    const entry = currentBucket[index]\n    if (entry !== undefined) {\n      return entry.priority\n    }\n    return undefined\n  }\n}\n","import { Vector } from '../spatial'\nimport { bresenham } from './bresenham'\n\nexport function digitalLine(from: Vector, to: Vector, isBlocked: (p: Vector) => boolean): Vector[] | undefined {\n  const maxEps = Math.max(Math.abs(from.x - to.x), Math.abs(from.y - to.y))\n  const minEps = -Math.floor(maxEps / 2)\n  for (let eps = -Math.floor(maxEps / 2); eps < minEps + maxEps; eps++) {\n    let free = true\n    const path: Vector[] = []\n    for (const p of bresenham(from, to, false, eps)) {\n      path.push(p)\n      if (isBlocked(p)) {\n        free = false\n        eps += Math.max(0, maxEps - path.length)\n        break\n      }\n    }\n    if (free) {\n      return path\n    }\n  }\n  return undefined\n}\n","import { Vector } from '../spatial'\n\nexport function* bresenham(from: Vector, to: Vector, overshoot: boolean = false, initialEps: number = 0): Iterable<Vector> {\n  const dx = to.x - from.x\n  const dy = to.y - from.y\n  const adx = Math.abs(dx)\n  const ady = Math.abs(dy)\n  const sx = dx > 0 ? 1 : -1\n  const sy = dy > 0 ? 1 : -1\n  var eps = initialEps\n  if (adx > ady) {\n    for (let x = from.x, y = from.y; overshoot || sx < 0 ? x >= to.x : x <= to.x; x += sx) {\n      yield new Vector([x, y])\n      eps += ady\n      if (eps << 1 >= adx) {\n        y += sy\n        eps -= adx\n      }\n    }\n  } else {\n    for (let x = from.x, y = from.y; sy < 0 ? y >= to.y : y <= to.y; y += sy) {\n      yield new Vector([x, y])\n      eps += adx\n      if (eps << 1 >= ady) {\n        x += sx\n        eps -= ady\n      }\n    }\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar View_1 = require(\"./View\");\nvar Line_1 = require(\"./Line\");\nvar Point_1 = require(\"./Point\");\nvar ViewBump_1 = require(\"./ViewBump\");\nvar PermissiveFov = (function () {\n    function PermissiveFov(mapWidth, mapHeight, isTransparent) {\n        this.mapWidth = mapWidth;\n        this.mapHeight = mapHeight;\n        this.isTransparent = isTransparent;\n    }\n    PermissiveFov.prototype.compute = function (startX, startY, radius, setVisible) {\n        var data = {\n            setVisible: setVisible,\n            isTransparent: this.isTransparent,\n            startX: startX,\n            startY: startY,\n            radius: radius,\n            visited: []\n        };\n        data.setVisible(startX, startY);\n        data.visited[this.mapWidth * startY + startX] = true;\n        var minExtentX = (startX < radius ? startX : radius);\n        var maxExtentX = (this.mapWidth - startX <= radius ? this.mapWidth - startX - 1 : radius);\n        var minExtentY = (startY < radius ? startY : radius);\n        var maxExtentY = (this.mapHeight - startY <= radius ? this.mapHeight - startY - 1 : radius);\n        this.computeQuadrant(data, 1, 1, maxExtentX, maxExtentY);\n        this.computeQuadrant(data, 1, -1, maxExtentX, minExtentY);\n        this.computeQuadrant(data, -1, -1, minExtentX, minExtentY);\n        this.computeQuadrant(data, -1, 1, minExtentX, maxExtentY);\n    };\n    ;\n    PermissiveFov.prototype.setMapDimensions = function (mapWidth, mapHeight) {\n        this.mapWidth = mapWidth;\n        this.mapHeight = mapHeight;\n    };\n    ;\n    PermissiveFov.prototype.setIsTransparent = function (isTransparent) {\n        this.isTransparent = isTransparent;\n    };\n    ;\n    PermissiveFov.prototype.computeQuadrant = function (data, deltaX, deltaY, maxX, maxY) {\n        var activeViews = [];\n        var startJ;\n        var maxJ;\n        var maxI = maxX + maxY;\n        var shallowLine = new Line_1.Line(0, 1, maxX, 0);\n        var steepLine = new Line_1.Line(1, 0, 0, maxY);\n        var viewIndex = 0;\n        activeViews.push(new View_1.View(shallowLine, steepLine));\n        for (var i = 1; i <= maxI && activeViews.length; ++i) {\n            startJ = (0 > i - maxX ? 0 : i - maxX);\n            maxJ = (i < maxY ? i : maxY);\n            for (var j = startJ; j <= maxJ && viewIndex < activeViews.length; ++j) {\n                this.visitPoint(data, i - j, j, deltaX, deltaY, viewIndex, activeViews);\n            }\n        }\n    };\n    PermissiveFov.prototype.visitPoint = function (data, x, y, deltaX, deltaY, viewIndex, activeViews) {\n        var topLeft = new Point_1.Point(x, y + 1);\n        var bottomRight = new Point_1.Point(x + 1, y);\n        var realX = x * deltaX;\n        var realY = y * deltaY;\n        for (; viewIndex < activeViews.length &&\n            activeViews[viewIndex].steepLine.isBelowOrCollinear(bottomRight.x, bottomRight.y); ++viewIndex) {\n        }\n        if (viewIndex === activeViews.length ||\n            activeViews[viewIndex].shallowLine.isAboveOrCollinear(topLeft.x, topLeft.y)) {\n            return;\n        }\n        var visitedPoint = new Point_1.Point(data.startX + realX, data.startY + realY);\n        var visitedPointIndex = this.mapWidth * visitedPoint.y + visitedPoint.x;\n        if (!data.visited[visitedPointIndex]) {\n            data.visited[visitedPointIndex] = true;\n            data.setVisible(visitedPoint.x, visitedPoint.y);\n        }\n        if (data.isTransparent(visitedPoint.x, visitedPoint.y)) {\n            return;\n        }\n        var shallowLineIsAboveBottomRight = activeViews[viewIndex].shallowLine.isAbove(bottomRight.x, bottomRight.y);\n        var steepLineIsBelowTopLeft = activeViews[viewIndex].steepLine.isBelow(topLeft.x, topLeft.y);\n        if (shallowLineIsAboveBottomRight && steepLineIsBelowTopLeft) {\n            activeViews.splice(viewIndex, 1);\n        }\n        else if (shallowLineIsAboveBottomRight) {\n            this.addShallowBump(topLeft.x, topLeft.y, activeViews, viewIndex);\n            this.checkView(activeViews, viewIndex);\n        }\n        else if (steepLineIsBelowTopLeft) {\n            this.addSteepBump(bottomRight.x, bottomRight.y, activeViews, viewIndex);\n            this.checkView(activeViews, viewIndex);\n        }\n        else {\n            var shallowViewIndex = viewIndex;\n            var steepViewIndex = ++viewIndex;\n            activeViews.splice(shallowViewIndex, 0, activeViews[shallowViewIndex].clone());\n            this.addSteepBump(bottomRight.x, bottomRight.y, activeViews, shallowViewIndex);\n            if (!this.checkView(activeViews, shallowViewIndex)) {\n                --steepViewIndex;\n            }\n            this.addShallowBump(topLeft.x, topLeft.y, activeViews, steepViewIndex);\n            this.checkView(activeViews, steepViewIndex);\n        }\n    };\n    PermissiveFov.prototype.addShallowBump = function (x, y, activeViews, viewIndex) {\n        activeViews[viewIndex].shallowLine.setFarPoint(x, y);\n        activeViews[viewIndex].shallowBump = new ViewBump_1.ViewBump(x, y, activeViews[viewIndex].shallowBump);\n        for (var curBump = activeViews[viewIndex].steepBump; curBump; curBump = curBump.parent) {\n            if (activeViews[viewIndex].shallowLine.isAbove(curBump.x, curBump.y)) {\n                activeViews[viewIndex].shallowLine.setNearPoint(curBump.x, curBump.y);\n            }\n        }\n    };\n    PermissiveFov.prototype.addSteepBump = function (x, y, activeViews, viewIndex) {\n        activeViews[viewIndex].steepLine.setFarPoint(x, y);\n        activeViews[viewIndex].steepBump = new ViewBump_1.ViewBump(x, y, activeViews[viewIndex].steepBump);\n        for (var curBump = activeViews[viewIndex].shallowBump; curBump; curBump = curBump.parent) {\n            if (activeViews[viewIndex].steepLine.isBelow(curBump.x, curBump.y)) {\n                activeViews[viewIndex].steepLine.setNearPoint(curBump.x, curBump.y);\n            }\n        }\n    };\n    PermissiveFov.prototype.checkView = function (activeViews, viewIndex) {\n        if (activeViews[viewIndex].shallowLine.isLineCollinear(activeViews[viewIndex].steepLine) &&\n            (activeViews[viewIndex].shallowLine.isCollinear(0, 1)\n                || activeViews[viewIndex].shallowLine.isCollinear(1, 0))) {\n            activeViews.splice(viewIndex, 1);\n            return false;\n        }\n        return true;\n    };\n    return PermissiveFov;\n}());\nexports.PermissiveFov = PermissiveFov;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar View = (function () {\n    function View(shallowLine, steepLine, shallowBump, steepBump) {\n        this.shallowLine = shallowLine;\n        this.steepLine = steepLine;\n        this.shallowBump = shallowBump;\n        this.steepBump = steepBump;\n    }\n    View.prototype.clone = function () {\n        return new View(this.shallowLine.clone(), this.steepLine.clone(), this.shallowBump ? this.shallowBump.clone() : undefined, this.steepBump ? this.steepBump.clone() : undefined);\n    };\n    return View;\n}());\nexports.View = View;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Line = (function () {\n    function Line(nearX, nearY, farX, farY) {\n        this.nearX = nearX;\n        this.nearY = nearY;\n        this.farX = farX;\n        this.farY = farY;\n        this.deltaX = farX - nearX;\n        this.deltaY = farY - nearY;\n    }\n    Line.prototype.clone = function () {\n        return new Line(this.nearX, this.nearY, this.farX, this.farY);\n    };\n    Line.prototype.setNearPoint = function (nearX, nearY) {\n        this.nearX = nearX;\n        this.nearY = nearY;\n        this.deltaX = this.farX - this.nearX;\n        this.deltaY = this.farY - this.nearY;\n    };\n    Line.prototype.setFarPoint = function (farX, farY) {\n        this.farX = farX;\n        this.farY = farY;\n        this.deltaX = this.farX - this.nearX;\n        this.deltaY = this.farY - this.nearY;\n    };\n    Line.prototype.isBelow = function (x, y) {\n        return this.calculateRelativeSlope(x, y) > 0;\n    };\n    Line.prototype.isBelowOrCollinear = function (x, y) {\n        return this.calculateRelativeSlope(x, y) >= 0;\n    };\n    Line.prototype.isAbove = function (x, y) {\n        return this.calculateRelativeSlope(x, y) < 0;\n    };\n    Line.prototype.isAboveOrCollinear = function (x, y) {\n        return this.calculateRelativeSlope(x, y) <= 0;\n    };\n    Line.prototype.isCollinear = function (x, y) {\n        return this.calculateRelativeSlope(x, y) === 0;\n    };\n    Line.prototype.isLineCollinear = function (line) {\n        return this.isCollinear(line.nearX, line.nearY) && this.isCollinear(line.farX, line.farY);\n    };\n    Line.prototype.calculateRelativeSlope = function (x, y) {\n        return this.deltaY * (this.farX - x) - this.deltaX * (this.farY - y);\n    };\n    return Line;\n}());\nexports.Line = Line;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Point = (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Point;\n}());\nexports.Point = Point;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ViewBump = (function () {\n    function ViewBump(x, y, parent) {\n        this.x = x;\n        this.y = y;\n        this.parent = parent;\n    }\n    ViewBump.prototype.clone = function () {\n        return new ViewBump(this.x, this.y, this.parent ? this.parent.clone() : undefined);\n    };\n    return ViewBump;\n}());\nexports.ViewBump = ViewBump;\n","import { create, RandomSeed } from 'random-seed'\n\nexport interface Distribution {\n  sample(): number\n}\n\nexport class Uniform implements Distribution {\n  public readonly rng: RandomSeed\n\n  public constructor(seed: string) {\n    this.rng = create(seed)\n  }\n\n  public sample(): number {\n    return this.rng.random()\n  }\n}\n\nexport class Exponential implements Distribution {\n  public static fromSeed(seed: string, lambda: number = 1) {\n    return new Exponential(new Uniform(seed), lambda)\n  }\n\n  private scale: number\n\n  public constructor(public readonly distribution: Distribution, public readonly lambda: number = 1) {\n    this.scale = 1 - Math.exp(-this.lambda)\n  }\n\n  public sample(): number {\n    const u = this.distribution.sample()\n    return -Math.log(1 - this.scale * u) / this.lambda\n  }\n}\n","/*\n * random-seed\n * https://github.com/skratchdot/random-seed\n *\n * This code was originally written by Steve Gibson and can be found here:\n *\n * https://www.grc.com/otg/uheprng.htm\n *\n * It was slightly modified for use in node, to pass jshint, and a few additional\n * helper functions were added.\n *\n * Copyright (c) 2013 skratchdot\n * Dual Licensed under the MIT license and the original GRC copyright/license\n * included below.\n */\n/*\t============================================================================\n\t\t\t\t\t\t\t\t\tGibson Research Corporation\n\t\t\t\tUHEPRNG - Ultra High Entropy Pseudo-Random Number Generator\n\t============================================================================\n\tLICENSE AND COPYRIGHT:  THIS CODE IS HEREBY RELEASED INTO THE PUBLIC DOMAIN\n\tGibson Research Corporation releases and disclaims ALL RIGHTS AND TITLE IN\n\tTHIS CODE OR ANY DERIVATIVES. Anyone may be freely use it for any purpose.\n\t============================================================================\n\tThis is GRC's cryptographically strong PRNG (pseudo-random number generator)\n\tfor JavaScript. It is driven by 1536 bits of entropy, stored in an array of\n\t48, 32-bit JavaScript variables.  Since many applications of this generator,\n\tincluding ours with the \"Off The Grid\" Latin Square generator, may require\n\tthe deteriministic re-generation of a sequence of PRNs, this PRNG's initial\n\tentropic state can be read and written as a static whole, and incrementally\n\tevolved by pouring new source entropy into the generator's internal state.\n\t----------------------------------------------------------------------------\n\tENDLESS THANKS are due Johannes Baagoe for his careful development of highly\n\trobust JavaScript implementations of JS PRNGs.  This work was based upon his\n\tJavaScript \"Alea\" PRNG which is based upon the extremely robust Multiply-\n\tWith-Carry (MWC) PRNG invented by George Marsaglia. MWC Algorithm References:\n\thttp://www.GRC.com/otg/Marsaglia_PRNGs.pdf\n\thttp://www.GRC.com/otg/Marsaglia_MWC_Generators.pdf\n\t----------------------------------------------------------------------------\n\tThe quality of this algorithm's pseudo-random numbers have been verified by\n\tmultiple independent researchers. It handily passes the fermilab.ch tests as\n\twell as the \"diehard\" and \"dieharder\" test suites.  For individuals wishing\n\tto further verify the quality of this algorithm's pseudo-random numbers, a\n\t256-megabyte file of this algorithm's output may be downloaded from GRC.com,\n\tand a Microsoft Windows scripting host (WSH) version of this algorithm may be\n\tdownloaded and run from the Windows command prompt to generate unique files\n\tof any size:\n\tThe Fermilab \"ENT\" tests: http://fourmilab.ch/random/\n\tThe 256-megabyte sample PRN file at GRC: https://www.GRC.com/otg/uheprng.bin\n\tThe Windows scripting host version: https://www.GRC.com/otg/wsh-uheprng.js\n\t----------------------------------------------------------------------------\n\tQualifying MWC multipliers are: 187884, 686118, 898134, 1104375, 1250205,\n\t1460910 and 1768863. (We use the largest one that's < 2^21)\n\t============================================================================ */\n'use strict';\nvar stringify = require('json-stringify-safe');\n\n/*\t============================================================================\nThis is based upon Johannes Baagoe's carefully designed and efficient hash\nfunction for use with JavaScript.  It has a proven \"avalanche\" effect such\nthat every bit of the input affects every bit of the output 50% of the time,\nwhich is good.\tSee: http://baagoe.com/en/RandomMusings/hash/avalanche.xhtml\n============================================================================\n*/\nvar Mash = function () {\n\tvar n = 0xefc8249d;\n\tvar mash = function (data) {\n\t\tif (data) {\n\t\t\tdata = data.toString();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tn += data.charCodeAt(i);\n\t\t\t\tvar h = 0.02519603282416938 * n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\th *= n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\tn += h * 0x100000000; // 2^32\n\t\t\t}\n\t\t\treturn (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n\t\t} else {\n\t\t\tn = 0xefc8249d;\n\t\t}\n\t};\n\treturn mash;\n};\n\nvar uheprng = function (seed) {\n\treturn (function () {\n\t\tvar o = 48; // set the 'order' number of ENTROPY-holding 32-bit values\n\t\tvar c = 1; // init the 'carry' used by the multiply-with-carry (MWC) algorithm\n\t\tvar p = o; // init the 'phase' (max-1) of the intermediate variable pointer\n\t\tvar s = new Array(o); // declare our intermediate variables array\n\t\tvar i; // general purpose local\n\t\tvar j; // general purpose local\n\t\tvar k = 0; // general purpose local\n\n\t\t// when our \"uheprng\" is initially invoked our PRNG state is initialized from the\n\t\t// browser's own local PRNG. This is okay since although its generator might not\n\t\t// be wonderful, it's useful for establishing large startup entropy for our usage.\n\t\tvar mash = new Mash(); // get a pointer to our high-performance \"Mash\" hash\n\n\t\t// fill the array with initial mash hash values\n\t\tfor (i = 0; i < o; i++) {\n\t\t\ts[i] = mash(Math.random());\n\t\t}\n\n\t\t// this PRIVATE (internal access only) function is the heart of the multiply-with-carry\n\t\t// (MWC) PRNG algorithm. When called it returns a pseudo-random number in the form of a\n\t\t// 32-bit JavaScript fraction (0.0 to <1.0) it is a PRIVATE function used by the default\n\t\t// [0-1] return function, and by the random 'string(n)' function which returns 'n'\n\t\t// characters from 33 to 126.\n\t\tvar rawprng = function () {\n\t\t\tif (++p >= o) {\n\t\t\t\tp = 0;\n\t\t\t}\n\t\t\tvar t = 1768863 * s[p] + c * 2.3283064365386963e-10; // 2^-32\n\t\t\treturn s[p] = t - (c = t | 0);\n\t\t};\n\n\t\t// this EXPORTED function is the default function returned by this library.\n\t\t// The values returned are integers in the range from 0 to range-1. We first\n\t\t// obtain two 32-bit fractions (from rawprng) to synthesize a single high\n\t\t// resolution 53-bit prng (0 to <1), then we multiply this by the caller's\n\t\t// \"range\" param and take the \"floor\" to return a equally probable integer.\n\t\tvar random = function (range) {\n\t\t\treturn Math.floor(range * (rawprng() + (rawprng() * 0x200000 | 0) * 1.1102230246251565e-16)); // 2^-53\n\t\t};\n\n\t\t// this EXPORTED function 'string(n)' returns a pseudo-random string of\n\t\t// 'n' printable characters ranging from chr(33) to chr(126) inclusive.\n\t\trandom.string = function (count) {\n\t\t\tvar i;\n\t\t\tvar s = '';\n\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\ts += String.fromCharCode(33 + random(94));\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\n\t\t// this PRIVATE \"hash\" function is used to evolve the generator's internal\n\t\t// entropy state. It is also called by the EXPORTED addEntropy() function\n\t\t// which is used to pour entropy into the PRNG.\n\t\tvar hash = function () {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\tfor (i = 0; i < args.length; i++) {\n\t\t\t\tfor (j = 0; j < o; j++) {\n\t\t\t\t\ts[j] -= mash(args[i]);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED \"clean string\" function removes leading and trailing spaces and non-printing\n\t\t// control characters, including any embedded carriage-return (CR) and line-feed (LF) characters,\n\t\t// from any string it is handed. this is also used by the 'hashstring' function (below) to help\n\t\t// users always obtain the same EFFECTIVE uheprng seeding key.\n\t\trandom.cleanString = function (inStr) {\n\t\t\tinStr = inStr.replace(/(^\\s*)|(\\s*$)/gi, ''); // remove any/all leading spaces\n\t\t\tinStr = inStr.replace(/[\\x00-\\x1F]/gi, ''); // remove any/all control characters\n\t\t\tinStr = inStr.replace(/\\n /, '\\n'); // remove any/all trailing spaces\n\t\t\treturn inStr; // return the cleaned up result\n\t\t};\n\n\t\t// this EXPORTED \"hash string\" function hashes the provided character string after first removing\n\t\t// any leading or trailing spaces and ignoring any embedded carriage returns (CR) or Line Feeds (LF)\n\t\trandom.hashString = function (inStr) {\n\t\t\tinStr = random.cleanString(inStr);\n\t\t\tmash(inStr); // use the string to evolve the 'mash' state\n\t\t\tfor (i = 0; i < inStr.length; i++) { // scan through the characters in our string\n\t\t\t\tk = inStr.charCodeAt(i); // get the character code at the location\n\t\t\t\tfor (j = 0; j < o; j++) { //\t\"mash\" it into the UHEPRNG state\n\t\t\t\t\ts[j] -= mash(k);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED function allows you to seed the random generator.\n\t\trandom.seed = function (seed) {\n\t\t\tif (typeof seed === 'undefined' || seed === null) {\n\t\t\t\tseed = Math.random();\n\t\t\t}\n\t\t\tif (typeof seed !== 'string') {\n\t\t\t\tseed = stringify(seed, function (key, value) {\n\t\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\t\treturn (value).toString();\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t}\n\t\t\trandom.initState();\n\t\t\trandom.hashString(seed);\n\t\t};\n\n\t\t// this handy exported function is used to add entropy to our uheprng at any time\n\t\trandom.addEntropy = function ( /* accept zero or more arguments */ ) {\n\t\t\tvar args = [];\n\t\t\tfor (i = 0; i < arguments.length; i++) {\n\t\t\t\targs.push(arguments[i]);\n\t\t\t}\n\t\t\thash((k++) + (new Date().getTime()) + args.join('') + Math.random());\n\t\t};\n\n\t\t// if we want to provide a deterministic startup context for our PRNG,\n\t\t// but without directly setting the internal state variables, this allows\n\t\t// us to initialize the mash hash and PRNG's internal state before providing\n\t\t// some hashing input\n\t\trandom.initState = function () {\n\t\t\tmash(); // pass a null arg to force mash hash to init\n\t\t\tfor (i = 0; i < o; i++) {\n\t\t\t\ts[i] = mash(' '); // fill the array with initial mash hash values\n\t\t\t}\n\t\t\tc = 1; // init our multiply-with-carry carry\n\t\t\tp = o; // init our phase\n\t\t};\n\n\t\t// we use this (optional) exported function to signal the JavaScript interpreter\n\t\t// that we're finished using the \"Mash\" hash function so that it can free up the\n\t\t// local \"instance variables\" is will have been maintaining.  It's not strictly\n\t\t// necessary, of course, but it's good JavaScript citizenship.\n\t\trandom.done = function () {\n\t\t\tmash = null;\n\t\t};\n\n\t\t// if we called \"uheprng\" with a seed value, then execute random.seed() before returning\n\t\tif (typeof seed !== 'undefined') {\n\t\t\trandom.seed(seed);\n\t\t}\n\n\t\t// Returns a random integer between 0 (inclusive) and range (exclusive)\n\t\trandom.range = function (range) {\n\t\t\treturn random(range);\n\t\t};\n\n\t\t// Returns a random float between 0 (inclusive) and 1 (exclusive)\n\t\trandom.random = function () {\n\t\t\treturn random(Number.MAX_VALUE - 1) / Number.MAX_VALUE;\n\t\t};\n\n\t\t// Returns a random float between min (inclusive) and max (exclusive)\n\t\trandom.floatBetween = function (min, max) {\n\t\t\treturn random.random() * (max - min) + min;\n\t\t};\n\n\t\t// Returns a random integer between min (inclusive) and max (inclusive)\n\t\trandom.intBetween = function (min, max) {\n\t\t\treturn Math.floor(random.random() * (max - min + 1)) + min;\n\t\t};\n\n\t\t// when our main outer \"uheprng\" function is called, after setting up our\n\t\t// initial variables and entropic state, we return an \"instance pointer\"\n\t\t// to the internal anonymous function which can then be used to access\n\t\t// the uheprng's various exported functions.  As with the \".done\" function\n\t\t// above, we should set the returned value to 'null' once we're finished\n\t\t// using any of these functions.\n\t\treturn random;\n\t}());\n};\n\n// Modification for use in node:\nuheprng.create = function (seed) {\n\treturn new uheprng(seed);\n};\nmodule.exports = uheprng;\n","exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n","import { Storage } from './storage'\nimport { System } from './system'\nimport { Resource } from './resource'\nimport { Entity, EntityModifier } from './entity'\n\nexport class World<C, S, R> {\n  public readonly components: Map<C, Storage<object>> = new Map()\n  public readonly resources: Map<R, Resource<C, S, R>> = new Map()\n  public readonly systems: Map<S, System<C, S, R>> = new Map()\n  public readonly emptySystems: Set<S> = new Set()\n  public readonly activeSystems: Set<S> = new Set()\n\n  private openEntities: Set<Entity> = new Set()\n  private lastEntity: Entity = -1\n\n  public get entityCount(): number {\n    return this.lastEntity + 1 - this.openEntities.size\n  }\n\n  public registerComponentStorage<T extends object>(component: C, storage: Storage<T>): void {\n    this.components.set(component, storage)\n  }\n\n  public getStorage<T extends object>(component: C): Storage<T> {\n    return this.components.get(component)! as Storage<T>\n  }\n\n  public getResource<T extends Resource<C, S, R>>(resource: R): T {\n    return this.resources.get(resource)! as T\n  }\n\n  public getComponent<T extends object>(entity: Entity, component: C): T | undefined {\n    const storage = this.getStorage<T>(component)\n    if (storage !== undefined) {\n      return storage.get(entity)\n    }\n    return undefined\n  }\n\n  public hasEntity(entity: Entity): boolean {\n    return entity <= this.lastEntity && !this.openEntities.has(entity)\n  }\n\n  public hasComponent(entity: Entity, component: C): boolean {\n    const storage = this.getStorage(component)\n    if (storage !== undefined) {\n      return storage.has(entity)\n    }\n    return false\n  }\n\n  public createEntity(): EntityModifier<C, S, R> {\n    let entity\n    if (this.openEntities.size > 0) {\n      entity = this.openEntities.values().next().value\n      this.openEntities.delete(entity)\n    } else {\n      entity = ++this.lastEntity\n    }\n    return new EntityModifier(this, entity)\n  }\n\n  public editEntity(entity: Entity): EntityModifier<C, S, R> {\n    return new EntityModifier(this, entity)\n  }\n\n  public deleteEntity(entity: Entity): void {\n    this.editEntity(entity).delete()\n    this.openEntities.add(entity)\n  }\n\n  public registerSystem(name: S, system: System<C, S, R>): void {\n    this.systems.set(name, system)\n  }\n\n  public enableSystem(name: S): void {\n    this.activeSystems.add(name)\n  }\n\n  public disableSystem(name: S): void {\n    this.activeSystems.delete(name)\n  }\n\n  public activeSystemsList(): S[] {\n    const l: S[] = []\n    this.activeSystems.forEach(s => l.push(s))\n    return l\n  }\n\n  public registerResource(resource: Resource<C, S, R>): void {\n    this.resources.set(resource.kind, resource)\n  }\n\n  public updateResources(): void {\n    for (const resource of this.resources) {\n      resource[1].update(this)\n    }\n  }\n\n  public updateSystems(): void {\n    this.emptySystems.clear()\n    for (const name of this.activeSystems) {\n      const system = this.systems.get(name)!\n      const firstStorage = this.getStorage(system.components[0])\n      let calls = 0\n      firstStorage.foreach((entity: Entity) => {\n        let callSystem = true\n        for (let i = 1; i < system.components.length; i++) {\n          if (!this.hasComponent(entity, system.components[i])) {\n            callSystem = false\n            break\n          }\n        }\n        if (callSystem) {\n          system.update(this, entity)\n          calls++\n        }\n      })\n      if (calls === 0) {\n        this.emptySystems.add(name)\n      }\n    }\n  }\n}\n","import { World } from './world'\n\nexport type Entity = number\n\nexport class EntityModifier<C, S, R> {\n  public constructor(private readonly world: World<C, S, R>, public readonly entity: Entity) {}\n\n  public withComponent<T extends object>(name: C, component: T): EntityModifier<C, S, R> {\n    this.world.getStorage(name).insert(this.entity, component)\n    return this\n  }\n\n  public removeComponent(name: C): EntityModifier<C, S, R> {\n    this.world.getStorage(name).remove(this.entity)\n    return this\n  }\n\n  public delete(): void {\n    this.world.components.forEach(s => s.remove(this.entity))\n  }\n}\n","import { Display } from 'rot-js'\n\nimport { gray } from './palettes'\nimport { Position } from './position'\nimport { Color } from './color'\n\nimport { Viewport, ViewportResource } from '../resources/viewport'\nimport { TlbWorld } from '../tlb'\nimport { getFeature, Feature } from '../components/feature'\nimport { PositionComponent } from '../components/position'\nimport { Entity } from '../ecs/entity'\nimport { WorldMapResource } from '../resources/world-map'\nimport { OverlayComponent } from '../components/overlay'\nimport { UI, UIResource } from '../resources/ui'\nimport { Vector } from '../spatial'\n\nexport interface Renderer {\n  render(world: TlbWorld): void\n\n  boundaries: Vector\n\n  clear(): void\n  eventToPosition(e: UIEvent): Position | undefined\n\n  character(character: string, position: Position, fg: Color, bg?: Color): void\n  text(text: string, position: Position, fg: Color, bg?: Color): void\n  flowText(text: string, position: Position, width: number, fg: Color, bg?: Color): number\n}\n\nexport class RotRenderer implements Renderer {\n  public constructor(public readonly display: Display) {}\n\n  public get boundaries(): Vector {\n    return new Vector([this.display.getOptions().width, this.display.getOptions().height])\n  }\n\n  public static createAndMount(\n    root: HTMLElement,\n    displayOptions = {\n      width: 60,\n      height: 45,\n      forceSquareRatio: true,\n      fontSize: 20,\n      fontFamily: 'Monaco, monospace',\n      bg: gray[4].toRgb(),\n    }\n  ): RotRenderer {\n    const display = new Display(displayOptions)\n\n    root.appendChild(display.getContainer() as Node)\n    return new RotRenderer(display)\n  }\n\n  public clear(): void {\n    this.display.clear()\n  }\n\n  public render(world: TlbWorld): void {\n    this.clear()\n    const viewport: Viewport = world.getResource<ViewportResource>('viewport')\n\n    viewport.collectRenderables(world).forEach(({ entity, centered }) => {\n      if (entity !== undefined) {\n        this.renderEntity(world, viewport, entity, centered)\n      }\n    })\n    const ui: UI = world.getResource<UIResource>('ui')\n    ui.render(this)\n    world.components.get('overlay')!.clear()\n  }\n\n  public renderEntity(world: TlbWorld, viewport: Viewport, entity: Entity, centered: boolean): void {\n    const feature = getFeature(world, entity)\n    const position = world.getComponent<PositionComponent>(entity, 'position')\n    if (feature && position) {\n      this.renderFeature(world, viewport, entity, centered, feature, position)\n    }\n  }\n\n  public renderFeature(\n    world: TlbWorld,\n    viewport: Viewport,\n    entity: Entity,\n    centered: boolean,\n    feature: Feature,\n    position: PositionComponent\n  ): void {\n    const level = world.getResource<WorldMapResource>('map').levels[position.level]\n    const p = position.position\n    if (level.isDiscovered(p)) {\n      const color = level.isVisible(p) ? feature.diffuse : this.computeColor(viewport.ambientColor, feature.diffuse)\n      const overlay = world.getComponent<OverlayComponent>(entity, 'overlay') || { background: undefined }\n      const displayPosition = viewport.toDisplay(p, centered)\n      this.character(feature.character, displayPosition, color, overlay.background)\n    }\n  }\n\n  public computeColor(ambientLight: Color, diffuse: Color): Color {\n    return diffuse.multiply(ambientLight)\n  }\n\n  public eventToPosition(e: TouchEvent | MouseEvent): Position | undefined {\n    const p = this.display.eventToPosition(e) as [number, number]\n    if (typeof p === 'object') {\n      return { x: p[0], y: p[1] }\n    }\n    return undefined\n  }\n\n  public character(character: string, position: Position, fg: Color, bg?: Color): void {\n    const fgRgb = fg.toRgb()\n    const bgRgb = bg ? bg.toRgb() : undefined\n    this.display.draw(position.x, position.y, character[0], fgRgb, bgRgb || null)\n  }\n\n  public text(text: string, position: Position, fg: Color, bg?: Color): void {\n    const fgRgb = fg.toRgb()\n    const bgRgb = bg ? bg.toRgb() : undefined\n    for (let idx = 0; idx < text.length; idx++) {\n      this.display.draw(position.x + idx, position.y, text[idx], fgRgb, bgRgb || null)\n    }\n  }\n\n  public flowText(text: string, position: Position, width: number, fg: Color, bg?: Color): number {\n    const fgTag = `%c{${fg.toRgb()}}`\n    const bgTag = bg ? `%b{${bg.toRgb()}}` : ''\n    return this.display.drawText(position.x, position.y, `${fgTag}${bgTag}${text}`, width)\n  }\n}\n"],"sourceRoot":""}